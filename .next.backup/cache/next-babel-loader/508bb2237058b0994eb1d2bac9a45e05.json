{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _jsxFileName = \"/Users/shannoncode/repo/Emblem.Currentwork/emblem-vault-site/context.tsx\",\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$(),\n    _s6 = $RefreshSig$(),\n    _s7 = $RefreshSig$(),\n    _s8 = $RefreshSig$(),\n    _s9 = $RefreshSig$(),\n    _s10 = $RefreshSig$(),\n    _s11 = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { createContext, useContext, useState, useEffect, useMemo, useCallback } from 'react';\nimport { Token } from '@uniswap/sdk';\nimport { DEFAULT_APPROVE_MAX, DEFAULT_DEADLINE, DEFAULT_SLIPPAGE } from './constants';\nvar LocalStorageKeys;\n\n(function (LocalStorageKeys) {\n  LocalStorageKeys[\"Version\"] = \"version\";\n  LocalStorageKeys[\"ApproveMax\"] = \"approveMax\";\n  LocalStorageKeys[\"Deadline\"] = \"deadline\";\n  LocalStorageKeys[\"Slippage\"] = \"slippage\";\n  LocalStorageKeys[\"Transactions\"] = \"transactions\";\n  LocalStorageKeys[\"Tokens\"] = \"tokens\";\n})(LocalStorageKeys || (LocalStorageKeys = {}));\n\nvar NO_VERSION = -1;\nvar CURRENT_VERSION = 0;\n\nfunction useLocalStorage(key, defaultValue) {\n  _s();\n\n  var overrideLookup = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  var _ref = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {\n    serialize: function serialize(toSerialize) {\n      return toSerialize;\n    },\n    deserialize: function deserialize(toDeserialize) {\n      return toDeserialize;\n    }\n  },\n      serialize = _ref.serialize,\n      deserialize = _ref.deserialize;\n\n  var _useState = useState(function () {\n    if (overrideLookup) {\n      return defaultValue;\n    } else {\n      try {\n        var _deserialize;\n\n        var item = window.localStorage.getItem(key);\n        return item === null ? defaultValue : (_deserialize = deserialize(JSON.parse(item))) !== null && _deserialize !== void 0 ? _deserialize : defaultValue;\n      } catch (_unused) {\n        return defaultValue;\n      }\n    }\n  }),\n      value = _useState[0],\n      setValue = _useState[1];\n\n  useEffect(function () {\n    try {\n      window.localStorage.setItem(key, JSON.stringify(serialize(value)));\n    } catch (_unused2) {}\n  }, [key, serialize, value]);\n  return [value, setValue];\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n_s(useLocalStorage, \"ALvBNcNX202D21y1E6RWvXm2NtU=\");\n\nfunction serializeTokens(tokens) {\n  return tokens.map(function (token) {\n    return {\n      chainId: token.chainId,\n      address: token.address,\n      decimals: token.decimals,\n      symbol: token.symbol,\n      name: token.name\n    };\n  });\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction deserializeTokens(serializedTokens) {\n  return serializedTokens.map(function (serializedToken) {\n    return new Token(serializedToken.chainId, serializedToken.address, serializedToken.decimals, serializedToken.symbol, serializedToken.name);\n  });\n}\n\nvar HypertextContext = createContext([{}, {}]); // eslint-disable-line @typescript-eslint/no-explicit-any\n// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\n\nfunction useHypertextContext() {\n  _s2();\n\n  return useContext(HypertextContext);\n}\n\n_s2(useHypertextContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport default function Provider(_ref2) {\n  _s3();\n\n  var children = _ref2.children;\n\n  // global state\n  var _useState2 = useState(),\n      firstToken = _useState2[0],\n      setFirstToken = _useState2[1];\n\n  var _useState3 = useState(),\n      secondToken = _useState3[0],\n      setSecondToken = _useState3[1];\n\n  var _useState4 = useState(false),\n      showUSD = _useState4[0],\n      setShowUSD = _useState4[1]; // versioning\n\n\n  var _useLocalStorage = useLocalStorage(LocalStorageKeys.Version, NO_VERSION),\n      _useLocalStorage2 = _slicedToArray(_useLocalStorage, 2),\n      version = _useLocalStorage2[0],\n      setVersion = _useLocalStorage2[1]; // after it's been used to sychronously + selectively override localstorage keys, bump the version as soon as we can\n\n\n  useEffect(function () {\n    setVersion(CURRENT_VERSION);\n  }, [setVersion]); // global localstorage state\n\n  var _useLocalStorage3 = useLocalStorage(LocalStorageKeys.ApproveMax, DEFAULT_APPROVE_MAX),\n      _useLocalStorage4 = _slicedToArray(_useLocalStorage3, 2),\n      approveMax = _useLocalStorage4[0],\n      setApproveMax = _useLocalStorage4[1];\n\n  var _useLocalStorage5 = useLocalStorage(LocalStorageKeys.Deadline, DEFAULT_DEADLINE),\n      _useLocalStorage6 = _slicedToArray(_useLocalStorage5, 2),\n      deadline = _useLocalStorage6[0],\n      setDeadline = _useLocalStorage6[1];\n\n  var _useLocalStorage7 = useLocalStorage(LocalStorageKeys.Slippage, DEFAULT_SLIPPAGE),\n      _useLocalStorage8 = _slicedToArray(_useLocalStorage7, 2),\n      slippage = _useLocalStorage8[0],\n      setSlippage = _useLocalStorage8[1];\n\n  var _useLocalStorage9 = useLocalStorage(LocalStorageKeys.Transactions, [], version < 0 ? true : false // pre-version0 localstorage transactions didn't include chainId and must be overriden\n  ),\n      _useLocalStorage10 = _slicedToArray(_useLocalStorage9, 2),\n      transactions = _useLocalStorage10[0],\n      setTransactions = _useLocalStorage10[1];\n\n  var _useLocalStorage11 = useLocalStorage(LocalStorageKeys.Tokens, [], false, {\n    serialize: serializeTokens,\n    deserialize: deserializeTokens\n  }),\n      _useLocalStorage12 = _slicedToArray(_useLocalStorage11, 2),\n      tokens = _useLocalStorage12[0],\n      setTokens = _useLocalStorage12[1];\n\n  return __jsx(HypertextContext.Provider, {\n    value: useMemo(function () {\n      return [{\n        firstToken: firstToken,\n        secondToken: secondToken,\n        showUSD: showUSD,\n        approveMax: approveMax,\n        deadline: deadline,\n        slippage: slippage,\n        transactions: transactions,\n        tokens: tokens\n      }, {\n        setFirstToken: setFirstToken,\n        setSecondToken: setSecondToken,\n        setShowUSD: setShowUSD,\n        setApproveMax: setApproveMax,\n        setDeadline: setDeadline,\n        setSlippage: setSlippage,\n        setTransactions: setTransactions,\n        setTokens: setTokens\n      }];\n    }, [firstToken, secondToken, showUSD, approveMax, deadline, slippage, transactions, tokens, setFirstToken, setSecondToken, setShowUSD, setApproveMax, setDeadline, setSlippage, setTransactions, setTokens]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 5\n    }\n  }, children);\n}\n\n_s3(Provider, \"H2xK3PlR3rfxML7u1SuDKKLY7N8=\", false, function () {\n  return [useLocalStorage, useLocalStorage, useLocalStorage, useLocalStorage, useLocalStorage, useLocalStorage];\n});\n\n_c = Provider;\nexport function useFirstToken() {\n  _s4();\n\n  var _useHypertextContext = useHypertextContext(),\n      _useHypertextContext2 = _slicedToArray(_useHypertextContext, 2),\n      firstToken = _useHypertextContext2[0].firstToken,\n      setFirstToken = _useHypertextContext2[1].setFirstToken;\n\n  return [firstToken, setFirstToken];\n}\n\n_s4(useFirstToken, \"0hdKAfuR5ULu2nZ9y3bWf331yLo=\", false, function () {\n  return [useHypertextContext];\n});\n\nexport function useSecondToken() {\n  _s5();\n\n  var _useHypertextContext3 = useHypertextContext(),\n      _useHypertextContext4 = _slicedToArray(_useHypertextContext3, 2),\n      secondToken = _useHypertextContext4[0].secondToken,\n      setSecondToken = _useHypertextContext4[1].setSecondToken;\n\n  return [secondToken, setSecondToken];\n}\n\n_s5(useSecondToken, \"d4UP/1irNqZe2hOfnyBy3G/c1sw=\", false, function () {\n  return [useHypertextContext];\n});\n\nexport function useShowUSD() {\n  _s6();\n\n  var _useHypertextContext5 = useHypertextContext(),\n      _useHypertextContext6 = _slicedToArray(_useHypertextContext5, 2),\n      showUSD = _useHypertextContext6[0].showUSD,\n      setShowUSD = _useHypertextContext6[1].setShowUSD;\n\n  return [showUSD, setShowUSD];\n}\n\n_s6(useShowUSD, \"vVM9efNCBvBfnYC/nRLM/d+hi4U=\", false, function () {\n  return [useHypertextContext];\n});\n\nexport function useApproveMax() {\n  _s7();\n\n  var _useHypertextContext7 = useHypertextContext(),\n      _useHypertextContext8 = _slicedToArray(_useHypertextContext7, 2),\n      approveMax = _useHypertextContext8[0].approveMax,\n      setApproveMax = _useHypertextContext8[1].setApproveMax;\n\n  var toggleApproveMax = useCallback(function () {\n    setApproveMax(!approveMax);\n  }, [approveMax, setApproveMax]);\n  return [approveMax, toggleApproveMax];\n}\n\n_s7(useApproveMax, \"5jC7uDOA8WdEJh/+DTYD8Wchry4=\", false, function () {\n  return [useHypertextContext];\n});\n\nexport function useDeadline() {\n  _s8();\n\n  var _useHypertextContext9 = useHypertextContext(),\n      _useHypertextContext10 = _slicedToArray(_useHypertextContext9, 2),\n      deadline = _useHypertextContext10[0].deadline,\n      setDeadline = _useHypertextContext10[1].setDeadline;\n\n  return [deadline, setDeadline];\n}\n\n_s8(useDeadline, \"Sp2alP9ZrVL3XqV66cx9QJjvzPM=\", false, function () {\n  return [useHypertextContext];\n});\n\nexport function useSlippage() {\n  _s9();\n\n  var _useHypertextContext11 = useHypertextContext(),\n      _useHypertextContext12 = _slicedToArray(_useHypertextContext11, 2),\n      slippage = _useHypertextContext12[0].slippage,\n      setSlippage = _useHypertextContext12[1].setSlippage;\n\n  return [slippage, setSlippage];\n}\n\n_s9(useSlippage, \"KvF+LXshxwINN0zxpZjB4D3cANk=\", false, function () {\n  return [useHypertextContext];\n});\n\nexport function useTransactions() {\n  _s10();\n\n  var _useHypertextContext13 = useHypertextContext(),\n      _useHypertextContext14 = _slicedToArray(_useHypertextContext13, 2),\n      transactions = _useHypertextContext14[0].transactions,\n      setTransactions = _useHypertextContext14[1].setTransactions;\n\n  var addTransaction = useCallback(function (chainId, hash) {\n    setTransactions(function (transactions) {\n      return transactions.filter(function (transaction) {\n        return !(transaction.chainId === chainId && transaction.hash === hash);\n      }).concat([{\n        chainId: chainId,\n        hash: hash\n      }]);\n    });\n  }, [setTransactions]);\n  var removeTransaction = useCallback(function (chainId, hash) {\n    setTransactions(function (transactions) {\n      return transactions.filter(function (transaction) {\n        return !(transaction.chainId === chainId && transaction.hash === hash);\n      });\n    });\n  }, [setTransactions]);\n  return [transactions, {\n    addTransaction: addTransaction,\n    removeTransaction: removeTransaction\n  }];\n}\n\n_s10(useTransactions, \"fCmhOIX2JyV1tjvIk/QsmJDVELc=\", false, function () {\n  return [useHypertextContext];\n});\n\nexport function useLocalStorageTokens() {\n  _s11();\n\n  var _useHypertextContext15 = useHypertextContext(),\n      _useHypertextContext16 = _slicedToArray(_useHypertextContext15, 2),\n      tokens = _useHypertextContext16[0].tokens,\n      setTokens = _useHypertextContext16[1].setTokens;\n\n  var addToken = useCallback( /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(token) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setTokens(function (tokens) {\n                return tokens.filter(function (currentToken) {\n                  return !currentToken.equals(token);\n                }).concat([token]);\n              });\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }(), [setTokens]);\n  var removeToken = useCallback(function (token) {\n    setTokens(function (tokens) {\n      return tokens.filter(function (currentToken) {\n        return !currentToken.equals(token);\n      });\n    });\n  }, [setTokens]);\n  return [tokens, {\n    addToken: addToken,\n    removeToken: removeToken\n  }];\n}\n\n_s11(useLocalStorageTokens, \"VqRWre/P9/NxIyGlKAfnjJJ+87U=\", false, function () {\n  return [useHypertextContext];\n});\n\nvar _c;\n\n$RefreshReg$(_c, \"Provider\");","map":{"version":3,"sources":["/Users/shannoncode/repo/Emblem.Currentwork/emblem-vault-site/context.tsx"],"names":["createContext","useContext","useState","useEffect","useMemo","useCallback","Token","DEFAULT_APPROVE_MAX","DEFAULT_DEADLINE","DEFAULT_SLIPPAGE","LocalStorageKeys","NO_VERSION","CURRENT_VERSION","useLocalStorage","key","defaultValue","overrideLookup","serialize","toSerialize","deserialize","toDeserialize","item","window","localStorage","getItem","JSON","parse","value","setValue","setItem","stringify","serializeTokens","tokens","map","token","chainId","address","decimals","symbol","name","deserializeTokens","serializedTokens","serializedToken","HypertextContext","useHypertextContext","Provider","children","firstToken","setFirstToken","secondToken","setSecondToken","showUSD","setShowUSD","Version","version","setVersion","ApproveMax","approveMax","setApproveMax","Deadline","deadline","setDeadline","Slippage","slippage","setSlippage","Transactions","transactions","setTransactions","Tokens","setTokens","useFirstToken","useSecondToken","useShowUSD","useApproveMax","toggleApproveMax","useDeadline","useSlippage","useTransactions","addTransaction","hash","filter","transaction","concat","removeTransaction","useLocalStorageTokens","addToken","currentToken","equals","removeToken"],"mappings":"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","sourcesContent":["import {\n  createContext,\n  useContext,\n  useState,\n  useEffect,\n  useMemo,\n  useCallback,\n  ReactNode,\n  Dispatch,\n  SetStateAction,\n} from 'react'\nimport { Token } from '@uniswap/sdk'\n\nimport { DEFAULT_APPROVE_MAX, DEFAULT_DEADLINE, DEFAULT_SLIPPAGE } from './constants'\n\nenum LocalStorageKeys {\n  Version = 'version',\n  ApproveMax = 'approveMax',\n  Deadline = 'deadline',\n  Slippage = 'slippage',\n  Transactions = 'transactions',\n  Tokens = 'tokens',\n}\n\nconst NO_VERSION = -1\nconst CURRENT_VERSION = 0\n\nfunction useLocalStorage<T, S = T>(\n  key: LocalStorageKeys,\n  defaultValue: T,\n  overrideLookup = false,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  { serialize, deserialize }: { serialize: (toSerialize: T) => S; deserialize: (toDeserialize: S) => T } = {\n    serialize: (toSerialize): S => (toSerialize as unknown) as S,\n    deserialize: (toDeserialize): T => (toDeserialize as unknown) as T,\n  }\n): [T, Dispatch<SetStateAction<T>>] {\n  const [value, setValue] = useState<T>(() => {\n    if (overrideLookup) {\n      return defaultValue\n    } else {\n      try {\n        const item = window.localStorage.getItem(key)\n        return item === null ? defaultValue : deserialize(JSON.parse(item)) ?? defaultValue\n      } catch {\n        return defaultValue\n      }\n    }\n  })\n\n  useEffect(() => {\n    try {\n      window.localStorage.setItem(key, JSON.stringify(serialize(value)))\n    } catch {}\n  }, [key, serialize, value])\n\n  return [value, setValue]\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction serializeTokens(\n  tokens: Token[]\n): { chainId: number; address: string; decimals: number; symbol?: string; name?: string }[] {\n  return tokens.map((token) => ({\n    chainId: token.chainId,\n    address: token.address,\n    decimals: token.decimals,\n    symbol: token.symbol,\n    name: token.name,\n  }))\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction deserializeTokens(serializedTokens: ReturnType<typeof serializeTokens>): Token[] {\n  return serializedTokens.map(\n    (serializedToken) =>\n      new Token(\n        serializedToken.chainId,\n        serializedToken.address,\n        serializedToken.decimals,\n        serializedToken.symbol,\n        serializedToken.name\n      )\n  )\n}\n\ninterface Transaction {\n  chainId: number\n  hash: string\n}\n\nconst HypertextContext = createContext<\n  [\n    {\n      firstToken: Token | undefined\n      secondToken: Token | undefined\n      showUSD: boolean\n      approveMax: boolean\n      deadline: number\n      slippage: number\n      transactions: Transaction[]\n      tokens: Token[]\n    },\n    {\n      setFirstToken: Dispatch<SetStateAction<Token | undefined>>\n      setSecondToken: Dispatch<SetStateAction<Token | undefined>>\n      setShowUSD: Dispatch<SetStateAction<boolean>>\n      setApproveMax: Dispatch<SetStateAction<boolean>>\n      setDeadline: Dispatch<SetStateAction<number>>\n      setSlippage: Dispatch<SetStateAction<number>>\n      setTransactions: Dispatch<SetStateAction<Transaction[]>>\n      setTokens: Dispatch<SetStateAction<Token[]>>\n    }\n  ]\n>([{}, {}] as any) // eslint-disable-line @typescript-eslint/no-explicit-any\n\n// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\nfunction useHypertextContext() {\n  return useContext(HypertextContext)\n}\n\nexport default function Provider({ children }: { children: ReactNode }): JSX.Element {\n  // global state\n  const [firstToken, setFirstToken] = useState<Token | undefined>()\n  const [secondToken, setSecondToken] = useState<Token | undefined>()\n  const [showUSD, setShowUSD] = useState<boolean>(false)\n\n  // versioning\n  const [version, setVersion] = useLocalStorage<number>(LocalStorageKeys.Version, NO_VERSION)\n  // after it's been used to sychronously + selectively override localstorage keys, bump the version as soon as we can\n  useEffect(() => {\n    setVersion(CURRENT_VERSION)\n  }, [setVersion])\n\n  // global localstorage state\n  const [approveMax, setApproveMax] = useLocalStorage<boolean>(LocalStorageKeys.ApproveMax, DEFAULT_APPROVE_MAX)\n  const [deadline, setDeadline] = useLocalStorage<number>(LocalStorageKeys.Deadline, DEFAULT_DEADLINE)\n  const [slippage, setSlippage] = useLocalStorage<number>(LocalStorageKeys.Slippage, DEFAULT_SLIPPAGE)\n  const [transactions, setTransactions] = useLocalStorage<Transaction[]>(\n    LocalStorageKeys.Transactions,\n    [],\n    version < 0 ? true : false // pre-version0 localstorage transactions didn't include chainId and must be overriden\n  )\n  const [tokens, setTokens] = useLocalStorage<Token[], ReturnType<typeof serializeTokens>>(\n    LocalStorageKeys.Tokens,\n    [],\n    false,\n    {\n      serialize: serializeTokens,\n      deserialize: deserializeTokens,\n    }\n  )\n\n  return (\n    <HypertextContext.Provider\n      value={useMemo(\n        () => [\n          { firstToken, secondToken, showUSD, approveMax, deadline, slippage, transactions, tokens },\n          {\n            setFirstToken,\n            setSecondToken,\n            setShowUSD,\n            setApproveMax,\n            setDeadline,\n            setSlippage,\n            setTransactions,\n            setTokens,\n          },\n        ],\n        [\n          firstToken,\n          secondToken,\n          showUSD,\n          approveMax,\n          deadline,\n          slippage,\n          transactions,\n          tokens,\n          setFirstToken,\n          setSecondToken,\n          setShowUSD,\n          setApproveMax,\n          setDeadline,\n          setSlippage,\n          setTransactions,\n          setTokens,\n        ]\n      )}\n    >\n      {children}\n    </HypertextContext.Provider>\n  )\n}\n\nexport function useFirstToken(): [Token | undefined, ReturnType<typeof useHypertextContext>[1]['setFirstToken']] {\n  const [{ firstToken }, { setFirstToken }] = useHypertextContext()\n  return [firstToken, setFirstToken]\n}\n\nexport function useSecondToken(): [Token | undefined, ReturnType<typeof useHypertextContext>[1]['setSecondToken']] {\n  const [{ secondToken }, { setSecondToken }] = useHypertextContext()\n  return [secondToken, setSecondToken]\n}\n\nexport function useShowUSD(): [boolean, ReturnType<typeof useHypertextContext>[1]['setShowUSD']] {\n  const [{ showUSD }, { setShowUSD }] = useHypertextContext()\n  return [showUSD, setShowUSD]\n}\n\nexport function useApproveMax(): [boolean, () => void] {\n  const [{ approveMax }, { setApproveMax }] = useHypertextContext()\n  const toggleApproveMax = useCallback(() => {\n    setApproveMax(!approveMax)\n  }, [approveMax, setApproveMax])\n  return [approveMax, toggleApproveMax]\n}\n\nexport function useDeadline(): [number, ReturnType<typeof useHypertextContext>[1]['setDeadline']] {\n  const [{ deadline }, { setDeadline }] = useHypertextContext()\n  return [deadline, setDeadline]\n}\n\nexport function useSlippage(): [number, ReturnType<typeof useHypertextContext>[1]['setSlippage']] {\n  const [{ slippage }, { setSlippage }] = useHypertextContext()\n  return [slippage, setSlippage]\n}\n\nexport function useTransactions(): [\n  Transaction[],\n  {\n    addTransaction: (chainId: number, hash: string) => void\n    removeTransaction: (chainId: number, hash: string) => void\n  }\n] {\n  const [{ transactions }, { setTransactions }] = useHypertextContext()\n\n  const addTransaction = useCallback(\n    (chainId: number, hash: string) => {\n      setTransactions((transactions) =>\n        transactions\n          .filter((transaction) => !(transaction.chainId === chainId && transaction.hash === hash))\n          .concat([{ chainId, hash }])\n      )\n    },\n    [setTransactions]\n  )\n  const removeTransaction = useCallback(\n    (chainId: number, hash: string) => {\n      setTransactions((transactions) =>\n        transactions.filter((transaction) => !(transaction.chainId === chainId && transaction.hash === hash))\n      )\n    },\n    [setTransactions]\n  )\n\n  return [transactions, { addTransaction, removeTransaction }]\n}\n\nexport function useLocalStorageTokens(): [\n  Token[],\n  {\n    addToken: (token: Token) => void\n    removeToken: (token: Token) => void\n  }\n] {\n  const [{ tokens }, { setTokens }] = useHypertextContext()\n\n  const addToken = useCallback(\n    async (token: Token) => {\n      setTokens((tokens) => tokens.filter((currentToken) => !currentToken.equals(token)).concat([token]))\n    },\n    [setTokens]\n  )\n\n  const removeToken = useCallback(\n    (token: Token) => {\n      setTokens((tokens) => tokens.filter((currentToken) => !currentToken.equals(token)))\n    },\n    [setTokens]\n  )\n\n  return [tokens, { addToken, removeToken }]\n}\n"]},"metadata":{},"sourceType":"module"}