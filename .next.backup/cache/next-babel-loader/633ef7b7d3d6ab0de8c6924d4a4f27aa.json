{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$(),\n    _s6 = $RefreshSig$(),\n    _s7 = $RefreshSig$(),\n    _s8 = $RefreshSig$(),\n    _s9 = $RefreshSig$(),\n    _s10 = $RefreshSig$(),\n    _s11 = $RefreshSig$();\n\nimport { useCallback, useEffect, useState, useMemo, useRef } from 'react';\nimport { useWeb3React } from '@web3-react/core';\nimport { Route, WETH, ChainId, TradeType, Trade, Fraction, JSBI } from '@uniswap/sdk';\nimport { injected } from './connectors';\nimport { useReserves, useBlockNumber } from './data';\nimport { Contract } from '@ethersproject/contracts';\nimport { useRouter } from 'next/router';\nimport { QueryParameters } from './constants';\nimport { getAddress } from '@ethersproject/address';\nimport { DAI, USDC } from './tokens';\nexport function useWindowSize() {\n  _s();\n\n  function getSize() {\n    var isClient = true;\n    return {\n      width: isClient ? window.innerWidth : undefined,\n      height: isClient ? window.innerHeight : undefined\n    };\n  }\n\n  var _useState = useState(getSize()),\n      windowSize = _useState[0],\n      setWindowSize = _useState[1];\n\n  useEffect(function () {\n    var handleResize = function handleResize() {\n      setWindowSize(getSize());\n    };\n\n    window.addEventListener('resize', handleResize);\n    return function () {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n  return windowSize;\n} // https://usehooks.com/useDebounce/\n\n_s(useWindowSize, \"JmRyg+bmwbxAYYXtlZAUI9zEgY0=\");\n\nexport function useDefaultedDebounce(value, initialValue, delay) {\n  _s2();\n\n  var _useState2 = useState(initialValue),\n      defaultedDebounce = _useState2[0],\n      setDefaultedDebounce = _useState2[1];\n\n  useEffect(function () {\n    var handler = setTimeout(function () {\n      setDefaultedDebounce(value);\n    }, delay);\n    return function () {\n      clearTimeout(handler);\n      setDefaultedDebounce(initialValue);\n    };\n  }, [value, initialValue, delay]);\n  return defaultedDebounce;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n_s2(useDefaultedDebounce, \"o2rBNV04X8xUbuSk/ZWEoydkyDc=\");\n\nexport function useBodyKeyDown(targetKey, onKeyDown) {\n  _s3();\n\n  var suppress = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var downHandler = useCallback(function (event) {\n    if (!suppress && event.key === targetKey && event.target.tagName === 'BODY' && !event.altKey && !event.ctrlKey && !event.metaKey && !event.shiftKey) {\n      onKeyDown(event);\n    }\n  }, [suppress, targetKey, onKeyDown]);\n  useEffect(function () {\n    window.addEventListener('keydown', downHandler);\n    return function () {\n      window.removeEventListener('keydown', downHandler);\n    };\n  }, [suppress, targetKey, downHandler]);\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n_s3(useBodyKeyDown, \"TihfJbASlZlfySMmSPmCoACe2Cc=\");\n\nexport function useKeepSWRDataLiveAsBlocksArrive(mutate) {\n  _s4();\n\n  // because we don't care about the referential identity of mutate, just bind it to a ref\n  var mutateRef = useRef(mutate);\n  useEffect(function () {\n    mutateRef.current = mutate;\n  }); // then, whenever a new block arrives, trigger a mutation\n\n  var _useBlockNumber = useBlockNumber(),\n      data = _useBlockNumber.data;\n\n  useEffect(function () {\n    mutateRef.current();\n  }, [data]);\n}\n\n_s4(useKeepSWRDataLiveAsBlocksArrive, \"UbtgBV7WvKGJN6I4Nl8qRaQgEKo=\", false, function () {\n  return [useBlockNumber];\n});\n\nexport function useEagerConnect() {\n  _s5();\n\n  var _useWeb3React = useWeb3React(),\n      activate = _useWeb3React.activate,\n      active = _useWeb3React.active;\n\n  var _useState3 = useState(false),\n      tried = _useState3[0],\n      setTried = _useState3[1];\n\n  useEffect(function () {\n    injected.isAuthorized().then(function (isAuthorized) {\n      if (isAuthorized) {\n        activate(injected, undefined, true)[\"catch\"](function () {\n          setTried(true);\n        });\n      } else {\n        setTried(true);\n      }\n    });\n  }, [activate]); // if the connection worked, wait until we get confirmation of that to flip the flag\n\n  useEffect(function () {\n    if (!tried && active) {\n      setTried(true);\n    }\n  }, [tried, active]);\n  return tried;\n}\n\n_s5(useEagerConnect, \"GLh+9ege4oFDiozdAF2n3i5tC+o=\", false, function () {\n  return [useWeb3React];\n});\n\nvar chainMappings = {\n  '1': 1,\n  mainnet: 1,\n  '3': 3,\n  ropsten: 3,\n  '4': 4,\n  rinkeby: 4,\n  '5': 5,\n  görli: 5,\n  goerli: 5,\n  '42': 42,\n  kovan: 42,\n  '80001': 80001,\n  mumbai: 80001,\n  matic: 137,\n  '137': 137,\n  '97': 97,\n  bnbsc: 97,\n  xdai: 100,\n  '100': 100,\n  bsc: 56,\n  '56': 56,\n  fantom: 250,\n  '250': 250,\n  aurora: 1313161554,\n  '1313161554': 1313161554\n};\nexport function useQueryParameters() {\n  _s6();\n\n  var _useRouter = useRouter(),\n      query = _useRouter.query;\n\n  var candidateChainId;\n\n  try {\n    candidateChainId = chainMappings[query[QueryParameters.CHAIN]];\n  } catch (_unused) {}\n\n  var chainId = !!injected.supportedChainIds && typeof candidateChainId === 'number' && injected.supportedChainIds.includes(candidateChainId) ? candidateChainId : undefined;\n  var input;\n\n  try {\n    if (typeof query[QueryParameters.INPUT] === 'string') input = getAddress(query[QueryParameters.INPUT]);\n  } catch (_unused2) {}\n\n  var output;\n\n  try {\n    if (typeof query[QueryParameters.OUTPUT] === 'string') output = getAddress(query[QueryParameters.OUTPUT]);\n  } catch (_unused3) {}\n\n  return useMemo(function () {\n    var _ref;\n\n    return _ref = {}, _defineProperty(_ref, QueryParameters.CHAIN, chainId), _defineProperty(_ref, QueryParameters.INPUT, input), _defineProperty(_ref, QueryParameters.OUTPUT, output), _ref;\n  }, [chainId, input, output]);\n}\n\n_s6(useQueryParameters, \"7wAlXYo2xJH8LCbMRV3K+JkfB1k=\", false, function () {\n  return [useRouter];\n});\n\nfunction useDirectPair(inputToken, outputToken) {\n  _s7();\n\n  var _useReserves = useReserves(inputToken, outputToken),\n      pair = _useReserves.data;\n\n  if (!!inputToken && !!outputToken && inputToken.equals(outputToken)) {\n    return null;\n  }\n\n  return pair;\n}\n\n_s7(useDirectPair, \"V7o9YM+/o0XdYNvKLniMogTcH5A=\", false, function () {\n  return [useReserves];\n});\n\nexport function useRoute(inputToken, outputToken) {\n  _s8();\n\n  // direct pair\n  var directPair = useDirectPair(inputToken, outputToken); // WETH pairs\n\n  var WETHInputPair = useDirectPair(inputToken ? WETH[inputToken.chainId] : undefined, inputToken);\n  var WETHOutputPair = useDirectPair(outputToken ? WETH[outputToken.chainId] : undefined, outputToken); // DAI pairs\n\n  var DAIInputPair = useDirectPair((inputToken === null || inputToken === void 0 ? void 0 : inputToken.chainId) === ChainId.MAINNET ? DAI : undefined, inputToken);\n  var DAIOutputPair = useDirectPair((outputToken === null || outputToken === void 0 ? void 0 : outputToken.chainId) === ChainId.MAINNET ? DAI : undefined, outputToken); // USDC pairs\n\n  var USDCInputPair = useDirectPair((inputToken === null || inputToken === void 0 ? void 0 : inputToken.chainId) === ChainId.MAINNET ? USDC : undefined, inputToken);\n  var USDCOutputPair = useDirectPair((outputToken === null || outputToken === void 0 ? void 0 : outputToken.chainId) === ChainId.MAINNET ? USDC : undefined, outputToken); // connecting pairs\n\n  var DAIWETH = useDirectPair((inputToken === null || inputToken === void 0 ? void 0 : inputToken.chainId) === ChainId.MAINNET ? DAI : undefined, WETH[DAI.chainId]);\n  var USDCWETH = useDirectPair((inputToken === null || inputToken === void 0 ? void 0 : inputToken.chainId) === ChainId.MAINNET ? USDC : undefined, WETH[USDC.chainId]);\n  var DAIUSDC = useDirectPair((inputToken === null || inputToken === void 0 ? void 0 : inputToken.chainId) === ChainId.MAINNET ? DAI : undefined, (inputToken === null || inputToken === void 0 ? void 0 : inputToken.chainId) === ChainId.MAINNET ? USDC : undefined);\n  var pairs = [directPair, WETHInputPair, WETHOutputPair, DAIInputPair, DAIOutputPair, USDCInputPair, USDCOutputPair, DAIWETH, USDCWETH, DAIUSDC].filter(function (p, i, pairs) {\n    // filter out invalid pairs or pairs whose data hasn't been fetched yet\n    if (!!!p) {\n      return false;\n    } else {\n      return i === pairs.findIndex(function (pair) {\n        var _pair$liquidityToken;\n\n        return (pair === null || pair === void 0 ? void 0 : (_pair$liquidityToken = pair.liquidityToken) === null || _pair$liquidityToken === void 0 ? void 0 : _pair$liquidityToken.address) === p.liquidityToken.address;\n      });\n    }\n  });\n  var directRoute = useMemo(function () {\n    return directPair && inputToken ? new Route([directPair], inputToken) : directPair === null ? null : undefined;\n  }, [directPair, inputToken]);\n  var WETHRoute = useMemo(function () {\n    return WETHInputPair && WETHOutputPair && inputToken ? new Route([WETHInputPair, WETHOutputPair], inputToken) : WETHInputPair === null || WETHOutputPair === null ? null : undefined;\n  }, [WETHInputPair, WETHOutputPair, inputToken]);\n  var DAIRoute = useMemo(function () {\n    return DAIInputPair && DAIOutputPair && inputToken ? new Route([DAIInputPair, DAIOutputPair], inputToken) : DAIInputPair === null || DAIOutputPair === null ? null : undefined;\n  }, [DAIInputPair, DAIOutputPair, inputToken]);\n  var USDCRoute = useMemo(function () {\n    return USDCInputPair && USDCOutputPair && inputToken ? new Route([USDCInputPair, USDCOutputPair], inputToken) : USDCInputPair === null || USDCOutputPair === null ? null : undefined;\n  }, [USDCInputPair, USDCOutputPair, inputToken]);\n  var routes = [directRoute, WETHRoute, DAIRoute, USDCRoute];\n  return [routes.filter(function (route) {\n    return !!route;\n  }).length > 0 ? routes.filter(function (route) {\n    return !!route;\n  })[0] : routes.some(function (route) {\n    return route === undefined;\n  }) ? undefined : null, pairs];\n}\n\n_s8(useRoute, \"OrPhCpirU/1VSIvPkSl6TWUNJRA=\", false, function () {\n  return [useDirectPair, useDirectPair, useDirectPair, useDirectPair, useDirectPair, useDirectPair, useDirectPair, useDirectPair, useDirectPair, useDirectPair];\n});\n\nexport function useTrade(inputToken, outputToken, pairs, independentAmount, tradeType) {\n  var canCompute = !!inputToken && !!outputToken && pairs.length > 0 && !!independentAmount;\n  var trade;\n\n  if (canCompute) {\n    if (tradeType === TradeType.EXACT_INPUT) {\n      trade = Trade.bestTradeExactIn(pairs, independentAmount, outputToken, {\n        maxNumResults: 1\n      })[0];\n    } else {\n      trade = Trade.bestTradeExactOut(pairs, inputToken, independentAmount, {\n        maxNumResults: 1\n      })[0];\n    }\n  }\n\n  return trade;\n}\nexport function useContract(address, ABI) {\n  _s9();\n\n  var withSigner = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  var _useWeb3React2 = useWeb3React(),\n      library = _useWeb3React2.library,\n      account = _useWeb3React2.account;\n\n  return useMemo(function () {\n    return !!address && !!ABI && !!library ? new Contract(address, ABI, withSigner ? library.getSigner(account).connectUnchecked() : library) : undefined;\n  }, [address, ABI, withSigner, library, account]);\n}\n\n_s9(useContract, \"+2EejSmz94t94KoFBCRQ+PUTs3M=\", false, function () {\n  return [useWeb3React];\n});\n\nexport function useUSDETHPrice() {\n  _s10();\n\n  var _useWeb3React3 = useWeb3React(),\n      chainId = _useWeb3React3.chainId;\n\n  var DAIWETH = useDirectPair(chainId === ChainId.MAINNET ? DAI : undefined, WETH[ChainId.MAINNET]);\n  var USDCWETH = useDirectPair(chainId === ChainId.MAINNET ? USDC : undefined, WETH[ChainId.MAINNET]);\n  var price = useMemo(function () {\n    var _Route, _Route$midPrice, _Route2, _Route2$midPrice;\n\n    var priceFractions = [DAIWETH && ((_Route = new Route([DAIWETH], WETH[ChainId.MAINNET])) === null || _Route === void 0 ? void 0 : (_Route$midPrice = _Route.midPrice) === null || _Route$midPrice === void 0 ? void 0 : _Route$midPrice.adjusted), USDCWETH && ((_Route2 = new Route([USDCWETH], WETH[ChainId.MAINNET])) === null || _Route2 === void 0 ? void 0 : (_Route2$midPrice = _Route2.midPrice) === null || _Route2$midPrice === void 0 ? void 0 : _Route2$midPrice.adjusted)].filter(function (price) {\n      return !!price;\n    });\n    return priceFractions.reduce(function (accumulator, priceFraction) {\n      return accumulator.add(priceFraction);\n    }, new Fraction('0')).divide(priceFractions.length.toString());\n  }, [DAIWETH, USDCWETH]);\n  return price.equalTo('0') ? undefined : price;\n}\n\n_s10(useUSDETHPrice, \"udaJNPsk/LdvRfZJMZlI9lq77KQ=\", false, function () {\n  return [useWeb3React, useDirectPair, useDirectPair];\n});\n\nexport function useUSDTokenPrice(token) {\n  _s11();\n\n  var USDETHPrice = useUSDETHPrice();\n  var DAIWETH = useDirectPair(USDETHPrice ? DAI : undefined, WETH[ChainId.MAINNET]);\n  var USDCWETH = useDirectPair(USDETHPrice ? USDC : undefined, WETH[ChainId.MAINNET]);\n  var tokenWETH = useDirectPair((token === null || token === void 0 ? void 0 : token.chainId) === ChainId.MAINNET ? token : undefined, WETH[ChainId.MAINNET]);\n  var tokenDAI = useDirectPair((token === null || token === void 0 ? void 0 : token.chainId) === ChainId.MAINNET ? token : undefined, DAI);\n  var tokenUSDC = useDirectPair((token === null || token === void 0 ? void 0 : token.chainId) === ChainId.MAINNET ? token : undefined, USDC);\n  var price = useMemo(function () {\n    // early return if the token is WETH\n    if (token && token.equals(WETH[ChainId.MAINNET])) {\n      return USDETHPrice || new Fraction('0');\n    }\n\n    var priceFractions = []; // if the token has a WETH pair with at least 5 ETH\n\n    if (token && USDETHPrice && tokenWETH && tokenWETH.reserveOf(WETH[ChainId.MAINNET]).greaterThan(JSBI.BigInt(5))) {\n      var ETHTokenPrice = new Route([tokenWETH], token).midPrice.adjusted;\n      priceFractions.push(USDETHPrice.multiply(ETHTokenPrice));\n    } // if DAIWETH pair exists and the token has a DAI pair with at least 1000 DAI\n\n\n    if (token && USDETHPrice && DAIWETH && tokenDAI && tokenDAI.reserveOf(DAI).greaterThan(JSBI.BigInt(1000))) {\n      var WETHDAIPrice = new Route([DAIWETH], DAI).midPrice.adjusted;\n      var DAITokenPrice = new Route([tokenDAI], token).midPrice.adjusted;\n      priceFractions.push(USDETHPrice.multiply(WETHDAIPrice).multiply(DAITokenPrice));\n    } // if USDCWETH pair exists and the token has a USDC pair with at least 1000 USDC\n\n\n    if (token && USDETHPrice && USDCWETH && tokenUSDC && tokenUSDC.reserveOf(USDC).greaterThan(JSBI.BigInt(1000))) {\n      var WETHUSDCPrice = new Route([USDCWETH], USDC).midPrice.adjusted;\n      var USDCTokenPrice = new Route([tokenUSDC], token).midPrice.adjusted;\n      priceFractions.push(USDETHPrice.multiply(WETHUSDCPrice).multiply(USDCTokenPrice));\n    }\n\n    priceFractions = priceFractions.filter(function (price) {\n      return !!price;\n    });\n    return priceFractions.reduce(function (accumulator, priceFraction) {\n      return accumulator.add(priceFraction);\n    }, new Fraction('0')).divide(priceFractions.length.toString());\n  }, [tokenWETH, token, USDETHPrice, DAIWETH, tokenDAI, USDCWETH, tokenUSDC]);\n  return price.equalTo('0') ? undefined : price;\n}\n\n_s11(useUSDTokenPrice, \"F9FXETvGYh1vT3ePyhNYTBGxtOs=\", false, function () {\n  return [useUSDETHPrice, useDirectPair, useDirectPair, useDirectPair, useDirectPair, useDirectPair];\n});","map":{"version":3,"sources":["/Users/shannoncode/repo/Emblem.Currentwork/emblem-vault-site/hooks.ts"],"names":["useCallback","useEffect","useState","useMemo","useRef","useWeb3React","Route","WETH","ChainId","TradeType","Trade","Fraction","JSBI","injected","useReserves","useBlockNumber","Contract","useRouter","QueryParameters","getAddress","DAI","USDC","useWindowSize","getSize","isClient","width","window","innerWidth","undefined","height","innerHeight","windowSize","setWindowSize","handleResize","addEventListener","removeEventListener","useDefaultedDebounce","value","initialValue","delay","defaultedDebounce","setDefaultedDebounce","handler","setTimeout","clearTimeout","useBodyKeyDown","targetKey","onKeyDown","suppress","downHandler","event","key","target","tagName","altKey","ctrlKey","metaKey","shiftKey","useKeepSWRDataLiveAsBlocksArrive","mutate","mutateRef","current","data","useEagerConnect","activate","active","tried","setTried","isAuthorized","then","chainMappings","mainnet","ropsten","rinkeby","görli","goerli","kovan","mumbai","matic","bnbsc","xdai","bsc","fantom","aurora","useQueryParameters","query","candidateChainId","CHAIN","chainId","supportedChainIds","includes","input","INPUT","output","OUTPUT","useDirectPair","inputToken","outputToken","pair","equals","useRoute","directPair","WETHInputPair","WETHOutputPair","DAIInputPair","MAINNET","DAIOutputPair","USDCInputPair","USDCOutputPair","DAIWETH","USDCWETH","DAIUSDC","pairs","filter","p","i","findIndex","liquidityToken","address","directRoute","WETHRoute","DAIRoute","USDCRoute","routes","route","length","some","useTrade","independentAmount","tradeType","canCompute","trade","EXACT_INPUT","bestTradeExactIn","maxNumResults","bestTradeExactOut","useContract","ABI","withSigner","library","account","getSigner","connectUnchecked","useUSDETHPrice","price","priceFractions","midPrice","adjusted","reduce","accumulator","priceFraction","add","divide","toString","equalTo","useUSDTokenPrice","token","USDETHPrice","tokenWETH","tokenDAI","tokenUSDC","reserveOf","greaterThan","BigInt","ETHTokenPrice","push","multiply","WETHDAIPrice","DAITokenPrice","WETHUSDCPrice","USDCTokenPrice"],"mappings":"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","sourcesContent":["import { useCallback, useEffect, useState, useMemo, useRef } from 'react'\nimport { useWeb3React } from '@web3-react/core'\nimport { Token, Route, WETH, Pair, ChainId, TokenAmount, TradeType, Trade, Fraction, JSBI } from '@uniswap/sdk'\n\nimport { injected } from './connectors'\nimport { useReserves, useBlockNumber } from './data'\nimport { Contract, ContractInterface } from '@ethersproject/contracts'\nimport { useRouter } from 'next/router'\nimport { QueryParameters } from './constants'\nimport { getAddress } from '@ethersproject/address'\nimport { responseInterface } from 'swr'\nimport { DAI, USDC } from './tokens'\n\nexport function useWindowSize(): { width: number | undefined; height: number | undefined } {\n  function getSize(): ReturnType<typeof useWindowSize> {\n    const isClient = typeof window === 'object'\n    return {\n      width: isClient ? window.innerWidth : undefined,\n      height: isClient ? window.innerHeight : undefined,\n    }\n  }\n\n  const [windowSize, setWindowSize] = useState(getSize())\n  useEffect(() => {\n    const handleResize = (): void => {\n      setWindowSize(getSize())\n    }\n    window.addEventListener('resize', handleResize)\n    return (): void => {\n      window.removeEventListener('resize', handleResize)\n    }\n  }, [])\n\n  return windowSize\n}\n\n// https://usehooks.com/useDebounce/\nexport function useDefaultedDebounce<T>(value: T, initialValue: T, delay: number): T {\n  const [defaultedDebounce, setDefaultedDebounce] = useState(initialValue)\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDefaultedDebounce(value)\n    }, delay)\n\n    return (): void => {\n      clearTimeout(handler)\n      setDefaultedDebounce(initialValue)\n    }\n  }, [value, initialValue, delay])\n\n  return defaultedDebounce\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function useBodyKeyDown(targetKey: string, onKeyDown: (event?: any) => void, suppress = false): void {\n  const downHandler = useCallback(\n    (event) => {\n      if (\n        !suppress &&\n        event.key === targetKey &&\n        event.target.tagName === 'BODY' &&\n        !event.altKey &&\n        !event.ctrlKey &&\n        !event.metaKey &&\n        !event.shiftKey\n      ) {\n        onKeyDown(event)\n      }\n    },\n    [suppress, targetKey, onKeyDown]\n  )\n  useEffect(() => {\n    window.addEventListener('keydown', downHandler)\n    return (): void => {\n      window.removeEventListener('keydown', downHandler)\n    }\n  }, [suppress, targetKey, downHandler])\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function useKeepSWRDataLiveAsBlocksArrive(mutate: responseInterface<any, any>['mutate']): void {\n  // because we don't care about the referential identity of mutate, just bind it to a ref\n  const mutateRef = useRef(mutate)\n  useEffect(() => {\n    mutateRef.current = mutate\n  })\n  // then, whenever a new block arrives, trigger a mutation\n  const { data } = useBlockNumber()\n  useEffect(() => {\n    mutateRef.current()\n  }, [data])\n}\n\nexport function useEagerConnect(): boolean {\n  const { activate, active } = useWeb3React()\n\n  const [tried, setTried] = useState(false)\n\n  useEffect(() => {\n    injected.isAuthorized().then((isAuthorized: boolean) => {\n      if (isAuthorized) {\n        activate(injected, undefined, true).catch(() => {\n          setTried(true)\n        })\n      } else {\n        setTried(true)\n      }\n    })\n  }, [activate])\n\n  // if the connection worked, wait until we get confirmation of that to flip the flag\n  useEffect(() => {\n    if (!tried && active) {\n      setTried(true)\n    }\n  }, [tried, active])\n\n  return tried\n}\n\nconst chainMappings: { [key: string]: number } = {\n  '1': 1,\n  mainnet: 1,\n  '3': 3,\n  ropsten: 3,\n  '4': 4,\n  rinkeby: 4,\n  '5': 5,\n  görli: 5,\n  goerli: 5,\n  '42': 42,\n  kovan: 42,\n  '80001': 80001,\n  mumbai: 80001,\n  matic: 137,\n  '137': 137,\n  '97': 97,\n  bnbsc: 97,\n  xdai: 100,\n  '100': 100,\n  bsc: 56,\n  '56': 56,\n  fantom: 250,\n  '250': 250,\n  aurora: 1313161554,\n  '1313161554': 1313161554\n}\n\nexport function useQueryParameters(): {\n  [QueryParameters.CHAIN]: number | undefined\n  [QueryParameters.INPUT]: string | undefined\n  [QueryParameters.OUTPUT]: string | undefined\n} {\n  const { query } = useRouter()\n\n  let candidateChainId: number | undefined\n  try {\n    candidateChainId = chainMappings[query[QueryParameters.CHAIN] as string]\n  } catch {}\n  const chainId =\n    !!injected.supportedChainIds &&\n    typeof candidateChainId === 'number' &&\n    injected.supportedChainIds.includes(candidateChainId)\n      ? candidateChainId\n      : undefined\n\n  let input: string | undefined\n  try {\n    if (typeof query[QueryParameters.INPUT] === 'string') input = getAddress(query[QueryParameters.INPUT] as string)\n  } catch {}\n\n  let output: string | undefined\n  try {\n    if (typeof query[QueryParameters.OUTPUT] === 'string') output = getAddress(query[QueryParameters.OUTPUT] as string)\n  } catch {}\n\n  return useMemo(\n    () => ({\n      [QueryParameters.CHAIN]: chainId,\n      [QueryParameters.INPUT]: input,\n      [QueryParameters.OUTPUT]: output,\n    }),\n    [chainId, input, output]\n  )\n}\n\nfunction useDirectPair(inputToken?: Token, outputToken?: Token): Pair | undefined | null {\n  const { data: pair } = useReserves(inputToken, outputToken)\n\n  if (!!inputToken && !!outputToken && inputToken.equals(outputToken)) {\n    return null\n  }\n\n  return pair\n}\n\nexport function useRoute(inputToken?: Token, outputToken?: Token): [undefined | Route | null, Pair[]] {\n  // direct pair\n  const directPair = useDirectPair(inputToken, outputToken)\n  // WETH pairs\n  const WETHInputPair = useDirectPair(inputToken ? WETH[inputToken.chainId] : undefined, inputToken)\n  const WETHOutputPair = useDirectPair(outputToken ? WETH[outputToken.chainId] : undefined, outputToken)\n  // DAI pairs\n  const DAIInputPair = useDirectPair(inputToken?.chainId === ChainId.MAINNET ? DAI : undefined, inputToken)\n  const DAIOutputPair = useDirectPair(outputToken?.chainId === ChainId.MAINNET ? DAI : undefined, outputToken)\n  // USDC pairs\n  const USDCInputPair = useDirectPair(inputToken?.chainId === ChainId.MAINNET ? USDC : undefined, inputToken)\n  const USDCOutputPair = useDirectPair(outputToken?.chainId === ChainId.MAINNET ? USDC : undefined, outputToken)\n  // connecting pairs\n  const DAIWETH = useDirectPair(inputToken?.chainId === ChainId.MAINNET ? DAI : undefined, WETH[DAI.chainId])\n  const USDCWETH = useDirectPair(inputToken?.chainId === ChainId.MAINNET ? USDC : undefined, WETH[USDC.chainId])\n  const DAIUSDC = useDirectPair(\n    inputToken?.chainId === ChainId.MAINNET ? DAI : undefined,\n    inputToken?.chainId === ChainId.MAINNET ? USDC : undefined\n  )\n\n  const pairs: Pair[] = [\n    directPair,\n    WETHInputPair,\n    WETHOutputPair,\n    DAIInputPair,\n    DAIOutputPair,\n    USDCInputPair,\n    USDCOutputPair,\n    DAIWETH,\n    USDCWETH,\n    DAIUSDC,\n  ].filter((p, i, pairs) => {\n    // filter out invalid pairs or pairs whose data hasn't been fetched yet\n    if (!!!p) {\n      return false\n    } else {\n      return i === pairs.findIndex((pair) => pair?.liquidityToken?.address === p.liquidityToken.address)\n    }\n  }) as Pair[]\n\n  const directRoute = useMemo(\n    () => (directPair && inputToken ? new Route([directPair], inputToken) : directPair === null ? null : undefined),\n    [directPair, inputToken]\n  )\n  const WETHRoute = useMemo(\n    () =>\n      WETHInputPair && WETHOutputPair && inputToken\n        ? new Route([WETHInputPair, WETHOutputPair], inputToken)\n        : WETHInputPair === null || WETHOutputPair === null\n        ? null\n        : undefined,\n    [WETHInputPair, WETHOutputPair, inputToken]\n  )\n  const DAIRoute = useMemo(\n    () =>\n      DAIInputPair && DAIOutputPair && inputToken\n        ? new Route([DAIInputPair, DAIOutputPair], inputToken)\n        : DAIInputPair === null || DAIOutputPair === null\n        ? null\n        : undefined,\n    [DAIInputPair, DAIOutputPair, inputToken]\n  )\n  const USDCRoute = useMemo(\n    () =>\n      USDCInputPair && USDCOutputPair && inputToken\n        ? new Route([USDCInputPair, USDCOutputPair], inputToken)\n        : USDCInputPair === null || USDCOutputPair === null\n        ? null\n        : undefined,\n    [USDCInputPair, USDCOutputPair, inputToken]\n  )\n  const routes = [directRoute, WETHRoute, DAIRoute, USDCRoute]\n\n  return [\n    routes.filter((route) => !!route).length > 0\n      ? routes.filter((route) => !!route)[0]\n      : routes.some((route) => route === undefined)\n      ? undefined\n      : null,\n    pairs,\n  ]\n}\n\nexport function useTrade(\n  inputToken: Token | undefined,\n  outputToken: Token | undefined,\n  pairs: Pair[],\n  independentAmount: TokenAmount,\n  tradeType: TradeType\n): undefined | Trade {\n  const canCompute = !!inputToken && !!outputToken && pairs.length > 0 && !!independentAmount\n\n  let trade: undefined | Trade\n  if (canCompute) {\n    if (tradeType === TradeType.EXACT_INPUT) {\n      trade = Trade.bestTradeExactIn(pairs, independentAmount, outputToken, { maxNumResults: 1 })[0]\n    } else {\n      trade = Trade.bestTradeExactOut(pairs, inputToken, independentAmount, { maxNumResults: 1 })[0]\n    }\n  }\n\n  return trade\n}\n\nexport function useContract(address?: string, ABI?: ContractInterface, withSigner = false): Contract | undefined {\n  const { library, account } = useWeb3React()\n  return useMemo(\n    () =>\n      !!address && !!ABI && !!library\n        ? new Contract(address, ABI, withSigner ? library.getSigner(account).connectUnchecked() : library)\n        : undefined,\n    [address, ABI, withSigner, library, account]\n  )\n}\n\nexport function useUSDETHPrice(): Fraction | undefined {\n  const { chainId } = useWeb3React()\n\n  const DAIWETH = useDirectPair(chainId === ChainId.MAINNET ? DAI : undefined, WETH[ChainId.MAINNET])\n  const USDCWETH = useDirectPair(chainId === ChainId.MAINNET ? USDC : undefined, WETH[ChainId.MAINNET])\n\n  const price = useMemo(() => {\n    const priceFractions = [\n      DAIWETH && new Route([DAIWETH], WETH[ChainId.MAINNET])?.midPrice?.adjusted,\n      USDCWETH && new Route([USDCWETH], WETH[ChainId.MAINNET])?.midPrice?.adjusted,\n    ].filter((price) => !!price)\n\n    return (priceFractions as Fraction[])\n      .reduce((accumulator, priceFraction) => accumulator.add(priceFraction), new Fraction('0'))\n      .divide(priceFractions.length.toString())\n  }, [DAIWETH, USDCWETH])\n\n  return price.equalTo('0') ? undefined : price\n}\n\nexport function useUSDTokenPrice(token?: Token): Fraction | undefined {\n  const USDETHPrice = useUSDETHPrice()\n\n  const DAIWETH = useDirectPair(USDETHPrice ? DAI : undefined, WETH[ChainId.MAINNET])\n  const USDCWETH = useDirectPair(USDETHPrice ? USDC : undefined, WETH[ChainId.MAINNET])\n\n  const tokenWETH = useDirectPair(token?.chainId === ChainId.MAINNET ? token : undefined, WETH[ChainId.MAINNET])\n  const tokenDAI = useDirectPair(token?.chainId === ChainId.MAINNET ? token : undefined, DAI)\n  const tokenUSDC = useDirectPair(token?.chainId === ChainId.MAINNET ? token : undefined, USDC)\n\n  const price = useMemo(() => {\n    // early return if the token is WETH\n    if (token && token.equals(WETH[ChainId.MAINNET])) {\n      return USDETHPrice || new Fraction('0')\n    }\n\n    let priceFractions = []\n\n    // if the token has a WETH pair with at least 5 ETH\n    if (token && USDETHPrice && tokenWETH && tokenWETH.reserveOf(WETH[ChainId.MAINNET]).greaterThan(JSBI.BigInt(5))) {\n      const ETHTokenPrice = new Route([tokenWETH], token).midPrice.adjusted\n      priceFractions.push(USDETHPrice.multiply(ETHTokenPrice))\n    }\n    // if DAIWETH pair exists and the token has a DAI pair with at least 1000 DAI\n    if (token && USDETHPrice && DAIWETH && tokenDAI && tokenDAI.reserveOf(DAI).greaterThan(JSBI.BigInt(1000))) {\n      const WETHDAIPrice = new Route([DAIWETH], DAI).midPrice.adjusted\n      const DAITokenPrice = new Route([tokenDAI], token).midPrice.adjusted\n      priceFractions.push(USDETHPrice.multiply(WETHDAIPrice).multiply(DAITokenPrice))\n    }\n    // if USDCWETH pair exists and the token has a USDC pair with at least 1000 USDC\n    if (token && USDETHPrice && USDCWETH && tokenUSDC && tokenUSDC.reserveOf(USDC).greaterThan(JSBI.BigInt(1000))) {\n      const WETHUSDCPrice = new Route([USDCWETH], USDC).midPrice.adjusted\n      const USDCTokenPrice = new Route([tokenUSDC], token).midPrice.adjusted\n      priceFractions.push(USDETHPrice.multiply(WETHUSDCPrice).multiply(USDCTokenPrice))\n    }\n\n    priceFractions = priceFractions.filter((price) => !!price)\n\n    return priceFractions\n      .reduce((accumulator, priceFraction) => accumulator.add(priceFraction), new Fraction('0'))\n      .divide(priceFractions.length.toString())\n  }, [tokenWETH, token, USDETHPrice, DAIWETH, tokenDAI, USDCWETH, tokenUSDC])\n\n  return price.equalTo('0') ? undefined : price\n}\n"]},"metadata":{},"sourceType":"module"}