{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/Users/shannoncode/repo/Emblem.Currentwork/emblem-vault-site/components/TokenLogo.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect } from 'react';\nimport { Image, Icon } from '@chakra-ui/core';\nimport { WETH } from '@uniswap/sdk';\nvar BROKEN = {};\nexport default function TokenLogo(_ref) {\n  _s();\n\n  var _BROKEN$token$chainId;\n\n  var token = _ref.token,\n      size = _ref.size;\n  var src;\n\n  if (token.equals(WETH[token.chainId])) {\n    src = 'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png';\n  } else {\n    src = \"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/\".concat(token.address, \"/logo.png\");\n  }\n\n  var _useState = useState(0),\n      setDummy = _useState[1];\n\n  if (!((_BROKEN$token$chainId = BROKEN[token.chainId]) === null || _BROKEN$token$chainId === void 0 ? void 0 : _BROKEN$token$chainId[token.address])) {\n    return __jsx(Image, {\n      src: src,\n      minHeight: size,\n      maxHeight: size,\n      maxWidth: size,\n      minWidth: size,\n      objectFit: \"contain\",\n      onError: function onError() {\n        var _BROKEN;\n\n        BROKEN = _objectSpread(_objectSpread({}, BROKEN), {}, _defineProperty({}, token.chainId, _objectSpread(_objectSpread({}, (_BROKEN = BROKEN) === null || _BROKEN === void 0 ? void 0 : _BROKEN[token.chainId]), {}, _defineProperty({}, token.address, true))));\n        setDummy(function (dummy) {\n          return dummy + 1;\n        });\n      },\n      ignoreFallback: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 7\n      }\n    });\n  } else {\n    return __jsx(Icon, {\n      width: size,\n      height: size,\n      name: \"question-outline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 12\n      }\n    });\n  }\n}\n\n_s(TokenLogo, \"4iYJjs8f3Z1GFNHUwFixogWPlTY=\");\n\n_c = TokenLogo;\nvar SWATCHES = {};\nexport function TokenLogoColor(_ref2) {\n  _s2();\n\n  var _BROKEN$token$chainId3, _SWATCHES$token$chain2;\n\n  var token = _ref2.token,\n      children = _ref2.children;\n\n  var _useState2 = useState(0),\n      setDummy = _useState2[1];\n\n  useEffect(function () {\n    var _BROKEN$token$chainId2, _SWATCHES$token$chain;\n\n    if (!!token && !token.equals(WETH[token.chainId]) && !((_BROKEN$token$chainId2 = BROKEN[token.chainId]) === null || _BROKEN$token$chainId2 === void 0 ? void 0 : _BROKEN$token$chainId2[token.address]) && !((_SWATCHES$token$chain = SWATCHES[token.chainId]) === null || _SWATCHES$token$chain === void 0 ? void 0 : _SWATCHES$token$chain[token.address])) {\n      var stale = false;\n      import('node-vibrant').then(function (_ref3) {\n        var Vibrant = _ref3[\"default\"];\n        return Vibrant.from(\"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/\".concat(token.address, \"/logo.png\")).getPalette().then(function (palette) {\n          var _SWATCHES;\n\n          SWATCHES = _objectSpread(_objectSpread({}, SWATCHES), {}, _defineProperty({}, token.chainId, _objectSpread(_objectSpread({}, (_SWATCHES = SWATCHES) === null || _SWATCHES === void 0 ? void 0 : _SWATCHES[token.chainId]), {}, _defineProperty({}, token.address, palette.Vibrant))));\n\n          if (!stale) {\n            setDummy(function (dummy) {\n              return dummy + 1;\n            });\n          }\n        })[\"catch\"](function () {\n          var _BROKEN2;\n\n          BROKEN = _objectSpread(_objectSpread({}, BROKEN), {}, _defineProperty({}, token.chainId, _objectSpread(_objectSpread({}, (_BROKEN2 = BROKEN) === null || _BROKEN2 === void 0 ? void 0 : _BROKEN2[token.chainId]), {}, _defineProperty({}, token.address, true))));\n\n          if (!stale) {\n            setDummy(function (dummy) {\n              return dummy + 1;\n            });\n          }\n        });\n      });\n      return function () {\n        stale = true;\n      };\n    }\n  }, [token]);\n  return children(!token ? undefined : !((_BROKEN$token$chainId3 = BROKEN[token.chainId]) === null || _BROKEN$token$chainId3 === void 0 ? void 0 : _BROKEN$token$chainId3[token.address]) ? (_SWATCHES$token$chain2 = SWATCHES[token.chainId]) === null || _SWATCHES$token$chain2 === void 0 ? void 0 : _SWATCHES$token$chain2[token.address] : undefined);\n}\n\n_s2(TokenLogoColor, \"+VjEXsok1KRWk/V1xWdUmhH2S18=\");\n\n_c2 = TokenLogoColor;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TokenLogo\");\n$RefreshReg$(_c2, \"TokenLogoColor\");","map":{"version":3,"sources":["/Users/shannoncode/repo/Emblem.Currentwork/emblem-vault-site/components/TokenLogo.tsx"],"names":["useState","useEffect","Image","Icon","WETH","BROKEN","TokenLogo","token","size","src","equals","chainId","address","setDummy","dummy","SWATCHES","TokenLogoColor","children","stale","then","Vibrant","from","getPalette","palette","undefined"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport { Image, Icon } from '@chakra-ui/core'\nimport { Token, WETH } from '@uniswap/sdk'\n\nlet BROKEN: { [chainId: number]: { [address: string]: boolean } } = {}\n\nexport default function TokenLogo({ token, size }: { token: Token; size: string }): JSX.Element {\n  let src: string\n  if (token.equals(WETH[token.chainId])) {\n    src =\n      'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png'\n  } else {\n    src = `https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/${token.address}/logo.png`\n  }\n\n  const [, setDummy] = useState(0)\n\n  if (!BROKEN[token.chainId]?.[token.address]) {\n    return (\n      <Image\n        src={src}\n        minHeight={size}\n        maxHeight={size}\n        maxWidth={size}\n        minWidth={size}\n        objectFit=\"contain\"\n        onError={(): void => {\n          BROKEN = {\n            ...BROKEN,\n            [token.chainId]: {\n              ...BROKEN?.[token.chainId],\n              [token.address]: true,\n            },\n          }\n          setDummy((dummy) => dummy + 1)\n        }}\n        ignoreFallback\n      />\n    )\n  } else {\n    return <Icon width={size} height={size} name=\"question-outline\" />\n  }\n}\n\ntype Swatch = { hex: string } | null\nlet SWATCHES: { [chainId: number]: { [address: string]: Swatch | undefined } } = {}\n\nexport function TokenLogoColor({\n  token,\n  children,\n}: {\n  token?: Token\n  children: (swatch: undefined | Swatch) => JSX.Element\n}): JSX.Element {\n  const [, setDummy] = useState(0)\n\n  useEffect(() => {\n    if (\n      !!token &&\n      !token.equals(WETH[token.chainId]) &&\n      !BROKEN[token.chainId]?.[token.address] &&\n      !SWATCHES[token.chainId]?.[token.address]\n    ) {\n      let stale = false\n\n      import('node-vibrant').then(({ default: Vibrant }) =>\n        Vibrant.from(\n          `https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/${token.address}/logo.png`\n        )\n          .getPalette()\n          .then((palette) => {\n            SWATCHES = {\n              ...SWATCHES,\n              [token.chainId]: {\n                ...SWATCHES?.[token.chainId],\n                [token.address]: palette.Vibrant,\n              },\n            }\n            if (!stale) {\n              setDummy((dummy) => dummy + 1)\n            }\n          })\n          .catch(() => {\n            BROKEN = {\n              ...BROKEN,\n              [token.chainId]: {\n                ...BROKEN?.[token.chainId],\n                [token.address]: true,\n              },\n            }\n            if (!stale) {\n              setDummy((dummy) => dummy + 1)\n            }\n          })\n      )\n\n      return () => {\n        stale = true\n      }\n    }\n  }, [token])\n\n  return children(\n    !token ? undefined : !BROKEN[token.chainId]?.[token.address] ? SWATCHES[token.chainId]?.[token.address] : undefined\n  )\n}\n"]},"metadata":{},"sourceType":"module"}