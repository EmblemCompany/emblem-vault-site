{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { FormControl, FormLabel, Stack, Tabs, TabList, TabPanels, Tab, TabPanel, Box, Flex, Button, ButtonGroup, Divider, Select, Image } from '@chakra-ui/core';\nimport { useRouter } from 'next/router';\nimport Loader from 'react-loader';\nimport { useWeb3React } from '@web3-react/core';\nimport { useEffect, useState } from 'react';\nimport { EMBLEM_API, curatedContracts, curatedAssets } from '../constants';\nlet tokenId = null;\nexport default function CreateCurated(props) {\n  const {\n    query\n  } = useRouter();\n  const {\n    0: tabIndex,\n    1: setTabIndex\n  } = useState(0);\n  const {\n    account,\n    chainId\n  } = useWeb3React();\n  const {\n    0: vaultAddress,\n    1: setVaultAddress\n  } = useState(account || '');\n  const {\n    0: state,\n    1: setState\n  } = useState({\n    loaded: true,\n    private: false\n  });\n  const {\n    0: targetAsset,\n    1: setTargetAsset\n  } = useState({\n    name: '',\n    image: ''\n  });\n  const {\n    0: targetContract,\n    1: setTargetContract\n  } = useState({\n    name: '',\n    chain: ''\n  });\n  const {\n    0: enableCurated,\n    1: setEnableCurated\n  } = useState(query.curated == 't');\n\n  const handleSubmit = evt => {\n    evt.preventDefault();\n    setState({\n      loaded: false,\n      private: state.private\n    });\n    let body = {\n      fromAddress: account,\n      toAddress: vaultAddress,\n      chainId: chainId,\n      experimental: true,\n      targetContract: targetContract,\n      targetAsset: targetAsset\n    };\n    let apiSuffix = '/v2/create-curated';\n    fetch(EMBLEM_API + apiSuffix, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        service: 'evmetadata'\n      },\n      body: JSON.stringify(body)\n    }).then(async function (response) {\n      setState({\n        loaded: true,\n        private: state.private\n      });\n      let body = await response.json();\n      tokenId = body.data.tokenId;\n      setTimeout(() => {\n        location.href = location.origin + '/nft2?id=' + tokenId;\n      }, 500);\n    });\n  };\n\n  const {\n    0: acct,\n    1: setAcct\n  } = useState('');\n  useEffect(() => {\n    if (account && acct != account) {\n      setAcct(account);\n      setVaultAddress(account);\n    }\n  }, [account, acct]);\n  return __jsx(Loader, {\n    loaded: state.loaded\n  }, __jsx(Flex, {\n    width: \"full\",\n    align: \"center\",\n    justifyContent: \"center\"\n  }, __jsx(Box, {\n    maxW: \"sm\",\n    borderWidth: \"1px\",\n    rounded: \"lg\",\n    overflow: \"hidden\"\n  }, __jsx(Tabs, {\n    defaultIndex: 0,\n    index: tabIndex,\n    onChange: index => setTabIndex(index)\n  }, __jsx(TabList, null, __jsx(Tab, null, \"Create Curated Vault\")), __jsx(TabPanels, null, __jsx(TabPanel, null, __jsx(Stack, {\n    direction: \"column\",\n    align: \"center\",\n    spacing: \"2rem\",\n    flexGrow: 1,\n    justifyContent: \"center\",\n    px: \"2rem\",\n    py: \"2rem\",\n    shouldWrapChildren: true\n  }, __jsx(Stack, {\n    direction: \"row\",\n    align: \"flex-start\",\n    spacing: \"0rem\",\n    flexWrap: \"wrap\",\n    shouldWrapChildren: true\n  }, __jsx(FormControl, null, __jsx(Box, {\n    p: 1,\n    rounded: \"lg\",\n    overflow: \"hidden\"\n  }, __jsx(Stack, {\n    align: \"center\",\n    p: 1\n  }, __jsx(Divider, null), __jsx(FormLabel, {\n    htmlFor: \"project-selector\"\n  }, \"Choose Curated Collection\"), __jsx(Select, {\n    id: \"project-selector\",\n    w: \"100%\",\n    value: targetContract.name,\n    onChange: e => {\n      let contractData = curatedContracts.filter(item => {\n        return item.name == e.target.value;\n      })[0];\n      setTargetContract(contractData);\n    }\n  }, __jsx(\"option\", {\n    value: \"\"\n  }, \"---Choose Project---\"), curatedContracts.map(project => {\n    return enableCurated || project.name == 'Emblem Test' ? __jsx(\"option\", {\n      value: project.name\n    }, project.name) : null;\n  })), targetContract.name ? __jsx(Select, {\n    id: \"asset-selector\",\n    w: \"100%\",\n    value: targetAsset.name,\n    onChange: e => {\n      setTargetAsset(curatedAssets[targetContract.chain][targetContract.name].filter(item => {\n        return item.name == e.target.value;\n      })[0]);\n    }\n  }, __jsx(\"option\", {\n    value: \"\"\n  }, \"---Choose One---\"), curatedAssets[targetContract.chain][targetContract.name] ? curatedAssets[targetContract.chain][targetContract.name].map(asset => {\n    return __jsx(\"option\", {\n      value: asset.name\n    }, asset.name);\n  }) : null) : null, targetAsset.name ? __jsx(Image, {\n    p: \"20px\",\n    h: \"100%\",\n    className: \"d-block w-100\",\n    src: targetAsset.image,\n    width: \"250px\"\n  }) : null)))), __jsx(Stack, {\n    direction: \"row\",\n    align: \"flex-start\",\n    spacing: \"0rem\",\n    flexWrap: \"wrap\",\n    shouldWrapChildren: true\n  }, __jsx(ButtonGroup, {\n    spacing: 4\n  }, !account ? __jsx(Button, {\n    isDisabled: true,\n    type: \"submit\"\n  }, \"No Wallet Connected!\") : __jsx(Button, {\n    onClick: e => {\n      handleSubmit(e);\n    },\n    type: \"submit\"\n  }, \"Create Vault\"))))))))));\n}","map":null,"metadata":{},"sourceType":"module"}