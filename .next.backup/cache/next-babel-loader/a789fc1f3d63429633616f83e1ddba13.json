{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { createContext, useContext, useState, useEffect, useMemo, useCallback } from 'react';\nimport { Token } from '@uniswap/sdk';\nimport { DEFAULT_APPROVE_MAX, DEFAULT_DEADLINE, DEFAULT_SLIPPAGE } from './constants';\nvar LocalStorageKeys;\n\n(function (LocalStorageKeys) {\n  LocalStorageKeys[\"Version\"] = \"version\";\n  LocalStorageKeys[\"ApproveMax\"] = \"approveMax\";\n  LocalStorageKeys[\"Deadline\"] = \"deadline\";\n  LocalStorageKeys[\"Slippage\"] = \"slippage\";\n  LocalStorageKeys[\"Transactions\"] = \"transactions\";\n  LocalStorageKeys[\"Tokens\"] = \"tokens\";\n})(LocalStorageKeys || (LocalStorageKeys = {}));\n\nvar NO_VERSION = -1;\nvar CURRENT_VERSION = 0;\n\nfunction useLocalStorage(key, defaultValue) {\n  var overrideLookup = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  var _ref = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {\n    serialize: function serialize(toSerialize) {\n      return toSerialize;\n    },\n    deserialize: function deserialize(toDeserialize) {\n      return toDeserialize;\n    }\n  },\n      serialize = _ref.serialize,\n      deserialize = _ref.deserialize;\n\n  var _useState = useState(function () {\n    if (overrideLookup) {\n      return defaultValue;\n    } else {\n      try {\n        var _deserialize;\n\n        var item = window.localStorage.getItem(key);\n        return item === null ? defaultValue : (_deserialize = deserialize(JSON.parse(item))) !== null && _deserialize !== void 0 ? _deserialize : defaultValue;\n      } catch (_unused) {\n        return defaultValue;\n      }\n    }\n  }),\n      value = _useState[0],\n      setValue = _useState[1];\n\n  useEffect(function () {\n    try {\n      window.localStorage.setItem(key, JSON.stringify(serialize(value)));\n    } catch (_unused2) {}\n  }, [key, serialize, value]);\n  return [value, setValue];\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction serializeTokens(tokens) {\n  return tokens.map(function (token) {\n    return {\n      chainId: token.chainId,\n      address: token.address,\n      decimals: token.decimals,\n      symbol: token.symbol,\n      name: token.name\n    };\n  });\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction deserializeTokens(serializedTokens) {\n  return serializedTokens.map(function (serializedToken) {\n    return new Token(serializedToken.chainId, serializedToken.address, serializedToken.decimals, serializedToken.symbol, serializedToken.name);\n  });\n}\n\nvar HypertextContext = /*#__PURE__*/createContext([{}, {}]); // eslint-disable-line @typescript-eslint/no-explicit-any\n// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\n\nfunction useHypertextContext() {\n  return useContext(HypertextContext);\n}\n\nexport default function Provider(_ref2) {\n  var children = _ref2.children;\n\n  // global state\n  var _useState2 = useState(),\n      firstToken = _useState2[0],\n      setFirstToken = _useState2[1];\n\n  var _useState3 = useState(),\n      secondToken = _useState3[0],\n      setSecondToken = _useState3[1];\n\n  var _useState4 = useState(false),\n      showUSD = _useState4[0],\n      setShowUSD = _useState4[1]; // versioning\n\n\n  var _useLocalStorage = useLocalStorage(LocalStorageKeys.Version, NO_VERSION),\n      _useLocalStorage2 = _slicedToArray(_useLocalStorage, 2),\n      version = _useLocalStorage2[0],\n      setVersion = _useLocalStorage2[1]; // after it's been used to sychronously + selectively override localstorage keys, bump the version as soon as we can\n\n\n  useEffect(function () {\n    setVersion(CURRENT_VERSION);\n  }, [setVersion]); // global localstorage state\n\n  var _useLocalStorage3 = useLocalStorage(LocalStorageKeys.ApproveMax, DEFAULT_APPROVE_MAX),\n      _useLocalStorage4 = _slicedToArray(_useLocalStorage3, 2),\n      approveMax = _useLocalStorage4[0],\n      setApproveMax = _useLocalStorage4[1];\n\n  var _useLocalStorage5 = useLocalStorage(LocalStorageKeys.Deadline, DEFAULT_DEADLINE),\n      _useLocalStorage6 = _slicedToArray(_useLocalStorage5, 2),\n      deadline = _useLocalStorage6[0],\n      setDeadline = _useLocalStorage6[1];\n\n  var _useLocalStorage7 = useLocalStorage(LocalStorageKeys.Slippage, DEFAULT_SLIPPAGE),\n      _useLocalStorage8 = _slicedToArray(_useLocalStorage7, 2),\n      slippage = _useLocalStorage8[0],\n      setSlippage = _useLocalStorage8[1];\n\n  var _useLocalStorage9 = useLocalStorage(LocalStorageKeys.Transactions, [], version < 0 ? true : false // pre-version0 localstorage transactions didn't include chainId and must be overriden\n  ),\n      _useLocalStorage10 = _slicedToArray(_useLocalStorage9, 2),\n      transactions = _useLocalStorage10[0],\n      setTransactions = _useLocalStorage10[1];\n\n  var _useLocalStorage11 = useLocalStorage(LocalStorageKeys.Tokens, [], false, {\n    serialize: serializeTokens,\n    deserialize: deserializeTokens\n  }),\n      _useLocalStorage12 = _slicedToArray(_useLocalStorage11, 2),\n      tokens = _useLocalStorage12[0],\n      setTokens = _useLocalStorage12[1];\n\n  return __jsx(HypertextContext.Provider, {\n    value: useMemo(function () {\n      return [{\n        firstToken: firstToken,\n        secondToken: secondToken,\n        showUSD: showUSD,\n        approveMax: approveMax,\n        deadline: deadline,\n        slippage: slippage,\n        transactions: transactions,\n        tokens: tokens\n      }, {\n        setFirstToken: setFirstToken,\n        setSecondToken: setSecondToken,\n        setShowUSD: setShowUSD,\n        setApproveMax: setApproveMax,\n        setDeadline: setDeadline,\n        setSlippage: setSlippage,\n        setTransactions: setTransactions,\n        setTokens: setTokens\n      }];\n    }, [firstToken, secondToken, showUSD, approveMax, deadline, slippage, transactions, tokens, setFirstToken, setSecondToken, setShowUSD, setApproveMax, setDeadline, setSlippage, setTransactions, setTokens])\n  }, children);\n}\nexport function useFirstToken() {\n  var _useHypertextContext = useHypertextContext(),\n      _useHypertextContext2 = _slicedToArray(_useHypertextContext, 2),\n      firstToken = _useHypertextContext2[0].firstToken,\n      setFirstToken = _useHypertextContext2[1].setFirstToken;\n\n  return [firstToken, setFirstToken];\n}\nexport function useSecondToken() {\n  var _useHypertextContext3 = useHypertextContext(),\n      _useHypertextContext4 = _slicedToArray(_useHypertextContext3, 2),\n      secondToken = _useHypertextContext4[0].secondToken,\n      setSecondToken = _useHypertextContext4[1].setSecondToken;\n\n  return [secondToken, setSecondToken];\n}\nexport function useShowUSD() {\n  var _useHypertextContext5 = useHypertextContext(),\n      _useHypertextContext6 = _slicedToArray(_useHypertextContext5, 2),\n      showUSD = _useHypertextContext6[0].showUSD,\n      setShowUSD = _useHypertextContext6[1].setShowUSD;\n\n  return [showUSD, setShowUSD];\n}\nexport function useApproveMax() {\n  var _useHypertextContext7 = useHypertextContext(),\n      _useHypertextContext8 = _slicedToArray(_useHypertextContext7, 2),\n      approveMax = _useHypertextContext8[0].approveMax,\n      setApproveMax = _useHypertextContext8[1].setApproveMax;\n\n  var toggleApproveMax = useCallback(function () {\n    setApproveMax(!approveMax);\n  }, [approveMax, setApproveMax]);\n  return [approveMax, toggleApproveMax];\n}\nexport function useDeadline() {\n  var _useHypertextContext9 = useHypertextContext(),\n      _useHypertextContext10 = _slicedToArray(_useHypertextContext9, 2),\n      deadline = _useHypertextContext10[0].deadline,\n      setDeadline = _useHypertextContext10[1].setDeadline;\n\n  return [deadline, setDeadline];\n}\nexport function useSlippage() {\n  var _useHypertextContext11 = useHypertextContext(),\n      _useHypertextContext12 = _slicedToArray(_useHypertextContext11, 2),\n      slippage = _useHypertextContext12[0].slippage,\n      setSlippage = _useHypertextContext12[1].setSlippage;\n\n  return [slippage, setSlippage];\n}\nexport function useTransactions() {\n  var _useHypertextContext13 = useHypertextContext(),\n      _useHypertextContext14 = _slicedToArray(_useHypertextContext13, 2),\n      transactions = _useHypertextContext14[0].transactions,\n      setTransactions = _useHypertextContext14[1].setTransactions;\n\n  var addTransaction = useCallback(function (chainId, hash) {\n    setTransactions(function (transactions) {\n      return transactions.filter(function (transaction) {\n        return !(transaction.chainId === chainId && transaction.hash === hash);\n      }).concat([{\n        chainId: chainId,\n        hash: hash\n      }]);\n    });\n  }, [setTransactions]);\n  var removeTransaction = useCallback(function (chainId, hash) {\n    setTransactions(function (transactions) {\n      return transactions.filter(function (transaction) {\n        return !(transaction.chainId === chainId && transaction.hash === hash);\n      });\n    });\n  }, [setTransactions]);\n  return [transactions, {\n    addTransaction: addTransaction,\n    removeTransaction: removeTransaction\n  }];\n}\nexport function useLocalStorageTokens() {\n  var _useHypertextContext15 = useHypertextContext(),\n      _useHypertextContext16 = _slicedToArray(_useHypertextContext15, 2),\n      tokens = _useHypertextContext16[0].tokens,\n      setTokens = _useHypertextContext16[1].setTokens;\n\n  var addToken = useCallback( /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(token) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setTokens(function (tokens) {\n                return tokens.filter(function (currentToken) {\n                  return !currentToken.equals(token);\n                }).concat([token]);\n              });\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }(), [setTokens]);\n  var removeToken = useCallback(function (token) {\n    setTokens(function (tokens) {\n      return tokens.filter(function (currentToken) {\n        return !currentToken.equals(token);\n      });\n    });\n  }, [setTokens]);\n  return [tokens, {\n    addToken: addToken,\n    removeToken: removeToken\n  }];\n}","map":null,"metadata":{},"sourceType":"module"}