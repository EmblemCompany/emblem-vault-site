{"ast":null,"code":"import { useCallback, useEffect, useState, useMemo, useRef } from 'react';\nimport { useWeb3React } from '@web3-react/core';\nimport { Route, WETH, ChainId, TradeType, Trade, Fraction, JSBI } from '@uniswap/sdk';\nimport { injected } from './connectors';\nimport { useReserves, useBlockNumber } from './data';\nimport { Contract } from '@ethersproject/contracts';\nimport { useRouter } from 'next/router';\nimport { QueryParameters } from './constants';\nimport { getAddress } from '@ethersproject/address';\nimport { DAI, USDC } from './tokens';\nexport function useWindowSize() {\n  function getSize() {\n    const isClient = false;\n    return {\n      width: isClient ? window.innerWidth : undefined,\n      height: isClient ? window.innerHeight : undefined\n    };\n  }\n\n  const {\n    0: windowSize,\n    1: setWindowSize\n  } = useState(getSize());\n  useEffect(() => {\n    const handleResize = () => {\n      setWindowSize(getSize());\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n  return windowSize;\n} // https://usehooks.com/useDebounce/\n\nexport function useDefaultedDebounce(value, initialValue, delay) {\n  const {\n    0: defaultedDebounce,\n    1: setDefaultedDebounce\n  } = useState(initialValue);\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDefaultedDebounce(value);\n    }, delay);\n    return () => {\n      clearTimeout(handler);\n      setDefaultedDebounce(initialValue);\n    };\n  }, [value, initialValue, delay]);\n  return defaultedDebounce;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nexport function useBodyKeyDown(targetKey, onKeyDown, suppress = false) {\n  const downHandler = useCallback(event => {\n    if (!suppress && event.key === targetKey && event.target.tagName === 'BODY' && !event.altKey && !event.ctrlKey && !event.metaKey && !event.shiftKey) {\n      onKeyDown(event);\n    }\n  }, [suppress, targetKey, onKeyDown]);\n  useEffect(() => {\n    window.addEventListener('keydown', downHandler);\n    return () => {\n      window.removeEventListener('keydown', downHandler);\n    };\n  }, [suppress, targetKey, downHandler]);\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nexport function useKeepSWRDataLiveAsBlocksArrive(mutate) {\n  // because we don't care about the referential identity of mutate, just bind it to a ref\n  const mutateRef = useRef(mutate);\n  useEffect(() => {\n    mutateRef.current = mutate;\n  }); // then, whenever a new block arrives, trigger a mutation\n\n  const {\n    data\n  } = useBlockNumber();\n  useEffect(() => {\n    mutateRef.current();\n  }, [data]);\n}\nexport function useEagerConnect() {\n  const {\n    activate,\n    active\n  } = useWeb3React();\n  const {\n    0: tried,\n    1: setTried\n  } = useState(false);\n  useEffect(() => {\n    injected.isAuthorized().then(isAuthorized => {\n      if (isAuthorized) {\n        activate(injected, undefined, true).catch(() => {\n          setTried(true);\n        });\n      } else {\n        setTried(true);\n      }\n    });\n  }, [activate]); // if the connection worked, wait until we get confirmation of that to flip the flag\n\n  useEffect(() => {\n    if (!tried && active) {\n      setTried(true);\n    }\n  }, [tried, active]);\n  return tried;\n}\nconst chainMappings = {\n  '1': 1,\n  mainnet: 1,\n  '3': 3,\n  ropsten: 3,\n  '4': 4,\n  rinkeby: 4,\n  '5': 5,\n  görli: 5,\n  goerli: 5,\n  '42': 42,\n  kovan: 42,\n  '80001': 80001,\n  mumbai: 80001,\n  matic: 137,\n  '137': 137,\n  '97': 97,\n  bnbsc: 97,\n  xdai: 100,\n  '100': 100,\n  bsc: 56,\n  '56': 56,\n  fantom: 250,\n  '250': 250\n};\nexport function useQueryParameters() {\n  const {\n    query\n  } = useRouter();\n  let candidateChainId;\n\n  try {\n    candidateChainId = chainMappings[query[QueryParameters.CHAIN]];\n  } catch {}\n\n  const chainId = !!injected.supportedChainIds && typeof candidateChainId === 'number' && injected.supportedChainIds.includes(candidateChainId) ? candidateChainId : undefined;\n  let input;\n\n  try {\n    if (typeof query[QueryParameters.INPUT] === 'string') input = getAddress(query[QueryParameters.INPUT]);\n  } catch {}\n\n  let output;\n\n  try {\n    if (typeof query[QueryParameters.OUTPUT] === 'string') output = getAddress(query[QueryParameters.OUTPUT]);\n  } catch {}\n\n  return useMemo(() => ({\n    [QueryParameters.CHAIN]: chainId,\n    [QueryParameters.INPUT]: input,\n    [QueryParameters.OUTPUT]: output\n  }), [chainId, input, output]);\n}\n\nfunction useDirectPair(inputToken, outputToken) {\n  const {\n    data: pair\n  } = useReserves(inputToken, outputToken);\n\n  if (!!inputToken && !!outputToken && inputToken.equals(outputToken)) {\n    return null;\n  }\n\n  return pair;\n}\n\nexport function useRoute(inputToken, outputToken) {\n  // direct pair\n  const directPair = useDirectPair(inputToken, outputToken); // WETH pairs\n\n  const WETHInputPair = useDirectPair(inputToken ? WETH[inputToken.chainId] : undefined, inputToken);\n  const WETHOutputPair = useDirectPair(outputToken ? WETH[outputToken.chainId] : undefined, outputToken); // DAI pairs\n\n  const DAIInputPair = useDirectPair((inputToken === null || inputToken === void 0 ? void 0 : inputToken.chainId) === ChainId.MAINNET ? DAI : undefined, inputToken);\n  const DAIOutputPair = useDirectPair((outputToken === null || outputToken === void 0 ? void 0 : outputToken.chainId) === ChainId.MAINNET ? DAI : undefined, outputToken); // USDC pairs\n\n  const USDCInputPair = useDirectPair((inputToken === null || inputToken === void 0 ? void 0 : inputToken.chainId) === ChainId.MAINNET ? USDC : undefined, inputToken);\n  const USDCOutputPair = useDirectPair((outputToken === null || outputToken === void 0 ? void 0 : outputToken.chainId) === ChainId.MAINNET ? USDC : undefined, outputToken); // connecting pairs\n\n  const DAIWETH = useDirectPair((inputToken === null || inputToken === void 0 ? void 0 : inputToken.chainId) === ChainId.MAINNET ? DAI : undefined, WETH[DAI.chainId]);\n  const USDCWETH = useDirectPair((inputToken === null || inputToken === void 0 ? void 0 : inputToken.chainId) === ChainId.MAINNET ? USDC : undefined, WETH[USDC.chainId]);\n  const DAIUSDC = useDirectPair((inputToken === null || inputToken === void 0 ? void 0 : inputToken.chainId) === ChainId.MAINNET ? DAI : undefined, (inputToken === null || inputToken === void 0 ? void 0 : inputToken.chainId) === ChainId.MAINNET ? USDC : undefined);\n  const pairs = [directPair, WETHInputPair, WETHOutputPair, DAIInputPair, DAIOutputPair, USDCInputPair, USDCOutputPair, DAIWETH, USDCWETH, DAIUSDC].filter((p, i, pairs) => {\n    // filter out invalid pairs or pairs whose data hasn't been fetched yet\n    if (!!!p) {\n      return false;\n    } else {\n      return i === pairs.findIndex(pair => {\n        var _pair$liquidityToken;\n\n        return (pair === null || pair === void 0 ? void 0 : (_pair$liquidityToken = pair.liquidityToken) === null || _pair$liquidityToken === void 0 ? void 0 : _pair$liquidityToken.address) === p.liquidityToken.address;\n      });\n    }\n  });\n  const directRoute = useMemo(() => directPair && inputToken ? new Route([directPair], inputToken) : directPair === null ? null : undefined, [directPair, inputToken]);\n  const WETHRoute = useMemo(() => WETHInputPair && WETHOutputPair && inputToken ? new Route([WETHInputPair, WETHOutputPair], inputToken) : WETHInputPair === null || WETHOutputPair === null ? null : undefined, [WETHInputPair, WETHOutputPair, inputToken]);\n  const DAIRoute = useMemo(() => DAIInputPair && DAIOutputPair && inputToken ? new Route([DAIInputPair, DAIOutputPair], inputToken) : DAIInputPair === null || DAIOutputPair === null ? null : undefined, [DAIInputPair, DAIOutputPair, inputToken]);\n  const USDCRoute = useMemo(() => USDCInputPair && USDCOutputPair && inputToken ? new Route([USDCInputPair, USDCOutputPair], inputToken) : USDCInputPair === null || USDCOutputPair === null ? null : undefined, [USDCInputPair, USDCOutputPair, inputToken]);\n  const routes = [directRoute, WETHRoute, DAIRoute, USDCRoute];\n  return [routes.filter(route => !!route).length > 0 ? routes.filter(route => !!route)[0] : routes.some(route => route === undefined) ? undefined : null, pairs];\n}\nexport function useTrade(inputToken, outputToken, pairs, independentAmount, tradeType) {\n  const canCompute = !!inputToken && !!outputToken && pairs.length > 0 && !!independentAmount;\n  let trade;\n\n  if (canCompute) {\n    if (tradeType === TradeType.EXACT_INPUT) {\n      trade = Trade.bestTradeExactIn(pairs, independentAmount, outputToken, {\n        maxNumResults: 1\n      })[0];\n    } else {\n      trade = Trade.bestTradeExactOut(pairs, inputToken, independentAmount, {\n        maxNumResults: 1\n      })[0];\n    }\n  }\n\n  return trade;\n}\nexport function useContract(address, ABI, withSigner = false) {\n  const {\n    library,\n    account\n  } = useWeb3React();\n  return useMemo(() => !!address && !!ABI && !!library ? new Contract(address, ABI, withSigner ? library.getSigner(account).connectUnchecked() : library) : undefined, [address, ABI, withSigner, library, account]);\n}\nexport function useUSDETHPrice() {\n  const {\n    chainId\n  } = useWeb3React();\n  const DAIWETH = useDirectPair(chainId === ChainId.MAINNET ? DAI : undefined, WETH[ChainId.MAINNET]);\n  const USDCWETH = useDirectPair(chainId === ChainId.MAINNET ? USDC : undefined, WETH[ChainId.MAINNET]);\n  const price = useMemo(() => {\n    var _Route, _Route$midPrice, _Route2, _Route2$midPrice;\n\n    const priceFractions = [DAIWETH && ((_Route = new Route([DAIWETH], WETH[ChainId.MAINNET])) === null || _Route === void 0 ? void 0 : (_Route$midPrice = _Route.midPrice) === null || _Route$midPrice === void 0 ? void 0 : _Route$midPrice.adjusted), USDCWETH && ((_Route2 = new Route([USDCWETH], WETH[ChainId.MAINNET])) === null || _Route2 === void 0 ? void 0 : (_Route2$midPrice = _Route2.midPrice) === null || _Route2$midPrice === void 0 ? void 0 : _Route2$midPrice.adjusted)].filter(price => !!price);\n    return priceFractions.reduce((accumulator, priceFraction) => accumulator.add(priceFraction), new Fraction('0')).divide(priceFractions.length.toString());\n  }, [DAIWETH, USDCWETH]);\n  return price.equalTo('0') ? undefined : price;\n}\nexport function useUSDTokenPrice(token) {\n  const USDETHPrice = useUSDETHPrice();\n  const DAIWETH = useDirectPair(USDETHPrice ? DAI : undefined, WETH[ChainId.MAINNET]);\n  const USDCWETH = useDirectPair(USDETHPrice ? USDC : undefined, WETH[ChainId.MAINNET]);\n  const tokenWETH = useDirectPair((token === null || token === void 0 ? void 0 : token.chainId) === ChainId.MAINNET ? token : undefined, WETH[ChainId.MAINNET]);\n  const tokenDAI = useDirectPair((token === null || token === void 0 ? void 0 : token.chainId) === ChainId.MAINNET ? token : undefined, DAI);\n  const tokenUSDC = useDirectPair((token === null || token === void 0 ? void 0 : token.chainId) === ChainId.MAINNET ? token : undefined, USDC);\n  const price = useMemo(() => {\n    // early return if the token is WETH\n    if (token && token.equals(WETH[ChainId.MAINNET])) {\n      return USDETHPrice || new Fraction('0');\n    }\n\n    let priceFractions = []; // if the token has a WETH pair with at least 5 ETH\n\n    if (token && USDETHPrice && tokenWETH && tokenWETH.reserveOf(WETH[ChainId.MAINNET]).greaterThan(JSBI.BigInt(5))) {\n      const ETHTokenPrice = new Route([tokenWETH], token).midPrice.adjusted;\n      priceFractions.push(USDETHPrice.multiply(ETHTokenPrice));\n    } // if DAIWETH pair exists and the token has a DAI pair with at least 1000 DAI\n\n\n    if (token && USDETHPrice && DAIWETH && tokenDAI && tokenDAI.reserveOf(DAI).greaterThan(JSBI.BigInt(1000))) {\n      const WETHDAIPrice = new Route([DAIWETH], DAI).midPrice.adjusted;\n      const DAITokenPrice = new Route([tokenDAI], token).midPrice.adjusted;\n      priceFractions.push(USDETHPrice.multiply(WETHDAIPrice).multiply(DAITokenPrice));\n    } // if USDCWETH pair exists and the token has a USDC pair with at least 1000 USDC\n\n\n    if (token && USDETHPrice && USDCWETH && tokenUSDC && tokenUSDC.reserveOf(USDC).greaterThan(JSBI.BigInt(1000))) {\n      const WETHUSDCPrice = new Route([USDCWETH], USDC).midPrice.adjusted;\n      const USDCTokenPrice = new Route([tokenUSDC], token).midPrice.adjusted;\n      priceFractions.push(USDETHPrice.multiply(WETHUSDCPrice).multiply(USDCTokenPrice));\n    }\n\n    priceFractions = priceFractions.filter(price => !!price);\n    return priceFractions.reduce((accumulator, priceFraction) => accumulator.add(priceFraction), new Fraction('0')).divide(priceFractions.length.toString());\n  }, [tokenWETH, token, USDETHPrice, DAIWETH, tokenDAI, USDCWETH, tokenUSDC]);\n  return price.equalTo('0') ? undefined : price;\n}","map":{"version":3,"sources":["/Users/shannoncode/repo/Emblem.Currentwork/emblem-vault-site/hooks.ts"],"names":["useCallback","useEffect","useState","useMemo","useRef","useWeb3React","Route","WETH","ChainId","TradeType","Trade","Fraction","JSBI","injected","useReserves","useBlockNumber","Contract","useRouter","QueryParameters","getAddress","DAI","USDC","useWindowSize","getSize","isClient","width","window","innerWidth","undefined","height","innerHeight","windowSize","setWindowSize","handleResize","addEventListener","removeEventListener","useDefaultedDebounce","value","initialValue","delay","defaultedDebounce","setDefaultedDebounce","handler","setTimeout","clearTimeout","useBodyKeyDown","targetKey","onKeyDown","suppress","downHandler","event","key","target","tagName","altKey","ctrlKey","metaKey","shiftKey","useKeepSWRDataLiveAsBlocksArrive","mutate","mutateRef","current","data","useEagerConnect","activate","active","tried","setTried","isAuthorized","then","catch","chainMappings","mainnet","ropsten","rinkeby","görli","goerli","kovan","mumbai","matic","bnbsc","xdai","bsc","fantom","useQueryParameters","query","candidateChainId","CHAIN","chainId","supportedChainIds","includes","input","INPUT","output","OUTPUT","useDirectPair","inputToken","outputToken","pair","equals","useRoute","directPair","WETHInputPair","WETHOutputPair","DAIInputPair","MAINNET","DAIOutputPair","USDCInputPair","USDCOutputPair","DAIWETH","USDCWETH","DAIUSDC","pairs","filter","p","i","findIndex","liquidityToken","address","directRoute","WETHRoute","DAIRoute","USDCRoute","routes","route","length","some","useTrade","independentAmount","tradeType","canCompute","trade","EXACT_INPUT","bestTradeExactIn","maxNumResults","bestTradeExactOut","useContract","ABI","withSigner","library","account","getSigner","connectUnchecked","useUSDETHPrice","price","priceFractions","midPrice","adjusted","reduce","accumulator","priceFraction","add","divide","toString","equalTo","useUSDTokenPrice","token","USDETHPrice","tokenWETH","tokenDAI","tokenUSDC","reserveOf","greaterThan","BigInt","ETHTokenPrice","push","multiply","WETHDAIPrice","DAITokenPrice","WETHUSDCPrice","USDCTokenPrice"],"mappings":"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","sourcesContent":["import { useCallback, useEffect, useState, useMemo, useRef } from 'react'\nimport { useWeb3React } from '@web3-react/core'\nimport { Token, Route, WETH, Pair, ChainId, TokenAmount, TradeType, Trade, Fraction, JSBI } from '@uniswap/sdk'\n\nimport { injected } from './connectors'\nimport { useReserves, useBlockNumber } from './data'\nimport { Contract, ContractInterface } from '@ethersproject/contracts'\nimport { useRouter } from 'next/router'\nimport { QueryParameters } from './constants'\nimport { getAddress } from '@ethersproject/address'\nimport { responseInterface } from 'swr'\nimport { DAI, USDC } from './tokens'\n\nexport function useWindowSize(): { width: number | undefined; height: number | undefined } {\n  function getSize(): ReturnType<typeof useWindowSize> {\n    const isClient = typeof window === 'object'\n    return {\n      width: isClient ? window.innerWidth : undefined,\n      height: isClient ? window.innerHeight : undefined,\n    }\n  }\n\n  const [windowSize, setWindowSize] = useState(getSize())\n  useEffect(() => {\n    const handleResize = (): void => {\n      setWindowSize(getSize())\n    }\n    window.addEventListener('resize', handleResize)\n    return (): void => {\n      window.removeEventListener('resize', handleResize)\n    }\n  }, [])\n\n  return windowSize\n}\n\n// https://usehooks.com/useDebounce/\nexport function useDefaultedDebounce<T>(value: T, initialValue: T, delay: number): T {\n  const [defaultedDebounce, setDefaultedDebounce] = useState(initialValue)\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDefaultedDebounce(value)\n    }, delay)\n\n    return (): void => {\n      clearTimeout(handler)\n      setDefaultedDebounce(initialValue)\n    }\n  }, [value, initialValue, delay])\n\n  return defaultedDebounce\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function useBodyKeyDown(targetKey: string, onKeyDown: (event?: any) => void, suppress = false): void {\n  const downHandler = useCallback(\n    (event) => {\n      if (\n        !suppress &&\n        event.key === targetKey &&\n        event.target.tagName === 'BODY' &&\n        !event.altKey &&\n        !event.ctrlKey &&\n        !event.metaKey &&\n        !event.shiftKey\n      ) {\n        onKeyDown(event)\n      }\n    },\n    [suppress, targetKey, onKeyDown]\n  )\n  useEffect(() => {\n    window.addEventListener('keydown', downHandler)\n    return (): void => {\n      window.removeEventListener('keydown', downHandler)\n    }\n  }, [suppress, targetKey, downHandler])\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function useKeepSWRDataLiveAsBlocksArrive(mutate: responseInterface<any, any>['mutate']): void {\n  // because we don't care about the referential identity of mutate, just bind it to a ref\n  const mutateRef = useRef(mutate)\n  useEffect(() => {\n    mutateRef.current = mutate\n  })\n  // then, whenever a new block arrives, trigger a mutation\n  const { data } = useBlockNumber()\n  useEffect(() => {\n    mutateRef.current()\n  }, [data])\n}\n\nexport function useEagerConnect(): boolean {\n  const { activate, active } = useWeb3React()\n\n  const [tried, setTried] = useState(false)\n\n  useEffect(() => {\n    injected.isAuthorized().then((isAuthorized: boolean) => {\n      if (isAuthorized) {\n        activate(injected, undefined, true).catch(() => {\n          setTried(true)\n        })\n      } else {\n        setTried(true)\n      }\n    })\n  }, [activate])\n\n  // if the connection worked, wait until we get confirmation of that to flip the flag\n  useEffect(() => {\n    if (!tried && active) {\n      setTried(true)\n    }\n  }, [tried, active])\n\n  return tried\n}\n\nconst chainMappings: { [key: string]: number } = {\n  '1': 1,\n  mainnet: 1,\n  '3': 3,\n  ropsten: 3,\n  '4': 4,\n  rinkeby: 4,\n  '5': 5,\n  görli: 5,\n  goerli: 5,\n  '42': 42,\n  kovan: 42,\n  '80001': 80001,\n  mumbai: 80001,\n  matic: 137,\n  '137': 137,\n  '97': 97,\n  bnbsc: 97,\n  xdai: 100,\n  '100': 100,\n  bsc: 56,\n  '56': 56,\n  fantom: 250,\n  '250': 250\n}\n\nexport function useQueryParameters(): {\n  [QueryParameters.CHAIN]: number | undefined\n  [QueryParameters.INPUT]: string | undefined\n  [QueryParameters.OUTPUT]: string | undefined\n} {\n  const { query } = useRouter()\n\n  let candidateChainId: number | undefined\n  try {\n    candidateChainId = chainMappings[query[QueryParameters.CHAIN] as string]\n  } catch {}\n  const chainId =\n    !!injected.supportedChainIds &&\n    typeof candidateChainId === 'number' &&\n    injected.supportedChainIds.includes(candidateChainId)\n      ? candidateChainId\n      : undefined\n\n  let input: string | undefined\n  try {\n    if (typeof query[QueryParameters.INPUT] === 'string') input = getAddress(query[QueryParameters.INPUT] as string)\n  } catch {}\n\n  let output: string | undefined\n  try {\n    if (typeof query[QueryParameters.OUTPUT] === 'string') output = getAddress(query[QueryParameters.OUTPUT] as string)\n  } catch {}\n\n  return useMemo(\n    () => ({\n      [QueryParameters.CHAIN]: chainId,\n      [QueryParameters.INPUT]: input,\n      [QueryParameters.OUTPUT]: output,\n    }),\n    [chainId, input, output]\n  )\n}\n\nfunction useDirectPair(inputToken?: Token, outputToken?: Token): Pair | undefined | null {\n  const { data: pair } = useReserves(inputToken, outputToken)\n\n  if (!!inputToken && !!outputToken && inputToken.equals(outputToken)) {\n    return null\n  }\n\n  return pair\n}\n\nexport function useRoute(inputToken?: Token, outputToken?: Token): [undefined | Route | null, Pair[]] {\n  // direct pair\n  const directPair = useDirectPair(inputToken, outputToken)\n  // WETH pairs\n  const WETHInputPair = useDirectPair(inputToken ? WETH[inputToken.chainId] : undefined, inputToken)\n  const WETHOutputPair = useDirectPair(outputToken ? WETH[outputToken.chainId] : undefined, outputToken)\n  // DAI pairs\n  const DAIInputPair = useDirectPair(inputToken?.chainId === ChainId.MAINNET ? DAI : undefined, inputToken)\n  const DAIOutputPair = useDirectPair(outputToken?.chainId === ChainId.MAINNET ? DAI : undefined, outputToken)\n  // USDC pairs\n  const USDCInputPair = useDirectPair(inputToken?.chainId === ChainId.MAINNET ? USDC : undefined, inputToken)\n  const USDCOutputPair = useDirectPair(outputToken?.chainId === ChainId.MAINNET ? USDC : undefined, outputToken)\n  // connecting pairs\n  const DAIWETH = useDirectPair(inputToken?.chainId === ChainId.MAINNET ? DAI : undefined, WETH[DAI.chainId])\n  const USDCWETH = useDirectPair(inputToken?.chainId === ChainId.MAINNET ? USDC : undefined, WETH[USDC.chainId])\n  const DAIUSDC = useDirectPair(\n    inputToken?.chainId === ChainId.MAINNET ? DAI : undefined,\n    inputToken?.chainId === ChainId.MAINNET ? USDC : undefined\n  )\n\n  const pairs: Pair[] = [\n    directPair,\n    WETHInputPair,\n    WETHOutputPair,\n    DAIInputPair,\n    DAIOutputPair,\n    USDCInputPair,\n    USDCOutputPair,\n    DAIWETH,\n    USDCWETH,\n    DAIUSDC,\n  ].filter((p, i, pairs) => {\n    // filter out invalid pairs or pairs whose data hasn't been fetched yet\n    if (!!!p) {\n      return false\n    } else {\n      return i === pairs.findIndex((pair) => pair?.liquidityToken?.address === p.liquidityToken.address)\n    }\n  }) as Pair[]\n\n  const directRoute = useMemo(\n    () => (directPair && inputToken ? new Route([directPair], inputToken) : directPair === null ? null : undefined),\n    [directPair, inputToken]\n  )\n  const WETHRoute = useMemo(\n    () =>\n      WETHInputPair && WETHOutputPair && inputToken\n        ? new Route([WETHInputPair, WETHOutputPair], inputToken)\n        : WETHInputPair === null || WETHOutputPair === null\n        ? null\n        : undefined,\n    [WETHInputPair, WETHOutputPair, inputToken]\n  )\n  const DAIRoute = useMemo(\n    () =>\n      DAIInputPair && DAIOutputPair && inputToken\n        ? new Route([DAIInputPair, DAIOutputPair], inputToken)\n        : DAIInputPair === null || DAIOutputPair === null\n        ? null\n        : undefined,\n    [DAIInputPair, DAIOutputPair, inputToken]\n  )\n  const USDCRoute = useMemo(\n    () =>\n      USDCInputPair && USDCOutputPair && inputToken\n        ? new Route([USDCInputPair, USDCOutputPair], inputToken)\n        : USDCInputPair === null || USDCOutputPair === null\n        ? null\n        : undefined,\n    [USDCInputPair, USDCOutputPair, inputToken]\n  )\n  const routes = [directRoute, WETHRoute, DAIRoute, USDCRoute]\n\n  return [\n    routes.filter((route) => !!route).length > 0\n      ? routes.filter((route) => !!route)[0]\n      : routes.some((route) => route === undefined)\n      ? undefined\n      : null,\n    pairs,\n  ]\n}\n\nexport function useTrade(\n  inputToken: Token | undefined,\n  outputToken: Token | undefined,\n  pairs: Pair[],\n  independentAmount: TokenAmount,\n  tradeType: TradeType\n): undefined | Trade {\n  const canCompute = !!inputToken && !!outputToken && pairs.length > 0 && !!independentAmount\n\n  let trade: undefined | Trade\n  if (canCompute) {\n    if (tradeType === TradeType.EXACT_INPUT) {\n      trade = Trade.bestTradeExactIn(pairs, independentAmount, outputToken, { maxNumResults: 1 })[0]\n    } else {\n      trade = Trade.bestTradeExactOut(pairs, inputToken, independentAmount, { maxNumResults: 1 })[0]\n    }\n  }\n\n  return trade\n}\n\nexport function useContract(address?: string, ABI?: ContractInterface, withSigner = false): Contract | undefined {\n  const { library, account } = useWeb3React()\n  return useMemo(\n    () =>\n      !!address && !!ABI && !!library\n        ? new Contract(address, ABI, withSigner ? library.getSigner(account).connectUnchecked() : library)\n        : undefined,\n    [address, ABI, withSigner, library, account]\n  )\n}\n\nexport function useUSDETHPrice(): Fraction | undefined {\n  const { chainId } = useWeb3React()\n\n  const DAIWETH = useDirectPair(chainId === ChainId.MAINNET ? DAI : undefined, WETH[ChainId.MAINNET])\n  const USDCWETH = useDirectPair(chainId === ChainId.MAINNET ? USDC : undefined, WETH[ChainId.MAINNET])\n\n  const price = useMemo(() => {\n    const priceFractions = [\n      DAIWETH && new Route([DAIWETH], WETH[ChainId.MAINNET])?.midPrice?.adjusted,\n      USDCWETH && new Route([USDCWETH], WETH[ChainId.MAINNET])?.midPrice?.adjusted,\n    ].filter((price) => !!price)\n\n    return (priceFractions as Fraction[])\n      .reduce((accumulator, priceFraction) => accumulator.add(priceFraction), new Fraction('0'))\n      .divide(priceFractions.length.toString())\n  }, [DAIWETH, USDCWETH])\n\n  return price.equalTo('0') ? undefined : price\n}\n\nexport function useUSDTokenPrice(token?: Token): Fraction | undefined {\n  const USDETHPrice = useUSDETHPrice()\n\n  const DAIWETH = useDirectPair(USDETHPrice ? DAI : undefined, WETH[ChainId.MAINNET])\n  const USDCWETH = useDirectPair(USDETHPrice ? USDC : undefined, WETH[ChainId.MAINNET])\n\n  const tokenWETH = useDirectPair(token?.chainId === ChainId.MAINNET ? token : undefined, WETH[ChainId.MAINNET])\n  const tokenDAI = useDirectPair(token?.chainId === ChainId.MAINNET ? token : undefined, DAI)\n  const tokenUSDC = useDirectPair(token?.chainId === ChainId.MAINNET ? token : undefined, USDC)\n\n  const price = useMemo(() => {\n    // early return if the token is WETH\n    if (token && token.equals(WETH[ChainId.MAINNET])) {\n      return USDETHPrice || new Fraction('0')\n    }\n\n    let priceFractions = []\n\n    // if the token has a WETH pair with at least 5 ETH\n    if (token && USDETHPrice && tokenWETH && tokenWETH.reserveOf(WETH[ChainId.MAINNET]).greaterThan(JSBI.BigInt(5))) {\n      const ETHTokenPrice = new Route([tokenWETH], token).midPrice.adjusted\n      priceFractions.push(USDETHPrice.multiply(ETHTokenPrice))\n    }\n    // if DAIWETH pair exists and the token has a DAI pair with at least 1000 DAI\n    if (token && USDETHPrice && DAIWETH && tokenDAI && tokenDAI.reserveOf(DAI).greaterThan(JSBI.BigInt(1000))) {\n      const WETHDAIPrice = new Route([DAIWETH], DAI).midPrice.adjusted\n      const DAITokenPrice = new Route([tokenDAI], token).midPrice.adjusted\n      priceFractions.push(USDETHPrice.multiply(WETHDAIPrice).multiply(DAITokenPrice))\n    }\n    // if USDCWETH pair exists and the token has a USDC pair with at least 1000 USDC\n    if (token && USDETHPrice && USDCWETH && tokenUSDC && tokenUSDC.reserveOf(USDC).greaterThan(JSBI.BigInt(1000))) {\n      const WETHUSDCPrice = new Route([USDCWETH], USDC).midPrice.adjusted\n      const USDCTokenPrice = new Route([tokenUSDC], token).midPrice.adjusted\n      priceFractions.push(USDETHPrice.multiply(WETHUSDCPrice).multiply(USDCTokenPrice))\n    }\n\n    priceFractions = priceFractions.filter((price) => !!price)\n\n    return priceFractions\n      .reduce((accumulator, priceFraction) => accumulator.add(priceFraction), new Fraction('0'))\n      .divide(priceFractions.length.toString())\n  }, [tokenWETH, token, USDETHPrice, DAIWETH, tokenDAI, USDCWETH, tokenUSDC])\n\n  return price.equalTo('0') ? undefined : price\n}\n"]},"metadata":{},"sourceType":"module"}