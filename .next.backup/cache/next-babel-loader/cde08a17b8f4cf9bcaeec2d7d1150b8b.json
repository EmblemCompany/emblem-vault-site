{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect, Suspense, useRef, useLayoutEffect } from 'react';\nimport { Button, Stack, Box, IconButton } from '@chakra-ui/core';\nimport { useWeb3React } from '@web3-react/core';\nimport { UserRejectedRequestError } from '@web3-react/injected-connector';\nimport MetaMaskOnboarding from '@metamask/onboarding';\nimport { formatEtherscanLink, ExplorerTXType, shortenHex } from '../utils';\nimport { injected, getNetwork } from '../connectors';\nimport { useETHBalance } from '../data';\nimport ErrorBoundary from './ErrorBoundary';\nimport { useQueryParameters, useUSDETHPrice } from '../hooks';\nimport { QueryParameters } from '../constants';\nimport { useShowUSD } from '../context';\n\nfunction ETHBalance() {\n  var _useWeb3React = useWeb3React(),\n      account = _useWeb3React.account;\n\n  var _useETHBalance = useETHBalance(account, true),\n      data = _useETHBalance.data;\n\n  var _useShowUSD = useShowUSD(),\n      _useShowUSD2 = _slicedToArray(_useShowUSD, 1),\n      showUSD = _useShowUSD2[0];\n\n  var USDETHPrice = useUSDETHPrice();\n  return __jsx(Button, {\n    variant: \"outline\",\n    cursor: \"default\",\n    tabIndex: -1,\n    _hover: {},\n    _active: {},\n    _focus: {},\n    style: {\n      borderTopRightRadius: 0,\n      borderBottomRightRadius: 0,\n      borderRight: 'none'\n    }\n  }, \"\\u039E\", ' ', showUSD && USDETHPrice ? \"$\".concat(data.multiply(USDETHPrice).toFixed(2, {\n    groupSeparator: ','\n  })) : data.toSignificant(4, {\n    groupSeparator: ','\n  }));\n}\n\nexport default function Account(_ref) {\n  var _library$provider;\n\n  var triedToEagerConnect = _ref.triedToEagerConnect;\n\n  var _useWeb3React2 = useWeb3React(),\n      active = _useWeb3React2.active,\n      error = _useWeb3React2.error,\n      activate = _useWeb3React2.activate,\n      library = _useWeb3React2.library,\n      chainId = _useWeb3React2.chainId,\n      account = _useWeb3React2.account,\n      setError = _useWeb3React2.setError; // initialize metamask onboarding\n\n\n  var onboarding = useRef();\n  useLayoutEffect(function () {\n    onboarding.current = new MetaMaskOnboarding();\n  }, []); // automatically try connecting to the network connector where applicable\n\n  var queryParameters = useQueryParameters();\n  var requiredChainId = queryParameters[QueryParameters.CHAIN];\n  useEffect(function () {\n    if (triedToEagerConnect && !active && !error) {\n      activate(getNetwork(requiredChainId));\n    }\n  }, [triedToEagerConnect, active, error, requiredChainId, activate]); // manage connecting state for injected connector\n\n  var _useState = useState(false),\n      connecting = _useState[0],\n      setConnecting = _useState[1];\n\n  useEffect(function () {\n    if (active || error) {\n      var _onboarding$current;\n\n      setConnecting(false);\n      (_onboarding$current = onboarding.current) === null || _onboarding$current === void 0 ? void 0 : _onboarding$current.stopOnboarding();\n    }\n  }, [active, error]);\n\n  var _useState2 = useState(''),\n      ENSName = _useState2[0],\n      setENSName = _useState2[1];\n\n  useEffect(function () {\n    if (library && account) {\n      var stale = false;\n      library.lookupAddress(account).then(function (name) {\n        if (!stale && typeof name === 'string') {\n          setENSName(name);\n        }\n      })[\"catch\"](function () {}); // eslint-disable-line @typescript-eslint/no-empty-function\n\n      return function () {\n        stale = true;\n        setENSName('');\n      };\n    }\n  }, [library, account, chainId]);\n\n  if (error) {\n    return null;\n  } else if (!triedToEagerConnect) {\n    return null;\n  } else if (typeof account !== 'string') {\n    var _window, _window2;\n\n    return __jsx(Box, null, MetaMaskOnboarding.isMetaMaskInstalled() || (_window = window) !== null && _window !== void 0 && _window.ethereum || (_window2 = window) !== null && _window2 !== void 0 && _window2.web3 ? __jsx(Button, {\n      isLoading: connecting,\n      leftIcon: MetaMaskOnboarding.isMetaMaskInstalled() ? 'metamask' : undefined,\n      onClick: function onClick() {\n        setConnecting(true);\n        activate(injected, undefined, true)[\"catch\"](function (error) {\n          // ignore the error if it's a user rejected request\n          if (error instanceof UserRejectedRequestError) {\n            setConnecting(false);\n          } else {\n            setError(error);\n          }\n        });\n      }\n    }, MetaMaskOnboarding.isMetaMaskInstalled() ? 'Connect to MetaMask' : 'Connect to Wallet') : __jsx(Button, {\n      leftIcon: 'metamask',\n      onClick: function onClick() {\n        var _onboarding$current2;\n\n        return (_onboarding$current2 = onboarding.current) === null || _onboarding$current2 === void 0 ? void 0 : _onboarding$current2.startOnboarding();\n      }\n    }, \"Install Metamask\"));\n  }\n\n  var leftIcon; // check walletconnect first because sometime metamask can be installed but we're still using walletconnect\n\n  if (library !== null && library !== void 0 && (_library$provider = library.provider) !== null && _library$provider !== void 0 && _library$provider.isWalletConnect) {\n    leftIcon = 'walletconnect';\n  } else if (MetaMaskOnboarding.isMetaMaskInstalled()) {\n    leftIcon = 'metamask';\n  }\n\n  return __jsx(Stack, {\n    direction: \"row\",\n    spacing: 0,\n    whiteSpace: \"nowrap\",\n    m: 0,\n    shouldWrapChildren: true\n  }, __jsx(ErrorBoundary, {\n    fallback: __jsx(IconButton, {\n      variant: \"outline\",\n      icon: \"warning\",\n      \"aria-label\": \"Failed\",\n      isDisabled: true,\n      cursor: \"default !important\",\n      _hover: {},\n      _active: {},\n      style: {\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0,\n        borderRight: 'none'\n      }\n    })\n  }, __jsx(Suspense, {\n    fallback: __jsx(Button, {\n      variant: \"outline\",\n      isLoading: true,\n      cursor: \"default !important\",\n      _hover: {},\n      _active: {},\n      style: {\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0,\n        borderRight: 'none'\n      }\n    }, null)\n  }, __jsx(ETHBalance, null))), __jsx(Button, {\n    as: \"a\",\n    leftIcon: leftIcon ? leftIcon : undefined,\n    rightIcon: \"external-link\",\n    style: {\n      borderTopLeftRadius: 0,\n      borderBottomLeftRadius: 0\n    },\n    href: formatEtherscanLink(ExplorerTXType.Account, [chainId, account]),\n    target: '_blank',\n    rel: 'noopener noreferrer'\n  }, ENSName || \"\".concat(shortenHex(account, 4))));\n}","map":null,"metadata":{},"sourceType":"module"}