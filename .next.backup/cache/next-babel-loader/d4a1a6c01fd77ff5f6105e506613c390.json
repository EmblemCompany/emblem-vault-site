{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { Flex, Text, Stack } from '@chakra-ui/core';\nimport Loader from 'react-loader';\nimport Refreshing from './Refreshing';\nimport { useRouter } from 'next/router';\nimport { useWeb3React } from '@web3-react/core';\nimport { useEffect, useState } from 'react';\nexport default function Stats() {\n  var _useRouter = useRouter(),\n      query = _useRouter.query;\n\n  var _useWeb3React = useWeb3React(),\n      account = _useWeb3React.account,\n      chainId = _useWeb3React.chainId; // const [vaults, setVaults] = useState([])\n\n\n  var _useState = useState({\n    loaded: false\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var _useState2 = useState(false),\n      loadingApi = _useState2[0],\n      setLoadingApi = _useState2[1]; // const [approving, setApproving] = useState(false)\n  // const [transfering, setTransfering] = useState(false)\n  // const [balance, setBalance] = useState(null)\n  // const [address, setAddress] = useState(query.address)\n  // const [experimental, setExperimental] = useState(query.experimental)\n  // const [decimals, setDecimals] = useState(null)\n  // const [allowance, setAllowance] = useState(null)\n  // const [transferChain, setTransferChain] = useState(0)\n  // const [covalApprovedFor, setIsCovalApproved] = useState(0)\n  // const [hash, setHash] = useState(null)\n  // const [swapAmount, setSwapAmount] = useState(0)\n  // const [isInvalid, setIsInvalid] = useState(false)\n  // const [transferChainChanged, setTransferChainChanged] = useState(true)\n  // const handlerContract = useContract(contractAddresses.vaultHandler[chainId], contractAddresses.vaultHandlerAbi, true)\n  // const covalContract = useContract(contractAddresses.coval[chainId], contractAddresses.covalAbi, true)\n\n\n  // const transferToChain = async () => {\n  //   setTransfering(true)\n  //   ;(handlerContract as Contract)\n  //   .transferToChain(transferChain, swapAmount.toString())\n  //   .then(({ hash }: { hash: string }) => {\n  //     setHash(hash)\n  //   })\n  //   .catch((error: ErrorWithCode) => {\n  //     if (error?.code == 4001) {\n  //       setTransfering(false)\n  //     }\n  //   })\n  // }\n  // const getContractStates = async () => {\n  //   setHash(null)\n  //   setDecimals(await covalContract.decimals())\n  //   setAllowance(\n  //     await covalContract\n  //       .allowance(account, contractAddresses.vaultHandler[chainId])\n  //       .then((balance: { toString: () => string }) => balance.toString())\n  //   )\n  //   setBalance(await covalContract.balanceOf(account).then((balance: { toString: () => string }) => balance.toString()))\n  //   if (Number(allowance) >= Number(0)) {      \n  //     setIsCovalApproved(allowance)\n  //   }\n  //   setState({ loaded: true })\n  // }\n  // const approveCovalFlow = () => {\n  //   setApproving(true)\n  //   ;(covalContract as Contract)\n  //     .approve(contractAddresses.vaultHandler[chainId], 10000000 * Math.pow(10, +decimals) )\n  //     .then(({ hash }: { hash: string }) => {\n  //       setHash(hash)\n  //     })\n  //     .catch((error: ErrorWithCode) => {\n  //       if (error?.code == 4001) {\n  //         setApproving(false)\n  //       }\n  //     })\n  // }\n  // const getTransferLogs = async () =>{\n  //   console.log(\"getting logs\")\n  //   fetch(EMBLEM_API + '/web3/transfersOut', {\n  //     method: 'GET',\n  //     headers: {\n  //       'Content-Type': 'application/json',\n  //       service: 'evmetadata',\n  //       chainid: chainId.toString()\n  //     }\n  //   }).then(async function (response) {\n  //     console.log(\"doing transfers\")\n  //     fetch(EMBLEM_API + '/doTransfers', {\n  //       method: 'GET',\n  //       headers: {\n  //         'Content-Type': 'application/json',\n  //         service: 'evmetadata',\n  //         chainid: chainId.toString()\n  //       }\n  //     }).then(async function (response) {\n  //       getContractStates()\n  //     })\n  //   })\n  // }\n  // function SwapText({ children, ...rest }: BoxProps): JSX.Element {\n  //   return (\n  //     <Text fontSize=\"2xl\" lineHeight={1} py=\"0.3rem\" {...rest}>\n  //       {children}\n  //     </Text>\n  //   )\n  // }\n  // const [acct, setAcct] = useState('')\n  // useEffect(() => {\n  //   if (account && acct != account) {\n  //     setAcct(account)\n  //     setState({ loaded: false })\n  //     getContractStates()\n  //   }\n  // }, [account, acct])\n  // const [chain, setChain] = useState(chainId)\n  // useEffect(() => {\n  //   if (chainId && chain != chainId) {\n  //     setChain(chainId)\n  //     setState({ loaded: false })\n  //     getContractStates()\n  //   }\n  // }, [chainId, chain])\n  useEffect(function () {\n    if (state.loaded == false && !loadingApi) {\n      setLoadingApi(false);\n      getStats();\n    }\n  }, []);\n\n  var getStats = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              console.log(\"getting logs\");\n              fetch('https://osautomate.herokuapp.com/earnings', {\n                method: 'GET',\n                headers: {\n                  'Content-Type': 'application/json'\n                }\n              }).then( /*#__PURE__*/function () {\n                var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(response) {\n                  var jsonData;\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          setLoadingApi(false);\n                          setState({\n                            loaded: true\n                          });\n                          _context.next = 4;\n                          return response.json();\n\n                        case 4:\n                          jsonData = _context.sent;\n                          console.log(jsonData);\n\n                        case 6:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n\n                return function (_x) {\n                  return _ref2.apply(this, arguments);\n                };\n              }());\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function getStats() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Loader, {\n    loaded: state.loaded\n  }, loadingApi ? __jsx(Refreshing, null) : '', __jsx(Flex, {\n    w: \"100%\",\n    justify: \"center\",\n    mt: 10\n  }, __jsx(Stack, {\n    align: \"center\"\n  }, __jsx(Text, null, \"Statistics go here\"))));\n}","map":null,"metadata":{},"sourceType":"module"}