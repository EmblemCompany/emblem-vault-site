{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/shannoncode/repo/Emblem.Currentwork/emblem-vault-site/components/CreateCurated.tsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { FormControl, FormLabel, Stack, Tabs, TabList, TabPanels, Tab, TabPanel, Box, Flex, Button, ButtonGroup, Divider, Select, Image, Input } from '@chakra-ui/core';\nimport { useRouter } from 'next/router';\nimport Loader from 'react-loader';\nimport { useWeb3React } from '@web3-react/core';\nimport { useEffect, useState } from 'react';\nimport { curatedContracts, curatedAssets, EMBLEM_V2_API, ORD_API } from '../constants';\nvar tokenId = null;\nexport default function CreateCurated(props) {\n  _s();\n\n  var _this = this;\n\n  var _useRouter = useRouter(),\n      query = _useRouter.query;\n\n  var _useState = useState(0),\n      tabIndex = _useState[0],\n      setTabIndex = _useState[1];\n\n  var _useWeb3React = useWeb3React(),\n      account = _useWeb3React.account,\n      chainId = _useWeb3React.chainId;\n\n  var _useState2 = useState(account || ''),\n      vaultAddress = _useState2[0],\n      setVaultAddress = _useState2[1];\n\n  var _useState3 = useState({\n    loaded: true,\n    \"private\": false\n  }),\n      state = _useState3[0],\n      setState = _useState3[1];\n\n  var _useState4 = useState({\n    name: '',\n    image: ''\n  }),\n      targetAsset = _useState4[0],\n      setTargetAsset = _useState4[1];\n\n  var _useState5 = useState({\n    name: '',\n    chain: '',\n    image: function image(data) {\n      return '';\n    },\n    allowed: function allowed(data) {\n      return false;\n    },\n    allowedName: function allowedName(data) {\n      return false;\n    }\n  }),\n      targetContract = _useState5[0],\n      setTargetContract = _useState5[1];\n\n  var _useState6 = useState(query.curated == 't'),\n      enableCurated = _useState6[0],\n      setEnableCurated = _useState6[1];\n\n  var handleSubmit = function handleSubmit(evt) {\n    evt.preventDefault();\n    setState({\n      loaded: false,\n      \"private\": state[\"private\"]\n    });\n    var body = {\n      fromAddress: account,\n      toAddress: vaultAddress,\n      chainId: chainId,\n      experimental: true,\n      targetContract: targetContract,\n      targetAsset: targetAsset\n    };\n    var apiSuffix = '/create-curated';\n    fetch(EMBLEM_V2_API + apiSuffix, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        service: 'evmetadata'\n      },\n      body: JSON.stringify(body)\n    }).then( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(response) {\n        var body;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                setState({\n                  loaded: true,\n                  \"private\": state[\"private\"]\n                });\n                _context.next = 3;\n                return response.json();\n\n              case 3:\n                body = _context.sent;\n                tokenId = body.data.tokenId || body.data.targetContract.tokenId;\n                setTimeout(function () {\n                  location.href = location.origin + '/nft2?id=' + tokenId;\n                }, 500);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n  };\n\n  function getOrdinalRecord(num, cb) {\n    fetch(ORD_API + 'num/' + num, {\n      method: 'GET'\n    }).then( /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(response) {\n        var body;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return response.json();\n\n              case 2:\n                body = _context2.sent;\n                return _context2.abrupt(\"return\", cb(body.data[0]));\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n  }\n\n  var _useState7 = useState(''),\n      acct = _useState7[0],\n      setAcct = _useState7[1];\n\n  useEffect(function () {\n    if (account && acct != account) {\n      setAcct(account);\n      setVaultAddress(account);\n    }\n  }, [account, acct]);\n\n  function handleKeyUpNameInput(e) {\n    console.log(e.target.value);\n    var name = \"\".concat(targetContract.name, \" \").concat(e.target.value);\n\n    if (targetContract.allowedName(name)) {\n      getOrdinalRecord(e.target.value, function (ordRecord) {\n        console.log('ordRecord', ordRecord);\n\n        if (targetContract.allowed(ordRecord)) {\n          setTargetAsset({\n            name: name,\n            image: targetContract.image(ordRecord)\n          });\n        }\n      });\n    } else {\n      setTargetAsset({\n        name: '',\n        image: ''\n      });\n    }\n  }\n\n  return __jsx(Loader, {\n    loaded: state.loaded,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  }, __jsx(Flex, {\n    width: \"full\",\n    align: \"center\",\n    justifyContent: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }, __jsx(Box, {\n    maxW: \"sm\",\n    borderWidth: \"1px\",\n    rounded: \"lg\",\n    overflow: \"hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, __jsx(Tabs, {\n    defaultIndex: 0,\n    index: tabIndex,\n    onChange: function onChange(index) {\n      return setTabIndex(index);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, __jsx(TabList, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, __jsx(Tab, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 15\n    }\n  }, \"Create Curated Vault\")), __jsx(TabPanels, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, __jsx(TabPanel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 15\n    }\n  }, __jsx(Stack, {\n    direction: \"column\",\n    align: \"center\",\n    spacing: \"2rem\",\n    flexGrow: 1,\n    justifyContent: \"center\",\n    px: \"2rem\",\n    py: \"2rem\",\n    shouldWrapChildren: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }, __jsx(Stack, {\n    direction: \"row\",\n    align: \"flex-start\",\n    spacing: \"0rem\",\n    flexWrap: \"wrap\",\n    shouldWrapChildren: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 19\n    }\n  }, __jsx(FormControl, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 21\n    }\n  }, __jsx(Box, {\n    p: 1,\n    rounded: \"lg\",\n    overflow: \"hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 23\n    }\n  }, __jsx(Stack, {\n    align: \"center\",\n    p: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 25\n    }\n  }, __jsx(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 27\n    }\n  }), __jsx(FormLabel, {\n    htmlFor: \"project-selector\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 27\n    }\n  }, \"Choose Curated Collection\"), __jsx(Select, {\n    id: \"project-selector\",\n    w: \"100%\",\n    value: targetContract.name,\n    onChange: function onChange(e) {\n      var contractData = curatedContracts.filter(function (item) {\n        return item.name == e.target.value;\n      })[0];\n      console.log('------', contractData);\n      setTargetContract(contractData);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 27\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 29\n    }\n  }, \"---Choose Project---\"), curatedContracts.map(function (project) {\n    return enableCurated || project.name == 'Emblem Test' || project.name == 'Rare Pepe' ? __jsx(\"option\", {\n      value: project.name,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 33\n      }\n    }, project.name) : null;\n  })), targetContract.name && targetContract[\"_type\"] !== 'erc721' ? __jsx(Select, {\n    id: \"asset-selector\",\n    w: \"100%\",\n    value: targetAsset.name,\n    onChange: function onChange(e) {\n      setTargetAsset(curatedAssets[targetContract.chain][targetContract.name].filter(function (item) {\n        return item.name == e.target.value;\n      })[0]);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 31\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 33\n    }\n  }, \"---Choose One---\"), curatedAssets[targetContract.chain][targetContract.name] ? curatedAssets[targetContract.chain][targetContract.name].map(function (asset) {\n    return __jsx(\"option\", {\n      value: asset.name,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 37\n      }\n    }, asset.name);\n  }) : null) : targetContract.name && targetContract[\"_type\"] == 'erc721' ? __jsx(Input, {\n    onKeyUp: function onKeyUp(e) {\n      handleKeyUpNameInput(e);\n    },\n    w: \"100%\",\n    placeholder: 'Inscription Number',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 31\n    }\n  }) : null, targetAsset.name && targetAsset.image ? __jsx(Image, {\n    p: \"20px\",\n    h: \"100%\",\n    className: \"d-block w-100\",\n    src: targetAsset.image,\n    width: \"250px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 35\n    }\n  }) : null)))), __jsx(Stack, {\n    direction: \"row\",\n    align: \"flex-start\",\n    spacing: \"0rem\",\n    flexWrap: \"wrap\",\n    shouldWrapChildren: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 19\n    }\n  }, __jsx(ButtonGroup, {\n    spacing: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 21\n    }\n  }, !account ? __jsx(Button, {\n    isDisabled: true,\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 25\n    }\n  }, \"No Wallet Connected!\") : __jsx(Button, {\n    isDisabled: !targetContract.allowed(targetAsset.name),\n    onClick: function onClick(e) {\n      handleSubmit(e);\n    },\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 25\n    }\n  }, \"Create \", targetContract.name.toString(), \" Vault\"))))))))));\n}\n\n_s(CreateCurated, \"YohHTsrelalkqFXpUEwF3FysOA0=\", false, function () {\n  return [useRouter, useWeb3React];\n});\n\n_c = CreateCurated;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateCurated\");","map":{"version":3,"sources":["/Users/shannoncode/repo/Emblem.Currentwork/emblem-vault-site/components/CreateCurated.tsx"],"names":["FormControl","FormLabel","Stack","Tabs","TabList","TabPanels","Tab","TabPanel","Box","Flex","Button","ButtonGroup","Divider","Select","Image","Input","useRouter","Loader","useWeb3React","useEffect","useState","curatedContracts","curatedAssets","EMBLEM_V2_API","ORD_API","tokenId","CreateCurated","props","query","tabIndex","setTabIndex","account","chainId","vaultAddress","setVaultAddress","loaded","state","setState","name","image","targetAsset","setTargetAsset","chain","data","allowed","allowedName","targetContract","setTargetContract","curated","enableCurated","setEnableCurated","handleSubmit","evt","preventDefault","body","fromAddress","toAddress","experimental","apiSuffix","fetch","method","headers","service","JSON","stringify","then","response","json","setTimeout","location","href","origin","getOrdinalRecord","num","cb","acct","setAcct","handleKeyUpNameInput","e","console","log","target","value","ordRecord","index","contractData","filter","item","map","project","asset","toString"],"mappings":"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","sourcesContent":["import {\n  FormControl,\n  FormLabel,\n  Stack,\n  Tabs,\n  TabList,\n  TabPanels,\n  Tab,\n  TabPanel,\n  Text,\n  Box,\n  Flex,\n  Button,\n  ButtonGroup,\n  Divider,\n  Select,\n  Image,\n  Input\n} from '@chakra-ui/core'\nimport { useRouter } from 'next/router'\nimport Loader from 'react-loader'\nimport { useWeb3React } from '@web3-react/core'\nimport { useEffect, useState } from 'react'\nimport { EMBLEM_API, curatedContracts, curatedAssets, EMBLEM_V2_API, ORD_API } from '../constants'\n\nlet tokenId = null\n\nexport default function CreateCurated(props: any) {\n  const { query } = useRouter()\n  const [tabIndex, setTabIndex] = useState(0)\n  const { account, chainId } = useWeb3React()\n  const [vaultAddress, setVaultAddress] = useState(account || '')\n  const [state, setState] = useState({ loaded: true, private: false })\n  const [targetAsset, setTargetAsset] = useState({name: '', image: ''})\n  const [targetContract, setTargetContract] = useState({name: '', chain: '', image:(data)=>{return ''}, allowed: (data)=>{return false}, allowedName: (data)=>{return false}})\n  const [enableCurated, setEnableCurated] = useState(query.curated == 't')\n\n  const handleSubmit = (evt: { preventDefault: () => void }) => {\n    evt.preventDefault()\n\n    setState({ loaded: false, private: state.private })\n    let body = {\n      fromAddress: account,\n      toAddress: vaultAddress,\n      chainId: chainId,\n      experimental: true,\n      targetContract: targetContract,\n      targetAsset: targetAsset\n    }\n    let apiSuffix = '/create-curated'\n    fetch(EMBLEM_V2_API + apiSuffix, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        service: 'evmetadata',\n      },\n      body: JSON.stringify(body),\n    }).then(async function (response) {\n      setState({ loaded: true, private: state.private })\n      let body = await response.json()\n      tokenId = body.data.tokenId || body.data.targetContract.tokenId\n      setTimeout(() => {\n        location.href = location.origin + '/nft2?id=' + tokenId\n      }, 500)\n    })\n  }\n\n  function getOrdinalRecord(num, cb){\n    fetch(ORD_API + 'num/' + num, {\n      method: 'GET',\n    }).then(async function (response) {\n      let body = await response.json()\n      return cb(body.data[0])\n    })    \n  }\n\n  const [acct, setAcct] = useState('')\n\n  useEffect(() => {\n    if (account && acct != account) {\n      setAcct(account)\n      setVaultAddress(account)\n    }\n  }, [account, acct])\n\n  function handleKeyUpNameInput(e){\n    console.log(e.target.value)\n    let name = `${targetContract.name} ${e.target.value}`\n    if (targetContract.allowedName(name)) {\n      getOrdinalRecord(e.target.value, (ordRecord)=>{\n        console.log('ordRecord', ordRecord)\n        if (targetContract.allowed(ordRecord)){\n          setTargetAsset({name: name, image: targetContract.image(ordRecord)})\n        }        \n      })\n      \n    } else {\n      setTargetAsset({name: '', image: ''})\n    }\n  }\n\n  return (\n    <Loader loaded={state.loaded}>\n      <Flex width=\"full\" align=\"center\" justifyContent=\"center\">\n        <Box maxW=\"sm\" borderWidth=\"1px\" rounded=\"lg\" overflow=\"hidden\">\n          <Tabs defaultIndex={0} index={tabIndex} onChange={(index) => setTabIndex(index)}>\n            <TabList>\n              <Tab>Create Curated Vault</Tab>\n            </TabList>\n\n            <TabPanels>\n              <TabPanel>\n                <Stack\n                  direction=\"column\"\n                  align=\"center\"\n                  spacing=\"2rem\"\n                  flexGrow={1}\n                  justifyContent=\"center\"\n                  px=\"2rem\"\n                  py=\"2rem\"\n                  shouldWrapChildren\n                >\n                  <Stack direction=\"row\" align=\"flex-start\" spacing=\"0rem\" flexWrap=\"wrap\" shouldWrapChildren>\n                    <FormControl>\n                      \n                      <Box p={1} rounded=\"lg\" overflow=\"hidden\">\n                        <Stack align=\"center\" p={1}>\n                          <Divider />\n                          <FormLabel htmlFor=\"project-selector\">Choose Curated Collection</FormLabel>\n                          <Select id=\"project-selector\" w=\"100%\" value={targetContract.name}\n                            onChange={(e)=>{\n                              let contractData:any = curatedContracts.filter(item=>{return item.name == e.target.value})[0]\n                              console.log('------', contractData)\n                              setTargetContract(contractData)\n                            }}\n                          >\n                            <option value=\"\" >---Choose Project---</option>\n                            {curatedContracts.map(project=>{\n                              \n                              return enableCurated || project.name == 'Emblem Test' || project.name == 'Rare Pepe'? (\n                                <option value={project.name} >{project.name}</option>\n                              ) : null\n                            })}\n                            \n                          </Select>\n                          {targetContract.name && targetContract[\"_type\"] !== 'erc721' ? (\n                              <Select id=\"asset-selector\" w=\"100%\" value={targetAsset.name}\n                                onChange={(e)=>{\n                                  setTargetAsset(curatedAssets[targetContract.chain][targetContract.name].filter(item=>{return item.name == e.target.value})[0])\n                                }}\n                              >\n                                <option value=\"\" >---Choose One---</option>\n                                {curatedAssets[targetContract.chain][targetContract.name] ? curatedAssets[targetContract.chain][targetContract.name].map(asset=>{\n                                  return (\n                                    <option value={asset.name} >{asset.name}</option>\n                                  )\n                                }): null}\n                                \n                              </Select>\n                            ) : targetContract.name && targetContract[\"_type\"] == 'erc721'? (\n                              <Input onKeyUp={(e)=>{ handleKeyUpNameInput(e)}}  w=\"100%\" placeholder={'Inscription Number'} ></Input>\n                            ):null}\n                            \n                            {targetAsset.name && targetAsset.image? (\n                                  <Image\n                                    p={\"20px\"}\n                                    h={\"100%\"}\n                                    className={\"d-block w-100\"}\n                                    src={targetAsset.image}\n                                    width=\"250px\"\n                                  />\n                                ): null}\n                        </Stack>\n                      </Box>\n                    </FormControl>\n                  </Stack>\n                  {/* <Stack direction=\"row\" align=\"flex-start\" spacing=\"0rem\" flexWrap=\"wrap\" shouldWrapChildren>\n                    {targetAsset.name? (\n                      <Text>Confirm: {targetAsset.name.toString()}</Text>\n                    ): null}\n                    \n                  </Stack> */}\n                  <Stack direction=\"row\" align=\"flex-start\" spacing=\"0rem\" flexWrap=\"wrap\" shouldWrapChildren>\n                    \n                    <ButtonGroup spacing={4}>\n                      {!account ? (\n                        <Button isDisabled type=\"submit\">\n                          No Wallet Connected!\n                        </Button>\n                      ) : (\n                        <Button\n                        isDisabled={!targetContract.allowed(targetAsset.name)}\n                          onClick={(e)=>{                            \n                            handleSubmit(e)\n                          }} \n                          type=\"submit\">\n                          Create {targetContract.name.toString()} Vault\n                        </Button>\n                      )}\n                    </ButtonGroup>\n                  </Stack>\n\n                </Stack>\n              </TabPanel>\n            </TabPanels>\n          </Tabs>\n        </Box>\n      </Flex>\n    </Loader>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}