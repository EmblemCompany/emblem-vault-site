{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/Users/shannoncode/repo/Emblem.Currentwork/emblem-vault-site/components/Create.tsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { FormControl, FormLabel, FormHelperText, FormErrorMessage, Input, Stack, Tabs, TabList, TabPanels, Tab, TabPanel, Box, Flex, RadioGroup, Radio, Textarea, Button, ButtonGroup, Text, Divider, Alert, AlertIcon, Collapse, useDisclosure, Select } from '@chakra-ui/core';\nimport Loader from 'react-loader';\nimport { useWeb3React } from '@web3-react/core';\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/router';\nimport { TransactionToast } from './TransactionToast';\nimport { EMBLEM_API, contractAddresses } from '../constants';\nimport { useContract } from '../hooks';\nimport { isETHAddress } from '../utils';\nimport Embed from './Embed';\nimport gfm from 'remark-gfm'; // react-doka\n\nimport { DokaImageEditorModal } from 'react-doka';\nimport transakSDK from '@transak/transak-sdk'; // doka\n\nimport { // editor\nlocale_en_gb, createDefaultImageReader, createDefaultImageWriter, // plugins\nsetPlugins, plugin_crop, plugin_crop_locale_en_gb, plugin_finetune, plugin_finetune_locale_en_gb, plugin_finetune_defaults, plugin_filter, plugin_filter_locale_en_gb, plugin_filter_defaults, plugin_annotate, plugin_annotate_locale_en_gb, markup_editor_defaults, markup_editor_locale_en_gb } from 'doka';\nimport ReactMarkdown from 'react-markdown';\nsetPlugins(plugin_crop, plugin_finetune, plugin_filter, plugin_annotate);\n\nvar editorDefaults = _objectSpread(_objectSpread(_objectSpread(_objectSpread({\n  imageReader: createDefaultImageReader(),\n  imageWriter: createDefaultImageWriter()\n}, plugin_finetune_defaults), plugin_filter_defaults), markup_editor_defaults), {}, {\n  locale: _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, locale_en_gb), plugin_crop_locale_en_gb), plugin_finetune_locale_en_gb), plugin_filter_locale_en_gb), plugin_annotate_locale_en_gb), markup_editor_locale_en_gb)\n});\n\nvar tokenId,\n    cipherTextHash,\n    nonce,\n    signature = null;\nvar mintPassword = null;\nexport default function Create(props) {\n  _s();\n\n  // modal\n  var _useState = useState(false),\n      modalVisible = _useState[0],\n      setModalVisible = _useState[1];\n\n  var _useState2 = useState(''),\n      modalResult = _useState2[0],\n      setModalResult = _useState2[1];\n\n  var _useState3 = useState(true),\n      showEditorButton = _useState3[0],\n      setShowEditorButton = _useState3[1];\n\n  var _useDisclosure = useDisclosure(),\n      isOpen = _useDisclosure.isOpen,\n      onToggle = _useDisclosure.onToggle;\n\n  var _useRouter = useRouter(),\n      query = _useRouter.query;\n\n  var _useState4 = useState(query.image ? 2 : query.to || query.title || query.description ? 1 : 0),\n      tabIndex = _useState4[0],\n      setTabIndex = _useState4[1];\n\n  var _useState5 = useState(query.batchId ? query.batchId.toString() : null),\n      batchId = _useState5[0],\n      setBatchId = _useState5[1];\n\n  var _useWeb3React = useWeb3React(),\n      account = _useWeb3React.account,\n      chainId = _useWeb3React.chainId;\n\n  var _useState6 = useState(query.to || account || ''),\n      vaultAddress = _useState6[0],\n      setVaultAddress = _useState6[1];\n\n  var _useState7 = useState(query[\"public\"] == 'f' ? 'Private' : 'Public'),\n      vaultPubPriv = _useState7[0],\n      setVaultPubPriv = _useState7[1];\n\n  var _useState8 = useState(query.title || ''),\n      vaultName = _useState8[0],\n      setVaultName = _useState8[1];\n\n  var _useState9 = useState(query.description || ''),\n      vaultDesc = _useState9[0],\n      setVaultDesc = _useState9[1];\n\n  var _useState10 = useState(query.image || ''),\n      vaultImage = _useState10[0],\n      setVaultImage = _useState10[1];\n\n  var _useState11 = useState(query.ownedUrl || ''),\n      ownedImage = _useState11[0],\n      setOwnedImage = _useState11[1];\n\n  var _useState12 = useState(''),\n      password = _useState12[0],\n      setPassword = _useState12[1];\n\n  var _useState13 = useState(false),\n      isCovalApproved = _useState13[0],\n      setIsCovalApproved = _useState13[1];\n\n  var _useState14 = useState({\n    loaded: true,\n    \"private\": false\n  }),\n      state = _useState14[0],\n      setState = _useState14[1];\n\n  var _useState15 = useState(null),\n      hash = _useState15[0],\n      setHash = _useState15[1];\n\n  var _useState16 = useState(true),\n      experimental = _useState16[0],\n      setExperimental = _useState16[1];\n\n  var _useState17 = useState(false),\n      showPreVaultMsg = _useState17[0],\n      setShowPreVaultMsg = _useState17[1];\n\n  var _useState18 = useState(false),\n      showMakingVaultMsg = _useState18[0],\n      setShowMakingVaultMsg = _useState18[1];\n\n  var _useState19 = useState(null),\n      decimals = _useState19[0],\n      setDecimals = _useState19[1];\n\n  var _useState20 = useState(null),\n      allowance = _useState20[0],\n      setAllowance = _useState20[1];\n\n  var _useState21 = useState(null),\n      balance = _useState21[0],\n      setBalance = _useState21[1];\n\n  var _useState22 = useState(null),\n      price = _useState22[0],\n      setPrice = _useState22[1];\n\n  var _useState23 = useState(false),\n      creating = _useState23[0],\n      setCreating = _useState23[1];\n\n  var _useState24 = useState(false),\n      approving = _useState24[0],\n      setApproving = _useState24[1];\n\n  var _useState25 = useState(''),\n      vaultKey = _useState25[0],\n      setVaultKey = _useState25[1];\n\n  var _useState26 = useState(''),\n      vaultValue = _useState26[0],\n      setVaultValue = _useState26[1];\n\n  var _useState27 = useState(query.image ? 'embed' : \"upload\"),\n      vaultType = _useState27[0],\n      setVaultType = _useState27[1];\n\n  var _useState28 = useState(query.image ? true : false),\n      showEmbed = _useState28[0],\n      setShowEmbed = _useState28[1];\n\n  var handlerContract = useContract(contractAddresses.vaultHandler[chainId], contractAddresses.vaultHandlerAbi, true);\n  var covalContract = useContract(contractAddresses.coval[chainId], contractAddresses.covalAbi, true);\n  var transak;\n\n  var initializeTransak = function initializeTransak(address, coin) {\n    transak = new transakSDK({\n      apiKey: 'e8bed1bd-6844-4eb1-973a-7a11a48fafab',\n      // Your API Key\n      environment: 'PRODUCTION',\n      // STAGING/PRODUCTION\n      defaultCryptoCurrency: coin || 'ETH',\n      walletAddress: address || '',\n      // Your customer's wallet address\n      themeColor: '000000',\n      // App theme color\n      fiatCurrency: 'USD',\n      // INR/GBP\n      // fiatAmount: 350,\n      email: '',\n      // Your customer's email address\n      redirectURL: '',\n      // paymentMethod: 'neft_bank_transfer',\n      hostURL: window.location.origin,\n      widgetHeight: '550px',\n      widgetWidth: '450px'\n    }); // To get all the events\n\n    transak.on(transak.ALL_EVENTS, function (data) {\n      console.log(data);\n    }); // This will trigger when the user marks payment is made.\n\n    transak.on(transak.EVENTS.TRANSAK_ORDER_SUCCESSFUL, function (orderData) {\n      console.log(orderData);\n      transak.close();\n    });\n    transak.init();\n  };\n\n  var getContractStates = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.t0 = setDecimals;\n              _context.next = 3;\n              return covalContract.decimals();\n\n            case 3:\n              _context.t1 = _context.sent;\n              (0, _context.t0)(_context.t1);\n              _context.t2 = setAllowance;\n              _context.next = 8;\n              return covalContract.allowance(account, contractAddresses.vaultHandler[chainId]).then(function (balance) {\n                return balance.toString();\n              });\n\n            case 8:\n              _context.t3 = _context.sent;\n              (0, _context.t2)(_context.t3);\n              _context.t4 = setBalance;\n              _context.next = 13;\n              return covalContract.balanceOf(account).then(function (balance) {\n                return balance.toString();\n              });\n\n            case 13:\n              _context.t5 = _context.sent;\n              (0, _context.t4)(_context.t5);\n              _context.t6 = setPrice;\n              _context.next = 18;\n              return handlerContract.price().then(function (balance) {\n                return balance.toString();\n              });\n\n            case 18:\n              _context.t7 = _context.sent;\n              (0, _context.t6)(_context.t7);\n\n              // console.log(\n              //   'balance',\n              //   balance,\n              //   'allowance',\n              //   allowance,\n              //   'price',\n              //   price,\n              //   Number(allowance) >= Number(price),\n              //   Number(balance) > Number(price)\n              // )\n              if (Number(allowance) >= Number(price)) {\n                setIsCovalApproved(true);\n              } else {\n                setIsCovalApproved(false);\n              }\n\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getContractStates() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var fireMetaMask = function fireMetaMask() {\n    console.log(\"fire?\");\n    setCreating(true) // console.log(vaultAddress, tokenId, cipherTextHash, nonce, signature)\n    // if (chainId === 137 || chainId === 1) {\n    ;\n    handlerContract.buyWithSignature(vaultAddress, tokenId, cipherTextHash, nonce, signature).then(function (_ref2) {\n      var hash = _ref2.hash;\n      setTimeout(function () {\n        setHash(hash); // setCreating(false)\n\n        setShowMakingVaultMsg(true);\n      }, 100); // Solving State race condition where transaction watcher wouldn't notice we were creating\n    })[\"catch\"](function (error) {\n      // if (error?.code !== 4001) {\n      setCreating(false);\n      setShowPreVaultMsg(false);\n      checkLiveliness(tokenId, function () {\n        location.href = location.origin + '/nft?id=' + tokenId;\n      }); // } else {\n      //   setCreating(false)\n      //   setShowPreVaultMsg(false)\n      // }\n    }); // } else {\n    //   ;(handlerContract as Contract)\n    //   .buyWithPaymentOnly(vaultAddress, tokenId, mintPassword)\n    //   .then(({ hash }: { hash: string }) => {\n    //     setTimeout(() => {\n    //       setHash(hash)\n    //       // setCreating(false)\n    //       setShowMakingVaultMsg(true)\n    //     }, 100) // Solving State race condition where transaction watcher wouldn't notice we were creating\n    //   })\n    //   .catch((error: ErrorWithCode) => {\n    //     if (error?.code !== 4001) {\n    //       console.log(`tx failed.`, error)\n    //     } else {\n    //       setCreating(false)\n    //       setShowPreVaultMsg(false)\n    //     }\n    //   })\n    // }\n  };\n\n  var approveCovalFlow = function approveCovalFlow() {\n    setApproving(true);\n    covalContract.approve(contractAddresses.vaultHandler[chainId], '100000000000000').then(function (_ref3) {\n      var hash = _ref3.hash;\n      setHash(hash);\n    })[\"catch\"](function (error) {\n      if ((error === null || error === void 0 ? void 0 : error.code) == 4001) {\n        setApproving(false);\n      }\n    });\n  };\n\n  var checkLiveliness = function checkLiveliness(tokenId, cb) {\n    fetch(EMBLEM_API + '/liveliness?cc=t', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        service: 'evmetadata',\n        chainid: chainId.toString()\n      },\n      // We convert the React state to JSON and send it as the POST body\n      body: JSON.stringify({\n        tokenId: tokenId\n      })\n    }).then( /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(response) {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return response.json();\n\n              case 2:\n                data = _context2.sent;\n                console.log(\"Liveliness check\", data);\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x) {\n        return _ref4.apply(this, arguments);\n      };\n    }());\n    return cb();\n  };\n\n  var handleSubmit = function handleSubmit(evt) {\n    evt.preventDefault(); // if (service !== 'kms') {\n    //   return alert('incorrect password')\n    // }\n\n    setState({\n      loaded: false,\n      \"private\": state[\"private\"]\n    });\n    var body = {\n      fromAddress: account,\n      toAddress: vaultAddress,\n      description: vaultDesc,\n      name: vaultName,\n      ownedImage: ownedImage,\n      image: vaultImage,\n      chainId: chainId,\n      \"private\": state[\"private\"],\n      password: password || '',\n      values: [],\n      experimental: true\n    };\n\n    if (vaultKey && vaultValue) {\n      body.values.push({\n        \"key\": vaultKey,\n        value: vaultValue\n      });\n    }\n\n    if (batchId) {\n      body.batchId = batchId;\n    }\n\n    console.log(JSON.stringify(body));\n    var apiSuffix = '/mint3'; //(chainId == 137 || chainId == 1) ? '/mint3' : '/mint'\n\n    fetch(EMBLEM_API + apiSuffix, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        service: 'evmetadata'\n      },\n      // We convert the React state to JSON and send it as the POST body\n      body: JSON.stringify(body)\n    }).then( /*#__PURE__*/function () {\n      var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(response) {\n        var body;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                setState({\n                  loaded: true,\n                  \"private\": state[\"private\"]\n                });\n                _context3.next = 3;\n                return response.json();\n\n              case 3:\n                body = _context3.sent;\n                tokenId = body.data.tokenId; // console.log(body.data.nonce, body.data.signature, body.data.cipherTextHash)\n                // if (chainId === 137 || chainId == 1) {\n\n                nonce = body.data.nonce;\n                signature = body.data.signature;\n                cipherTextHash = body.data.cipherTextHash; // fireMetaMask()\n                // alert(\"Minting has been disabled temporarily while we work with Opensea to solve a bug where new vaults are not showing. Mint ONLY if you don't plan on using Opensea\")\n\n                setShowPreVaultMsg(false);\n                setTimeout(function () {\n                  checkLiveliness(tokenId, function () {\n                    location.href = location.origin + '/nft?id=' + tokenId;\n                  });\n                }, 500); // } else {\n                //   mintPassword = body.password\n                //   setHash(body.data.tx)\n                //   setShowPreVaultMsg(true)\n                // }\n\n              case 10:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function (_x2) {\n        return _ref5.apply(this, arguments);\n      };\n    }());\n  };\n\n  function previewFile() {\n    var preview = document.querySelector('#preview');\n    var inputelement = document.querySelector('input[type=file]'); //.files[0];\n\n    var reader = new FileReader();\n\n    if (inputelement.files[0].size > 5000000) {\n      delete inputelement.files;\n      return alert('File too large');\n    } else {// alert('under')\n    }\n\n    reader.addEventListener('load', function () {\n      var _reader$result;\n\n      // convert image file to base64 string\n      if (preview) preview.src = ((_reader$result = reader.result) === null || _reader$result === void 0 ? void 0 : _reader$result.toString()) || '';\n      if (preview) setVaultImage(preview.src);\n      setShowEditorButton(true);\n      setModalResult('');\n    }, false);\n\n    if (inputelement.files) {\n      reader.readAsDataURL(inputelement.files[0]);\n    }\n  }\n\n  var _useState29 = useState(''),\n      acct = _useState29[0],\n      setAcct = _useState29[1];\n\n  useEffect(function () {\n    if (account && acct != account) {\n      setAcct(account);\n      setVaultAddress(query.to || account);\n    }\n  }, [account, acct]);\n  useEffect(function () {\n    account && chainId ? getContractStates() : null;\n  });\n  return __jsx(Loader, {\n    loaded: state.loaded,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 5\n    }\n  }, __jsx(Flex, {\n    width: \"full\",\n    align: \"center\",\n    justifyContent: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 7\n    }\n  }, __jsx(Box, {\n    maxW: \"sm\",\n    borderWidth: \"1px\",\n    rounded: \"lg\",\n    overflow: \"hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 9\n    }\n  }, __jsx(Tabs, {\n    defaultIndex: 0,\n    index: tabIndex,\n    onChange: function onChange(index) {\n      return setTabIndex(index);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 11\n    }\n  }, __jsx(TabList, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 13\n    }\n  }, __jsx(Tab, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 15\n    }\n  }, \"Make\"), __jsx(Tab, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 15\n    }\n  }, \"My\"), __jsx(Tab, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 15\n    }\n  }, \"Vault\")), __jsx(TabPanels, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 13\n    }\n  }, __jsx(TabPanel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 15\n    }\n  }, __jsx(Stack, {\n    direction: \"column\",\n    align: \"center\",\n    spacing: \"2rem\",\n    flexGrow: 1,\n    justifyContent: \"center\",\n    px: \"2rem\",\n    py: \"2rem\",\n    shouldWrapChildren: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 17\n    }\n  }, __jsx(Stack, {\n    direction: \"row\",\n    align: \"flex-start\",\n    spacing: \"0rem\",\n    flexWrap: \"wrap\",\n    shouldWrapChildren: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 19\n    }\n  }, __jsx(FormControl, {\n    isRequired: true,\n    isInvalid: vaultAddress && !isETHAddress(vaultAddress),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 21\n    }\n  }, __jsx(FormLabel, {\n    htmlFor: \"owner-address\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 23\n    }\n  }, \"Vault Owner Address\"), __jsx(Input, {\n    type: \"text\",\n    id: \"owner-address\",\n    \"aria-describedby\": \"owner-helper-text\",\n    placeholder: \"0xdeadbeef\",\n    maxLength: 42,\n    value: vaultAddress,\n    onChange: function onChange(e) {\n      return setVaultAddress(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 23\n    }\n  }), __jsx(FormHelperText, {\n    id: \"owner-helper-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 23\n    }\n  }, \"What is the address of the first owner of this vault? Pro tip: When you connect a web3 wallet, this will populate automagically with your address.\"), __jsx(FormErrorMessage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 23\n    }\n  }, \"Address is not a valid ETH address\"))), __jsx(Stack, {\n    direction: \"row\",\n    align: \"flex-start\",\n    spacing: \"0rem\",\n    flexWrap: \"wrap\",\n    shouldWrapChildren: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 19\n    }\n  }, __jsx(FormControl, {\n    as: \"fieldset\",\n    isRequired: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 21\n    }\n  }, __jsx(FormLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 23\n    }\n  }, \"Public or Private?\"), __jsx(RadioGroup, {\n    id: \"pubpriv\",\n    defaultValue: vaultPubPriv,\n    onChange: function onChange(e) {\n      setVaultPubPriv(e.target.value);\n      setState({\n        loaded: state.loaded,\n        \"private\": e.target.value === 'Private'\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 23\n    }\n  }, __jsx(Radio, {\n    value: \"Public\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 25\n    }\n  }, \"Public\"), __jsx(Radio, {\n    value: \"Private\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 25\n    }\n  }, \"Private\")), __jsx(FormHelperText, {\n    id: \"email-helper-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 23\n    }\n  }, \"Do you want the contents and addresses to be password protected?\")), state[\"private\"] ? __jsx(FormControl, {\n    isRequired: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 433,\n      columnNumber: 23\n    }\n  }, __jsx(FormLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 25\n    }\n  }, \"Password\"), __jsx(Input, {\n    type: \"password\",\n    id: \"vault-password\",\n    onChange: function onChange(e) {\n      return setPassword(e.target.value);\n    },\n    \"aria-describedby\": \"password-helper-text\",\n    autoComplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 25\n    }\n  }), __jsx(FormHelperText, {\n    id: \"password-helper-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 25\n    }\n  }, \"Used to encrypt/decrypt\")) : ''), __jsx(Stack, {\n    direction: \"row\",\n    align: \"flex-start\",\n    spacing: \"0rem\",\n    flexWrap: \"wrap\",\n    shouldWrapChildren: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 448,\n      columnNumber: 19\n    }\n  }, __jsx(Button, {\n    onClick: function onClick() {\n      return setTabIndex(1);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 21\n    }\n  }, \"Next\")))), __jsx(TabPanel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 15\n    }\n  }, __jsx(Stack, {\n    direction: \"column\",\n    align: \"center\",\n    spacing: \"2rem\",\n    flexGrow: 1,\n    justifyContent: \"center\",\n    px: \"2rem\",\n    py: \"2rem\",\n    shouldWrapChildren: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 17\n    }\n  }, __jsx(Stack, {\n    direction: \"row\",\n    align: \"flex-start\",\n    spacing: \"0rem\",\n    flexWrap: \"wrap\",\n    shouldWrapChildren: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 19\n    }\n  }, __jsx(FormControl, {\n    isRequired: true,\n    isInvalid: vaultName && vaultName.length < 3 && vaultName.length > 200,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 21\n    }\n  }, __jsx(FormLabel, {\n    htmlFor: \"vault-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 23\n    }\n  }, \"Vault Name\"), __jsx(Input, {\n    type: \"text\",\n    id: \"vault-name\",\n    \"aria-describedby\": \"vault-name-text\",\n    minLength: 3,\n    maxLength: 200,\n    value: vaultName,\n    onChange: function onChange(e) {\n      return setVaultName(e.target.value);\n    },\n    autoComplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 23\n    }\n  }), __jsx(FormHelperText, {\n    id: \"vault-name-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 478,\n      columnNumber: 23\n    }\n  }, \"Give it some love so you can find it later.\"), __jsx(FormErrorMessage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 479,\n      columnNumber: 23\n    }\n  }, \"Name needs at least 3 characters. 200 is max.\"))), __jsx(Stack, {\n    direction: \"row\",\n    align: \"flex-start\",\n    spacing: \"0rem\",\n    flexWrap: \"wrap\",\n    shouldWrapChildren: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 482,\n      columnNumber: 19\n    }\n  }, __jsx(FormControl, {\n    isRequired: true,\n    isInvalid: vaultDesc && vaultDesc.length < 3 && vaultDesc.length > 1024,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 21\n    }\n  }, __jsx(FormLabel, {\n    htmlFor: \"vault-desc\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 484,\n      columnNumber: 23\n    }\n  }, \"Vault Description\"), __jsx(Textarea, {\n    id: \"vault-desc\",\n    size: \"lg\",\n    \"aria-describedby\": \"vault-desc-text\",\n    minLength: 3,\n    maxLength: 1024,\n    value: vaultDesc,\n    onChange: function onChange(e) {\n      return setVaultDesc(e.target.value);\n    },\n    autoComplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 485,\n      columnNumber: 23\n    }\n  }), __jsx(FormHelperText, {\n    id: \"vault-desc-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 495,\n      columnNumber: 23\n    }\n  }, \"Add some fluffy text to tell people what the point is!\"), __jsx(FormErrorMessage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 498,\n      columnNumber: 23\n    }\n  }, \"Description needs to be at least 3 characters. 1024 is max.\"))), __jsx(Button, {\n    onClick: onToggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 501,\n      columnNumber: 19\n    }\n  }, \"Include Encrypted Text In Vault\"), __jsx(Collapse, {\n    isOpen: isOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 19\n    }\n  }, experimental ? __jsx(Stack, {\n    direction: \"row\",\n    align: \"flex-start\",\n    spacing: \"0rem\",\n    flexWrap: \"wrap\",\n    shouldWrapChildren: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 504,\n      columnNumber: 23\n    }\n  }, __jsx(FormControl, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 505,\n      columnNumber: 23\n    }\n  }, __jsx(FormLabel, {\n    htmlFor: \"vault-key\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 506,\n      columnNumber: 25\n    }\n  }, \"Key\"), __jsx(Input, {\n    type: \"text\",\n    id: \"vault-key\",\n    \"aria-describedby\": \"vault-key-text\",\n    maxLength: 200,\n    value: vaultKey,\n    onChange: function onChange(e) {\n      return setVaultKey(e.target.value);\n    },\n    autoComplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 507,\n      columnNumber: 25\n    }\n  }), __jsx(FormHelperText, {\n    id: \"vault-key-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 516,\n      columnNumber: 25\n    }\n  }, \"Key Name (Public)\"), __jsx(FormErrorMessage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 517,\n      columnNumber: 25\n    }\n  }, \"---Some Error\")), __jsx(FormControl, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 519,\n      columnNumber: 23\n    }\n  }, __jsx(FormLabel, {\n    htmlFor: \"vault-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 520,\n      columnNumber: 25\n    }\n  }, \"Value\"), __jsx(Input, {\n    type: \"password\",\n    id: \"vault-value\",\n    \"aria-describedby\": \"vault-value-text\",\n    maxLength: 200,\n    value: vaultValue,\n    onChange: function onChange(e) {\n      return setVaultValue(e.target.value);\n    },\n    autoComplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 521,\n      columnNumber: 25\n    }\n  }), __jsx(FormHelperText, {\n    id: \"vault-value-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 530,\n      columnNumber: 25\n    }\n  }, \"Key Value (Encrypted)\"), __jsx(FormErrorMessage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 531,\n      columnNumber: 25\n    }\n  }, \"---Some Error\"))) : null), __jsx(Stack, {\n    direction: \"row\",\n    align: \"flex-start\",\n    spacing: \"0rem\",\n    flexWrap: \"wrap\",\n    shouldWrapChildren: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 536,\n      columnNumber: 19\n    }\n  }, __jsx(ButtonGroup, {\n    spacing: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 537,\n      columnNumber: 21\n    }\n  }, __jsx(Button, {\n    onClick: function onClick() {\n      return setTabIndex(0);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 538,\n      columnNumber: 23\n    }\n  }, \"Back\"), __jsx(Button, {\n    onClick: function onClick() {\n      return setTabIndex(2);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 539,\n      columnNumber: 23\n    }\n  }, \"Next\"))))), __jsx(TabPanel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 545,\n      columnNumber: 15\n    }\n  }, __jsx(Stack, {\n    direction: \"column\",\n    align: \"center\",\n    spacing: \"2rem\",\n    flexGrow: 1,\n    justifyContent: \"center\",\n    px: \"2rem\",\n    py: \"2rem\",\n    shouldWrapChildren: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 546,\n      columnNumber: 17\n    }\n  }, __jsx(Stack, {\n    direction: \"row\",\n    align: \"flex-start\",\n    spacing: \"0rem\",\n    flexWrap: \"wrap\",\n    shouldWrapChildren: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 556,\n      columnNumber: 19\n    }\n  }, __jsx(FormControl, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 557,\n      columnNumber: 21\n    }\n  }, __jsx(Box, {\n    p: 1,\n    rounded: \"lg\",\n    overflow: \"hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 559,\n      columnNumber: 23\n    }\n  }, __jsx(Stack, {\n    align: \"center\",\n    p: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 560,\n      columnNumber: 25\n    }\n  }, vaultType !== \"upload\" ? __jsx(React.Fragment, null, __jsx(FormLabel, {\n    htmlFor: \"vault-image-url\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 564,\n      columnNumber: 33\n    }\n  }, \"Embed Display URL\"), __jsx(Input, {\n    type: \"text\",\n    id: \"vault-image-url\",\n    \"aria-describedby\": \"vault-image-url-text\",\n    minLength: 3,\n    maxLength: 200,\n    value: vaultImage,\n    defaultValue: \"http://\",\n    onChange: function onChange(e) {\n      setVaultImage(e.target.value);\n      setShowEmbed(true);\n      console.log(\"showEmbed\", showEmbed);\n    },\n    autoComplete: \"off\",\n    w: 300,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 565,\n      columnNumber: 33\n    }\n  }), query.image && query.ownedUrl || !query.image ? __jsx(React.Fragment, null, __jsx(FormLabel, {\n    mt: 3,\n    htmlFor: \"owned-url\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 584,\n      columnNumber: 37\n    }\n  }, \"Optional URL For Vault Owner *\"), __jsx(Input, {\n    type: \"text\",\n    id: \"owned-url\",\n    \"aria-describedby\": \"owned-url-text\",\n    minLength: 3,\n    maxLength: 200,\n    value: ownedImage,\n    defaultValue: \"http://\",\n    onChange: function onChange(e) {\n      setOwnedImage(e.target.value);\n    },\n    autoComplete: \"off\",\n    w: 300,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 585,\n      columnNumber: 37\n    }\n  })) : null) : __jsx(React.Fragment, null, __jsx(FormLabel, {\n    htmlFor: \"vault-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 605,\n      columnNumber: 31\n    }\n  }, \"Vault Image\"), __jsx(\"input\", {\n    type: \"file\",\n    onChange: function onChange() {\n      return previewFile();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 606,\n      columnNumber: 31\n    }\n  }), __jsx(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 607,\n      columnNumber: 31\n    }\n  })), !query.image ? __jsx(React.Fragment, null, __jsx(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 613,\n      columnNumber: 31\n    }\n  }), __jsx(FormLabel, {\n    htmlFor: \"type-selector\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 614,\n      columnNumber: 31\n    }\n  }, \"Display Type\"), __jsx(Select, {\n    id: \"type-selector\",\n    w: \"100%\",\n    value: vaultType,\n    onChange: function onChange(e) {\n      setVaultType(e.target.value);\n      console.log(\"type\", vaultType);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 615,\n      columnNumber: 31\n    }\n  }, __jsx(\"option\", {\n    value: \"embed\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 621,\n      columnNumber: 33\n    }\n  }, \"Embed (url)\"), __jsx(\"option\", {\n    value: \"upload\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 622,\n      columnNumber: 33\n    }\n  }, \"Image (upload)\"))) : null, vaultType == \"upload\" ? __jsx(React.Fragment, null, __jsx(\"img\", {\n    id: \"preview\",\n    src: modalResult,\n    width: \"250\",\n    \"margin-top\": \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 631,\n      columnNumber: 35\n    }\n  }), modalVisible && __jsx(DokaImageEditorModal, _extends({}, editorDefaults, {\n    src: vaultImage,\n    onLoad: function onLoad(res) {\n      return console.log('load modal image', res);\n    },\n    onHide: function onHide() {\n      return setModalVisible(false);\n    },\n    onProcess: function onProcess(_ref6) {\n      var dest = _ref6.dest;\n      var reader = new FileReader();\n      reader.readAsDataURL(dest);\n\n      reader.onloadend = function () {\n        var _reader$result2;\n\n        var base64data = (_reader$result2 = reader.result) === null || _reader$result2 === void 0 ? void 0 : _reader$result2.toString();\n        setVaultImage(base64data);\n        setModalResult(URL.createObjectURL(dest));\n        setShowEditorButton(false);\n      };\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 635,\n      columnNumber: 37\n    }\n  })), showEditorButton && vaultImage ? __jsx(Button, {\n    mt: 2,\n    onClick: function onClick() {\n      return setModalVisible(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 659,\n      columnNumber: 35\n    }\n  }, \"Edit Image\") : null) : showEmbed == true ? __jsx(React.Fragment, null, __jsx(Embed, {\n    url: vaultImage.toString(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 664,\n      columnNumber: 33\n    }\n  })) : null)))), __jsx(React.Fragment, null, __jsx(Text, {\n    mt: 2,\n    as: \"h4\",\n    ml: \"4\",\n    mr: \"4\",\n    textAlign: \"center\",\n    fontSize: \"xs\",\n    fontStyle: \"italic\",\n    className: \"md\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 700,\n      columnNumber: 25\n    }\n  }, __jsx(ReactMarkdown, {\n    plugins: [gfm],\n    children: vaultName.toString() + '\\n\\n',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 701,\n      columnNumber: 27\n    }\n  })), __jsx(Text, {\n    mt: 2,\n    as: \"h4\",\n    ml: \"4\",\n    mr: \"4\",\n    fontSize: \"xs\",\n    fontStyle: \"italic\",\n    className: \"md\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 703,\n      columnNumber: 25\n    }\n  }, __jsx(ReactMarkdown, {\n    plugins: [gfm],\n    children: vaultDesc.toString(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 704,\n      columnNumber: 27\n    }\n  }))), Number(balance) < Number(price) ? __jsx(Box, {\n    d: \"flex\",\n    alignItems: \"baseline\",\n    justifyContent: \"space-between\",\n    mt: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 711,\n      columnNumber: 21\n    }\n  }, __jsx(Button, {\n    width: \"100%\" // as=\"a\"\n    // {...{\n    //   href:\n    //     location.origin +\n    //     '/buy?chain=' +\n    //     chainId +\n    //     '&output=0x3D658390460295FB963f54dC0899cfb1c30776Df&input=0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2',\n    //   target: '_blank',\n    //   rel: 'noopener noreferrer',\n    // }}\n    ,\n    onClick: function onClick() {\n      location.href = \"https://app.uniswap.org/#/swap?outputCurrency=0x3d658390460295fb963f54dc0899cfb1c30776df\";\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 712,\n      columnNumber: 23\n    }\n  }, \"Buy $Coval\")) : null, __jsx(Stack, {\n    direction: \"row\",\n    align: \"flex-start\",\n    spacing: \"0rem\",\n    flexWrap: \"wrap\",\n    shouldWrapChildren: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 731,\n      columnNumber: 19\n    }\n  }, __jsx(ButtonGroup, {\n    spacing: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 732,\n      columnNumber: 21\n    }\n  }, __jsx(Button, {\n    onClick: function onClick() {\n      return setTabIndex(1);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 733,\n      columnNumber: 23\n    }\n  }, \"Back\"), !account ? __jsx(Button, {\n    isDisabled: true,\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 735,\n      columnNumber: 25\n    }\n  }, \"No Wallet Connected!\") : !vaultAddress || !isETHAddress(vaultAddress) || !vaultName || vaultName.length < 3 || !vaultDesc || vaultDesc.length < 3 || !vaultImage ? __jsx(Button, {\n    isDisabled: true,\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 745,\n      columnNumber: 25\n    }\n  }, \"Check Fields!\") // ) : !service ? (\n  //   <Button isDisabled type=\"submit\">\n  //     Creation Password?\n  //   </Button>\n  : hash || creating || showPreVaultMsg || showMakingVaultMsg ? __jsx(Button, {\n    isDisabled: true,\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 753,\n      columnNumber: 25\n    }\n  }, \"Making Vault ...\") : __jsx(Button, {\n    onClick: function onClick(e) {\n      handleSubmit(e);\n    },\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 757,\n      columnNumber: 25\n    }\n  }, \"Create Vault\")))), showPreVaultMsg ? __jsx(Alert, {\n    status: \"info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 765,\n      columnNumber: 19\n    }\n  }, __jsx(AlertIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 766,\n      columnNumber: 21\n    }\n  }), \"Talking to contract ...\") : null, showMakingVaultMsg ? __jsx(Alert, {\n    status: \"info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 771,\n      columnNumber: 19\n    }\n  }, __jsx(AlertIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 772,\n      columnNumber: 21\n    }\n  }), \"Making vault ... one moment\") : null, approving ? __jsx(Alert, {\n    status: \"info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 777,\n      columnNumber: 19\n    }\n  }, __jsx(AlertIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 778,\n      columnNumber: 21\n    }\n  }), \"Handling approval flow ...\") : null))))), hash ? __jsx(TransactionToast, {\n    hash: hash,\n    onComplete: function onComplete() {\n      setHash(null);\n\n      if (!creating) {\n        if (!approving) {\n          fireMetaMask();\n          setShowPreVaultMsg(false);\n        } else {\n          setApproving(false);\n        }\n      } else {\n        setTimeout(function () {\n          setShowMakingVaultMsg(false);\n          checkLiveliness(tokenId, function () {\n            location.href = location.origin + '/nft?id=' + tokenId;\n          });\n        }, 500);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 801,\n      columnNumber: 9\n    }\n  }) : null);\n}\n\n_s(Create, \"nEZtW1m/v72w41+1wCN00QIjbQI=\", false, function () {\n  return [useDisclosure, useRouter, useWeb3React, useContract, useContract];\n});\n\n_c = Create;\n\nvar _c;\n\n$RefreshReg$(_c, \"Create\");","map":{"version":3,"sources":["/Users/shannoncode/repo/Emblem.Currentwork/emblem-vault-site/components/Create.tsx"],"names":["FormControl","FormLabel","FormHelperText","FormErrorMessage","Input","Stack","Tabs","TabList","TabPanels","Tab","TabPanel","Box","Flex","RadioGroup","Radio","Textarea","Button","ButtonGroup","Text","Divider","Alert","AlertIcon","Collapse","useDisclosure","Select","Loader","useWeb3React","useEffect","useState","useRouter","TransactionToast","EMBLEM_API","contractAddresses","useContract","isETHAddress","Embed","gfm","DokaImageEditorModal","transakSDK","locale_en_gb","createDefaultImageReader","createDefaultImageWriter","setPlugins","plugin_crop","plugin_crop_locale_en_gb","plugin_finetune","plugin_finetune_locale_en_gb","plugin_finetune_defaults","plugin_filter","plugin_filter_locale_en_gb","plugin_filter_defaults","plugin_annotate","plugin_annotate_locale_en_gb","markup_editor_defaults","markup_editor_locale_en_gb","ReactMarkdown","editorDefaults","imageReader","imageWriter","locale","tokenId","cipherTextHash","nonce","signature","mintPassword","Create","props","modalVisible","setModalVisible","modalResult","setModalResult","showEditorButton","setShowEditorButton","isOpen","onToggle","query","image","to","title","description","tabIndex","setTabIndex","batchId","toString","setBatchId","account","chainId","vaultAddress","setVaultAddress","vaultPubPriv","setVaultPubPriv","vaultName","setVaultName","vaultDesc","setVaultDesc","vaultImage","setVaultImage","ownedUrl","ownedImage","setOwnedImage","password","setPassword","isCovalApproved","setIsCovalApproved","loaded","state","setState","hash","setHash","experimental","setExperimental","showPreVaultMsg","setShowPreVaultMsg","showMakingVaultMsg","setShowMakingVaultMsg","decimals","setDecimals","allowance","setAllowance","balance","setBalance","price","setPrice","creating","setCreating","approving","setApproving","vaultKey","setVaultKey","vaultValue","setVaultValue","vaultType","setVaultType","showEmbed","setShowEmbed","handlerContract","vaultHandler","vaultHandlerAbi","covalContract","coval","covalAbi","transak","initializeTransak","address","coin","apiKey","environment","defaultCryptoCurrency","walletAddress","themeColor","fiatCurrency","email","redirectURL","hostURL","window","location","origin","widgetHeight","widgetWidth","on","ALL_EVENTS","data","console","log","EVENTS","TRANSAK_ORDER_SUCCESSFUL","orderData","close","init","getContractStates","then","balanceOf","Number","fireMetaMask","buyWithSignature","setTimeout","error","checkLiveliness","href","approveCovalFlow","approve","code","cb","fetch","method","headers","service","chainid","body","JSON","stringify","response","json","handleSubmit","evt","preventDefault","fromAddress","toAddress","name","values","push","value","apiSuffix","previewFile","preview","document","querySelector","inputelement","reader","FileReader","files","size","alert","addEventListener","src","result","readAsDataURL","acct","setAcct","index","e","target","length","res","dest","onloadend","base64data","URL","createObjectURL"],"mappings":"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","sourcesContent":["import {\n  FormControl,\n  FormLabel,\n  FormHelperText,\n  FormErrorMessage,\n  Input,\n  Stack,\n  Tabs,\n  TabList,\n  TabPanels,\n  Tab,\n  TabPanel,\n  Box,\n  Flex,\n  RadioGroup,\n  Radio,\n  Textarea,\n  Button,\n  ButtonGroup,\n  Text,\n  Divider,\n  Alert,\n  AlertIcon,\n  Collapse,\n  useDisclosure,\n  Select\n} from '@chakra-ui/core'\n\nimport Loader from 'react-loader'\nimport { useWeb3React } from '@web3-react/core'\nimport { useEffect, useState } from 'react'\nimport { useRouter } from 'next/router'\nimport { TransactionToast } from './TransactionToast'\nimport { EMBLEM_API, contractAddresses } from '../constants'\nimport { Contract } from '@ethersproject/contracts'\nimport { useContract } from '../hooks'\nimport { isETHAddress } from '../utils'\nimport Embed from './Embed'\nimport gfm from 'remark-gfm'\n// react-doka\nimport { DokaImageEditorModal } from 'react-doka';\nimport transakSDK from '@transak/transak-sdk'\n\n// doka\nimport {\n    // editor\n    locale_en_gb,\n    createDefaultImageReader,\n    createDefaultImageWriter,\n\n    // plugins\n    setPlugins,\n    plugin_crop,\n    plugin_crop_locale_en_gb,\n    plugin_finetune,\n    plugin_finetune_locale_en_gb,\n    plugin_finetune_defaults,\n    plugin_filter,\n    plugin_filter_locale_en_gb,\n    plugin_filter_defaults,\n    plugin_annotate,\n    plugin_annotate_locale_en_gb,\n    markup_editor_defaults,\n    markup_editor_locale_en_gb,\n} from 'doka';\nimport ReactMarkdown from 'react-markdown'\n\nsetPlugins(plugin_crop, plugin_finetune, plugin_filter, plugin_annotate);\n\nconst editorDefaults = {\n    imageReader: createDefaultImageReader(),\n    imageWriter: createDefaultImageWriter(),\n    ...plugin_finetune_defaults,\n    ...plugin_filter_defaults,\n    ...markup_editor_defaults,\n    locale: {\n        ...locale_en_gb,\n        ...plugin_crop_locale_en_gb,\n        ...plugin_finetune_locale_en_gb,\n        ...plugin_filter_locale_en_gb,\n        ...plugin_annotate_locale_en_gb,\n        ...markup_editor_locale_en_gb,\n    },\n};\n\nlet tokenId, cipherTextHash, nonce, signature = null\nlet mintPassword = null\n\nexport default function Create(props: any) {\n  // modal\n  const [modalVisible, setModalVisible] = useState(false);\n  const [modalResult, setModalResult] = useState('');\n  const [showEditorButton, setShowEditorButton] = useState(true);\n\n  const { isOpen, onToggle } = useDisclosure()\n  const { query } = useRouter()\n  const [tabIndex, setTabIndex] = useState(query.image? 2: query.to || query.title || query.description? 1: 0)\n  const [batchId, setBatchId] = useState(query.batchId? query.batchId.toString(): null)\n  const { account, chainId } = useWeb3React()\n  const [vaultAddress, setVaultAddress] = useState(query.to || account || '')\n  const [vaultPubPriv, setVaultPubPriv] = useState(query.public == 'f'? 'Private': 'Public')\n  const [vaultName, setVaultName] = useState(query.title || '')\n  const [vaultDesc, setVaultDesc] = useState(query.description || '')\n  const [vaultImage, setVaultImage] = useState(query.image || '')\n  const [ownedImage, setOwnedImage] = useState(query.ownedUrl || '')\n  const [password, setPassword] = useState('')\n  const [isCovalApproved, setIsCovalApproved] = useState(false)\n  const [state, setState] = useState({ loaded: true, private: false })\n  const [hash, setHash] = useState(null)\n  const [experimental, setExperimental] = useState(true)\n  const [showPreVaultMsg, setShowPreVaultMsg] = useState(false)\n  const [showMakingVaultMsg, setShowMakingVaultMsg] = useState(false)\n  const [decimals, setDecimals] = useState(null)\n  const [allowance, setAllowance] = useState(null)\n  const [balance, setBalance] = useState(null)\n  const [price, setPrice] = useState(null)\n  const [creating, setCreating] = useState(false)\n  const [approving, setApproving] = useState(false)\n  const [vaultKey, setVaultKey] = useState('')  \n  const [vaultValue, setVaultValue] = useState('')\n  const [vaultType, setVaultType] = useState(query.image? 'embed':\"upload\")\n  const [showEmbed, setShowEmbed] = useState(query.image? true: false)\n  \n\n  const handlerContract = useContract(contractAddresses.vaultHandler[chainId], contractAddresses.vaultHandlerAbi, true)\n  const covalContract = useContract(contractAddresses.coval[chainId], contractAddresses.covalAbi, true)\n\n  interface ErrorWithCode extends Error {\n    code?: number\n  }\n\n  let transak\n  const initializeTransak = (address?: string, coin? : string)=>{\n    transak = new transakSDK({\n      apiKey: 'e8bed1bd-6844-4eb1-973a-7a11a48fafab',  // Your API Key\n      environment: 'PRODUCTION', // STAGING/PRODUCTION\n      defaultCryptoCurrency: coin || 'ETH',\n      walletAddress: address || '', // Your customer's wallet address\n      themeColor: '000000', // App theme color\n      fiatCurrency: 'USD', // INR/GBP\n      // fiatAmount: 350,\n      email: '', // Your customer's email address\n      redirectURL: '',\n      // paymentMethod: 'neft_bank_transfer',\n      hostURL: window.location.origin,\n      widgetHeight: '550px',\n      widgetWidth: '450px'\n    });\n  \n    // To get all the events\n    transak.on(transak.ALL_EVENTS, (data) => {\n      console.log(data)\n    });\n  \n    // This will trigger when the user marks payment is made.\n    transak.on(transak.EVENTS.TRANSAK_ORDER_SUCCESSFUL, (orderData) => {\n      console.log(orderData);\n      transak.close();\n    });\n  \n    transak.init()\n  }\n\n  const getContractStates = async () => {\n    setDecimals(await covalContract.decimals())\n    setAllowance(\n      await covalContract\n        .allowance(account, contractAddresses.vaultHandler[chainId])\n        .then((balance: { toString: () => string }) => balance.toString())\n    )\n    setBalance(await covalContract.balanceOf(account).then((balance: { toString: () => string }) => balance.toString()))\n    setPrice(await handlerContract.price().then((balance: { toString: () => string }) => balance.toString()))\n    // console.log(\n    //   'balance',\n    //   balance,\n    //   'allowance',\n    //   allowance,\n    //   'price',\n    //   price,\n    //   Number(allowance) >= Number(price),\n    //   Number(balance) > Number(price)\n    // )\n    if (Number(allowance) >= Number(price)) {\n      setIsCovalApproved(true)\n    } else {\n      setIsCovalApproved(false)\n    }\n  }\n\n  const fireMetaMask = () => {\n    console.log(\"fire?\")\n    setCreating(true)\n    // console.log(vaultAddress, tokenId, cipherTextHash, nonce, signature)\n    // if (chainId === 137 || chainId === 1) {\n      ;(handlerContract as Contract)\n      .buyWithSignature(vaultAddress, tokenId, cipherTextHash, nonce, signature)\n      .then(({ hash }: { hash: string }) => {\n        setTimeout(() => {\n          setHash(hash)\n          // setCreating(false)\n          setShowMakingVaultMsg(true)\n        }, 100) // Solving State race condition where transaction watcher wouldn't notice we were creating\n      })\n      .catch((error: ErrorWithCode) => {\n        // if (error?.code !== 4001) {\n          setCreating(false)\n          setShowPreVaultMsg(false)\n          checkLiveliness(tokenId, ()=>{\n            location.href = location.origin + '/nft?id=' + tokenId\n          })\n        // } else {\n        //   setCreating(false)\n        //   setShowPreVaultMsg(false)\n        // }\n      })\n    // } else {\n    //   ;(handlerContract as Contract)\n    //   .buyWithPaymentOnly(vaultAddress, tokenId, mintPassword)\n    //   .then(({ hash }: { hash: string }) => {\n    //     setTimeout(() => {\n    //       setHash(hash)\n    //       // setCreating(false)\n    //       setShowMakingVaultMsg(true)\n    //     }, 100) // Solving State race condition where transaction watcher wouldn't notice we were creating\n    //   })\n    //   .catch((error: ErrorWithCode) => {\n    //     if (error?.code !== 4001) {\n    //       console.log(`tx failed.`, error)\n    //     } else {\n    //       setCreating(false)\n    //       setShowPreVaultMsg(false)\n    //     }\n    //   })\n    // }\n    \n  }\n\n  const approveCovalFlow = () => {\n    setApproving(true)\n    ;(covalContract as Contract)\n      .approve(contractAddresses.vaultHandler[chainId], '100000000000000')\n      .then(({ hash }: { hash: string }) => {\n        setHash(hash)\n      })\n      .catch((error: ErrorWithCode) => {\n        if (error?.code == 4001) {\n          setApproving(false)\n        }\n      })\n  }\n\n  const checkLiveliness = (tokenId, cb)=>{\n    fetch(EMBLEM_API + '/liveliness?cc=t', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        service: 'evmetadata',\n        chainid: chainId.toString()\n      },\n      // We convert the React state to JSON and send it as the POST body\n      body: JSON.stringify({tokenId: tokenId}),\n    }).then(async function (response) {\n      let data = await response.json()\n      console.log(\"Liveliness check\", data)\n    })\n    return cb()\n  }\n\n  const handleSubmit = (evt: { preventDefault: () => void }) => {\n    evt.preventDefault()\n    // if (service !== 'kms') {\n    //   return alert('incorrect password')\n    // }\n    setState({ loaded: false, private: state.private })\n    let body: any = {\n      fromAddress: account,\n      toAddress: vaultAddress,\n      description: vaultDesc,\n      name: vaultName,\n      ownedImage: ownedImage,\n      image: vaultImage,\n      chainId: chainId,\n      private: state.private,\n      password: password || '',\n      values: [],\n      experimental: true\n    }\n    if (vaultKey && vaultValue) {\n      body.values.push({\"key\": vaultKey, value: vaultValue})\n    }\n    if (batchId) {\n      body.batchId = batchId\n    }\n    console.log(JSON.stringify(body))\n    let apiSuffix = '/mint3' //(chainId == 137 || chainId == 1) ? '/mint3' : '/mint'\n    fetch(EMBLEM_API + apiSuffix, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        service: 'evmetadata',\n      },\n      // We convert the React state to JSON and send it as the POST body\n      body: JSON.stringify(body),\n    }).then(async function (response) {\n      setState({ loaded: true, private: state.private })\n      let body = await response.json()\n      tokenId = body.data.tokenId\n      // console.log(body.data.nonce, body.data.signature, body.data.cipherTextHash)\n      // if (chainId === 137 || chainId == 1) {\n        nonce = body.data.nonce\n        signature = body.data.signature\n        cipherTextHash = body.data.cipherTextHash\n        // fireMetaMask()\n        // alert(\"Minting has been disabled temporarily while we work with Opensea to solve a bug where new vaults are not showing. Mint ONLY if you don't plan on using Opensea\")\n        setShowPreVaultMsg(false)\n        setTimeout(() => {\n        checkLiveliness(tokenId, ()=>{\n          location.href = location.origin + '/nft?id=' + tokenId\n        })\n      }, 500)\n      // } else {\n      //   mintPassword = body.password\n      //   setHash(body.data.tx)\n      //   setShowPreVaultMsg(true)\n      // }\n    })\n  }\n\n  function previewFile() {\n    const preview = document.querySelector('#preview') as HTMLImageElement\n    const inputelement = document.querySelector('input[type=file]') as HTMLInputElement //.files[0];\n    const reader = new FileReader()\n    if (inputelement.files[0].size > 5000000) {\n      delete inputelement.files\n      return alert('File too large')\n    } else {\n      // alert('under')\n    }\n    reader.addEventListener(\n      'load',\n      function () {\n        // convert image file to base64 string\n        if (preview) preview.src = reader.result?.toString() || ''\n        if (preview) setVaultImage(preview.src)\n        setShowEditorButton(true)\n        setModalResult('')\n      },\n      false\n    )\n\n    if (inputelement.files) {\n\n      \n      reader.readAsDataURL(inputelement.files[0])\n    }\n  }\n\n  const [acct, setAcct] = useState('')\n  useEffect(() => {\n    if (account && acct != account) {\n      setAcct(account)\n      setVaultAddress(query.to || account)\n    }\n  }, [account, acct])\n\n  useEffect(() => {\n    account && chainId ? getContractStates() : null\n  })\n\n  return (\n    <Loader loaded={state.loaded}>\n      <Flex width=\"full\" align=\"center\" justifyContent=\"center\">\n        <Box maxW=\"sm\" borderWidth=\"1px\" rounded=\"lg\" overflow=\"hidden\">\n          <Tabs defaultIndex={0} index={tabIndex} onChange={(index) => setTabIndex(index)}>\n            <TabList>\n              <Tab>Make</Tab>\n              <Tab>My</Tab>\n              <Tab>Vault</Tab>\n              {/* <Tab>EDIT</Tab> */}\n            </TabList>\n\n            <TabPanels>\n              <TabPanel>\n                <Stack\n                  direction=\"column\"\n                  align=\"center\"\n                  spacing=\"2rem\"\n                  flexGrow={1}\n                  justifyContent=\"center\"\n                  px=\"2rem\"\n                  py=\"2rem\"\n                  shouldWrapChildren\n                >\n                  <Stack direction=\"row\" align=\"flex-start\" spacing=\"0rem\" flexWrap=\"wrap\" shouldWrapChildren>\n                    <FormControl isRequired isInvalid={vaultAddress && !isETHAddress(vaultAddress)}>\n                      <FormLabel htmlFor=\"owner-address\">Vault Owner Address</FormLabel>\n                      <Input\n                        type=\"text\"\n                        id=\"owner-address\"\n                        aria-describedby=\"owner-helper-text\"\n                        placeholder=\"0xdeadbeef\"\n                        maxLength={42}\n                        value={vaultAddress}\n                        onChange={(e) => setVaultAddress(e.target.value)}\n                      />\n                      <FormHelperText id=\"owner-helper-text\">\n                        What is the address of the first owner of this vault? Pro tip: When you connect a web3 wallet,\n                        this will populate automagically with your address.\n                      </FormHelperText>\n                      <FormErrorMessage>Address is not a valid ETH address</FormErrorMessage>\n                    </FormControl>\n                  </Stack>\n\n                  <Stack direction=\"row\" align=\"flex-start\" spacing=\"0rem\" flexWrap=\"wrap\" shouldWrapChildren>\n                    <FormControl as=\"fieldset\" isRequired>\n                      <FormLabel>Public or Private?</FormLabel>\n                      <RadioGroup\n                        id=\"pubpriv\"\n                        defaultValue={vaultPubPriv}\n                        onChange={(e) => {\n                          setVaultPubPriv(e.target.value)\n                          setState({ loaded: state.loaded, private: e.target.value === 'Private' })\n                        }}\n                      >\n                        <Radio value=\"Public\">Public</Radio>\n                        <Radio value=\"Private\">Private</Radio>\n                      </RadioGroup>\n                      <FormHelperText id=\"email-helper-text\">\n                        Do you want the contents and addresses to be password protected?\n                      </FormHelperText>\n                    </FormControl>\n                    {state.private ? (\n                      <FormControl isRequired>\n                        <FormLabel>Password</FormLabel>\n                        <Input\n                          type=\"password\"\n                          id=\"vault-password\"\n                          onChange={(e) => setPassword(e.target.value)}\n                          aria-describedby=\"password-helper-text\"\n                          autoComplete=\"off\"\n                        />\n                        <FormHelperText id=\"password-helper-text\">Used to encrypt/decrypt</FormHelperText>\n                      </FormControl>\n                    ) : (\n                      ''\n                    )}\n                  </Stack>\n                  <Stack direction=\"row\" align=\"flex-start\" spacing=\"0rem\" flexWrap=\"wrap\" shouldWrapChildren>\n                    <Button onClick={() => setTabIndex(1)}>Next</Button>\n                  </Stack>\n                </Stack>\n              </TabPanel>\n\n              <TabPanel>\n                <Stack\n                  direction=\"column\"\n                  align=\"center\"\n                  spacing=\"2rem\"\n                  flexGrow={1}\n                  justifyContent=\"center\"\n                  px=\"2rem\"\n                  py=\"2rem\"\n                  shouldWrapChildren\n                >\n                  <Stack direction=\"row\" align=\"flex-start\" spacing=\"0rem\" flexWrap=\"wrap\" shouldWrapChildren>\n                    <FormControl isRequired isInvalid={vaultName && vaultName.length < 3 && vaultName.length > 200}>\n                      <FormLabel htmlFor=\"vault-name\">Vault Name</FormLabel>\n                      <Input\n                        type=\"text\"\n                        id=\"vault-name\"\n                        aria-describedby=\"vault-name-text\"\n                        minLength={3}\n                        maxLength={200}\n                        value={vaultName}\n                        onChange={(e) => setVaultName(e.target.value)}\n                        autoComplete=\"off\"\n                      />\n                      <FormHelperText id=\"vault-name-text\">Give it some love so you can find it later.</FormHelperText>\n                      <FormErrorMessage>Name needs at least 3 characters. 200 is max.</FormErrorMessage>\n                    </FormControl>\n                  </Stack>\n                  <Stack direction=\"row\" align=\"flex-start\" spacing=\"0rem\" flexWrap=\"wrap\" shouldWrapChildren>\n                    <FormControl isRequired isInvalid={vaultDesc && vaultDesc.length < 3 && vaultDesc.length > 1024}>\n                      <FormLabel htmlFor=\"vault-desc\">Vault Description</FormLabel>\n                      <Textarea\n                        id=\"vault-desc\"\n                        size=\"lg\"\n                        aria-describedby=\"vault-desc-text\"\n                        minLength={3}\n                        maxLength={1024}\n                        value={vaultDesc}\n                        onChange={(e) => setVaultDesc(e.target.value)}\n                        autoComplete=\"off\"\n                      />\n                      <FormHelperText id=\"vault-desc-text\">\n                        Add some fluffy text to tell people what the point is!\n                      </FormHelperText>\n                      <FormErrorMessage>Description needs to be at least 3 characters. 1024 is max.</FormErrorMessage>\n                    </FormControl>\n                  </Stack>\n                  <Button onClick={onToggle}>Include Encrypted Text In Vault</Button>\n                  <Collapse isOpen={isOpen}>\n                    {experimental? (\n                      <Stack direction=\"row\" align=\"flex-start\" spacing=\"0rem\" flexWrap=\"wrap\" shouldWrapChildren>\n                      <FormControl>\n                        <FormLabel htmlFor=\"vault-key\">Key</FormLabel>\n                        <Input\n                          type=\"text\"\n                          id=\"vault-key\"\n                          aria-describedby=\"vault-key-text\"\n                          maxLength={200}\n                          value={vaultKey}\n                          onChange={(e) => setVaultKey(e.target.value)}\n                          autoComplete=\"off\"\n                        />\n                        <FormHelperText id=\"vault-key-text\">Key Name (Public)</FormHelperText>\n                        <FormErrorMessage>---Some Error</FormErrorMessage>\n                      </FormControl>\n                      <FormControl>\n                        <FormLabel htmlFor=\"vault-value\">Value</FormLabel>\n                        <Input\n                          type=\"password\"\n                          id=\"vault-value\"\n                          aria-describedby=\"vault-value-text\"\n                          maxLength={200}\n                          value={vaultValue}\n                          onChange={(e) => setVaultValue(e.target.value)}\n                          autoComplete=\"off\"\n                        />\n                        <FormHelperText id=\"vault-value-text\">Key Value (Encrypted)</FormHelperText>\n                        <FormErrorMessage>---Some Error</FormErrorMessage>\n                      </FormControl>\n                    </Stack>\n                    ) : null}\n                  </Collapse>\n                  <Stack direction=\"row\" align=\"flex-start\" spacing=\"0rem\" flexWrap=\"wrap\" shouldWrapChildren>\n                    <ButtonGroup spacing={4}>\n                      <Button onClick={() => setTabIndex(0)}>Back</Button>\n                      <Button onClick={() => setTabIndex(2)}>Next</Button>\n                    </ButtonGroup>\n                  </Stack>\n                </Stack>\n              </TabPanel>\n\n              <TabPanel>\n                <Stack\n                  direction=\"column\"\n                  align=\"center\"\n                  spacing=\"2rem\"\n                  flexGrow={1}\n                  justifyContent=\"center\"\n                  px=\"2rem\"\n                  py=\"2rem\"\n                  shouldWrapChildren\n                >\n                  <Stack direction=\"row\" align=\"flex-start\" spacing=\"0rem\" flexWrap=\"wrap\" shouldWrapChildren>\n                    <FormControl>\n                      \n                      <Box p={1} rounded=\"lg\" overflow=\"hidden\">\n                        <Stack align=\"center\" p={1}>                          \n                          {\n                            vaultType !== \"upload\" ? (\n                              <>\n                                <FormLabel htmlFor=\"vault-image-url\">Embed Display URL</FormLabel>\n                                <Input\n                                  type=\"text\"\n                                  id=\"vault-image-url\"\n                                  aria-describedby=\"vault-image-url-text\"\n                                  minLength={3}\n                                  maxLength={200}\n                                  value={vaultImage}\n                                  defaultValue=\"http://\"\n                                  onChange={(e) => {\n                                    setVaultImage(e.target.value)\n                                    setShowEmbed(true)\n                                    console.log(\"showEmbed\", showEmbed)\n                                  }}\n                                  autoComplete=\"off\"\n                                  w={300}\n                                />\n                                \n                                {(query.image && query.ownedUrl) || !query.image ? (\n                                  <>\n                                    <FormLabel mt={3} htmlFor=\"owned-url\">Optional URL For Vault Owner *</FormLabel>\n                                    <Input\n                                      type=\"text\"\n                                      id=\"owned-url\"\n                                      aria-describedby=\"owned-url-text\"\n                                      minLength={3}\n                                      maxLength={200}\n                                      value={ownedImage}\n                                      defaultValue=\"http://\"\n                                      onChange={(e) => {\n                                        setOwnedImage(e.target.value)\n                                      }}\n                                      autoComplete=\"off\"\n                                      w={300}\n                                    />\n                                  </>\n                                ) : null}\n                                \n                              </>\n                            ) : (\n                              <>\n                              <FormLabel htmlFor=\"vault-img\">Vault Image</FormLabel>\n                              <input type=\"file\" onChange={() => previewFile()} />\n                              <Divider />\n                              </>\n                            )\n                          }\n                          {!query.image? (\n                            <>\n                              <Divider />\n                              <FormLabel htmlFor=\"type-selector\">Display Type</FormLabel>\n                              <Select id=\"type-selector\" w=\"100%\" value={vaultType}\n                                onChange={(e)=>{\n                                  setVaultType(e.target.value)\n                                  console.log(\"type\", vaultType)\n                                }}\n                              >\n                                <option value=\"embed\" >Embed (url)</option>\n                                <option value=\"upload\" >Image (upload)</option>\n                              </Select>\n                            </>\n                          ): null}\n                          \n                          {\n                            vaultType == \"upload\" ? (\n                              <>\n                                \n                                  <img id=\"preview\" src={modalResult} width=\"250\" margin-top=\"6\"></img>\n                                \n                                \n                                {modalVisible && (\n                                    <DokaImageEditorModal\n                                        {...editorDefaults}\n                                        src={vaultImage}\n                                        onLoad={(res) => console.log('load modal image', res)}\n                                        onHide={() => setModalVisible(false)}\n                                        onProcess={({ dest }) => {\n                                          var reader = new FileReader();\n                                            reader.readAsDataURL(dest); \n                                            reader.onloadend = function() {\n                                                var base64data = reader.result?.toString();                \n                                                setVaultImage(base64data)\n                                                setModalResult(URL.createObjectURL(dest))\n                                                setShowEditorButton(false)\n                                            }\n                                          }\n                                        }\n                                    />\n                                )}\n                                {/* {!!modalResult.length && (\n                                    <p>\n                                        <img src={modalResult} alt=\"\" />\n                                    </p>\n                                )} */}\n                                {showEditorButton && vaultImage? (\n                                  <Button mt={2} onClick={() => setModalVisible(true)}>Edit Image</Button>\n                                ):null}\n                              </>\n                            ) : showEmbed == true ? (\n                              <>                                \n                                <Embed url={vaultImage.toString()}/>\n                              </>\n                            ) : null\n                          }\n\n\n                          \n                        </Stack>\n                      </Box>\n                    </FormControl>\n                  </Stack>\n\n                  {/* <Stack direction=\"row\" align=\"flex-start\" spacing=\"0rem\" flexWrap=\"wrap\" shouldWrapChildren>\n                    <FormControl>\n                      <FormLabel htmlFor=\"service\">API password:</FormLabel>\n                      <Input\n                        type=\"password\"\n                        id=\"service\"\n                        aria-describedby=\"service\"\n                        onChange={(e) => setService(e.target.value)}\n                        autoComplete=\"off\"\n                      />\n                    </FormControl>\n                  </Stack> */}\n\n                  {/* {isCovalApproved ? (\n                    <Stack direction=\"row\" align=\"flex-start\" spacing=\"0rem\" flexWrap=\"wrap\" shouldWrapChildren>\n                      <Box maxW=\"sm\" borderWidth=\"1px\" p={1} rounded=\"lg\" overflow=\"hidden\">\n                        <Text>Creating a vault spends {price * Math.pow(10, -decimals)} Coval from your wallet</Text>\n                      </Box>\n                    </Stack>\n                  ) : null} */}\n\n                  {\n                    (\n                      <>\n                        <Text mt={2} as=\"h4\" ml=\"4\" mr=\"4\" textAlign=\"center\" fontSize=\"xs\" fontStyle=\"italic\" className=\"md\">\n                          <ReactMarkdown plugins={[gfm]} children={vaultName.toString() + '\\n\\n'} />\n                        </Text>\n                        <Text mt={2} as=\"h4\" ml=\"4\" mr=\"4\" fontSize=\"xs\" fontStyle=\"italic\" className=\"md\">\n                          <ReactMarkdown plugins={[gfm]} children={vaultDesc.toString()} />\n                        </Text>\n                      </>\n                    )\n                  }\n\n                  {Number(balance) < Number(price) ? (\n                    <Box d=\"flex\" alignItems=\"baseline\" justifyContent=\"space-between\" mt=\"2\">\n                      <Button\n                        width=\"100%\"\n                        // as=\"a\"\n                        // {...{\n                        //   href:\n                        //     location.origin +\n                        //     '/buy?chain=' +\n                        //     chainId +\n                        //     '&output=0x3D658390460295FB963f54dC0899cfb1c30776Df&input=0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2',\n                        //   target: '_blank',\n                        //   rel: 'noopener noreferrer',\n                        // }}\n                        onClick={()=>{location.href = \"https://app.uniswap.org/#/swap?outputCurrency=0x3d658390460295fb963f54dc0899cfb1c30776df\"}}\n                      >\n                        Buy $Coval\n                      </Button>\n                    </Box>\n                  ) : null}\n\n                  <Stack direction=\"row\" align=\"flex-start\" spacing=\"0rem\" flexWrap=\"wrap\" shouldWrapChildren>\n                    <ButtonGroup spacing={4}>\n                      <Button onClick={() => setTabIndex(1)}>Back</Button>\n                      {!account ? (\n                        <Button isDisabled type=\"submit\">\n                          No Wallet Connected!\n                        </Button>\n                      ) : !vaultAddress ||\n                        !isETHAddress(vaultAddress) ||\n                        !vaultName ||\n                        vaultName.length < 3 ||\n                        !vaultDesc ||\n                        vaultDesc.length < 3 || \n                        !vaultImage ? (\n                        <Button isDisabled type=\"submit\">\n                          Check Fields!\n                        </Button>\n                      // ) : !service ? (\n                      //   <Button isDisabled type=\"submit\">\n                      //     Creation Password?\n                      //   </Button>\n                      ) : hash || creating || showPreVaultMsg || showMakingVaultMsg ? (\n                        <Button isDisabled type=\"submit\">\n                          Making Vault ...\n                        </Button>\n                      ) : (\n                        <Button onClick={(e)=>{handleSubmit(e)}} type=\"submit\">\n                          Create Vault\n                        </Button>\n                      )}\n                    </ButtonGroup>\n                  </Stack>\n                </Stack>\n                {showPreVaultMsg ? (\n                  <Alert status=\"info\">\n                    <AlertIcon />\n                    Talking to contract ...\n                  </Alert>\n                ) : null}\n                {showMakingVaultMsg ? (\n                  <Alert status=\"info\">\n                    <AlertIcon />\n                    Making vault ... one moment\n                  </Alert>\n                ) : null}\n                {approving ? (\n                  <Alert status=\"info\">\n                    <AlertIcon />\n                    Handling approval flow ...\n                  </Alert>\n                ) : null}\n              </TabPanel>\n              {/* <TabPanel>\n                <Stack>\n                <div style={{ height: '70vh', backgroundColor: 'white' }}>\n                  <DokaImageEditor\n                      {...editorDefaults}\n                      className='doka'\n                      src={'./image.jpeg'}\n                      onLoad={(res: any) => console.log('load inline image', res)}\n                      onProcess={({ dest }) => setInlineResult(URL.createObjectURL(dest))}\n                  />\n                </div>\n                </Stack>\n              </TabPanel> */}\n            </TabPanels>\n          </Tabs>\n        </Box>\n      </Flex>\n      {hash ? (\n        <TransactionToast\n          hash={hash}\n          onComplete={() => {\n            setHash(null)\n            if (!creating) {\n              if (!approving) {\n                fireMetaMask()\n                setShowPreVaultMsg(false)\n              } else {\n                setApproving(false)\n              }\n            } else {\n              setTimeout(() => {\n                setShowMakingVaultMsg(false)\n                checkLiveliness(tokenId, ()=>{\n                  location.href = location.origin + '/nft?id=' + tokenId\n                })                \n              }, 500)\n            }\n          }}\n        />\n      ) : null}\n    </Loader>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}