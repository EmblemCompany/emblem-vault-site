{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { Contract } from '@ethersproject/contracts';\n\nvar getContract = function getContract(address, abi, library, account) {\n  return new Contract(address, abi, library.getSigner(account).connectUnchecked());\n};\n\nfunction checkApproval(handler, spending, library, account, amount) {\n  if (amount > 0) {\n    var spendingContract = getContract(spending.address, spending.abi, library, account);\n    return spendingContract.allowance(account, handler.address).then(function (allowance) {\n      alert('test');\n      return allowance >= amount;\n    });\n  }\n\n  return false;\n}\n\nexport default function Approval(props) {\n  _s();\n\n  var previousChainId;\n\n  var _useWeb3React = useWeb3React(),\n      account = _useWeb3React.account;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showPending = _useState2[0],\n      setShowPending = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      hasDataRows = _useState4[0],\n      setHasDataRows = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      dataRows = _useState6[0],\n      setDataRows = _useState6[1];\n\n  var _useState7 = useState(props.chainId),\n      _useState8 = _slicedToArray(_useState7, 2),\n      chainId = _useState8[0],\n      setChainId = _useState8[1];\n\n  var classes = useStyles();\n  React.useEffect(function () {\n    console.log(chainId, props.chainId);\n\n    if (chainId !== props.chainId) {\n      setChainId(props.chainId);\n      console.log(\"refresh data\");\n      setHasDataRows(false);\n    }\n  });\n  !hasDataRows ? getDeposits(function (deposits) {\n    setHasDataRows(true);\n    setDataRows(deposits);\n  }) : null;\n  return __jsx(React.Fragment, null);\n} // export class Approval extends Component<AttributesProps> {\n//   render() {\n//     let handler = this.props.handler\n//     let spending = this.props.spending\n//     let amount = this.props.amount\n//     let label = this.props.label\n//     let library = this.props.library\n//     let account = this.props.account\n//     let approved = checkApproval(handler, spending, library, account, amount)\n//     return approved? (\n//       <></>\n//     ) : (\n//       <Flex w=\"100%\" flexWrap=\"wrap\" mt={3} >\n//         <Button backgroundColor={\"#02b402\"} color={\"black !important\"} fontWeight={\"bold !important\"} width=\"100%\">\n//           {label}\n//         </Button>\n//       </Flex>\n//     )\n//   }\n// }\n// export default Approval\n\n_s(Approval, \"dwk77Nh4Zm53JgLTS9CUaJt9/Zs=\", true);\n\n_c = Approval;\n\nvar _c;\n\n$RefreshReg$(_c, \"Approval\");","map":{"version":3,"sources":["/Users/shannoncode/repo/Emblem.Currentwork/emblem-vault-site/components/partials/Approval.tsx"],"names":["React","Contract","getContract","address","abi","library","account","getSigner","connectUnchecked","checkApproval","handler","spending","amount","spendingContract","allowance","then","alert","Approval","props","previousChainId","useWeb3React","useState","showPending","setShowPending","hasDataRows","setHasDataRows","dataRows","setDataRows","chainId","setChainId","classes","useStyles","useEffect","console","log","getDeposits","deposits"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAiC,OAAjC;AAaA,SAASC,QAAT,QAAyB,0BAAzB;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,OAAD,EAAUC,GAAV,EAAeC,OAAf,EAAwBC,OAAxB,EAAwC;AAC1D,SAAO,IAAIL,QAAJ,CAAaE,OAAb,EAAsBC,GAAtB,EAA2BC,OAAO,CAACE,SAAR,CAAkBD,OAAlB,EAA2BE,gBAA3B,EAA3B,CAAP;AACD,CAFD;;AAIA,SAASC,aAAT,CAAuBC,OAAvB,EAA+DC,QAA/D,EAAwGN,OAAxG,EAAsHC,OAAtH,EAAoIM,MAApI,EAAoJ;AAClJ,MAAIA,MAAM,GAAG,CAAb,EAAgB;AACd,QAAIC,gBAAgB,GAAGX,WAAW,CAACS,QAAQ,CAACR,OAAV,EAAmBQ,QAAQ,CAACP,GAA5B,EAAiCC,OAAjC,EAA0CC,OAA1C,CAAlC;AACA,WAAOO,gBAAgB,CAACC,SAAjB,CAA2BR,OAA3B,EAAoCI,OAAO,CAACP,OAA5C,EAAqDY,IAArD,CAA0D,UAACD,SAAD,EAAoB;AACnFE,MAAAA,KAAK,CAAC,MAAD,CAAL;AACA,aAAOF,SAAS,IAAIF,MAApB;AACD,KAHM,CAAP;AAID;;AACD,SAAO,KAAP;AACD;;AAUD,eAAe,SAASK,QAAT,CAAkBC,KAAlB,EAA0C;AAAA;;AACvD,MAAIC,eAAJ;;AAEA,sBAAoBC,YAAY,EAAhC;AAAA,MAAQd,OAAR,iBAAQA,OAAR;;AACA,kBAAsCe,QAAQ,CAAC,KAAD,CAA9C;AAAA;AAAA,MAAOC,WAAP;AAAA,MAAoBC,cAApB;;AACA,mBAAsCF,QAAQ,CAAC,KAAD,CAA9C;AAAA;AAAA,MAAOG,WAAP;AAAA,MAAoBC,cAApB;;AACA,mBAAgCJ,QAAQ,CAAC,EAAD,CAAxC;AAAA;AAAA,MAAOK,QAAP;AAAA,MAAiBC,WAAjB;;AACA,mBAA8BN,QAAQ,CAACH,KAAK,CAACU,OAAP,CAAtC;AAAA;AAAA,MAAOA,OAAP;AAAA,MAAgBC,UAAhB;;AACA,MAAMC,OAAO,GAAGC,SAAS,EAAzB;AAEA/B,EAAAA,KAAK,CAACgC,SAAN,CAAgB,YAAI;AAChBC,IAAAA,OAAO,CAACC,GAAR,CAAYN,OAAZ,EAAqBV,KAAK,CAACU,OAA3B;;AACA,QAAIA,OAAO,KAAKV,KAAK,CAACU,OAAtB,EAA+B;AAC3BC,MAAAA,UAAU,CAACX,KAAK,CAACU,OAAP,CAAV;AACAK,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAT,MAAAA,cAAc,CAAC,KAAD,CAAd;AACH;AACJ,GAPD;AASA,GAACD,WAAD,GACIW,WAAW,CAAC,UAAAC,QAAQ,EAAI;AACpBX,IAAAA,cAAc,CAAC,IAAD,CAAd;AACAE,IAAAA,WAAW,CAACS,QAAD,CAAX;AACH,GAHU,CADf,GAKI,IALJ;AAMA,SACI,2BADJ;AAKD,C,CACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;GApDwBnB,Q;;KAAAA,Q","sourcesContent":["import React, { Component } from 'react'\nimport {\n  Box,\n  Image,\n  Text,\n  Link,\n  useColorMode,\n  Button,\n  Flex,\n  PseudoBox\n} from '@chakra-ui/core'\n\nimport {HStack, VStack, Circle } from '@chakra-ui/react'\nimport { Contract } from '@ethersproject/contracts'\n\nconst getContract = (address, abi, library, account): any =>{\n  return new Contract(address, abi, library.getSigner(account).connectUnchecked())\n}\n\nfunction checkApproval(handler: { address: string; abi: any }, spending: { address: string; abi: any }, library: any, account: any, amount: number) {\n  if (amount > 0) {\n    let spendingContract = getContract(spending.address, spending.abi, library, account)\n    return spendingContract.allowance(account, handler.address).then((allowance: any) => {\n      alert('test')\n      return allowance >= amount\n    })\n  }\n  return false\n}\n\ntype AttributesProps = {\n  handler: {address: string, abi: any},\n  spending: {address: string, abi: any},\n  amount: number,\n  label: string,\n  library: any,\n  account: any,\n}\nexport default function Approval(props: AttributesProps) {\n  let previousChainId\n  \n  const { account } = useWeb3React()\n  const [showPending, setShowPending] = useState(false)\n  const [hasDataRows, setHasDataRows] = useState(false)\n  const [dataRows, setDataRows] = useState([])\n  const [chainId, setChainId] = useState(props.chainId)\n  const classes = useStyles();\n\n  React.useEffect(()=>{\n      console.log(chainId, props.chainId)\n      if (chainId !== props.chainId) {\n          setChainId(props.chainId)\n          console.log(\"refresh data\")\n          setHasDataRows(false)\n      }        \n  })\n  \n  !hasDataRows ? (\n      getDeposits(deposits => {\n          setHasDataRows(true)\n          setDataRows(deposits)\n      })\n  ) : null\n  return (\n      <>\n          \n      </>\n  );\n}\n// export class Approval extends Component<AttributesProps> {\n//   render() {\n//     let handler = this.props.handler\n//     let spending = this.props.spending\n//     let amount = this.props.amount\n//     let label = this.props.label\n//     let library = this.props.library\n//     let account = this.props.account\n//     let approved = checkApproval(handler, spending, library, account, amount)\n//     return approved? (\n//       <></>\n//     ) : (\n//       <Flex w=\"100%\" flexWrap=\"wrap\" mt={3} >\n//         <Button backgroundColor={\"#02b402\"} color={\"black !important\"} fontWeight={\"bold !important\"} width=\"100%\">\n//           {label}\n//         </Button>\n//       </Flex>\n//     )\n//   }\n// }\n\n// export default Approval\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}