{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[25],{CKsJ:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/nft\",function(){return n(\"Z8wp\")}])},Z8wp:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"default\",(function(){return W}));var a=n(\"q1tI\"),r=n.n(a),c=n(\"wx14\"),o=n(\"o0o1\"),i=n.n(o),s=n(\"HaE+\"),u=n(\"XZ7F\"),l=n(\"Weur\"),d=n(\"BMxC\"),f=n(\"Yn+B\"),p=n(\"bQFp\"),m=n(\"sK1y\"),b=n(\"FpzS\"),h=n(\"pboS\"),g=n(\"IP4Q\"),v=n(\"eJLp\"),O=n(\"LqLE\"),w=n(\"8Kt/\"),j=n.n(w),y=n(\"Z6YE\"),S=n(\"nOHt\"),x=n(\"Ute3\"),k=n(\"Y1ui\"),C=n.n(k),E=n(\"a6RD\"),T=n.n(E),A=n(\"iBPG\"),_=n(\"zIq6\"),I=n(\"N39q\"),N=n(\"21eR\"),H=n(\"c+OE\"),F=n.n(H),G=n(\"NFKh\"),J=n.n(G),P=r.a.createElement,V=T()((function(){return Promise.all([n.e(9),n.e(11),n.e(15)]).then(n.bind(null,\"X/Jl\"))}),{loadableGenerated:{webpack:function(){return[\"X/Jl\"]},modules:[\"./AddrModal\"]}}),K=T()((function(){return Promise.all([n.e(9),n.e(11),n.e(16)]).then(n.bind(null,\"0bCS\"))}),{loadableGenerated:{webpack:function(){return[\"0bCS\"]},modules:[\"./KeysModal\"]}});function L(){var e,t=Object(y.b)(),n=t.account,o=t.chainId,w=t.library,k=Object(S.useRouter)().query,E=Object(a.useState)(!1),T=E[0],H=E[1],G=Object(a.useState)(k.key),L=G[0],R=G[1],W=Object(a.useState)(k.id),M=W[0],q=(W[1],Object(a.useState)(k.experimental)),B=q[0],z=(q[1],Object(a.useState)(\"\")),D=z[0],U=z[1],X=Object(a.useState)(\"\"),Y=X[0],Z=X[1],Q=Object(a.useState)(\"\"),$=Q[0],ee=Q[1],te=Object(a.useState)([]),ne=te[0],ae=te[1],re=Object(a.useState)([]),ce=re[0],oe=re[1],ie=Object(a.useState)([]),se=ie[0],ue=ie[1],le=Object(a.useState)(!1),de=le[0],fe=le[1],pe=Object(a.useState)(0),me=pe[0],be=pe[1],he=Object(a.useState)(null),ge=he[0],ve=he[1],Oe=Object(a.useState)(null),we=Oe[0],je=Oe[1],ye=Object(a.useState)(\"\"),Se=ye[0],xe=ye[1],ke=Object(a.useState)(\"\"),Ce=ke[0],Ee=ke[1],Te=Object(a.useState)({loaded:!1}),Ae=Te[0],_e=Te[1],Ie=Object(a.useState)(!1),Ne=Ie[0],He=Ie[1],Fe=Object(a.useState)(!1),Ge=Fe[0],Je=Fe[1],Pe=Object(a.useState)(\"claimed\"),Ve=Pe[0],Ke=Pe[1],Le=Object(a.useState)(null),Re=Le[0],We=Le[1],Me=Object(a.useState)(\"\"),qe=Me[0],Be=Me[1],ze=Object(a.useState)(\"\"),De=ze[0],Ue=ze[1],Xe=Object(a.useState)(\"\"),Ye=Xe[0],Ze=Xe[1],Qe=Object(a.useState)([]),$e=Qe[0],et=Qe[1],tt=Object(a.useState)(!1),nt=tt[0],at=tt[1],rt=Object(a.useState)(\"\"),ct=rt[0],ot=rt[1],it=Object(a.useState)(!1),st=it[0],ut=it[1],lt=Object(a.useState)(\"\"),dt=lt[0],ft=lt[1],pt=Object(a.useState)(!1),mt=pt[0],bt=pt[1],ht=Object(a.useState)(!1),gt=(ht[0],ht[1],Object(a.useState)(!1)),vt=gt[0],Ot=gt[1],wt=Object(a.useState)(!1),jt=wt[0],yt=wt[1],St=Object(a.useState)(\"\"),xt=St[0],kt=St[1],Ct=Object(a.useState)(!1),Et=Ct[0],Tt=Ct[1],At=Object(a.useState)(!1),_t=At[0],It=At[1],Nt=Object(N.b)(I.p.vaultHandler[o],I.p.vaultHandlerAbi,!0),Ht=Object(N.b)(I.p.emblemVault[o],I.p.emblemAbi,!0),Ft=Object(u.a)(),Gt=Ft.isOpen,Jt=Ft.onOpen,Pt=Ft.onClose,Vt=Object(u.a)(),Kt=Vt.isOpen,Lt=Vt.onOpen,Rt=Vt.onClose,Wt=function(){var e=Object(s.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qt(),e.next=3,fetch(I.h+\"/meta/\"+M,{method:\"GET\",headers:{\"Content-Type\":\"application/json\",service:\"evmetadata\"}});case 3:return t=e.sent,e.next=6,t.json();case 6:(n=e.sent).name?(Mt(n),Ut(n),at(!1),bt(!1)):(_e({loaded:!0}),bt(!0));case 8:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Mt=function(e){U(e.name),ee(e.image),Z(e.description),be(e.totalValue||0),ae(ne.concat(e.values)),oe(e.attributes.filter((function(e){return\"key\"===e.trait_type}))),Z(e.description),ue(e.addresses),ve(\"mainnet\"==e.network?1:\"rinkeby\"==e.network?4:\"mumbai\"==e.network?80001:\"matic\"==e.network?137:97),Ke(e.status),\"claimed\"===Ve&&We(e.claimedBy),_e({loaded:!0});var t=e.addresses.filter((function(e){return e.address.includes(\"private:\")})).length>0;fe(t),setTimeout((function(){!t&&Dt(e.values,e.addresses.filter((function(e){return\"ETH\"===e.coin}))[0].address,(function(e){ae(e)}))}),5)},qt=function(){var e=JSON.parse(localStorage.getItem(n+\"_\"+o+\"_\"+M+\"_vault\"));e&&(_e({loaded:!0}),Mt(e),at(!0))},Bt=function(){var e=Object(s.a)(i.a.mark((function e(t,n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(I.h+\"/eth/balance/\"+t,{method:\"GET\",headers:{\"Content-Type\":\"application/json\",service:\"evmetadata\"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,be(Number(me)+Number(r.totalValue)),e.abrupt(\"return\",n(r.values));case 8:case\"end\":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),zt=function(){var e=Object(s.a)(i.a.mark((function e(t,n,a){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(I.h+\"/btc/balance/\"+n,{method:\"GET\",headers:{\"Content-Type\":\"application/json\",service:\"evmetadata\"}});case 2:return r=e.sent,e.next=5,r.json();case 5:return c=e.sent,e.abrupt(\"return\",a(t.concat(c.values)));case 7:case\"end\":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Dt=function(){var e=Object(s.a)(i.a.mark((function e(t,n,a){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(I.h+\"/eth/nft/\"+n,{method:\"GET\",headers:{\"Content-Type\":\"application/json\",service:\"evmetadata\"}});case 2:return r=e.sent,e.next=5,r.json();case 5:if(!((c=e.sent).length>0)){e.next=10;break}return e.abrupt(\"return\",a(t.concat(c)));case 10:return e.abrupt(\"return\",a(t));case 11:case\"end\":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Ut=function(e){localStorage.setItem(n+\"_\"+o+\"_\"+M+\"_vault\",JSON.stringify(e))},Xt=function(){var e=Object(s.a)(i.a.mark((function e(t,n,a){var r,c,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new Headers).append(\"chainId\",o.toString()),r.append(\"service\",\"evmetadata\"),r.append(\"Content-Type\",\"application/json\"),c=JSON.stringify({signature:t}),e.next=7,fetch(I.h+\"/verify/\"+n,{method:\"POST\",headers:r,body:c,redirect:\"follow\"});case 7:return s=e.sent,e.next=10,s.json();case 10:return u=e.sent,e.abrupt(\"return\",a(u));case 12:case\"end\":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Yt=function(){var e=Object(s.a)(i.a.mark((function e(){var t,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.prev=1,e.next=4,Ht.ownerOf(M);case 4:return t=e.sent,e.next=7,Nt.getPreTransfer(M);case 7:return a=e.sent,e.next=10,Ht.isApprovedForAll(n,I.p.vaultHandler[o]);case 10:r=e.sent,H(r),yt(\"0x0000000000000000000000000000000000000000\"!==a._from),console.log(\"owned\",t===n),console.log(t,n),console.log(\"approved\",r),He(t===n),e.next=21;break;case 19:e.prev=19,e.t0=e.catch(1);case 21:case\"end\":return e.stop()}}),e,null,[[1,19]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){console.log(\"mine?\",Ne),console.log(\"claiming?\",Ge),console.log(\"accepting?\",vt)}));var Zt=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w.getSigner(n).signMessage(\"Claim: \"+M).then((function(e){Xt(e,M,(function(e){Be(e.decrypted.phrase),Ue(e.decrypted.keys.filter((function(e){return\"btc\"===e.coin}))[0].privkey),Ze(e.decrypted.keys.filter((function(e){return\"eth\"===e.coin}))[0].privkey),et(e.decrypted.values),Lt()}))}));case 1:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qt=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ht.transferFrom(n,I.c,M).then((function(e){var t=e.hash;Je(!0),setTimeout((function(){je(t)}),100)}));case 1:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$t=function(){var e=Object(s.a)(i.a.mark((function e(){var t,n,a,r,c,o,s,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=function(e){for(var i=0;i<r-o;i++){var l=Math.floor(t.length*Math.random()),d=t.charAt(l);s+=d}c==a-1&&o++,c==a&&(u+=n.charAt(o-1),c=0),ot(u+s),s=\"\"},!st){e.next=3;break}return e.abrupt(\"return\");case 3:ut(!0),t=\"abcdefghijklmnopqrstuvwxyz\",5,r=(n=\"Decrypting\").length,c=0,o=0,s=\"\",u=\"\",function e(t){setTimeout((function(){--t?e(t):ut(!1),l(t),c+=1}),5)}(r*(a=8)+1);case 14:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function en(e){return e.split(\"\\n\\n\\n\\n\")[0].trim()}function tn(e){dt&&(e=dt),$t();var t=se[0].address.replace(\"private:\",\"\");try{var n=J.a.AES.decrypt(t,e);JSON.parse(n.toString(J.a.enc.Utf8)),fe(!1),ft(e),ue(function(e){return se.forEach((function(t){var n=t.address.replace(\"private:\",\"\");t.address=function(e,t){var n=J.a.AES.decrypt(e,t);return JSON.parse(n.toString(J.a.enc.Utf8))}(n,e)})),se}(e)),Bt(se.filter((function(e){return\"ETH\"===e.coin}))[0].address,(function(e){zt(e,se.filter((function(e){return\"BTC\"===e.coin}))[0].address,(function(e){Dt(e,se.filter((function(e){return\"ETH\"===e.coin}))[0].address,(function(e){ae(e.concat(ne))}))}))}))}catch(a){}}return Object(a.useEffect)((function(){Wt()}),[]),Object(a.useEffect)((function(){n&&o&&ge&&o==ge&&Yt()})),P(r.a.Fragment,null,P(j.a,null,P(\"meta\",{name:\"twitter:card\",content:\"summary_large_image\"}),P(\"meta\",{name:\"twitter:site\",content:\"Emblem.Finance\"}),P(\"meta\",{name:\"twitter:title\",content:D}),P(\"meta\",{name:\"twitter:description\",content:en(Y)}),P(\"meta\",{name:\"twitter:image\",content:$})),P(V,{isOpen:Gt,onClose:Pt,addrCoin:Se,addrAddr:Ce}),P(K,{isOpen:Kt,onClose:Rt,mnemonic:qe,privKeyBTC:De,privKeyETH:Ye,privValues:$e}),P(C.a,{loaded:Ae.loaded},nt?P(x.a,null):\"\",mt?P(f.a,{align:\"center\"},P(p.a,{width:\"md\",src:\"https://starwarsblog.starwars.com/wp-content/uploads/2017/06/25-star-wars-quotes-obi-wan-kenobi-identification-tall.jpg\"}),P(m.a,null,\"THESE ARE NOT THE VAULTS YOU ARE LOOKING FOR\",\" \",P(h.a,{color:\"#638cd8\",href:\"../create\"},\"CREATE ONE HERE!\"))):P(F.a,{className:\"Tilt\",options:{max:B?19:0,scale:1}},P(l.a,{width:\"full\",align:\"center\",justifyContent:\"center\"},P(d.a,{maxW:\"sm\",borderWidth:\"1px\",borderColor:ge!=o?\"orange.500\":\"claimed\"==Ve?\"green.500\":null,rounded:\"lg\",overflow:\"hidden\",alignItems:\"center\",minW:390},ge!=o?P(d.a,{mt:\"1\",fontWeight:\"semibold\",as:\"h3\",lineHeight:\"tight\",p:2,textAlign:\"center\",textTransform:\"uppercase\",alignItems:\"center\",color:\"orange.500\"},\"BEWARE: Vault is on a different network than you are.\"):null,P(d.a,{mt:\"1\",fontWeight:\"semibold\",as:\"h3\",lineHeight:\"tight\",p:2,textAlign:\"center\",textTransform:\"uppercase\",alignItems:\"center\"},D,de?null:\": ~$\"+me),P(f.a,{align:\"center\"},P(p.a,{src:Object(A.k)($)?$:\"https://circuitsofvalue.com/public/coval-logo.png\",width:\"250px\"})),P(f.a,{align:\"center\"},P(d.a,{mt:\"2\",ml:\"4\",lineHeight:\"tight\"},P(m.a,{mt:2,as:\"h4\",ml:\"4\",mr:\"4\",fontSize:\"xs\",fontStyle:\"italic\"},en(Y)))),P(d.a,{p:\"6\"},P(d.a,{d:\"flex\",alignItems:\"baseline\"},P(d.a,{color:\"gray.500\",letterSpacing:\"wide\",fontSize:\"sm\",ml:\"2\"},P(m.a,{as:\"h4\",fontWeight:\"semibold\"},\"Current Contents:\"),de?P(r.a.Fragment,null,P(m.a,{pb:2,color:ct?\"green.500\":null},ct||\"Contents hidden. Enter password to unlock.\"),P(b.a,{type:\"password\",id:\"vault-password\",onChange:function(e){return tn(e.target.value)},\"aria-describedby\":\"password-helper-text\"})):ne.length?ne.map((function(e){return P(m.a,{key:e.name,isTruncated:!0},P(p.a,{width:10,src:e.image}),e.name,\" :\",\" \",e.balance?e.balance:\"nft\"==e.type?P(h.a,{href:e.external_url,isExternal:!0},\"View NFT\"):null)})):null,ce.length?ce.map((function(e){return P(m.a,null,\"Data: \",e.attribute_key)})):P(m.a,null,\"Nothing in here! Fill 'er up!\"))),de?null:P(d.a,{d:\"flex\",alignItems:\"baseline\",justifyContent:\"space-between\",mt:\"4\"},P(g.a,{justifyContent:\"space-between\",spacing:6},se.map((function(e){return P(v.a,{key:e.address,onClick:function(){xe(e.coin),Ee(e.address),Jt()}},\"Put \",\"ETH\"==e.coin?e.coin+\"/ERC20\":e.coin,\" In\")})))),\"claimed\"===Ve||L?null:P(d.a,{d:\"flex\",alignItems:\"baseline\",justifyContent:\"space-between\",mt:\"4\"},P(v.a,Object(c.a)({width:\"100%\",as:\"a\"},{href:\"https://\"+(4==ge?\"rinkeby.\":\"\")+\"opensea.io/assets/\"+I.p.emblemVault[ge]+\"/\"+M,target:\"_blank\",rel:\"noopener noreferrer\"}),Ne?\"Sell/Gift/Send (Opensea)\":\"Make an Offer (Opensea)\")),Ne&&!jt?P(r.a.Fragment,null,P(d.a,{d:\"flex\",alignItems:\"baseline\",justifyContent:\"space-between\",mt:\"4\"},P(v.a,{width:\"100%\",onClick:function(){if(T){var t=J.a.lib.WordArray.random(16).toString(),n=J.a.SHA256(t).toString();console.log(\"plain\",t),console.log(\"sha\",n),kt(t),e=n,Tt(!Et),setTimeout((function(){console.log(\"transferImage\",\"0x\"+e),Nt.addPreTransfer(M,\"0x\"+e).then((function(e){var t=e.hash;setTimeout((function(){je(t),It(!0)}),100)})).catch((function(e){4001!==(null===e||void 0===e?void 0:e.code)?console.log(\"tx failed.\",e):It(!1)}))}),500)}else Ht.setApprovalForAll(I.p.vaultHandler[o],!0).then((function(e){var t=e.hash;setTimeout((function(){je(t),It(!0)}),100)})).catch((function(e){4001!==(null===e||void 0===e?void 0:e.code)?console.log(\"tx failed.\",e):It(!1)}))}},\" \",T?\"Get Link (Send Vault Via Link)\":\"Approve Gifting\",\" \")),Et?P(d.a,null,P(h.a,{href:location.protocol+\"//\"+location.host+\"/nft?id=\"+M+\"&key=\"+xt},\"Copy Me\")):null):null,jt&&Re!==n?P(r.a.Fragment,null,P(v.a,{mt:2,width:\"100%\",onClick:function(){Nt.transferWithCode(M,L).then((function(e){var t=e.hash;setTimeout((function(){je(t),Ot(!0)}),100)})).catch((function(e){4001!==(null===e||void 0===e?void 0:e.code)?console.log(\"tx failed.\",e):Ot(!1)}))}},\"Accept\"),P(b.a,{mt:2,type:\"password\",id:\"mintPassword\",minLength:3,maxLength:200,value:L,onChange:function(e){return R(e.target.value)},autoComplete:\"off\"})):null,\"claimed\"!==Ve&&n&&ge===o&&Ne?P(d.a,{d:\"flex\",alignItems:\"baseline\",justifyContent:\"space-between\",mt:\"4\"},P(v.a,{width:\"100%\",onClick:function(){Qt()},isDisabled:Ge},Ge?\"Claiming ...\":\"Claim (Crack Open Vault)\")):\"claimed\"===Ve&&Re===n&&ge===o?P(d.a,{d:\"flex\",alignItems:\"baseline\",justifyContent:\"space-between\",mt:\"4\"},P(v.a,{width:\"100%\",onClick:Zt},\"Get Keys\")):null),P(f.a,{direction:\"column\",align:\"center\"},\"claimed\"==Ve?P(m.a,{color:\"green.500\"},\"CLAIMED\"):null),we?P(O.a,{status:\"info\"},P(O.b,null),vt?\"Accepting your vault\":\"Claiming your vault ...\"):null))),we?P(_.a,{hash:we,onComplete:function(){!Ge||vt||_t?_t&&je(null):(je(null),Ke(\"claimed\"),Je(!1),We(n),Zt())}}):null))}var R=r.a.createElement;function W(){return R(L,null)}}},[[\"CKsJ\",2,1,6,7,0,3,4,5,8,10,12,14]]]);","extractedComments":[]}