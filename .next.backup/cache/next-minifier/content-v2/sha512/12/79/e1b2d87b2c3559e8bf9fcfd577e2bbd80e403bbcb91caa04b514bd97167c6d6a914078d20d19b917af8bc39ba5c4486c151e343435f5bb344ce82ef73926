{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[25],{CKsJ:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/nft\",function(){return n(\"Z8wp\")}])},Z8wp:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"default\",(function(){return D}));var a=n(\"q1tI\"),r=n.n(a),o=n(\"wx14\"),c=n(\"o0o1\"),i=n.n(c),s=n(\"HaE+\"),u=n(\"XZ7F\"),l=n(\"Weur\"),d=n(\"BMxC\"),p=n(\"Yn+B\"),f=n(\"bQFp\"),m=n(\"sK1y\"),b=n(\"FpzS\"),h=n(\"7fKF\"),g=n(\"pboS\"),v=n(\"IP4Q\"),w=n(\"eJLp\"),O=n(\"LqLE\"),j=n(\"8Kt/\"),y=n.n(j),S=n(\"Z6YE\"),x=n(\"nOHt\"),k=n(\"Ute3\"),C=n(\"Y1ui\"),E=n.n(C),T=n(\"a6RD\"),_=n.n(T),A=n(\"iBPG\"),I=n(\"zIq6\"),H=n(\"N39q\"),N=n(\"21eR\"),F=n(\"c+OE\"),G=n.n(F),P=n(\"NFKh\"),L=n.n(P),V=n(\"sd7e\"),J=n(\"IujW\"),W=n.n(J),K=n(\"wH4i\"),R=n.n(K),M=r.a.createElement,q=_()((function(){return Promise.all([n.e(10),n.e(15)]).then(n.bind(null,\"X/Jl\"))}),{loadableGenerated:{webpack:function(){return[\"X/Jl\"]},modules:[\"./AddrModal\"]}}),B=_()((function(){return Promise.all([n.e(10),n.e(16)]).then(n.bind(null,\"0bCS\"))}),{loadableGenerated:{webpack:function(){return[\"0bCS\"]},modules:[\"./KeysModal\"]}});function U(){var e,t=Object(S.b)(),n=t.account,c=t.chainId,j=t.library,C=Object(x.useRouter)().query,T=Object(a.useState)(!1),_=T[0],F=T[1],P=Object(a.useState)(C.key),J=P[0],K=P[1],U=Object(a.useState)(C.id),z=U[0],D=(U[1],Object(a.useState)(C.experimental)),X=(D[0],D[1],Object(a.useState)(\"\")),Y=X[0],Z=X[1],Q=Object(a.useState)(\"\"),$=Q[0],ee=Q[1],te=Object(a.useState)(\"\"),ne=te[0],ae=te[1],re=Object(a.useState)([]),oe=re[0],ce=re[1],ie=Object(a.useState)([]),se=ie[0],ue=ie[1],le=Object(a.useState)([]),de=le[0],pe=le[1],fe=Object(a.useState)(!1),me=fe[0],be=fe[1],he=Object(a.useState)(0),ge=he[0],ve=he[1],we=Object(a.useState)(null),Oe=we[0],je=we[1],ye=Object(a.useState)(null),Se=ye[0],xe=ye[1],ke=Object(a.useState)(\"\"),Ce=ke[0],Ee=ke[1],Te=Object(a.useState)(\"\"),_e=Te[0],Ae=Te[1],Ie=Object(a.useState)({loaded:!1}),He=Ie[0],Ne=Ie[1],Fe=Object(a.useState)(!1),Ge=Fe[0],Pe=Fe[1],Le=Object(a.useState)(!1),Ve=Le[0],Je=Le[1],We=Object(a.useState)(\"claimed\"),Ke=We[0],Re=We[1],Me=Object(a.useState)(null),qe=Me[0],Be=Me[1],Ue=Object(a.useState)(\"\"),ze=Ue[0],De=Ue[1],Xe=Object(a.useState)(\"\"),Ye=Xe[0],Ze=Xe[1],Qe=Object(a.useState)(\"\"),$e=Qe[0],et=Qe[1],tt=Object(a.useState)([]),nt=tt[0],at=tt[1],rt=Object(a.useState)(!1),ot=rt[0],ct=rt[1],it=Object(a.useState)(\"\"),st=it[0],ut=it[1],lt=Object(a.useState)(!1),dt=lt[0],pt=lt[1],ft=Object(a.useState)(\"\"),mt=ft[0],bt=ft[1],ht=Object(a.useState)(!1),gt=ht[0],vt=ht[1],wt=Object(a.useState)(!1),Ot=(wt[0],wt[1],Object(a.useState)(!1)),jt=Ot[0],yt=Ot[1],St=Object(a.useState)(!1),xt=St[0],kt=St[1],Ct=Object(a.useState)(!1),Et=Ct[0],Tt=Ct[1],_t=Object(a.useState)(\"\"),At=_t[0],It=_t[1],Ht=Object(a.useState)(!1),Nt=Ht[0],Ft=Ht[1],Gt=Object(a.useState)(!1),Pt=Gt[0],Lt=Gt[1],Vt=Object(N.b)(H.p.vaultHandler[c],H.p.vaultHandlerAbi,!0),Jt=Object(N.b)(H.p.emblemVault[c],H.p.emblemAbi,!0),Wt=Object(u.a)(),Kt=Wt.isOpen,Rt=Wt.onOpen,Mt=Wt.onClose,qt=Object(u.a)(),Bt=qt.isOpen,Ut=qt.onOpen,zt=qt.onClose,Dt=function(){var e=Object(s.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tn(),e.next=3,fetch(H.h+\"/meta/\"+z+\"?experimental=true\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",service:\"evmetadata\"}});case 3:return t=e.sent,e.next=6,t.json();case 6:(n=e.sent).name?(Yt(n),en(n),ct(!1),vt(!1)):(Ne({loaded:!0}),vt(!0));case 8:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xt=function(){var e=Object(s.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(H.h+\"/witness/\"+z,{method:\"GET\",headers:{\"Content-Type\":\"application/json\",service:\"evmetadata\",chainid:c.toString()}});case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(a=e.sent).signature){e.next=11;break}return console.log(\"witness\",a),e.abrupt(\"return\",t(a));case 11:return e.abrupt(\"return\",t(!1));case 12:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yt=function(e){Z(e.name),ae(e.image),ee(e.description),ve(e.totalValue||0),ce(oe.concat(e.values)),ue(e.attributes.filter((function(e){return\"key\"===e.trait_type}))),ee(e.description),pe(e.addresses),je(\"mainnet\"==e.network?1:\"rinkeby\"==e.network?4:\"mumbai\"==e.network?80001:\"matic\"==e.network?137:97),Re(e.status),\"claimed\"===Ke&&Be(e.claimedBy),Ne({loaded:!0});var t=e.addresses.filter((function(e){return e.address.includes(\"private:\")})).length>0;be(t),setTimeout((function(){!t&&$t(e.values,e.addresses.filter((function(e){return\"ETH\"===e.coin}))[0].address,(function(e){ce(e)}))}),5)},Zt=function(){var e=Object(s.a)(i.a.mark((function e(t,n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(H.h+\"/eth/balance/\"+t,{method:\"GET\",headers:{\"Content-Type\":\"application/json\",service:\"evmetadata\"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,ve(Number(ge)+Number(r.totalValue)),e.abrupt(\"return\",n(r.values));case 8:case\"end\":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Qt=function(){var e=Object(s.a)(i.a.mark((function e(t,n,a){var r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(H.h+\"/btc/balance/\"+n,{method:\"GET\",headers:{\"Content-Type\":\"application/json\",service:\"evmetadata\"}});case 2:return r=e.sent,e.next=5,r.json();case 5:return o=e.sent,e.abrupt(\"return\",a(t.concat(o.values)));case 7:case\"end\":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),$t=function(){var e=Object(s.a)(i.a.mark((function e(t,n,a){var r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(H.h+\"/eth/nft/\"+n,{method:\"GET\",headers:{\"Content-Type\":\"application/json\",service:\"evmetadata\"}});case 2:return r=e.sent,e.next=5,r.json();case 5:if(!((o=e.sent).length>0)){e.next=10;break}return e.abrupt(\"return\",a(t.concat(o)));case 10:return e.abrupt(\"return\",a(t));case 11:case\"end\":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),en=function(e){localStorage.setItem(n+\"_\"+c+\"_\"+z+\"_vault\",JSON.stringify(e))},tn=function(){var e=JSON.parse(localStorage.getItem(n+\"_\"+c+\"_\"+z+\"_vault\"));e&&(Ne({loaded:!0}),Yt(e),ct(!0))},nn=function(){var e=localStorage.getItem(n+\"_\"+c+\"_\"+z+\"_mintPassword\");e&&Et&&K(e)},an=function(){var e=Object(s.a)(i.a.mark((function e(t,n,a){var r,o,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new Headers).append(\"chainId\",c.toString()),r.append(\"service\",\"evmetadata\"),r.append(\"Content-Type\",\"application/json\"),o=JSON.stringify({signature:t}),e.next=7,fetch(H.h+\"/verify/\"+n,{method:\"POST\",headers:r,body:o,redirect:\"follow\"});case 7:return s=e.sent,e.next=10,s.json();case 10:return u=e.sent,e.abrupt(\"return\",a(u));case 12:case\"end\":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),rn=function(){var e=Object(s.a)(i.a.mark((function e(){var t,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.prev=1,e.next=4,Jt.ownerOf(z);case 4:return t=e.sent,e.next=7,Vt.getPreTransfer(z);case 7:return a=e.sent,e.next=10,Jt.isApprovedForAll(n,H.p.vaultHandler[c]);case 10:r=e.sent,F(r),Tt(\"0x0000000000000000000000000000000000000000\"!==a._from),Pe(t===n),nn(),e.next=19;break;case 17:e.prev=17,e.t0=e.catch(1);case 19:case\"end\":return e.stop()}}),e,null,[[1,17]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){}));var on=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j.getSigner(n).signMessage(\"Claim: \"+z).then((function(e){an(e,z,(function(e){De(e.decrypted.phrase),Ze(e.decrypted.keys.filter((function(e){return\"btc\"===e.coin}))[0].privkey),et(e.decrypted.keys.filter((function(e){return\"eth\"===e.coin}))[0].privkey),at(e.decrypted.values),Ut()}))}));case 1:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),cn=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Jt.transferFrom(n,H.c,z).then((function(e){var t=e.hash;Je(!0),setTimeout((function(){xe(t)}),100)}));case 1:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sn=function(){var e=Object(s.a)(i.a.mark((function e(){var t,n,a,r,o,c,s,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=function(e){for(var i=0;i<r-c;i++){var l=Math.floor(t.length*Math.random()),d=t.charAt(l);s+=d}o==a-1&&c++,o==a&&(u+=n.charAt(c-1),o=0),ut(u+s),s=\"\"},!dt){e.next=3;break}return e.abrupt(\"return\");case 3:pt(!0),t=\"abcdefghijklmnopqrstuvwxyz\",5,r=(n=\"Decrypting\").length,o=0,c=0,s=\"\",u=\"\",function e(t){setTimeout((function(){--t?e(t):pt(!1),l(t),o+=1}),5)}(r*(a=8)+1);case 14:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function un(e){return e.split(\"\\n\\n\\n\\n\")[0].trim()}function ln(e){mt&&(e=mt),sn();var t=de[0].address.replace(\"private:\",\"\");try{var n=L.a.AES.decrypt(t,e);JSON.parse(n.toString(L.a.enc.Utf8)),be(!1),bt(e),pe(function(e){return de.forEach((function(t){var n=t.address.replace(\"private:\",\"\");t.address=function(e,t){var n=L.a.AES.decrypt(e,t);return JSON.parse(n.toString(L.a.enc.Utf8))}(n,e)})),de}(e)),Zt(de.filter((function(e){return\"ETH\"===e.coin}))[0].address,(function(e){Qt(e,de.filter((function(e){return\"BTC\"===e.coin}))[0].address,(function(e){$t(e,de.filter((function(e){return\"ETH\"===e.coin}))[0].address,(function(e){ce(e.concat(oe))}))}))}))}catch(a){}}return Object(a.useEffect)((function(){Dt()}),[]),Object(a.useEffect)((function(){n&&c&&Oe&&c==Oe&&rn()})),M(r.a.Fragment,null,M(y.a,null,M(\"meta\",{name:\"twitter:card\",content:\"summary_large_image\"}),M(\"meta\",{name:\"twitter:site\",content:\"Emblem.Finance\"}),M(\"meta\",{name:\"twitter:title\",content:Y}),M(\"meta\",{name:\"twitter:description\",content:un($)}),M(\"meta\",{name:\"twitter:image\",content:ne})),M(q,{isOpen:Kt,onClose:Mt,addrCoin:Ce,addrAddr:_e}),M(B,{isOpen:Bt,onClose:zt,mnemonic:ze,privKeyBTC:Ye,privKeyETH:$e,privValues:nt}),M(E.a,{loaded:He.loaded},ot?M(k.a,null):\"\",gt?M(p.a,{align:\"center\"},M(f.a,{width:\"md\",src:\"https://starwarsblog.starwars.com/wp-content/uploads/2017/06/25-star-wars-quotes-obi-wan-kenobi-identification-tall.jpg\"}),M(m.a,null,\"THESE ARE NOT THE VAULTS YOU ARE LOOKING FOR\",\" \",M(g.a,{color:\"#638cd8\",href:\"../create\"},\"CREATE ONE HERE!\"))):M(G.a,{className:\"Tilt\",options:{max:0,scale:1}},M(l.a,{width:\"full\",align:\"center\",justifyContent:\"center\"},M(d.a,{maxW:\"sm\",borderWidth:\"1px\",borderColor:Oe!=c?\"orange.500\":\"claimed\"==Ke?\"green.500\":null,rounded:\"lg\",overflow:\"hidden\",alignItems:\"center\",minW:390},Oe!=c?M(d.a,{mt:\"1\",fontWeight:\"semibold\",as:\"h3\",lineHeight:\"tight\",p:2,textAlign:\"center\",textTransform:\"uppercase\",alignItems:\"center\",color:\"orange.500\"},\"BEWARE: Vault is on a different network than you are.\"):null,M(d.a,{mt:\"1\",fontWeight:\"semibold\",as:\"h3\",lineHeight:\"tight\",p:2,textAlign:\"center\",textTransform:\"uppercase\",alignItems:\"center\"},Y,me?null:\": ~$\"+ge),M(p.a,{align:\"center\"},M(f.a,{src:Object(A.k)(ne)?ne:\"https://circuitsofvalue.com/public/coval-logo.png\",width:\"250px\"})),M(p.a,{align:\"center\"},M(d.a,{mt:\"2\",ml:\"4\",lineHeight:\"tight\"},M(m.a,{mt:2,as:\"h4\",ml:\"4\",mr:\"4\",fontSize:\"xs\",fontStyle:\"italic\"},M(W.a,{plugins:[R.a],children:un($)})))),M(d.a,{p:\"6\"},M(d.a,{d:\"flex\",alignItems:\"baseline\"},M(d.a,{color:\"gray.500\",letterSpacing:\"wide\",fontSize:\"sm\",ml:\"2\"},M(m.a,{as:\"h4\",fontWeight:\"semibold\"},\"Current Contents:\"),me?M(r.a.Fragment,null,M(m.a,{pb:2,color:st?\"green.500\":null},st||\"Contents hidden. Enter password to unlock.\"),M(b.a,{type:\"password\",id:\"vault-password\",onChange:function(e){return ln(e.target.value)},\"aria-describedby\":\"password-helper-text\"})):oe.length?oe.map((function(e){return M(m.a,{key:e.name,isTruncated:!0},e.address&&\"nft\"!==e.type?M(h.a,{\"aria-label\":e.name,hasArrow:!0,label:\"Add \"+e.symbol+\" to wallet\",placement:\"top\"},M(g.a,{onClick:function(){Object(V.addTokenToWallet)({address:e.address,symbol:e.symbol,decimals:e.decimals,image:e.image?e.image:null})}},\"+\")):null,\"(\",e.coin.toLowerCase(),\")\",\" \",e.name,\" :\",\" \",e.balance?e.balance:\"nft\"==e.type?M(g.a,{href:e.external_url,isExternal:!0},\"View NFT\"):null)})):null,se.length?se.map((function(e){return M(m.a,null,\"Data: \",e.attribute_key)})):se.length||oe.length?null:M(m.a,null,\"Nothing in here! Fill 'er up!\"))),me?null:M(d.a,{d:\"flex\",alignItems:\"baseline\",justifyContent:\"space-between\",mt:\"4\"},M(v.a,{justifyContent:\"space-between\",spacing:6},de.map((function(e){return M(w.a,{key:e.address,onClick:function(){Ee(e.coin),Ae(e.address),Rt()}},\"Put \",\"ETH\"==e.coin?e.coin+\"/ERC20\":e.coin,\" In\")})))),\"claimed\"!==Ke?M(d.a,{d:\"flex\",alignItems:\"baseline\",justifyContent:\"space-between\",mt:\"4\"},M(w.a,Object(o.a)({width:\"100%\",as:\"a\"},{href:\"https://\"+(4==Oe?\"rinkeby.\":\"\")+\"opensea.io/assets/\"+H.p.emblemVault[Oe]+\"/\"+z,target:\"_blank\",rel:\"noopener noreferrer\"}),Ge?\"Sell/Gift/Send (Opensea)\":\"Make an Offer (Opensea)\")):null,Ge&&!Et?M(r.a.Fragment,null,M(d.a,{d:\"flex\",alignItems:\"baseline\",justifyContent:\"space-between\",mt:\"4\"},M(w.a,{width:\"100%\",onClick:function(){if(!_)return kt(!0),void Jt.setApprovalForAll(H.p.vaultHandler[c],!0).then((function(e){var t=e.hash;setTimeout((function(){xe(t)}),100)})).catch((function(e){4001!==(null===e||void 0===e?void 0:e.code)?console.log(\"tx failed.\",e):kt(!1)}));var t=L.a.lib.WordArray.random(16).toString(),n=L.a.SHA256(t).toString();console.log(\"plain\",t),console.log(\"sha\",n),It(t),e=n,setTimeout((function(){console.log(\"transferImage\",\"0x\"+e),Lt(!0),Vt.addPreTransfer(z,\"0x\"+e).then((function(e){var t=e.hash;xe(t),console.log(\"Set Pre Transfering True\",Pt)})).catch((function(e){(null===e||void 0===e?void 0:e.code)&&(console.log(\"Error?\"),Lt(!1),Ft(!1),It(\"\"))}))}),500)}},\" \",_?\"Get Link (Send Vault Via Link)\":\"Approve Gifting\",\" \"))):null,(Nt||J)&&Et?M(d.a,null,M(g.a,{href:location.protocol+\"//\"+location.host+\"/nft?id=\"+z+\"&key=\"+(At||J)},\"Copy Gift Link\"),M(m.a,null,\"Password: \",At||J)):null,Et&&qe!==n?M(r.a.Fragment,null,M(w.a,{mt:2,width:\"100%\",onClick:function(){console.log(J),yt(!0),Xt((function(e){Vt.transferWithCode(z,J,n,e.nonce,e.signature).then((function(e){var t=e.hash;setTimeout((function(){xe(t)}),100)})).catch((function(e){yt(!1),4001!==(null===e||void 0===e?void 0:e.code)&&console.log(\"tx failed.\",e)}))}))}},\"Accept\"),M(b.a,{mt:2,type:\"password\",id:\"mintPassword\",minLength:3,maxLength:200,value:J||\"\",onChange:function(e){console.log(\"grrr\",e.target.value,J),K(e.target.value)},autoComplete:\"off\"})):null,\"claimed\"!==Ke&&n&&Oe===c&&Ge?M(d.a,{d:\"flex\",alignItems:\"baseline\",justifyContent:\"space-between\",mt:\"4\"},M(w.a,{width:\"100%\",onClick:function(){cn()},isDisabled:Ve},Ve?\"Claiming ...\":\"Claim (Crack Open Vault)\")):\"claimed\"===Ke&&qe===n&&Oe===c?M(d.a,{d:\"flex\",alignItems:\"baseline\",justifyContent:\"space-between\",mt:\"4\"},M(w.a,{width:\"100%\",onClick:on},\"Get Keys\")):null),M(p.a,{direction:\"column\",align:\"center\"},\"claimed\"==Ke?M(m.a,{color:\"green.500\"},\"CLAIMED\"):null),Se?M(O.a,{status:\"info\"},M(O.b,null),jt?\"Accepting Your Gift Vault\":Ve?\"Claiming your Vault ...\":xt?\"Handling Approval Flow ...\":\"Generating Gift Link ...\"):null))),Se?M(I.a,{hash:Se,onComplete:function(){!Ve||jt||Pt?Pt?(localStorage.setItem(n+\"_\"+c+\"_\"+z+\"_mintPassword\",At),Ft(!0),Lt(!1),xe(null)):jt?(yt(!1),Dt(),xe(null)):xt?(kt(!1),Dt(),xe(null)):(console.log(\"claiming\",Ve),console.log(\"accepting\",jt),console.log(\"preTransfering\",Pt),console.log(\"approving\",xt),console.log(\"Unknown state\")):(console.log(111111),xe(null),Re(\"claimed\"),Je(!1),Be(n),on())}}):null))}var z=r.a.createElement;function D(){return z(U,null)}}},[[\"CKsJ\",2,1,5,7,0,3,4,6,9,8,11,12,14]]]);","extractedComments":[]}