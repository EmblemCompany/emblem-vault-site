{"code":"(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[29,62,63,64],{13:function(e,t){},14:function(e,t){},2:function(e,t){},\"7W2i\":function(e,t,r){var n=r(\"SksO\");e.exports=function(e,t){if(\"function\"!==typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},Bnag:function(e,t){e.exports=function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")},e.exports.default=e.exports,e.exports.__esModule=!0},C99U:function(e,t,r){\"use strict\";function n(){var e=Object.create(null),t=0,r=0,n=0,i=!1;function o(t){n--,delete e[t]}this.put=function(t,r,a,s){if(i&&console.log(\"caching: %s = %j (@%s)\",t,r,a),\"undefined\"!==typeof a&&(\"number\"!==typeof a||isNaN(a)||a<=0))throw new Error(\"Cache timeout must be a positive number\");if(\"undefined\"!==typeof s&&\"function\"!==typeof s)throw new Error(\"Cache timeout callback must be a function\");var u=e[t];u?clearTimeout(u.timeout):n++;var c={value:r,expire:a+Date.now()};return isNaN(c.expire)||(c.timeout=setTimeout(function(){o(t),s&&s(t,r)}.bind(this),a)),e[t]=c,r},this.del=function(t){var r=!0,n=e[t];return n?(clearTimeout(n.timeout),!isNaN(n.expire)&&n.expire<Date.now()&&(r=!1)):r=!1,r&&o(t),r},this.clear=function(){for(var o in e)clearTimeout(e[o].timeout);n=0,e=Object.create(null),i&&(t=0,r=0)},this.get=function(o){var a=e[o];if(\"undefined\"!=typeof a){if(isNaN(a.expire)||a.expire>=Date.now())return i&&t++,a.value;i&&r++,n--,delete e[o]}else i&&r++;return null},this.size=function(){return n},this.memsize=function(){var t,r=0;for(t in e)r++;return r},this.debug=function(e){i=e},this.hits=function(){return t},this.misses=function(){return r},this.keys=function(){return Object.keys(e)},this.exportJson=function(){var t={};for(var r in e){var n=e[r];t[r]={value:n.value,expire:n.expire||\"NaN\"}}return JSON.stringify(t)},this.importJson=function(t,r){var n=JSON.parse(t),o=Date.now(),a=r&&r.skipDuplicates;for(var s in n)if(n.hasOwnProperty(s)){if(a)if(e[s]){i&&console.log(\"Skipping duplicate imported key '%s'\",s);continue}var u=n[s],c=u.expire-o;if(c<=0){this.del(s);continue}c=c>0?c:void 0,this.put(s,u.value,c)}return this.size()}}e.exports=new n,e.exports.Cache=n},EbDI:function(e,t){e.exports=function(e){if(\"undefined\"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e[\"@@iterator\"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},EjJx:function(e,t,r){\"use strict\";function n(e){this.message=e}r.r(t),r.d(t,\"InvalidTokenError\",(function(){return a})),n.prototype=new Error,n.prototype.name=\"InvalidCharacterError\";var i=\"undefined\"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,\"\");if(t.length%4==1)throw new n(\"'atob' failed: The string to be decoded is not correctly encoded.\");for(var r,i,o=0,a=0,s=\"\";i=t.charAt(a++);~i&&(r=o%4?64*r+i:i,o++%4)?s+=String.fromCharCode(255&r>>(-2*o&6)):0)i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\".indexOf(i);return s};function o(e){var t=e.replace(/-/g,\"+\").replace(/_/g,\"/\");switch(t.length%4){case 0:break;case 2:t+=\"==\";break;case 3:t+=\"=\";break;default:throw\"Illegal base64url string!\"}try{return function(e){return decodeURIComponent(i(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r=\"0\"+r),\"%\"+r})))}(t)}catch(e){return i(t)}}function a(e){this.message=e}a.prototype=new Error,a.prototype.name=\"InvalidTokenError\",t.default=function(e,t){if(\"string\"!=typeof e)throw new a(\"Invalid token specified\");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(o(e.split(\".\")[r]))}catch(e){throw new a(\"Invalid token specified: \"+e.message)}}},\"Hvl/\":function(e,t,r){\"use strict\";(function(e){function n(e){return!(!e||\"function\"!==typeof e.then)}function i(e){return e||(e=0),new Promise((function(t){return setTimeout(t,e)}))}function o(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function a(){return Math.random().toString(36).substring(2)}r.d(t,\"b\",(function(){return n})),r.d(t,\"f\",(function(){return i})),r.d(t,\"d\",(function(){return o})),r.d(t,\"e\",(function(){return a})),r.d(t,\"c\",(function(){return c})),r.d(t,\"a\",(function(){return f}));var s=0,u=0;function c(){var e=(new Date).getTime();return e===s?1e3*e+ ++u:(s=e,u=0,1e3*e)}var f=\"[object process]\"===Object.prototype.toString.call(\"undefined\"!==typeof e?e:0)}).call(this,r(\"8oxB\"))},I24s:function(e,t,r){\"use strict\";r.r(t),r.d(t,\"BroadcastChannel\",(function(){return P})),r.d(t,\"clearNodeFolder\",(function(){return E})),r.d(t,\"enforceOptions\",(function(){return S})),r.d(t,\"createLeaderElection\",(function(){return Y})),r.d(t,\"beLeader\",(function(){return H}));var n=r(\"Hvl/\");var i={create:function(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(e){t.messagesCallback&&t.messagesCallback(e.data)},t},close:function(e){e.bc.close(),e.subFns=[]},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){try{return e.bc.postMessage(t,!1),Promise.resolve()}catch(r){return Promise.reject(r)}},canBeUsed:function(){if(n.a&&\"undefined\"===typeof window)return!1;if(\"function\"===typeof BroadcastChannel){if(BroadcastChannel._pubkey)throw new Error(\"BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill\");return!0}return!1},type:\"native\",averageResponseTime:function(){return 150},microSeconds:n.c},o=function(){function e(e){this.ttl=e,this.set=new Set,this.timeMap=new Map}return e.prototype.has=function(e){return this.set.has(e)},e.prototype.add=function(e){var t=this;this.timeMap.set(e,a()),this.set.add(e),setTimeout((function(){!function(e){var t=a()-e.ttl,r=e.set[Symbol.iterator]();for(;;){var n=r.next().value;if(!n)return;if(!(e.timeMap.get(n)<t))return;e.timeMap.delete(n),e.set.delete(n)}}(t)}),0)},e.prototype.clear=function(){this.set.clear(),this.timeMap.clear()},e}();function a(){return(new Date).getTime()}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return\"undefined\"===typeof t.webWorkerSupport&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=45e3),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&\"function\"===typeof e.idb.onclose&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=6e4),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=12e4),\"undefined\"===typeof t.node.useFastPath&&(t.node.useFastPath=!0),t}var u=n.c;function c(){if(\"undefined\"!==typeof indexedDB)return indexedDB;if(\"undefined\"!==typeof window){if(\"undefined\"!==typeof window.mozIndexedDB)return window.mozIndexedDB;if(\"undefined\"!==typeof window.webkitIndexedDB)return window.webkitIndexedDB;if(\"undefined\"!==typeof window.msIndexedDB)return window.msIndexedDB}return!1}function f(e,t){var r=e.transaction(\"messages\").objectStore(\"messages\"),n=[];return new Promise((function(e){(function(){try{var e=IDBKeyRange.bound(t+1,1/0);return r.openCursor(e)}catch(n){return r.openCursor()}}()).onsuccess=function(r){var i=r.target.result;i?i.value.id<t+1?i.continue(t+1):(n.push(i.value),i.continue()):e(n)}}))}function h(e,t){return function(e,t){var r=(new Date).getTime()-t,n=e.transaction(\"messages\").objectStore(\"messages\"),i=[];return new Promise((function(e){n.openCursor().onsuccess=function(t){var n=t.target.result;if(n){var o=n.value;if(!(o.time<r))return void e(i);i.push(o),n.continue()}else e(i)}}))}(e,t).then((function(t){return Promise.all(t.map((function(t){return function(e,t){var r=e.transaction([\"messages\"],\"readwrite\").objectStore(\"messages\").delete(t);return new Promise((function(e){r.onsuccess=function(){return e()}}))}(e,t.id)})))}))}function l(e){return e.closed?Promise.resolve():e.messagesCallback?f(e.db,e.lastCursorId).then((function(t){return t.filter((function(e){return!!e})).map((function(t){return t.id>e.lastCursorId&&(e.lastCursorId=t.id),t})).filter((function(t){return function(e,t){return e.uuid!==t.uuid&&!t.eMIs.has(e.id)&&!(e.data.time<t.messagesCallbackTime)}(t,e)})).sort((function(e,t){return e.time-t.time})).forEach((function(t){e.messagesCallback&&(e.eMIs.add(t.id),e.messagesCallback(t.data))})),Promise.resolve()})):Promise.resolve()}var d={create:function(e,t){return t=s(t),function(e){var t=\"pubkey.broadcast-channel-0-\"+e,r=c().open(t,1);return r.onupgradeneeded=function(e){e.target.result.createObjectStore(\"messages\",{keyPath:\"id\",autoIncrement:!0})},new Promise((function(e,t){r.onerror=function(e){return t(e)},r.onsuccess=function(){e(r.result)}}))}(e).then((function(r){var i={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:Object(n.e)(),eMIs:new o(2*t.idb.ttl),writeBlockPromise:Promise.resolve(),messagesCallback:null,readQueuePromises:[],db:r};return r.onclose=function(){i.closed=!0,t.idb.onclose&&t.idb.onclose()},function e(t){if(t.closed)return;l(t).then((function(){return Object(n.f)(t.options.idb.fallbackInterval)})).then((function(){return e(t)}))}(i),i}))},close:function(e){e.closed=!0,e.db.close()},onMessage:function(e,t,r){e.messagesCallbackTime=r,e.messagesCallback=t,l(e)},postMessage:function(e,t){return e.writeBlockPromise=e.writeBlockPromise.then((function(){return function(e,t,r){var n={uuid:t,time:(new Date).getTime(),data:r},i=e.transaction([\"messages\"],\"readwrite\");return new Promise((function(e,t){i.oncomplete=function(){return e()},i.onerror=function(e){return t(e)},i.objectStore(\"messages\").add(n)}))}(e.db,e.uuid,t)})).then((function(){0===Object(n.d)(0,10)&&h(e.db,e.options.idb.ttl)})),e.writeBlockPromise},canBeUsed:function(){return!n.a&&!!c()},type:\"idb\",averageResponseTime:function(e){return 2*e.idb.fallbackInterval},microSeconds:u},p=n.c;function m(){var e;if(\"undefined\"===typeof window)return null;try{e=window.localStorage,e=window[\"ie8-eventlistener/storage\"]||window.localStorage}catch(t){}return e}function v(e){return\"pubkey.broadcastChannel-\"+e}function g(){if(n.a)return!1;var e=m();if(!e)return!1;try{var t=\"__broadcastchannel_check\";e.setItem(t,\"works\"),e.removeItem(t)}catch(r){return!1}return!0}var y={create:function(e,t){if(t=s(t),!g())throw new Error(\"BroadcastChannel: localstorage cannot be used\");var r=Object(n.e)(),i=new o(t.localstorage.removeTimeout),a={channelName:e,uuid:r,eMIs:i};return a.listener=function(e,t){var r=v(e),n=function(e){e.key===r&&t(JSON.parse(e.newValue))};return window.addEventListener(\"storage\",n),n}(e,(function(e){a.messagesCallback&&e.uuid!==r&&e.token&&!i.has(e.token)&&(e.data.time&&e.data.time<a.messagesCallbackTime||(i.add(e.token),a.messagesCallback(e.data)))})),a},close:function(e){var t;t=e.listener,window.removeEventListener(\"storage\",t)},onMessage:function(e,t,r){e.messagesCallbackTime=r,e.messagesCallback=t},postMessage:function(e,t){return new Promise((function(r){Object(n.f)().then((function(){var i=v(e.channelName),o={token:Object(n.e)(),time:(new Date).getTime(),data:t,uuid:e.uuid},a=JSON.stringify(o);m().setItem(i,a);var s=document.createEvent(\"Event\");s.initEvent(\"storage\",!0,!0),s.key=i,s.newValue=a,window.dispatchEvent(s),r()}))}))},canBeUsed:g,type:\"localstorage\",averageResponseTime:function(){var e=navigator.userAgent.toLowerCase();return e.includes(\"safari\")&&!e.includes(\"chrome\")?240:120},microSeconds:p},w=n.c,b=new Set;var M={create:function(e){var t={name:e,messagesCallback:null};return b.add(t),t},close:function(e){b.delete(e)},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){return new Promise((function(r){return setTimeout((function(){Array.from(b).filter((function(t){return t.name===e.name})).filter((function(t){return t!==e})).filter((function(e){return!!e.messagesCallback})).forEach((function(e){return e.messagesCallback(t)})),r()}),5)}))},canBeUsed:function(){return!0},type:\"simulate\",averageResponseTime:function(){return 5},microSeconds:w},_=[i,d,y];if(n.a){var O=r(13);\"function\"===typeof O.canBeUsed&&_.push(O)}function x(e){var t=[].concat(e.methods,_).filter(Boolean);if(e.type){if(\"simulate\"===e.type)return M;var r=t.find((function(t){return t.type===e.type}));if(r)return r;throw new Error(\"method-type \"+e.type+\" not found\")}e.webWorkerSupport||n.a||(t=t.filter((function(e){return\"idb\"!==e.type})));var i=t.find((function(e){return e.canBeUsed()}));if(i)return i;throw new Error(\"No useable methode found:\"+JSON.stringify(_.map((function(e){return e.type}))))}var k,P=function(e,t){this.name=e,k&&(t=k),this.options=s(t),this.method=x(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,function(e){var t=e.method.create(e.name,e.options);Object(n.b)(t)?(e._prepP=t,t.then((function(t){e._state=t}))):e._state=t}(this)};function E(e){var t=x(e=s(e));return\"node\"===t.type?t.clearNodeFolder().then((function(){return!0})):Promise.resolve(!1)}function S(e){k=e}function I(e,t,r){var n={time:e.method.microSeconds(),type:t,data:r};return(e._prepP?e._prepP:Promise.resolve()).then((function(){var t=e.method.postMessage(e._state,n);return e._uMP.add(t),t.catch().then((function(){return e._uMP.delete(t)})),t}))}function L(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function T(e,t,r){e._addEL[t].push(r),function(e){if(!e._iL&&L(e)){var t=function(t){e._addEL[t.type].forEach((function(e){t.time>=e.time&&e.fn(t.data)}))},r=e.method.microSeconds();e._prepP?e._prepP.then((function(){e._iL=!0,e.method.onMessage(e._state,t,r)})):(e._iL=!0,e.method.onMessage(e._state,t,r))}}(e)}function R(e,t,r){e._addEL[t]=e._addEL[t].filter((function(e){return e!==r})),function(e){if(e._iL&&!L(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}(e)}P._pubkey=!0,P.prototype={postMessage:function(e){if(this.closed)throw new Error(\"BroadcastChannel.postMessage(): Cannot post message after channel has closed\");return I(this,\"message\",e)},postInternal:function(e){return I(this,\"internal\",e)},set onmessage(e){var t={time:this.method.microSeconds(),fn:e};R(this,\"message\",this._onML),e&&\"function\"===typeof e?(this._onML=t,T(this,\"message\",t)):this._onML=null},addEventListener:function(e,t){T(this,e,{time:this.method.microSeconds(),fn:t})},removeEventListener:function(e,t){R(this,e,this._addEL[e].find((function(e){return e.fn===t})))},close:function(){var e=this;if(!this.closed){this.closed=!0;var t=this._prepP?this._prepP:Promise.resolve();return this._onML=null,this._addEL.message=[],t.then((function(){return Promise.all(Array.from(e._uMP))})).then((function(){return Promise.all(e._befC.map((function(e){return e()})))})).then((function(){return e.method.close(e._state)}))}},get type(){return this.method.type},get isClosed(){return this.closed}};var j=r(\"yDc/\"),A=r.n(j);var N={add:function(e){if(\"function\"===typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);else{if(\"function\"!==typeof window.addEventListener)return;window.addEventListener(\"beforeunload\",(function(){e()}),!0),window.addEventListener(\"unload\",(function(){e()}),!0)}}},C=r(2),D=r.n(C),U=A.a?D.a:N,B=new Set,J=!1;function W(){var e=[];return B.forEach((function(t){e.push(t()),B.delete(t)})),Promise.all(e)}var F={add:function(e){if(J||(J=!0,U.add(W)),\"function\"!==typeof e)throw new Error(\"Listener is no function\");return B.add(e),{remove:function(){return B.delete(e)},run:function(){return B.delete(e),e()}}},runAll:W,removeAll:function(){B.clear()},getSize:function(){return B.size}},G=function(e,t){this._channel=e,this._options=t,this.isLeader=!1,this.isDead=!1,this.token=Object(n.e)(),this._isApl=!1,this._reApply=!1,this._unl=[],this._lstns=[],this._invs=[],this._dpL=function(){},this._dpLC=!1};function K(e,t){var r={context:\"leader\",action:t,token:e.token};return e._channel.postInternal(r)}function H(e){e.isLeader=!0;var t=F.add((function(){return e.die()}));e._unl.push(t);var r=function(t){\"leader\"===t.context&&\"apply\"===t.action&&K(e,\"tell\"),\"leader\"!==t.context||\"tell\"!==t.action||e._dpLC||(e._dpLC=!0,e._dpL(),K(e,\"tell\"))};return e._channel.addEventListener(\"internal\",r),e._lstns.push(r),K(e,\"tell\")}function Y(e,t){if(e._leaderElector)throw new Error(\"BroadcastChannel already has a leader-elector\");t=function(e,t){return e||(e={}),(e=JSON.parse(JSON.stringify(e))).fallbackInterval||(e.fallbackInterval=3e3),e.responseTime||(e.responseTime=t.method.averageResponseTime(t.options)),e}(t,e);var r=new G(e,t);return e._befC.push((function(){return r.die()})),e._leaderElector=r,r}G.prototype={applyOnce:function(){var e=this;if(this.isLeader)return Promise.resolve(!1);if(this.isDead)return Promise.resolve(!1);if(this._isApl)return this._reApply=!0,Promise.resolve(!1);this._isApl=!0;var t=!1,r=[],i=function(n){\"leader\"===n.context&&n.token!=e.token&&(r.push(n),\"apply\"===n.action&&n.token>e.token&&(t=!0),\"tell\"===n.action&&(t=!0))};return this._channel.addEventListener(\"internal\",i),K(this,\"apply\").then((function(){return Object(n.f)(e._options.responseTime)})).then((function(){return t?Promise.reject(new Error):K(e,\"apply\")})).then((function(){return Object(n.f)(e._options.responseTime)})).then((function(){return t?Promise.reject(new Error):K(e)})).then((function(){return H(e)})).then((function(){return!0})).catch((function(){return!1})).then((function(t){return e._channel.removeEventListener(\"internal\",i),e._isApl=!1,!t&&e._reApply?(e._reApply=!1,e.applyOnce()):t}))},awaitLeadership:function(){var e;return this._aLP||(this._aLP=(e=this).isLeader?Promise.resolve():new Promise((function(t){var r=!1;function n(){r||(r=!0,clearInterval(i),e._channel.removeEventListener(\"internal\",o),t(!0))}e.applyOnce().then((function(){e.isLeader&&n()}));var i=setInterval((function(){e.applyOnce().then((function(){e.isLeader&&n()}))}),e._options.fallbackInterval);e._invs.push(i);var o=function(t){\"leader\"===t.context&&\"death\"===t.action&&e.applyOnce().then((function(){e.isLeader&&n()}))};e._channel.addEventListener(\"internal\",o),e._lstns.push(o)}))),this._aLP},set onduplicate(e){this._dpL=e},die:function(){var e=this;if(!this.isDead)return this.isDead=!0,this._lstns.forEach((function(t){return e._channel.removeEventListener(\"internal\",t)})),this._invs.forEach((function(e){return clearInterval(e)})),this._unl.forEach((function(e){e.remove()})),K(this,\"death\")}}},Ijbi:function(e,t,r){var n=r(\"WkPL\");e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.default=e.exports,e.exports.__esModule=!0},J4zp:function(e,t,r){var n=r(\"wTVA\"),i=r(\"m0LI\"),o=r(\"ZhPi\"),a=r(\"wkBT\");e.exports=function(e,t){return n(e)||i(e,t)||o(e,t)||a()},e.exports.default=e.exports,e.exports.__esModule=!0},JUoo:function(e,t,r){(function(e){!function(e,t){\"use strict\";function n(e,t){if(!e)throw new Error(t||\"Assertion failed\")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function o(e,t,r){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&(\"le\"!==t&&\"be\"!==t||(r=t,t=10),this._init(e||0,t||10,r||\"be\"))}var a;\"object\"===typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{a=\"undefined\"!==typeof window&&\"undefined\"!==typeof window.Buffer?window.Buffer:r(14).Buffer}catch(S){}function s(e,t){var r=e.charCodeAt(t);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,\"Invalid character in \"+e)}function u(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function c(e,t,r,i){for(var o=0,a=0,s=Math.min(e.length,r),u=t;u<s;u++){var c=e.charCodeAt(u)-48;o*=i,a=c>=49?c-49+10:c>=17?c-17+10:c,n(c>=0&&a<i,\"Invalid character\"),o+=a}return o}function f(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(o.isBN=function(e){return e instanceof o||null!==e&&\"object\"===typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,r){if(\"number\"===typeof e)return this._initNumber(e,t,r);if(\"object\"===typeof e)return this._initArray(e,t,r);\"hex\"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;\"-\"===(e=e.toString().replace(/\\s+/g,\"\"))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),\"le\"===r&&this._initArray(this.toArray(),t,r)))},o.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),\"le\"===r&&this._initArray(this.toArray(),t,r)},o.prototype._initArray=function(e,t,r){if(n(\"number\"===typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if(\"be\"===r)for(i=e.length-1,o=0;i>=0;i-=3)a=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if(\"le\"===r)for(i=0,o=0;i<e.length;i+=3)a=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this._strip()},o.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,a=0;if(\"be\"===r)for(n=e.length-1;n>=t;n-=2)i=u(e,t,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(n=(e.length-t)%2===0?t+1:t;n<e.length;n+=2)i=u(e,t,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this._strip()},o.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,a=o%n,s=Math.min(o,o-a)+r,u=0,f=r;f<s;f+=n)u=c(e,f,f+n,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=c(e,f,e.length,t),f=0;f<a;f++)h*=t;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype._move=function(e){f(e,this)},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},\"undefined\"!==typeof Symbol&&\"function\"===typeof Symbol.for)try{o.prototype[Symbol.for(\"nodejs.util.inspect.custom\")]=h}catch(S){o.prototype.inspect=h}else o.prototype.inspect=h;function h(){return(this.red?\"<BN-R: \":\"<BN: \")+this.toString(16)+\">\"}var l=[\"\",\"0\",\"00\",\"000\",\"0000\",\"00000\",\"000000\",\"0000000\",\"00000000\",\"000000000\",\"0000000000\",\"00000000000\",\"000000000000\",\"0000000000000\",\"00000000000000\",\"000000000000000\",\"0000000000000000\",\"00000000000000000\",\"000000000000000000\",\"0000000000000000000\",\"00000000000000000000\",\"000000000000000000000\",\"0000000000000000000000\",\"00000000000000000000000\",\"000000000000000000000000\",\"0000000000000000000000000\"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||\"hex\"===e){r=\"\";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);o=s>>>24-i&16777215,(i+=2)>=26&&(i-=26,a--),r=0!==o||a!==this.length-1?l[6-u.length]+u+r:u+r}for(0!==o&&(r=o.toString(16)+r);r.length%t!==0;)r=\"0\"+r;return 0!==this.negative&&(r=\"-\"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=d[e],f=p[e];r=\"\";var h=this.clone();for(h.negative=0;!h.isZero();){var m=h.modrn(f).toString(e);r=(h=h.idivn(f)).isZero()?m+r:l[c-m.length]+m+r}for(this.isZero()&&(r=\"0\"+r);r.length%t!==0;)r=\"0\"+r;return 0!==this.negative&&(r=\"-\"+r),r}n(!1,\"Base should be between 2 and 36\")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,\"Number can only safely store up to 53 bits\"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16,2)},a&&(o.prototype.toBuffer=function(e,t){return this.toArrayLike(a,e,t)}),o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function m(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],o=0|t.words[0],a=i*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var c=1;c<n;c++){for(var f=u>>>26,h=67108863&u,l=Math.min(c,t.length-1),d=Math.max(0,c-e.length+1);d<=l;d++){var p=c-d|0;f+=(a=(i=0|e.words[p])*(o=0|t.words[d])+h)/67108864|0,h=67108863&a}r.words[c]=0|h,u=0|f}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}o.prototype.toArrayLike=function(e,t,r){this._strip();var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,\"byte array longer than desired length\"),n(o>0,\"Requested array length <= 0\");var a=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,o);return this[\"_toArrayLike\"+(\"le\"===t?\"LE\":\"BE\")](a,i),a},o.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|n;e[r++]=255&a,r<e.length&&(e[r++]=a>>8&255),r<e.length&&(e[r++]=a>>16&255),6===o?(r<e.length&&(e[r++]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},o.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|n;e[r--]=255&a,r>=0&&(e[r--]=a>>8&255),r>=0&&(e[r--]=a>>16&255),6===o?(r>=0&&(e[r--]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0===(8191&t)&&(r+=13,t>>>=13),0===(127&t)&&(r+=7,t>>>=7),0===(15&t)&&(r+=4,t>>>=4),0===(3&t)&&(r+=2,t>>>=2),0===(1&t)&&r++,r},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},o.prototype.ior=function(e){return n(0===(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},o.prototype.iand=function(e){return n(0===(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},o.prototype.ixor=function(e){return n(0===(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){n(\"number\"===typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){n(\"number\"===typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},o.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<r.length;o++)t=(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var o=0,a=0;a<n.length;a++)o=(t=(0|r.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&t;for(;0!==o&&a<r.length;a++)o=(t=(0|r.words[a])+o)>>26,this.words[a]=67108863&t;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var v=function(e,t,r){var n,i,o,a=e.words,s=t.words,u=r.words,c=0,f=0|a[0],h=8191&f,l=f>>>13,d=0|a[1],p=8191&d,m=d>>>13,v=0|a[2],g=8191&v,y=v>>>13,w=0|a[3],b=8191&w,M=w>>>13,_=0|a[4],O=8191&_,x=_>>>13,k=0|a[5],P=8191&k,E=k>>>13,S=0|a[6],I=8191&S,L=S>>>13,T=0|a[7],R=8191&T,j=T>>>13,A=0|a[8],N=8191&A,C=A>>>13,D=0|a[9],U=8191&D,B=D>>>13,J=0|s[0],W=8191&J,F=J>>>13,G=0|s[1],K=8191&G,H=G>>>13,Y=0|s[2],z=8191&Y,q=Y>>>13,X=0|s[3],V=8191&X,Z=X>>>13,Q=0|s[4],$=8191&Q,ee=Q>>>13,te=0|s[5],re=8191&te,ne=te>>>13,ie=0|s[6],oe=8191&ie,ae=ie>>>13,se=0|s[7],ue=8191&se,ce=se>>>13,fe=0|s[8],he=8191&fe,le=fe>>>13,de=0|s[9],pe=8191&de,me=de>>>13;r.negative=e.negative^t.negative,r.length=19;var ve=(c+(n=Math.imul(h,W))|0)+((8191&(i=(i=Math.imul(h,F))+Math.imul(l,W)|0))<<13)|0;c=((o=Math.imul(l,F))+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(p,W),i=(i=Math.imul(p,F))+Math.imul(m,W)|0,o=Math.imul(m,F);var ge=(c+(n=n+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(l,K)|0))<<13)|0;c=((o=o+Math.imul(l,H)|0)+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(g,W),i=(i=Math.imul(g,F))+Math.imul(y,W)|0,o=Math.imul(y,F),n=n+Math.imul(p,K)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,H)|0;var ye=(c+(n=n+Math.imul(h,z)|0)|0)+((8191&(i=(i=i+Math.imul(h,q)|0)+Math.imul(l,z)|0))<<13)|0;c=((o=o+Math.imul(l,q)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(b,W),i=(i=Math.imul(b,F))+Math.imul(M,W)|0,o=Math.imul(M,F),n=n+Math.imul(g,K)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(y,K)|0,o=o+Math.imul(y,H)|0,n=n+Math.imul(p,z)|0,i=(i=i+Math.imul(p,q)|0)+Math.imul(m,z)|0,o=o+Math.imul(m,q)|0;var we=(c+(n=n+Math.imul(h,V)|0)|0)+((8191&(i=(i=i+Math.imul(h,Z)|0)+Math.imul(l,V)|0))<<13)|0;c=((o=o+Math.imul(l,Z)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(O,W),i=(i=Math.imul(O,F))+Math.imul(x,W)|0,o=Math.imul(x,F),n=n+Math.imul(b,K)|0,i=(i=i+Math.imul(b,H)|0)+Math.imul(M,K)|0,o=o+Math.imul(M,H)|0,n=n+Math.imul(g,z)|0,i=(i=i+Math.imul(g,q)|0)+Math.imul(y,z)|0,o=o+Math.imul(y,q)|0,n=n+Math.imul(p,V)|0,i=(i=i+Math.imul(p,Z)|0)+Math.imul(m,V)|0,o=o+Math.imul(m,Z)|0;var be=(c+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(l,$)|0))<<13)|0;c=((o=o+Math.imul(l,ee)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(P,W),i=(i=Math.imul(P,F))+Math.imul(E,W)|0,o=Math.imul(E,F),n=n+Math.imul(O,K)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,H)|0,n=n+Math.imul(b,z)|0,i=(i=i+Math.imul(b,q)|0)+Math.imul(M,z)|0,o=o+Math.imul(M,q)|0,n=n+Math.imul(g,V)|0,i=(i=i+Math.imul(g,Z)|0)+Math.imul(y,V)|0,o=o+Math.imul(y,Z)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,ee)|0;var Me=(c+(n=n+Math.imul(h,re)|0)|0)+((8191&(i=(i=i+Math.imul(h,ne)|0)+Math.imul(l,re)|0))<<13)|0;c=((o=o+Math.imul(l,ne)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(I,W),i=(i=Math.imul(I,F))+Math.imul(L,W)|0,o=Math.imul(L,F),n=n+Math.imul(P,K)|0,i=(i=i+Math.imul(P,H)|0)+Math.imul(E,K)|0,o=o+Math.imul(E,H)|0,n=n+Math.imul(O,z)|0,i=(i=i+Math.imul(O,q)|0)+Math.imul(x,z)|0,o=o+Math.imul(x,q)|0,n=n+Math.imul(b,V)|0,i=(i=i+Math.imul(b,Z)|0)+Math.imul(M,V)|0,o=o+Math.imul(M,Z)|0,n=n+Math.imul(g,$)|0,i=(i=i+Math.imul(g,ee)|0)+Math.imul(y,$)|0,o=o+Math.imul(y,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(m,re)|0,o=o+Math.imul(m,ne)|0;var _e=(c+(n=n+Math.imul(h,oe)|0)|0)+((8191&(i=(i=i+Math.imul(h,ae)|0)+Math.imul(l,oe)|0))<<13)|0;c=((o=o+Math.imul(l,ae)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(R,W),i=(i=Math.imul(R,F))+Math.imul(j,W)|0,o=Math.imul(j,F),n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(L,K)|0,o=o+Math.imul(L,H)|0,n=n+Math.imul(P,z)|0,i=(i=i+Math.imul(P,q)|0)+Math.imul(E,z)|0,o=o+Math.imul(E,q)|0,n=n+Math.imul(O,V)|0,i=(i=i+Math.imul(O,Z)|0)+Math.imul(x,V)|0,o=o+Math.imul(x,Z)|0,n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,ee)|0)+Math.imul(M,$)|0,o=o+Math.imul(M,ee)|0,n=n+Math.imul(g,re)|0,i=(i=i+Math.imul(g,ne)|0)+Math.imul(y,re)|0,o=o+Math.imul(y,ne)|0,n=n+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,ae)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,ae)|0;var Oe=(c+(n=n+Math.imul(h,ue)|0)|0)+((8191&(i=(i=i+Math.imul(h,ce)|0)+Math.imul(l,ue)|0))<<13)|0;c=((o=o+Math.imul(l,ce)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(N,W),i=(i=Math.imul(N,F))+Math.imul(C,W)|0,o=Math.imul(C,F),n=n+Math.imul(R,K)|0,i=(i=i+Math.imul(R,H)|0)+Math.imul(j,K)|0,o=o+Math.imul(j,H)|0,n=n+Math.imul(I,z)|0,i=(i=i+Math.imul(I,q)|0)+Math.imul(L,z)|0,o=o+Math.imul(L,q)|0,n=n+Math.imul(P,V)|0,i=(i=i+Math.imul(P,Z)|0)+Math.imul(E,V)|0,o=o+Math.imul(E,Z)|0,n=n+Math.imul(O,$)|0,i=(i=i+Math.imul(O,ee)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,ee)|0,n=n+Math.imul(b,re)|0,i=(i=i+Math.imul(b,ne)|0)+Math.imul(M,re)|0,o=o+Math.imul(M,ne)|0,n=n+Math.imul(g,oe)|0,i=(i=i+Math.imul(g,ae)|0)+Math.imul(y,oe)|0,o=o+Math.imul(y,ae)|0,n=n+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,ce)|0;var xe=(c+(n=n+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,le)|0)+Math.imul(l,he)|0))<<13)|0;c=((o=o+Math.imul(l,le)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(U,W),i=(i=Math.imul(U,F))+Math.imul(B,W)|0,o=Math.imul(B,F),n=n+Math.imul(N,K)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(C,K)|0,o=o+Math.imul(C,H)|0,n=n+Math.imul(R,z)|0,i=(i=i+Math.imul(R,q)|0)+Math.imul(j,z)|0,o=o+Math.imul(j,q)|0,n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,Z)|0)+Math.imul(L,V)|0,o=o+Math.imul(L,Z)|0,n=n+Math.imul(P,$)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,ee)|0,n=n+Math.imul(O,re)|0,i=(i=i+Math.imul(O,ne)|0)+Math.imul(x,re)|0,o=o+Math.imul(x,ne)|0,n=n+Math.imul(b,oe)|0,i=(i=i+Math.imul(b,ae)|0)+Math.imul(M,oe)|0,o=o+Math.imul(M,ae)|0,n=n+Math.imul(g,ue)|0,i=(i=i+Math.imul(g,ce)|0)+Math.imul(y,ue)|0,o=o+Math.imul(y,ce)|0,n=n+Math.imul(p,he)|0,i=(i=i+Math.imul(p,le)|0)+Math.imul(m,he)|0,o=o+Math.imul(m,le)|0;var ke=(c+(n=n+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,me)|0)+Math.imul(l,pe)|0))<<13)|0;c=((o=o+Math.imul(l,me)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(U,K),i=(i=Math.imul(U,H))+Math.imul(B,K)|0,o=Math.imul(B,H),n=n+Math.imul(N,z)|0,i=(i=i+Math.imul(N,q)|0)+Math.imul(C,z)|0,o=o+Math.imul(C,q)|0,n=n+Math.imul(R,V)|0,i=(i=i+Math.imul(R,Z)|0)+Math.imul(j,V)|0,o=o+Math.imul(j,Z)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,ee)|0,n=n+Math.imul(P,re)|0,i=(i=i+Math.imul(P,ne)|0)+Math.imul(E,re)|0,o=o+Math.imul(E,ne)|0,n=n+Math.imul(O,oe)|0,i=(i=i+Math.imul(O,ae)|0)+Math.imul(x,oe)|0,o=o+Math.imul(x,ae)|0,n=n+Math.imul(b,ue)|0,i=(i=i+Math.imul(b,ce)|0)+Math.imul(M,ue)|0,o=o+Math.imul(M,ce)|0,n=n+Math.imul(g,he)|0,i=(i=i+Math.imul(g,le)|0)+Math.imul(y,he)|0,o=o+Math.imul(y,le)|0;var Pe=(c+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((o=o+Math.imul(m,me)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(U,z),i=(i=Math.imul(U,q))+Math.imul(B,z)|0,o=Math.imul(B,q),n=n+Math.imul(N,V)|0,i=(i=i+Math.imul(N,Z)|0)+Math.imul(C,V)|0,o=o+Math.imul(C,Z)|0,n=n+Math.imul(R,$)|0,i=(i=i+Math.imul(R,ee)|0)+Math.imul(j,$)|0,o=o+Math.imul(j,ee)|0,n=n+Math.imul(I,re)|0,i=(i=i+Math.imul(I,ne)|0)+Math.imul(L,re)|0,o=o+Math.imul(L,ne)|0,n=n+Math.imul(P,oe)|0,i=(i=i+Math.imul(P,ae)|0)+Math.imul(E,oe)|0,o=o+Math.imul(E,ae)|0,n=n+Math.imul(O,ue)|0,i=(i=i+Math.imul(O,ce)|0)+Math.imul(x,ue)|0,o=o+Math.imul(x,ce)|0,n=n+Math.imul(b,he)|0,i=(i=i+Math.imul(b,le)|0)+Math.imul(M,he)|0,o=o+Math.imul(M,le)|0;var Ee=(c+(n=n+Math.imul(g,pe)|0)|0)+((8191&(i=(i=i+Math.imul(g,me)|0)+Math.imul(y,pe)|0))<<13)|0;c=((o=o+Math.imul(y,me)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(U,V),i=(i=Math.imul(U,Z))+Math.imul(B,V)|0,o=Math.imul(B,Z),n=n+Math.imul(N,$)|0,i=(i=i+Math.imul(N,ee)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,ee)|0,n=n+Math.imul(R,re)|0,i=(i=i+Math.imul(R,ne)|0)+Math.imul(j,re)|0,o=o+Math.imul(j,ne)|0,n=n+Math.imul(I,oe)|0,i=(i=i+Math.imul(I,ae)|0)+Math.imul(L,oe)|0,o=o+Math.imul(L,ae)|0,n=n+Math.imul(P,ue)|0,i=(i=i+Math.imul(P,ce)|0)+Math.imul(E,ue)|0,o=o+Math.imul(E,ce)|0,n=n+Math.imul(O,he)|0,i=(i=i+Math.imul(O,le)|0)+Math.imul(x,he)|0,o=o+Math.imul(x,le)|0;var Se=(c+(n=n+Math.imul(b,pe)|0)|0)+((8191&(i=(i=i+Math.imul(b,me)|0)+Math.imul(M,pe)|0))<<13)|0;c=((o=o+Math.imul(M,me)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(U,$),i=(i=Math.imul(U,ee))+Math.imul(B,$)|0,o=Math.imul(B,ee),n=n+Math.imul(N,re)|0,i=(i=i+Math.imul(N,ne)|0)+Math.imul(C,re)|0,o=o+Math.imul(C,ne)|0,n=n+Math.imul(R,oe)|0,i=(i=i+Math.imul(R,ae)|0)+Math.imul(j,oe)|0,o=o+Math.imul(j,ae)|0,n=n+Math.imul(I,ue)|0,i=(i=i+Math.imul(I,ce)|0)+Math.imul(L,ue)|0,o=o+Math.imul(L,ce)|0,n=n+Math.imul(P,he)|0,i=(i=i+Math.imul(P,le)|0)+Math.imul(E,he)|0,o=o+Math.imul(E,le)|0;var Ie=(c+(n=n+Math.imul(O,pe)|0)|0)+((8191&(i=(i=i+Math.imul(O,me)|0)+Math.imul(x,pe)|0))<<13)|0;c=((o=o+Math.imul(x,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(U,re),i=(i=Math.imul(U,ne))+Math.imul(B,re)|0,o=Math.imul(B,ne),n=n+Math.imul(N,oe)|0,i=(i=i+Math.imul(N,ae)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,ae)|0,n=n+Math.imul(R,ue)|0,i=(i=i+Math.imul(R,ce)|0)+Math.imul(j,ue)|0,o=o+Math.imul(j,ce)|0,n=n+Math.imul(I,he)|0,i=(i=i+Math.imul(I,le)|0)+Math.imul(L,he)|0,o=o+Math.imul(L,le)|0;var Le=(c+(n=n+Math.imul(P,pe)|0)|0)+((8191&(i=(i=i+Math.imul(P,me)|0)+Math.imul(E,pe)|0))<<13)|0;c=((o=o+Math.imul(E,me)|0)+(i>>>13)|0)+(Le>>>26)|0,Le&=67108863,n=Math.imul(U,oe),i=(i=Math.imul(U,ae))+Math.imul(B,oe)|0,o=Math.imul(B,ae),n=n+Math.imul(N,ue)|0,i=(i=i+Math.imul(N,ce)|0)+Math.imul(C,ue)|0,o=o+Math.imul(C,ce)|0,n=n+Math.imul(R,he)|0,i=(i=i+Math.imul(R,le)|0)+Math.imul(j,he)|0,o=o+Math.imul(j,le)|0;var Te=(c+(n=n+Math.imul(I,pe)|0)|0)+((8191&(i=(i=i+Math.imul(I,me)|0)+Math.imul(L,pe)|0))<<13)|0;c=((o=o+Math.imul(L,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(U,ue),i=(i=Math.imul(U,ce))+Math.imul(B,ue)|0,o=Math.imul(B,ce),n=n+Math.imul(N,he)|0,i=(i=i+Math.imul(N,le)|0)+Math.imul(C,he)|0,o=o+Math.imul(C,le)|0;var Re=(c+(n=n+Math.imul(R,pe)|0)|0)+((8191&(i=(i=i+Math.imul(R,me)|0)+Math.imul(j,pe)|0))<<13)|0;c=((o=o+Math.imul(j,me)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(U,he),i=(i=Math.imul(U,le))+Math.imul(B,he)|0,o=Math.imul(B,le);var je=(c+(n=n+Math.imul(N,pe)|0)|0)+((8191&(i=(i=i+Math.imul(N,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((o=o+Math.imul(C,me)|0)+(i>>>13)|0)+(je>>>26)|0,je&=67108863;var Ae=(c+(n=Math.imul(U,pe))|0)+((8191&(i=(i=Math.imul(U,me))+Math.imul(B,pe)|0))<<13)|0;return c=((o=Math.imul(B,me))+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,u[0]=ve,u[1]=ge,u[2]=ye,u[3]=we,u[4]=be,u[5]=Me,u[6]=_e,u[7]=Oe,u[8]=xe,u[9]=ke,u[10]=Pe,u[11]=Ee,u[12]=Se,u[13]=Ie,u[14]=Le,u[15]=Te,u[16]=Re,u[17]=je,u[18]=Ae,0!==c&&(u[19]=c,r.length++),r};function g(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var f=o-c,h=(0|e.words[f])*(0|t.words[c]),l=67108863&h;s=67108863&(l=l+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(l>>>26)|0)>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function y(e,t,r){return g(e,t,r)}function w(e,t){this.x=e,this.y=t}Math.imul||(v=m),o.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?v(this,e,t):r<63?m(this,e,t):r<1024?g(this,e,t):y(this,e,t)},w.prototype.makeRBT=function(e){for(var t=new Array(e),r=o.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},w.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},w.prototype.permute=function(e,t,r,n,i,o){for(var a=0;a<o;a++)n[a]=t[e[a]],i[a]=r[e[a]]},w.prototype.transform=function(e,t,r,n,i,o){this.permute(o,e,t,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),f=0;f<i;f+=s)for(var h=u,l=c,d=0;d<a;d++){var p=r[f+d],m=n[f+d],v=r[f+d+a],g=n[f+d+a],y=h*v-l*g;g=h*g+l*v,v=y,r[f+d]=p+v,n[f+d]=m+g,r[f+d+a]=p-v,n[f+d+a]=m-g,d!==s&&(y=u*h-c*l,l=u*l+c*h,h=y)}},w.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},w.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},w.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},w.prototype.convert13b=function(e,t,r,i){for(var o=0,a=0;a<t;a++)o+=0|e[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<i;++a)r[a]=0;n(0===o),n(0===(-8192&o))},w.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},w.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),u=new Array(n),c=new Array(n),f=new Array(n),h=new Array(n),l=r.words;l.length=n,this.convert13b(e.words,e.length,a,n),this.convert13b(t.words,t.length,c,n),this.transform(a,o,s,u,n,i),this.transform(c,o,f,h,n,i);for(var d=0;d<n;d++){var p=s[d]*f[d]-u[d]*h[d];u[d]=s[d]*h[d]+u[d]*f[d],s[d]=p}return this.conjugate(s,u,n),this.transform(s,u,l,o,n,i),this.conjugate(l,o,n),this.normalize13b(l,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),y(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n(\"number\"===typeof e),n(e<67108864);for(var r=0,i=0;i<this.length;i++){var o=(0|this.words[i])*e,a=(67108863&o)+(67108863&r);r>>=26,r+=o/67108864|0,r+=a>>>26,this.words[i]=67108863&a}return 0!==r&&(this.words[i]=r,this.length++),t?this.ineg():this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=e.words[n]>>>i&1}return t}(e);if(0===t.length)return new o(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(e){n(\"number\"===typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,u=(0|this.words[t])-s<<r;this.words[t]=u|a,a=s>>>26-r}a&&(this.words[t]=a,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},o.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,r){var i;n(\"number\"===typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var c=0;c<a;c++)u.words[c]=this.words[c];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var f=0;for(c=this.length-1;c>=0&&(0!==f||c>=i);c--){var h=0|this.words[c];this.words[c]=f<<26-o|h>>>o,f=h&s}return u&&0!==f&&(u.words[u.length++]=f),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){n(\"number\"===typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(e){n(\"number\"===typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,\"imaskn works only with positive numbers\"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return n(\"number\"===typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(n(\"number\"===typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,r){var i,o,a=e.length+r;this._expand(a);var s=0;for(i=0;i<e.length;i++){o=(0|this.words[i+r])+s;var u=(0|e.words[i])*t;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this._strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,a=0|i.words[i.length-1];0!==(r=26-this._countBits(a))&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var s,u=n.length-i.length;if(\"mod\"!==t){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var f=n.clone()._ishlnsubmul(i,1,u);0===f.negative&&(n=f,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var l=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(l=Math.min(l/a|0,67108863),n._ishlnsubmul(i,l,h);0!==n.negative;)l--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);s&&(s.words[h]=l)}return s&&s._strip(),n._strip(),\"div\"!==t&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},o.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),\"mod\"!==t&&(i=s.div.neg()),\"div\"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(e)),{div:i,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),\"mod\"!==t&&(i=s.div.neg()),{div:i,mod:s.mod}):0!==(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),\"div\"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?\"div\"===t?{div:this.divn(e.words[0]),mod:null}:\"mod\"===t?{div:null,mod:new o(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,a,s},o.prototype.div=function(e){return this.divmod(e,\"div\",!1).div},o.prototype.mod=function(e){return this.divmod(e,\"mod\",!1).mod},o.prototype.umod=function(e){return this.divmod(e,\"mod\",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=(1<<26)%e,i=0,o=this.length-1;o>=0;o--)i=(r*i+(0|this.words[o]))%e;return t?-i:i},o.prototype.modn=function(e){return this.modrn(e)},o.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*r;this.words[i]=o/e|0,r=o%e}return this._strip(),t?this.ineg():this},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var f=r.clone(),h=t.clone();!t.isZero();){for(var l=0,d=1;0===(t.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(t.iushrn(l);l-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(f),a.isub(h)),i.iushrn(1),a.iushrn(1);for(var p=0,m=1;0===(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(f),u.isub(h)),s.iushrn(1),u.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(s),a.isub(u)):(r.isub(t),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:r.iushln(c)}},o.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,a=new o(1),s=new o(0),u=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var c=0,f=1;0===(t.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(t.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,l=1;0===(r.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);t.cmp(r)>=0?(t.isub(r),a.isub(s)):(r.isub(t),s.isub(a))}return(i=0===t.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){n(\"number\"===typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,\"Number is too big\");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new P(e)},o.prototype.toRed=function(e){return n(!this.red,\"Already a number in reduction context\"),n(0===this.negative,\"red works only with positives\"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return n(this.red,\"fromRed works only with numbers in reduction context\"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return n(!this.red,\"Already a number in reduction context\"),this._forceRed(e)},o.prototype.redAdd=function(e){return n(this.red,\"redAdd works only with red numbers\"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return n(this.red,\"redIAdd works only with red numbers\"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return n(this.red,\"redSub works only with red numbers\"),this.red.sub(this,e)},o.prototype.redISub=function(e){return n(this.red,\"redISub works only with red numbers\"),this.red.isub(this,e)},o.prototype.redShl=function(e){return n(this.red,\"redShl works only with red numbers\"),this.red.shl(this,e)},o.prototype.redMul=function(e){return n(this.red,\"redMul works only with red numbers\"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return n(this.red,\"redMul works only with red numbers\"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return n(this.red,\"redSqr works only with red numbers\"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,\"redISqr works only with red numbers\"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,\"redSqrt works only with red numbers\"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,\"redInvm works only with red numbers\"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,\"redNeg works only with red numbers\"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return n(this.red&&!e.red,\"redPow(normalNum)\"),this.red._verify1(this),this.red.pow(this,e)};var b={k256:null,p224:null,p192:null,p25519:null};function M(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){M.call(this,\"k256\",\"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f\")}function O(){M.call(this,\"p224\",\"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001\")}function x(){M.call(this,\"p192\",\"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff\")}function k(){M.call(this,\"25519\",\"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed\")}function P(e){if(\"string\"===typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),\"modulus must be greater than 1\"),this.m=e,this.prime=null}function E(e){P.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}M.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},M.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},M.prototype.split=function(e,t){e.iushrn(this.n,0,t)},M.prototype.imulK=function(e){return e.imul(this.k)},i(_,M),_.prototype.split=function(e,t){for(var r=Math.min(e.length,9),n=0;n<r;n++)t.words[n]=e.words[n];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,n=10;n<e.length;n++){var o=0|e.words[n];e.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,e.words[n-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},_.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(O,M),i(x,M),i(k,M),k.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(b[e])return b[e];var t;if(\"k256\"===e)t=new _;else if(\"p224\"===e)t=new O;else if(\"p192\"===e)t=new x;else{if(\"p25519\"!==e)throw new Error(\"Unknown prime \"+e);t=new k}return b[e]=t,t},P.prototype._verify1=function(e){n(0===e.negative,\"red works only with positives\"),n(e.red,\"red works only with red numbers\")},P.prototype._verify2=function(e,t){n(0===(e.negative|t.negative),\"red works only with positives\"),n(e.red&&e.red===t.red,\"red works only with red numbers\")},P.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(f(e,e.umod(this.m)._forceRed(this)),e)},P.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},P.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},P.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},P.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},P.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},P.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},P.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},P.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},P.prototype.isqr=function(e){return this.imul(e,e.clone())},P.prototype.sqr=function(e){return this.mul(e,e)},P.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2===1),3===t){var r=this.m.add(new o(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new o(2*f*f).toRed(this);0!==this.pow(f,c).cmp(u);)f.redIAdd(u);for(var h=this.pow(f,i),l=this.pow(e,i.addn(1).iushrn(1)),d=this.pow(e,i),p=a;0!==d.cmp(s);){for(var m=d,v=0;0!==m.cmp(s);v++)m=m.redSqr();n(v<p);var g=this.pow(h,new o(1).iushln(p-v-1));l=l.redMul(g),h=g.redSqr(),d=d.redMul(h),p=v}return l},P.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},P.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],a=0,s=0,u=t.bitLength()%26;for(0===u&&(u=26),n=t.length-1;n>=0;n--){for(var c=t.words[n],f=u-1;f>=0;f--){var h=c>>f&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===n&&0===f)&&(i=this.mul(i,r[a]),s=0,a=0)):s=0}u=26}return i},P.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},P.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new E(e)},i(E,P),E.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},E.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},E.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},E.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},E.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,r(\"YuTi\")(e))},MTkB:function(e,t,r){(function(t){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=19)}([function(e,t){e.exports=r(\"JUoo\")},function(e,t){e.exports=r(\"o0o1\")},function(e,t){e.exports=r(\"yXPU\")},function(e,t){e.exports=r(\"eRdg\")},function(e,t){e.exports=r(\"W6Pm\")},function(e,t){e.exports=r(\"rE/H\")},function(e,t){e.exports=r(\"uIhD\")},function(e,t){e.exports=r(\"lSNA\")},function(e,t){e.exports=r(\"lwsE\")},function(e,t){e.exports=r(\"Nsbk\")},function(e,t){e.exports=r(\"RIqP\")},function(e,t){e.exports=r(\"cDf5\")},function(e,t){e.exports=r(\"W8MJ\")},function(e,t){e.exports=r(\"MzeL\")},function(e,t){e.exports=r(\"C99U\")},function(e,t){e.exports=r(\"XH0y\")},function(e,t){e.exports=r(\"7W2i\")},function(e,t){e.exports=r(\"a1gu\")},function(e,t){e.exports=r(\"oShl\")},function(e,r,n){\"use strict\";n.r(r);var i=n(7),o=n.n(i),a=n(11),s=n.n(a),u=n(2),c=n.n(u),f=n(8),h=n.n(f),l=n(12),d=n.n(l),p=n(1),m=n.n(p),v=n(6),g=n(3),y=n(0),w=n.n(y),b=n(13),M=n(5),_=n.n(M),O=n(14),x=n.n(O),k=n(4),P=n(15),E=n.n(P).a.getLogger(\"torus.js\"),S=n(16),I=n.n(S),L=n(17),T=n.n(L),R=n(9),j=n.n(R),A=n(18);var N=function(e){I()(r,e);var t=function(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j()(e);if(t){var i=j()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return T()(this,r)}}(r);function r(e){var n,i=e.errors,o=e.responses,a=e.predicate;return h()(this,r),(n=t.call(this,\"Unable to resolve enough promises.\")).errors=i,n.responses=o,n.predicate=a,n}return r}(n.n(A)()(Error)),C=function(e,t){return new Promise((function(r,n){var i,o=0,a={resolved:!1},s=new Array(e.length).fill(void 0),u=new Array(e.length).fill(void 0);e.forEach((function(c,f){c.then((function(e){u[f]=e})).catch((function(e){s[f]=e})).finally((function(){a.resolved||t(u.slice(0),a).then((function(e){a.resolved=!0,r(e)})).catch((function(e){i=e})).finally((function(t){if((o+=1)===e.length){var r=Object.values(u.reduce((function(e,t){var r,n,i=t||{},o=i.id,a=i.error;return(null==a||null===(r=a.data)||void 0===r?void 0:r.length)>0&&(a.data.startsWith(\"Error occurred while verifying params\")?e[o]=(n=a.data).charAt(0).toUpperCase()+n.slice(1):e[o]=a.data),e}),{}));if(r.length>0){var a=r.length>1?\"\\n\".concat(r.map((function(e){return\"\\u2022 \".concat(e)})).join(\"\\n\")):r[0];n(new Error(a))}else{var c;n(new N({errors:s,responses:u,predicate:(null===(c=i)||void 0===c?void 0:c.message)||i}))}}}))}))}))}))},D=n(10),U=n.n(D);function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var W=function e(t,r){var n=t;if(\"number\"==typeof n&&(n=Array.from({length:n},(function(e,t){return t}))),r>n.length||r<=0)return[];if(r===n.length)return[n];if(1===r)return n.reduce((function(e,t){return[].concat(U()(e),[[t]])}),[]);for(var i=[],o=[],a=0;a<=n.length-r+1;a+=1){o=e(n.slice(a+1),r-1);for(var s=0;s<o.length;s+=1)i.push([n[a]].concat(U()(o[s])))}return i},F=function(e,t){for(var r={},n=0;n<e.length;n+=1){var i=_()(e[n]);if(r[i]=r[i]?r[i]+1:1,r[i]===t)return e[n]}},G=function(){var e=c()(m.a.mark((function e(t,r,n){var i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.map((function(e){return Object(g.post)(e,Object(g.generateJsonRPCObject)(\"VerifierLookupRequest\",{verifier:r,verifier_id:n.toString()})).catch((function(e){return E.error(\"lookup request failed\",e)}))})),e.abrupt(\"return\",C(i,(function(e){var r=e.filter((function(e){return e})),n=F(r.map((function(e){return e&&e.error})),1+~~(t.length/2)),i=F(r.map((function(e){return e&&e.result})),1+~~(t.length/2));return i||n?Promise.resolve({keyResult:i,errorResult:n}):Promise.reject(new Error(\"invalid results \".concat(JSON.stringify(e))))})));case 2:case\"end\":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),K=function(e,t,r,n){return new Promise((function(i,o){setTimeout((function(){G(e,t,r).then(i).catch(o)}),n)}))},H=function(){var e=c()(m.a.mark((function e(t,r,n,i,o,a){var s,u,c,f;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n?(s=Math.floor(Math.random()*t.length),u=s):s=n%t.length,s!==i){e.next=3;break}throw new Error(\"Looped through all\");case 3:return void 0!==i&&(u=i),c=Object(g.generateJsonRPCObject)(\"KeyAssign\",{verifier:o,verifier_id:a.toString()}),e.prev=5,e.next=8,Object(g.post)(\"https://signer.tor.us/api/sign\",c,{headers:{pubKeyX:r[s].X,pubKeyY:r[s].Y}},{useAPIKey:!0});case 8:return f=e.sent,e.abrupt(\"return\",Object(g.post)(t[s],J(J({},c),f),{headers:{\"Content-Type\":\"application/json; charset=utf-8\"}}));case 12:return e.prev=12,e.t0=e.catch(5),E.error(e.t0),e.abrupt(\"return\",H(t,r,s+1,u,o,a));case 16:case\"end\":return e.stop()}}),e,null,[[5,12]])})));return function(t,r,n,i,o,a){return e.apply(this,arguments)}}();function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var q=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.enableLogging,n=void 0!==r&&r,i=t.metadataHost,o=void 0===i?\"https://metadata.tor.us\":i,a=t.allowHost,s=void 0===a?\"https://signer.tor.us/api/allow\":a,u=t.serverTimeOffset,c=void 0===u?0:u;h()(this,e),this.ec=new b.ec(\"secp256k1\"),this.metadataHost=o,this.allowHost=s,this.metadataCache=x.a,n||E.disableAll(),this.metadataLock={},this.serverTimeOffset=c||0}var r,n,i,o,a;return d()(e,[{key:\"setCustomKey\",value:(a=c()(m.a.mark((function e(t){var r,n,i,o,a,s,u,c,f;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.privKeyHex,n=t.metadataNonce,i=t.torusKeyHex,o=t.customKeyHex,i?a=new w.a(i,16):(s=new w.a(r,16),a=s.sub(n).umod(this.ec.curve.n)),u=new w.a(o,16),c=u.sub(a).umod(this.ec.curve.n),f=this.generateMetadataParams(c.toString(16),a.toString(16)),e.next=7,this.setMetadata(f);case 7:case\"end\":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:\"retrieveShares\",value:(o=c()(m.a.mark((function e(r,n,i,o,a){var u,f,h,l,d,p,y,b,M,_=this,O=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=O.length>5&&void 0!==O[5]?O[5]:{},f=[],e.next=4,Object(g.get)(this.allowHost,{headers:{verifier:i,verifier_id:o.verifier_id}},{useAPIKey:!0});case 4:for(h=Object(v.generatePrivate)(),l=Object(v.getPublic)(h).toString(\"hex\"),d=l.slice(2,66),p=l.slice(66),y=Object(k.keccak256)(a),b=0;b<r.length;b+=1)M=Object(g.post)(r[b],Object(g.generateJsonRPCObject)(\"CommitmentRequest\",{messageprefix:\"mug00\",tokencommitment:y.slice(2),temppubx:d,temppuby:p,verifieridentifier:i})).catch((function(e){return E.error(\"commitment\",e)})),f.push(M);return e.abrupt(\"return\",C(f,(function(e){return e.filter((function(e){return!(!e||\"object\"!==s()(e)||e.error)})).length>=3*~~(r.length/4)+1?Promise.resolve(e):Promise.reject(new Error(\"invalid \".concat(JSON.stringify(e))))})).then((function(e){for(var s=[],f=[],l=0;l<e.length;l+=1)e[l]&&f.push(e[l].result);for(var d=0;d<r.length;d+=1){var p=Object(g.post)(r[d],Object(g.generateJsonRPCObject)(\"ShareRequest\",{encrypted:\"yes\",item:[z(z({},o),{},{idtoken:a,nodesignatures:f,verifieridentifier:i},u)]})).catch((function(e){return E.error(\"share req\",e)}));s.push(p)}return C(s,function(){var e=c()(m.a.mark((function e(i,o){var a,s,u,c,f,l,d,p,g,y,b,M,O,x;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.filter((function(e){return e})),s=F(i.map((function(e){return e&&e.result&&e.result.keys[0].PublicKey})),1+~~(r.length/2)),!(a.length>=1+~~(r.length/2)&&s)){e.next=32;break}for(u=[],c=[],f=0;f<i.length;f+=1)i[f]&&i[f].result&&i[f].result.keys&&i[f].result.keys.length>0?(i[f].result.keys.sort((function(e,t){return new w.a(e.Index,16).cmp(new w.a(t.Index,16))})),i[f].result.keys[0].Metadata?(l={ephemPublicKey:t.from(i[f].result.keys[0].Metadata.ephemPublicKey,\"hex\"),iv:t.from(i[f].result.keys[0].Metadata.iv,\"hex\"),mac:t.from(i[f].result.keys[0].Metadata.mac,\"hex\"),mode:t.from(i[f].result.keys[0].Metadata.mode,\"hex\")},u.push(Object(v.decrypt)(h,z(z({},l),{},{ciphertext:t.from(atob(i[f].result.keys[0].Share).padStart(64,\"0\"),\"hex\")})).catch((function(e){return E.debug(\"share decryption\",e)})))):u.push(Promise.resolve(t.from(i[f].result.keys[0].Share.padStart(64,\"0\"),\"hex\")))):u.push(Promise.resolve(void 0)),c.push(new w.a(n[f],16));return e.next=8,Promise.all(u);case 8:if(d=e.sent,!o.resolved){e.next=11;break}return e.abrupt(\"return\",void 0);case 11:p=d.reduce((function(e,t,r){return t&&e.push({index:c[r],value:new w.a(t)}),e}),[]),g=W(p.length,1+~~(r.length/2)),b=function(e){var r=g[e],n=p.filter((function(e,t){return r.includes(t)})),i=n.map((function(e){return e.value})),o=n.map((function(e){return e.index})),a=_.lagrangeInterpolation(i,o),u=Object(v.getPublic)(t.from(a.toString(16,64),\"hex\")).toString(\"hex\"),c=u.slice(2,66),f=u.slice(66);if(0===new w.a(c,16).cmp(new w.a(s.X,16))&&0===new w.a(f,16).cmp(new w.a(s.Y,16)))return y=a,\"break\"},M=0;case 15:if(!(M<g.length)){e.next=22;break}if(\"break\"!==b(M)){e.next=19;break}return e.abrupt(\"break\",22);case 19:M+=1,e.next=15;break;case 22:if(void 0!==y){e.next=24;break}throw new Error(\"could not derive private key\");case 24:return e.next=26,_.getMetadata({pub_key_X:s.X,pub_key_Y:s.Y});case 26:if(O=e.sent,!o.resolved){e.next=29;break}return e.abrupt(\"return\",void 0);case 29:return y=y.add(O).umod(_.ec.curve.n),x=_.generateAddressFromPrivKey(y),e.abrupt(\"return\",{ethAddress:x,privKey:y.toString(\"hex\",64),metadataNonce:O});case 32:throw new Error(\"invalid\");case 33:case\"end\":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())})));case 11:case\"end\":return e.stop()}}),e,this)}))),function(e,t,r,n,i){return o.apply(this,arguments)})},{key:\"getMetadata\",value:(i=c()(m.a.mark((function e(t,r){var n,i,o,a,s=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=_()(t),null===this.metadataLock[i]){e.next=7;break}return e.next=5,this.metadataLock[i];case 5:e.next=8;break;case 7:this.metadataLock[i]=new Promise((function(e){n=function(){s.metadataLock[i]=null,e()}}));case 8:if(null===(o=this.metadataCache.get(i))){e.next=12;break}return n&&n(),e.abrupt(\"return\",o);case 12:return e.next=14,Object(g.post)(\"\".concat(this.metadataHost,\"/get\"),t,r,{useAPIKey:!0});case 14:if((a=e.sent)&&a.message){e.next=19;break}return this.metadataCache.put(i,new w.a(0),6e4),n&&n(),e.abrupt(\"return\",new w.a(0));case 19:return this.metadataCache.put(i,new w.a(a.message,16),6e4),e.abrupt(\"return\",new w.a(a.message,16));case 23:return e.prev=23,e.t0=e.catch(0),E.error(\"get metadata error\",e.t0),n&&n(),e.abrupt(\"return\",new w.a(0));case 28:case\"end\":return e.stop()}}),e,this,[[0,23]])}))),function(e,t){return i.apply(this,arguments)})},{key:\"generateMetadataParams\",value:function(e,r){var n=this.ec.keyFromPrivate(r.toString(\"hex\",64)),i={data:e,timestamp:new w.a(~~(this.serverTimeOffset+Date.now()/1e3)).toString(16)},o=n.sign(Object(k.keccak256)(_()(i)).slice(2));return{pub_key_X:n.getPublic().getX().toString(\"hex\"),pub_key_Y:n.getPublic().getY().toString(\"hex\"),set_data:i,signature:t.from(o.r.toString(16,64)+o.s.toString(16,64)+new w.a(o.v).toString(16,2),\"hex\").toString(\"base64\")}}},{key:\"setMetadata\",value:(n=c()(m.a.mark((function e(t,r){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.metadataCache.del(_()({pub_key_X:t.pub_key_X,pub_key_Y:t.pub_key_Y})),e.next=4,Object(g.post)(\"\".concat(this.metadataHost,\"/set\"),t,r,{useAPIKey:!0});case 4:return n=e.sent,e.abrupt(\"return\",n.message);case 8:return e.prev=8,e.t0=e.catch(0),E.error(\"set metadata error\",e.t0),e.abrupt(\"return\",\"\");case 12:case\"end\":return e.stop()}}),e,this,[[0,8]])}))),function(e,t){return n.apply(this,arguments)})},{key:\"lagrangeInterpolation\",value:function(e,t){if(e.length!==t.length)return null;for(var r=new w.a(0),n=0;n<e.length;n+=1){for(var i=new w.a(1),o=new w.a(1),a=0;a<e.length;a+=1)if(n!==a){i=(i=i.mul(t[a].neg())).umod(this.ec.curve.n);var s=t[n].sub(t[a]);s=s.umod(this.ec.curve.n),o=o.mul(s).umod(this.ec.curve.n)}var u=i.mul(o.invm(this.ec.curve.n)).umod(this.ec.curve.n);u=u.mul(e[n]).umod(this.ec.curve.n),r=r.add(u)}return r.umod(this.ec.curve.n)}},{key:\"generateAddressFromPrivKey\",value:function(e){var r=this.ec.keyFromPrivate(e.toString(\"hex\",64),\"hex\").getPublic().encode(\"hex\").slice(2),n=\"0x\".concat(Object(k.keccak256)(t.from(r,\"hex\")).slice(26));return Object(k.toChecksumAddress)(n)}},{key:\"generateAddressFromPubKey\",value:function(e,r){var n=this.ec.keyFromPublic({x:e.toString(\"hex\",64),y:r.toString(\"hex\",64)}).getPublic().encode(\"hex\").slice(2),i=\"0x\".concat(Object(k.keccak256)(t.from(n,\"hex\")).slice(26));return Object(k.toChecksumAddress)(i)}},{key:\"getPublicAddress\",value:(r=c()(m.a.mark((function e(t,r,n){var i,o,a,s,u,c,f,h,l,d,p,v,g,y,w=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.verifier,o=n.verifierId,a=w.length>3&&void 0!==w[3]&&w[3],e.next=4,G(t,i,o);case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:if(u=e.t0,c=u.keyResult,!(f=u.errorResult)||!JSON.stringify(f).includes(\"Verifier + VerifierID has not yet been assigned\")){e.next=22;break}return e.next=13,H(t,r,void 0,void 0,i,o);case 13:return e.next=15,K(t,i,o,1e3);case 15:if(e.t1=e.sent,e.t1){e.next=18;break}e.t1={};case 18:h=e.t1,s=h.keyResult,e.next=27;break;case 22:if(!c){e.next=26;break}s=c,e.next=27;break;case 26:throw new Error(\"node results do not match at first lookup \".concat(JSON.stringify(c||{}),\", \").concat(JSON.stringify(f||{})));case 27:if(!s){e.next=39;break}return l=s.keys[0],d=l.pub_key_X,p=l.pub_key_Y,e.next=31,this.getMetadata({pub_key_X:d,pub_key_Y:p});case 31:if(v=e.sent,g=this.ec.keyFromPublic({x:d.toString(16),y:p.toString(16)}).getPublic().add(this.ec.keyFromPrivate(v.toString(16)).getPublic()),d=g.getX().toString(16),p=g.getY().toString(16),y=this.generateAddressFromPubKey(g.getX(),g.getY()),a){e.next=38;break}return e.abrupt(\"return\",y);case 38:return e.abrupt(\"return\",{address:y,X:d,Y:p,metadataNonce:v});case 39:throw new Error(\"node results do not match at final lookup \".concat(JSON.stringify(c||{}),\", \").concat(JSON.stringify(f||{})));case 40:case\"end\":return e.stop()}}),e,this)}))),function(e,t,n){return r.apply(this,arguments)})}],[{key:\"setAPIKey\",value:function(e){Object(g.setAPIKey)(e)}},{key:\"setEmbedHost\",value:function(e){Object(g.setEmbedHost)(e)}}]),e}();r.default=q}]).default}).call(this,r(\"HDXh\").Buffer)},Nsbk:function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,r(t)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0},PE4B:function(e,t,r){\"use strict\";var n=function(e){return function(e){return!!e&&\"object\"===typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return\"[object RegExp]\"===t||\"[object Date]\"===t||function(e){return e.$$typeof===i}(e)}(e)};var i=\"function\"===typeof Symbol&&Symbol.for?Symbol.for(\"react.element\"):60103;function o(e,t){return!1!==t.clone&&t.isMergeableObject(e)?f((r=e,Array.isArray(r)?[]:{}),e,t):e;var r}function a(e,t,r){return e.concat(t).map((function(e){return o(e,r)}))}function s(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function u(e,t){try{return t in e}catch(r){return!1}}function c(e,t,r){var n={};return r.isMergeableObject(e)&&s(e).forEach((function(t){n[t]=o(e[t],r)})),s(t).forEach((function(i){(function(e,t){return u(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(u(e,i)&&r.isMergeableObject(t[i])?n[i]=function(e,t){if(!t.customMerge)return f;var r=t.customMerge(e);return\"function\"===typeof r?r:f}(i,r)(e[i],t[i],r):n[i]=o(t[i],r))})),n}function f(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||a,r.isMergeableObject=r.isMergeableObject||n,r.cloneUnlessOtherwiseSpecified=o;var i=Array.isArray(t);return i===Array.isArray(e)?i?r.arrayMerge(e,t,r):c(e,t,r):o(t,r)}f.all=function(e,t){if(!Array.isArray(e))throw new Error(\"first argument should be an array\");return e.reduce((function(e,r){return f(e,r,t)}),{})};var h=f;e.exports=h},PJYZ:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e},e.exports.default=e.exports,e.exports.__esModule=!0},QILm:function(e,t,r){var n=r(\"8OQS\");e.exports=function(e,t){if(null==e)return{};var r,i,o=n(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o},e.exports.default=e.exports,e.exports.__esModule=!0},RIqP:function(e,t,r){var n=r(\"Ijbi\"),i=r(\"EbDI\"),o=r(\"ZhPi\"),a=r(\"Bnag\");e.exports=function(e){return n(e)||i(e)||o(e)||a()},e.exports.default=e.exports,e.exports.__esModule=!0},S5RI:function(e,t,r){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=22)}([function(e,t){e.exports=r(\"lSNA\")},function(e,t){e.exports=r(\"o0o1\")},function(e,t){e.exports=r(\"yXPU\")},function(e,t){e.exports=r(\"PJYZ\")},function(e,t){e.exports=r(\"Nsbk\")},function(e,t){e.exports=r(\"lwsE\")},function(e,t){e.exports=r(\"W8MJ\")},function(e,t){e.exports=r(\"7W2i\")},function(e,t){e.exports=r(\"a1gu\")},function(e,t){e.exports=r(\"PE4B\")},function(e,t){e.exports=r(\"QILm\")},function(e,t){e.exports=r(\"J4zp\")},function(e,t){e.exports=r(\"XH0y\")},function(e,t){e.exports=r(\"EjJx\")},function(e,t){e.exports=r(\"eRdg\")},function(e,t){e.exports=r(\"I24s\")},function(e,t){e.exports=r(\"W6Pm\")},function(e,t){e.exports=r(\"MTkB\")},function(e,t){e.exports=r(\"q1ed\")},function(e,t,r){\"use strict\";var n,i=\"object\"===typeof Reflect?Reflect:null,o=i&&\"function\"===typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=i&&\"function\"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!==e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(r,n){function i(){void 0!==o&&e.removeListener(\"error\",o),r([].slice.call(arguments))}var o;\"error\"!==t&&(o=function(r){e.removeListener(t,i),n(r)},e.once(\"error\",o)),e.once(t,i)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function c(e){if(\"function\"!==typeof e)throw new TypeError('The \"listener\" argument must be of type Function. Received type '+typeof e)}function f(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function h(e,t,r,n){var i,o,a,s;if(c(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit(\"newListener\",t,r.listener?r.listener:r),o=e._events),a=o[t]),void 0===a)a=o[t]=r,++e._eventsCount;else if(\"function\"===typeof a?a=o[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=f(e))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error(\"Possible EventEmitter memory leak detected. \"+a.length+\" \"+String(t)+\" listeners added. Use emitter.setMaxListeners() to increase limit\");u.name=\"MaxListenersExceededWarning\",u.emitter=e,u.type=t,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=l.bind(n);return i.listener=r,n.wrapFn=i,i}function p(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:\"function\"===typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):v(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var r=t[e];if(\"function\"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function v(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(s,\"defaultMaxListeners\",{enumerable:!0,get:function(){return u},set:function(e){if(\"number\"!==typeof e||e<0||a(e))throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received '+e+\".\");u=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if(\"number\"!==typeof e||e<0||a(e))throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received '+e+\".\");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return f(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n=\"error\"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error(\"Unhandled error.\"+(a?\" (\"+a.message+\")\":\"\"));throw s.context=a,s}var u=i[e];if(void 0===u)return!1;if(\"function\"===typeof u)o(u,this,t);else{var c=u.length,f=v(u,c);for(r=0;r<c;++r)o(f[r],this,t)}return!0},s.prototype.addListener=function(e,t){return h(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return h(this,e,t,!0)},s.prototype.once=function(e,t){return c(t),this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,d(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,n,i,o,a;if(c(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit(\"removeListener\",e,r.listener||t));else if(\"function\"!==typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit(\"removeListener\",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)\"removeListener\"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners(\"removeListener\"),this._events=Object.create(null),this._eventsCount=0,this}if(\"function\"===typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},s.prototype.listeners=function(e){return p(this,e,!0)},s.prototype.rawListeners=function(e){return p(this,e,!1)},s.listenerCount=function(e,t){return\"function\"===typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t){e.exports=r(\"pVtG\")},function(e,t){e.exports=r(\"VCN7\")},function(e,t,r){\"use strict\";r.r(t),r.d(t,\"createHandler\",(function(){return Ce})),r.d(t,\"default\",(function(){return Qe})),r.d(t,\"TORUS_NETWORK\",(function(){return u})),r.d(t,\"ETHEREUM_NETWORK\",(function(){return c})),r.d(t,\"LOGIN\",(function(){return f})),r.d(t,\"AGGREGATE_VERIFIER\",(function(){return h})),r.d(t,\"UX_MODE\",(function(){return l})),r.d(t,\"REDIRECT_PARAMS_STORAGE_METHOD\",(function(){return d})),r.d(t,\"TORUS_METHOD\",(function(){return p})),r.d(t,\"CONTRACT_MAP\",(function(){return m})),r.d(t,\"eventToPromise\",(function(){return H})),r.d(t,\"loginToConnectionMap\",(function(){return Y})),r.d(t,\"padUrlString\",(function(){return z})),r.d(t,\"broadcastChannelOptions\",(function(){return q})),r.d(t,\"getVerifierId\",(function(){return V})),r.d(t,\"handleRedirectParameters\",(function(){return Z})),r.d(t,\"storageAvailable\",(function(){return Q})),r.d(t,\"storeLoginDetails\",(function(){return ee})),r.d(t,\"retrieveLoginDetails\",(function(){return te})),r.d(t,\"clearLoginDetailsStorage\",(function(){return re})),r.d(t,\"clearOrphanedLoginDetails\",(function(){return ne})),r.d(t,\"getPopupFeatures\",(function(){return ie})),r.d(t,\"isFirefox\",(function(){return oe})),r.d(t,\"constructURL\",(function(){return ae}));var n,i,o,a=r(0),s=r.n(a),u={TESTNET:\"testnet\",MAINNET:\"mainnet\"},c={ROPSTEN:\"ropsten\",MAINNET:\"mainnet\"},f={GOOGLE:\"google\",FACEBOOK:\"facebook\",REDDIT:\"reddit\",DISCORD:\"discord\",TWITCH:\"twitch\",APPLE:\"apple\",GITHUB:\"github\",LINKEDIN:\"linkedin\",TWITTER:\"twitter\",WEIBO:\"weibo\",LINE:\"line\",EMAIL_PASSWORD:\"email_password\",PASSWORDLESS:\"passwordless\",JWT:\"jwt\",WEBAUTHN:\"webauthn\"},h={SINGLE_VERIFIER_ID:\"single_id_verifier\"},l={POPUP:\"popup\",REDIRECT:\"redirect\"},d={LOCAL_STORAGE:\"localStorage\",SESSION_STORAGE:\"sessionStorage\"},p={TRIGGER_LOGIN:\"triggerLogin\",TRIGGER_AGGREGATE_LOGIN:\"triggerAggregateLogin\",TRIGGER_AGGREGATE_HYBRID_LOGIN:\"triggerHybridAggregateLogin\"},m=(n={},s()(n,u.MAINNET,\"0x638646503746d5456209e33a2ff5e3226d698bea\"),s()(n,u.TESTNET,\"0x4023d2a0D330bF11426B12C6144Cfb96B7fa6183\"),n),v=r(2),g=r.n(v),y=r(5),w=r.n(y),b=r(6),M=r.n(b),_=r(3),O=r.n(_),x=r(7),k=r.n(x),P=r(8),E=r.n(P),S=r(4),I=r.n(S),L=r(1),T=r.n(L),R=r(9),j=r.n(R),A=r(14),N=r(10),C=r.n(N),D=r(18),U=r.n(D),B=r(15),J=r(11),W=r.n(J),F=r(12),G=r.n(F),K=G.a.getLogger(\"torus-direct-web-sdk\");function H(e){return new Promise((function(t,r){e.addEventListener(\"message\",(function n(i){var o=i.error,a=void 0===o?\"\":o,s=i.data;return e.removeEventListener(\"message\",n),a?r(new Error(a)):t(s)}))}))}var Y=(i={},s()(i,f.APPLE,\"apple\"),s()(i,f.GITHUB,\"github\"),s()(i,f.LINKEDIN,\"linkedin\"),s()(i,f.TWITTER,\"twitter\"),s()(i,f.WEIBO,\"weibo\"),s()(i,f.LINE,\"line\"),s()(i,f.EMAIL_PASSWORD,\"Username-Password-Authentication\"),s()(i,f.PASSWORDLESS,\"email\"),i),z=function(e){return e.href.endsWith(\"/\")?e.href:\"\".concat(e.href,\"/\")},q={webWorkerSupport:!1};function X(e,t){return t?e:e.toLowerCase()}var V=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=e.name,o=e.sub;if(r)return X(e[r],n);switch(t){case f.PASSWORDLESS:case f.EMAIL_PASSWORD:return X(i,n);case f.WEIBO:case f.GITHUB:case f.TWITTER:case f.APPLE:case f.LINKEDIN:case f.LINE:case f.JWT:return X(o,n);default:throw new Error(\"Invalid login type\")}},Z=function(e,t){var r=e.split(\"&\").reduce((function(e,t){var r=t.split(\"=\"),n=W()(r,2),i=n[0],o=n[1];return e[i]=o,e}),{});K.info(r,t);var n={},i=\"\";return Object.keys(r).length>0&&r.state?(n=JSON.parse(atob(decodeURIComponent(decodeURIComponent(r.state))))||{},i=r.error_description||r.error||i):Object.keys(t).length>0&&t.state&&(n=JSON.parse(atob(decodeURIComponent(decodeURIComponent(t.state))))||{},t.error&&(i=t.error)),{error:i,instanceParameters:n,hashParameters:r}};function Q(e){var t;try{t=window[e];var r=\"__storage_test__\";return t.setItem(r,r),t.removeItem(r),!0}catch(n){return n&&(22===n.code||1014===n.code||\"QuotaExceededError\"===n.name||\"NS_ERROR_DOM_QUOTA_REACHED\"===n.name)&&t&&0!==t.length}}var $=(o={},s()(o,d.LOCAL_STORAGE,Q(d.LOCAL_STORAGE)),s()(o,d.SESSION_STORAGE,Q(d.SESSION_STORAGE)),o);function ee(e,t,r){$[t]&&window[t].setItem(\"torus_login_\".concat(r),JSON.stringify(e))}function te(e,t){if($[e]){var r=window[e].getItem(\"torus_login_\".concat(t));return JSON.parse(r||\"{}\")}throw new Error(\"Unable to retrieve stored login details\")}function re(e,t){$[e]&&window[e].removeItem(\"torus_login_\".concat(t))}function ne(e){$[e]&&Object.keys(window[e]).forEach((function(t){t.startsWith(\"torus_login_\")&&window[e].removeItem(t)}))}function ie(){var e=void 0!==window.screenLeft?window.screenLeft:window.screenX,t=void 0!==window.screenTop?window.screenTop:window.screenY,r=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,n=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,i=Math.abs((r-1200)/2/1+e),o=Math.abs((n-700)/2/1+t);return\"titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=\".concat(700,\",width=\").concat(1200,\",top=\").concat(o,\",left=\").concat(i)}var oe=function(){var e,t;return(null===(e=window)||void 0===e||null===(t=e.navigator)||void 0===t?void 0:t.userAgent.toLowerCase().indexOf(\"firefox\"))>-1||!1};function ae(e){var t=e.baseURL,r=e.query,n=e.hash,i=new URL(t);if(r&&Object.keys(r).forEach((function(e){i.searchParams.append(e,r[e])})),n){var o=new URL(ae({baseURL:t,query:n})).searchParams.toString();i.hash=o}return i.toString()}function se(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I()(e);if(t){var i=I()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E()(this,r)}}var ue=function(e){k()(r,e);var t=se(r);function r(e){var n,i=e.url,o=e.target,a=e.features;return w()(this,r),n=t.call(this),s()(O()(n),\"url\",void 0),s()(O()(n),\"target\",void 0),s()(O()(n),\"features\",void 0),s()(O()(n),\"window\",void 0),s()(O()(n),\"windowTimer\",void 0),s()(O()(n),\"iClosedWindow\",void 0),n.url=i,n.target=o||\"_blank\",n.features=a||ie(),n.window=void 0,n.windowTimer=void 0,n.iClosedWindow=!1,n._setupTimer(),n}return M()(r,[{key:\"_setupTimer\",value:function(){var e=this;this.windowTimer=Number(setInterval((function(){e.window&&e.window.closed&&(clearInterval(e.windowTimer),e.iClosedWindow||e.emit(\"close\"),e.iClosedWindow=!1,e.window=void 0),void 0===e.window&&clearInterval(e.windowTimer)}),500))}},{key:\"open\",value:function(){var e;return this.window=window.open(this.url.href,this.target,this.features),null!==(e=this.window)&&void 0!==e&&e.focus&&this.window.focus(),Promise.resolve()}},{key:\"close\",value:function(){this.iClosedWindow=!0,this.window&&this.window.close()}},{key:\"redirect\",value:function(e){e?window.location.replace(this.url.href):window.location.href=this.url.href}}]),r}(r(19).EventEmitter),ce=[\"access_token\",\"id_token\"];function fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var le=function(){function e(t,r,n,i,o,a,u,c){w()(this,e),this.clientId=t,this.verifier=r,this.redirect_uri=n,this.typeOfLogin=i,this.uxMode=o,this.redirectToOpener=a,this.jwtParams=u,this.customState=c,s()(this,\"nonce\",U()()),s()(this,\"finalURL\",void 0)}return M()(e,[{key:\"state\",get:function(){return encodeURIComponent(window.btoa(JSON.stringify(he(he({},this.customState||{}),{},{instanceId:this.nonce,verifier:this.verifier,typeOfLogin:this.typeOfLogin,redirectToOpener:this.redirectToOpener||!1}))))}},{key:\"handleLoginWindow\",value:function(e){var t=this,r=new ue({url:this.finalURL,features:e.popupFeatures});return this.uxMode!==l.REDIRECT?new Promise((function(e,n){var i,o=function(){var r=g()(T.a.mark((function r(o){var a,s,u,c,f,h,l,d;return T.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,a=o.error,s=o.data,c=(u=s||{}).instanceParams,f=u.hashParams,h=f.access_token,l=f.id_token,d=C()(f,ce),!a){r.next=7;break}return K.error(o),n(new Error(\"Error: \".concat(a,\". Info: \").concat(JSON.stringify(o.data||{})))),r.abrupt(\"return\");case 7:if(!o.data||c.verifier!==t.verifier){r.next=13;break}if(K.info(o.data),t.redirectToOpener||!i){r.next=12;break}return r.next=12,i.postMessage({success:!0});case 12:e(he(he({accessToken:h,idToken:l||\"\"},d),{},{state:c}));case 13:r.next=19;break;case 15:r.prev=15,r.t0=r.catch(0),K.error(r.t0),n(r.t0);case 19:case\"end\":return r.stop()}}),r,null,[[0,15]])})));return function(e){return r.apply(this,arguments)}}();if(t.redirectToOpener){var a=function(){var e=g()(T.a.mark((function e(n){var i;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.data){e.next=2;break}return e.abrupt(\"return\");case 2:if((i=n.data).channel===\"redirect_channel_\".concat(t.nonce)){e.next=5;break}return e.abrupt(\"return\");case 5:window.removeEventListener(\"message\",a),o(i),r.close();case 8:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();window.addEventListener(\"message\",a)}else(i=new B.BroadcastChannel(\"redirect_channel_\".concat(t.nonce),q)).addEventListener(\"message\",function(){var e=g()(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t);case 2:i.close(),r.close();case 4:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());r.open(),r.once(\"close\",(function(){i&&i.close(),n(new Error(\"user closed popup\"))}))})):(r.redirect(e.locationReplaceOnRedirect),null)}}]),e}();function de(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I()(e);if(t){var i=I()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E()(this,r)}}var pe=function(e){k()(r,e);var t=de(r);function r(e,n,i,o,a,u,c,f){var h;return w()(this,r),(h=t.call(this,e,n,i,o,a,u,c,f)).clientId=e,h.verifier=n,h.redirect_uri=i,h.typeOfLogin=o,h.uxMode=a,h.redirectToOpener=u,h.jwtParams=c,h.customState=f,s()(O()(h),\"RESPONSE_TYPE\",\"token\"),s()(O()(h),\"SCOPE\",\"identify email\"),h.setFinalUrl(),h}return M()(r,[{key:\"setFinalUrl\",value:function(){var e=new URL(\"https://discordapp.com/api/oauth2/authorize\"),t=JSON.parse(JSON.stringify(this.jwtParams||{})),r=j()({state:this.state,response_type:this.RESPONSE_TYPE,client_id:this.clientId,redirect_uri:this.redirect_uri,scope:this.SCOPE},t);Object.keys(r).forEach((function(t){r[t]&&e.searchParams.append(t,r[t])})),this.finalURL=e}},{key:\"getUserInfo\",value:function(){var e=g()(T.a.mark((function e(t){var r,n,i,o,a,s,u,c,f,h,l;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.accessToken,e.next=3,Object(A.get)(\"https://discordapp.com/api/users/@me\",{headers:{Authorization:\"Bearer \".concat(r)}});case 3:return n=e.sent,i=n.id,o=n.avatar,a=n.email,s=void 0===a?\"\":a,u=n.username,c=void 0===u?\"\":u,f=n.discriminator,h=void 0===f?\"\":f,l=null===o?\"https://cdn.discordapp.com/embed/avatars/\".concat(Number(h)%5,\".png\"):\"https://cdn.discordapp.com/avatars/\".concat(i,\"/\").concat(o,\".png?size=2048\"),e.abrupt(\"return\",{profileImage:l,name:\"\".concat(c,\"#\").concat(h),email:s,verifierId:i,verifier:this.verifier,typeOfLogin:this.typeOfLogin});case 7:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(le);function me(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I()(e);if(t){var i=I()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E()(this,r)}}var ve=function(e){k()(r,e);var t=me(r);function r(e,n,i,o,a,u,c,f){var h;return w()(this,r),(h=t.call(this,e,n,i,o,a,u,c,f)).clientId=e,h.verifier=n,h.redirect_uri=i,h.typeOfLogin=o,h.uxMode=a,h.redirectToOpener=u,h.jwtParams=c,h.customState=f,s()(O()(h),\"RESPONSE_TYPE\",\"token\"),s()(O()(h),\"SCOPE\",\"public_profile email\"),h.setFinalUrl(),h}return M()(r,[{key:\"setFinalUrl\",value:function(){var e=new URL(\"https://www.facebook.com/v6.0/dialog/oauth\"),t=JSON.parse(JSON.stringify(this.jwtParams||{})),r=j()({state:this.state,response_type:this.RESPONSE_TYPE,client_id:this.clientId,redirect_uri:this.redirect_uri,scope:this.SCOPE},t);Object.keys(r).forEach((function(t){r[t]&&e.searchParams.append(t,r[t])})),this.finalURL=e}},{key:\"getUserInfo\",value:function(){var e=g()(T.a.mark((function e(t){var r,n,i,o,a,s,u,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.accessToken,e.next=3,Object(A.get)(\"https://graph.facebook.com/me?fields=name,email,picture.type(large)\",{headers:{Authorization:\"Bearer \".concat(r)}});case 3:return n=e.sent,i=n.name,o=void 0===i?\"\":i,a=n.id,s=n.picture,u=n.email,c=void 0===u?\"\":u,e.abrupt(\"return\",{email:c,name:o,profileImage:s.data.url||\"\",verifier:this.verifier,verifierId:a,typeOfLogin:this.typeOfLogin});case 6:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(le);function ge(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I()(e);if(t){var i=I()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E()(this,r)}}var ye=function(e){k()(r,e);var t=ge(r);function r(e,n,i,o,a,u,c,f){var h;return w()(this,r),(h=t.call(this,e,n,i,o,a,u,c,f)).clientId=e,h.verifier=n,h.redirect_uri=i,h.typeOfLogin=o,h.uxMode=a,h.redirectToOpener=u,h.jwtParams=c,h.customState=f,s()(O()(h),\"RESPONSE_TYPE\",\"token id_token\"),s()(O()(h),\"SCOPE\",\"profile email openid\"),s()(O()(h),\"PROMPT\",\"consent select_account\"),h.setFinalUrl(),h}return M()(r,[{key:\"setFinalUrl\",value:function(){var e=new URL(\"https://accounts.google.com/o/oauth2/v2/auth\"),t=JSON.parse(JSON.stringify(this.jwtParams||{})),r=j()({state:this.state,response_type:this.RESPONSE_TYPE,client_id:this.clientId,prompt:this.PROMPT,redirect_uri:this.redirect_uri,scope:this.SCOPE,nonce:this.nonce},t);Object.keys(r).forEach((function(t){r[t]&&e.searchParams.append(t,r[t])})),this.finalURL=e}},{key:\"getUserInfo\",value:function(){var e=g()(T.a.mark((function e(t){var r,n,i,o,a,s,u,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.accessToken,e.next=3,Object(A.get)(\"https://www.googleapis.com/userinfo/v2/me\",{headers:{Authorization:\"Bearer \".concat(r)}});case 3:return n=e.sent,i=n.picture,o=void 0===i?\"\":i,a=n.email,s=void 0===a?\"\":a,u=n.name,c=void 0===u?\"\":u,e.abrupt(\"return\",{email:s,name:c,profileImage:o,verifier:this.verifier,verifierId:s.toLowerCase(),typeOfLogin:this.typeOfLogin});case 6:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(le),we=r(13),be=r.n(we);function Me(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I()(e);if(t){var i=I()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E()(this,r)}}var _e=function(e){k()(r,e);var t=Me(r);function r(e,n,i,o,a,u,c,f){var h;return w()(this,r),(h=t.call(this,e,n,i,o,a,u,c,f)).clientId=e,h.verifier=n,h.redirect_uri=i,h.typeOfLogin=o,h.uxMode=a,h.redirectToOpener=u,h.jwtParams=c,h.customState=f,s()(O()(h),\"SCOPE\",\"openid profile email\"),s()(O()(h),\"RESPONSE_TYPE\",\"token id_token\"),s()(O()(h),\"PROMPT\",\"login\"),h.setFinalUrl(),h}return M()(r,[{key:\"setFinalUrl\",value:function(){var e=this.jwtParams.domain,t=new URL(e);t.pathname+=t.pathname.endsWith(\"/\")?\"authorize\":\"/authorize\";var r=JSON.parse(JSON.stringify(this.jwtParams));delete r.domain;var n=j()({state:this.state,response_type:this.RESPONSE_TYPE,client_id:this.clientId,prompt:this.PROMPT,redirect_uri:this.redirect_uri,scope:this.SCOPE,connection:Y[this.typeOfLogin],nonce:this.nonce},r);Object.keys(n).forEach((function(e){n[e]&&t.searchParams.append(e,n[e])})),this.finalURL=t}},{key:\"getUserInfo\",value:function(){var e=g()(T.a.mark((function e(t){var r,n,i,o,a,s,u,c,f,h,l,d,p,m,v,g,y;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.idToken,n=t.accessToken,i=this.jwtParams,o=i.domain,a=i.verifierIdField,s=i.isVerifierIdCaseSensitive,u=i.user_info_route,c=void 0===u?\"userinfo\":u,!n){e.next=15;break}return e.prev=3,f=new URL(o),e.next=7,Object(A.get)(\"\".concat(z(f)).concat(c),{headers:{Authorization:\"Bearer \".concat(n)}});case 7:return h=e.sent,l=h.picture,d=h.name,p=h.email,e.abrupt(\"return\",{email:p,name:d,profileImage:l,verifierId:V(h,this.typeOfLogin,a,s),verifier:this.verifier,typeOfLogin:this.typeOfLogin});case 12:e.prev=12,e.t0=e.catch(3),G.a.warn(e.t0,\"Unable to get userinfo from endpoint\");case 15:if(!r){e.next=19;break}return m=be()(r),v=m.name,g=m.email,y=m.picture,e.abrupt(\"return\",{profileImage:y,name:v,email:g,verifierId:V(m,this.typeOfLogin,a,s),verifier:this.verifier,typeOfLogin:this.typeOfLogin});case 19:throw new Error(\"Access/id token not available\");case 20:case\"end\":return e.stop()}}),e,this,[[3,12]])})));return function(t){return e.apply(this,arguments)}}()}]),r}(le);function Oe(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I()(e);if(t){var i=I()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E()(this,r)}}var xe=function(e){k()(r,e);var t=Oe(r);function r(e,n,i,o,a,s,u,c){var f;return w()(this,r),(f=t.call(this,e,n,i,o,a,s,u,c)).clientId=e,f.verifier=n,f.redirect_uri=i,f.typeOfLogin=o,f.uxMode=a,f.redirectToOpener=s,f.jwtParams=u,f.customState=c,f.setFinalUrl(),f}return M()(r,[{key:\"setFinalUrl\",value:function(){var e=JSON.parse(JSON.stringify(this.jwtParams));delete e.domain;var t=j()({state:this.state,client_id:this.clientId,nonce:this.nonce},e);this.finalURL=new URL(ae({baseURL:this.redirect_uri,query:null,hash:t}))}},{key:\"getUserInfo\",value:function(){var e=g()(T.a.mark((function e(t){var r,n,i,o,a,s,u,c,f,h,l,d,p,m,v,g,y;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.idToken,n=t.accessToken,i=this.jwtParams,o=i.domain,a=i.verifierIdField,s=i.isVerifierIdCaseSensitive,u=i.user_info_route,c=void 0===u?\"userinfo\":u,!n){e.next=15;break}return e.prev=3,f=new URL(o),e.next=7,Object(A.get)(\"\".concat(z(f)).concat(c),{headers:{Authorization:\"Bearer \".concat(n)}});case 7:return h=e.sent,l=h.picture,d=h.name,p=h.email,e.abrupt(\"return\",{email:p,name:d,profileImage:l,verifierId:V(h,this.typeOfLogin,a,s),verifier:this.verifier,typeOfLogin:this.typeOfLogin});case 12:e.prev=12,e.t0=e.catch(3),G.a.warn(e.t0,\"Unable to get userinfo from endpoint\");case 15:if(!r){e.next=19;break}return m=be()(r),v=m.name,g=m.email,y=m.picture,e.abrupt(\"return\",{profileImage:y,name:v,email:g,verifierId:V(m,this.typeOfLogin,a,s),verifier:this.verifier,typeOfLogin:this.typeOfLogin});case 19:throw new Error(\"Access/id token not available\");case 20:case\"end\":return e.stop()}}),e,this,[[3,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:\"handleLoginWindow\",value:function(e){var t=this.jwtParams,r=t.id_token,n=t.access_token,i=new ue({url:this.finalURL,features:e.popupFeatures});return this.uxMode!==l.REDIRECT?Promise.resolve({state:{},idToken:r,accessToken:n}):(i.redirect(e.locationReplaceOnRedirect),null)}}]),r}(le),ke=[\"access_token\",\"id_token\"];function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Se(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I()(e);if(t){var i=I()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E()(this,r)}}var Ie=function(e){k()(r,e);var t=Se(r);function r(e,n,i,o,a,u,c,f){var h;return w()(this,r),(h=t.call(this,e,n,i,o,a,u,c,f)).clientId=e,h.verifier=n,h.redirect_uri=i,h.typeOfLogin=o,h.uxMode=a,h.redirectToOpener=u,h.jwtParams=c,h.customState=f,s()(O()(h),\"SCOPE\",\"openid profile email\"),s()(O()(h),\"RESPONSE_TYPE\",\"token id_token\"),s()(O()(h),\"PROMPT\",\"login\"),h.setFinalUrl(),h}return M()(r,[{key:\"setFinalUrl\",value:function(){var e=this.jwtParams.domain,t=new URL(e);t.pathname=\"/passwordless/start\",this.finalURL=t}},{key:\"getUserInfo\",value:function(){var e=g()(T.a.mark((function e(t){var r,n,i,o,a,s,u,c,f,h,l,d,p,m,v;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.idToken,n=t.accessToken,i=this.jwtParams,o=i.domain,a=i.verifierIdField,s=i.isVerifierIdCaseSensitive,e.prev=2,u=new URL(o),e.next=6,Object(A.get)(\"\".concat(z(u),\"userinfo\"),{headers:{Authorization:\"Bearer \".concat(n)}});case 6:return c=e.sent,f=c.picture,h=c.name,l=c.email,e.abrupt(\"return\",{email:l,name:h,profileImage:f,verifierId:V(c,this.typeOfLogin,a,s),verifier:this.verifier,typeOfLogin:this.typeOfLogin});case 11:return e.prev=11,e.t0=e.catch(2),K.error(e.t0),d=be()(r),p=d.name,m=d.email,v=d.picture,e.abrupt(\"return\",{profileImage:v,name:p,email:m,verifierId:V(d,this.typeOfLogin,a,s),verifier:this.verifier,typeOfLogin:this.typeOfLogin});case 17:case\"end\":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:\"handleLoginWindow\",value:function(){var e=this;return new Promise((function(t,r){if(e.redirectToOpener)r(new Error(\"Cannot use redirect to opener for passwordless\"));else{var n=function(n){try{var i=n.error,o=n.data||{},a=o.instanceParams,s=o.hashParams,u=s.access_token,c=s.id_token,f=C()(s,ke);if(i)return K.error(n.error),void r(new Error(i));n.data&&a.verifier===e.verifier&&(K.info(n.data),t(Ee(Ee({accessToken:u,idToken:c||\"\"},f),{},{state:a})))}catch(i){K.error(i),r(i)}},i=new B.BroadcastChannel(\"redirect_channel_\".concat(e.nonce),q);i.addEventListener(\"message\",function(){var e=g()(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t),i.close();case 2:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());try{var o=e.jwtParams,a=o.connection,s=void 0===a?\"email\":a,u=o.login_hint,c=j()({client_id:e.clientId,connection:s,email:\"email\"===s?u:void 0,phone_number:\"sms\"===s?u:void 0,send:\"link\",authParams:{scope:e.SCOPE,state:e.state,response_type:e.RESPONSE_TYPE,redirect_uri:e.redirect_uri,nonce:e.nonce,prompt:e.PROMPT}},{authParams:e.jwtParams});Object(A.post)(e.finalURL.href,JSON.parse(JSON.stringify(c))).then((function(e){K.info(\"posted\",e)})).catch((function(e){K.error(e),r(e)}))}catch(f){K.error(f),r(f)}}}))}}]),r}(le);function Le(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I()(e);if(t){var i=I()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E()(this,r)}}var Te=function(e){k()(r,e);var t=Le(r);function r(e,n,i,o,a,u,c,f){var h;return w()(this,r),(h=t.call(this,e,n,i,o,a,u,c,f)).clientId=e,h.verifier=n,h.redirect_uri=i,h.typeOfLogin=o,h.uxMode=a,h.redirectToOpener=u,h.jwtParams=c,h.customState=f,s()(O()(h),\"RESPONSE_TYPE\",\"token\"),s()(O()(h),\"SCOPE\",\"identity\"),h.setFinalUrl(),h}return M()(r,[{key:\"setFinalUrl\",value:function(){var e=new URL(\"https://www.reddit.com/api/v1/authorize\".concat(window.innerWidth<600?\".compact\":\"\")),t=JSON.parse(JSON.stringify(this.jwtParams||{})),r=j()({state:this.state,response_type:this.RESPONSE_TYPE,client_id:this.clientId,redirect_uri:this.redirect_uri,scope:this.SCOPE},t);Object.keys(r).forEach((function(t){r[t]&&e.searchParams.append(t,r[t])})),this.finalURL=e}},{key:\"getUserInfo\",value:function(){var e=g()(T.a.mark((function e(t){var r,n,i,o,a,s;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.accessToken,e.next=3,Object(A.get)(\"https://oauth.reddit.com/api/v1/me\",{headers:{Authorization:\"Bearer \".concat(r)}});case 3:return n=e.sent,i=n.icon_img,o=void 0===i?\"\":i,a=n.name,s=void 0===a?\"\":a,e.abrupt(\"return\",{email:\"\",name:s,profileImage:o.split(\"?\").length>0?o.split(\"?\")[0]:o,verifier:this.verifier,verifierId:s.toLowerCase(),typeOfLogin:this.typeOfLogin});case 6:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(le);function Re(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I()(e);if(t){var i=I()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E()(this,r)}}var je=function(e){k()(r,e);var t=Re(r);function r(e,n,i,o,a,u,c,f){var h;return w()(this,r),(h=t.call(this,e,n,i,o,a,u,c,f)).clientId=e,h.verifier=n,h.redirect_uri=i,h.typeOfLogin=o,h.uxMode=a,h.redirectToOpener=u,h.jwtParams=c,h.customState=f,s()(O()(h),\"RESPONSE_TYPE\",\"token\"),s()(O()(h),\"SCOPE\",\"user:read:email\"),h.setFinalUrl(),h}return M()(r,[{key:\"setFinalUrl\",value:function(){var e=new URL(\"https://id.twitch.tv/oauth2/authorize\"),t=JSON.parse(JSON.stringify(this.jwtParams||{})),r=j()({state:this.state,response_type:this.RESPONSE_TYPE,client_id:this.clientId,redirect_uri:this.redirect_uri,scope:this.SCOPE,force_verify:!0},t);Object.keys(r).forEach((function(t){r[t]&&e.searchParams.append(t,r[t])})),this.finalURL=e}},{key:\"getUserInfo\",value:function(){var e=g()(T.a.mark((function e(t){var r,n,i,o,a,s,u,c,f,h,l,d;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.accessToken,e.next=3,Object(A.get)(\"https://api.twitch.tv/helix/users\",{headers:{Authorization:\"Bearer \".concat(r),\"Client-ID\":this.clientId}});case 3:return n=e.sent,i=n.data||[],o=W()(i,1),a=o[0],s=a.profile_image_url,u=void 0===s?\"\":s,c=a.display_name,f=void 0===c?\"\":c,h=a.email,l=void 0===h?\"\":h,d=a.id,e.abrupt(\"return\",{profileImage:u,name:f,email:l,verifierId:d,verifier:this.verifier,typeOfLogin:this.typeOfLogin});case 6:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(le);function Ae(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I()(e);if(t){var i=I()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E()(this,r)}}var Ne=function(e){k()(r,e);var t=Ae(r);function r(e,n,i,o,a,s,u,c,f){var h;return w()(this,r),(h=t.call(this,e,n,i,o,a,s,u,c)).clientId=e,h.verifier=n,h.redirect_uri=i,h.typeOfLogin=o,h.uxMode=a,h.redirectToOpener=s,h.jwtParams=u,h.customState=c,h.registerOnly=f,h.setFinalUrl(),h}return M()(r,[{key:\"setFinalUrl\",value:function(){var e=new URL(\"https://webauthn.openlogin.com\"),t=JSON.parse(JSON.stringify(this.jwtParams||{})),r=j()({register_only:!!this.registerOnly,state:this.state,client_id:this.clientId,redirect_uri:this.redirect_uri},t);Object.keys(r).forEach((function(t){r[t]&&e.searchParams.append(t,r[t])})),this.finalURL=e}},{key:\"getUserInfo\",value:function(){var e=g()(T.a.mark((function e(t){var r,n,i,o,a,s,u,c,f,h,l,d,p,m,v;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.idToken,n=t.ref,i=t.extraParamsPassed,o=t.extraParams,\"true\"!==i){e.next=31;break}K.debug(\"extraParamsPassed is true, using extraParams passed through hashParams\"),e.prev=3,p=JSON.parse(atob(o)),a=p.verifier_id,s=p.signature,u=p.clientDataJSON,c=p.authenticatorData,f=p.publicKey,h=p.challenge,l=p.rpOrigin,d=p.credId,e.next=29;break;case 15:return e.prev=15,e.t0=e.catch(3),K.warn(\"unable to parse extraParams\",e.t0),e.next=20,Object(A.get)(\"\".concat(\"https://api.webauthn.openlogin.com\",\"/signature/fetch/\").concat(r));case 20:m=e.sent,a=m.verifier_id,s=m.signature,u=m.clientDataJSON,c=m.authenticatorData,f=m.publicKey,h=m.challenge,l=m.rpOrigin,d=m.credId;case 29:e.next=43;break;case 31:return K.debug(\"extraParamsPassed is false, using extraParams passed through bridge server\"),e.next=34,Object(A.get)(\"\".concat(\"https://api.webauthn.openlogin.com\",\"/signature/fetch/\").concat(r));case 34:v=e.sent,a=v.verifier_id,s=v.signature,u=v.clientDataJSON,c=v.authenticatorData,f=v.publicKey,h=v.challenge,l=v.rpOrigin,d=v.credId;case 43:if(s===r){e.next=45;break}throw new Error(\"idtoken should be equal to signature\");case 45:return e.abrupt(\"return\",{email:\"\",name:\"WebAuthn Login\",profileImage:\"\",verifier:this.verifier,verifierId:a,typeOfLogin:this.typeOfLogin,ref:n,registerOnly:this.registerOnly,extraVerifierParams:{signature:s,clientDataJSON:u,authenticatorData:c,publicKey:f,challenge:h,rpOrigin:l,credId:d}});case 46:case\"end\":return e.stop()}}),e,this,[[3,15]])})));return function(t){return e.apply(this,arguments)}}()}]),r}(le),Ce=function(e){var t=e.clientId,r=e.redirect_uri,n=e.typeOfLogin,i=e.verifier,o=e.jwtParams,a=e.redirectToOpener,s=e.uxMode,u=e.customState,c=e.registerOnly;if(!i||!n||!t)throw new Error(\"Invalid params\");var h=o||{},l=h.domain,d=h.login_hint,p=h.id_token,m=h.access_token;switch(n){case f.GOOGLE:return new ye(t,i,r,n,s,a,o,u);case f.FACEBOOK:return new ve(t,i,r,n,s,a,o,u);case f.TWITCH:return new je(t,i,r,n,s,a,o,u);case f.REDDIT:return new Te(t,i,r,n,s,a,o,u);case f.DISCORD:return new pe(t,i,r,n,s,a,o,u);case f.PASSWORDLESS:if(!l||!d)throw new Error(\"Invalid params\");return new Ie(t,i,r,n,s,a,o,u);case f.APPLE:case f.GITHUB:case f.LINKEDIN:case f.TWITTER:case f.WEIBO:case f.LINE:case f.EMAIL_PASSWORD:case f.JWT:if(!l)throw new Error(\"Invalid params\");return p||m?new xe(t,i,r,n,s,a,o,u):new _e(t,i,r,n,s,a,o,u);case f.WEBAUTHN:return new Ne(t,i,r,n,s,a,o,u,c);default:throw new Error(\"Invalid login type\")}},De=r(20),Ue=r.n(De),Be=r(17),Je=r.n(Be),We=r(16),Fe=r(21),Ge=function(e){return new Promise((function(t,r){var n=\"\".concat(e,\"sw.js\");\"serviceWorker\"in window.navigator?Object(Fe.register)(n,{ready:function(){K.info(\"App is being served from cache by a service worker.\\n For more details, visit https://goo.gl/AFskqB\"),t(void 0)},registered:function(){K.info(\"Service worker has been registered.\"),t(void 0)},cached:function(){K.info(\"Content has been cached for offline use.\"),t(void 0)},updatefound:function(){K.info(\"New content is downloading.\")},updated:function(){K.info(\"New content is available; please refresh.\")},offline:function(){K.info(\"No internet connection found. App is running in offline mode.\"),r(new Error(\"App is offline\"))},error:function(e){K.error(\"Error during service worker registration:\",e),r(e)}}):r(new Error(\"Service workers are not supported\"))}))},Ke=[\"access_token\",\"id_token\"],He=[\"access_token\",\"id_token\"],Ye=[\"access_token\",\"id_token\"],ze=[\"args\",\"method\"];function qe(e,t){var r=\"undefined\"!==typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if(\"string\"===typeof e)return Xe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===r&&e.constructor&&(r=e.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(e);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xe(e,t)}(e))||t&&e&&\"number\"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Qe=function(){function e(t){var r=t.baseUrl,n=t.network,i=void 0===n?u.MAINNET:n,o=t.proxyContractAddress,a=t.enableLogging,f=void 0!==a&&a,h=t.redirectToOpener,p=void 0!==h&&h,v=t.redirectPathName,g=void 0===v?\"redirect\":v,y=t.apiKey,b=void 0===y?\"torus-default\":y,M=t.uxMode,_=void 0===M?l.POPUP:M,O=t.redirectParamsStorageMethod,x=void 0===O?d.SESSION_STORAGE:O,k=t.locationReplaceOnRedirect,P=void 0!==k&&k,E=t.popupFeatures,S=t.skipFetchingNodeDetails,I=void 0!==S&&S;w()(this,e),s()(this,\"isInitialized\",void 0),s()(this,\"config\",void 0),s()(this,\"torus\",void 0),s()(this,\"nodeDetailManager\",void 0),this.isInitialized=!1;var L=new URL(r);this.config={baseUrl:z(L),get redirect_uri(){return\"\".concat(this.baseUrl).concat(g)},redirectToOpener:p,uxMode:_,redirectParamsStorageMethod:x,locationReplaceOnRedirect:P,popupFeatures:E};var T=new Je.a({enableLogging:f,metadataHost:\"https://metadata.tor.us\",allowHost:\"https://signer.tor.us/api/allow\"});Je.a.setAPIKey(b),this.torus=T;var R=i===u.TESTNET?c.ROPSTEN:i;this.nodeDetailManager=new Ue.a({network:R,proxyAddress:o||m[i]}),I||this.nodeDetailManager.getNodeDetails(),f?K.enableAll():K.disableAll()}return M()(e,[{key:\"init\",value:function(){var e=g()(T.a.mark((function e(){var t,r,n,i,o,a,s,u=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},r=t.skipSw,n=void 0!==r&&r,i=t.skipInit,o=void 0!==i&&i,a=t.skipPrefetch,s=void 0!==a&&a,!o){e.next=4;break}return this.isInitialized=!0,e.abrupt(\"return\");case 4:if(n){e.next=22;break}return e.next=7,fetch(\"\".concat(this.config.baseUrl,\"sw.js\"),{cache:\"reload\"});case 7:if(!e.sent.ok){e.next=21;break}return e.prev=9,e.next=12,Ge(this.config.baseUrl);case 12:return this.isInitialized=!0,e.abrupt(\"return\");case 16:e.prev=16,e.t0=e.catch(9),K.warn(e.t0);case 19:e.next=22;break;case 21:throw new Error(\"Service worker is not being served. Please serve it\");case 22:if(s){e.next=29;break}if(!oe()){e.next=26;break}return this.isInitialized=!0,e.abrupt(\"return\");case 26:return e.next=28,this.handlePrefetchRedirectUri();case 28:return e.abrupt(\"return\");case 29:this.isInitialized=!0;case 30:case\"end\":return e.stop()}}),e,this,[[9,16]])})));return function(){return e.apply(this,arguments)}}()},{key:\"handlePrefetchRedirectUri\",value:function(){var e=g()(T.a.mark((function e(){var t=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document){e.next=2;break}return e.abrupt(\"return\",Promise.resolve());case 2:return e.abrupt(\"return\",new Promise((function(e,r){var n=document.createElement(\"link\");n.href=t.config.redirect_uri,window.location.origin!==new URL(t.config.redirect_uri).origin&&(n.crossOrigin=\"anonymous\"),n.type=\"text/html\",n.rel=\"prefetch\";var i=function(){t.isInitialized=!0,e()};try{n.relList&&n.relList.supports&&n.relList.supports(\"prefetch\")?(n.onload=i,n.onerror=function(){r(new Error(\"Please serve redirect.html present in serviceworker folder of this package on \".concat(t.config.redirect_uri)))},document.head.appendChild(n)):i()}catch(o){i()}})));case 3:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:\"triggerLogin\",value:function(){var e=g()(T.a.mark((function e(t){var r,n,i,o,a,s,u,c,h,d,m,v,g,y,w,b,M,_,O,x,k,P,E,S,I;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.verifier,n=t.typeOfLogin,i=t.clientId,o=t.jwtParams,a=t.hash,s=t.queryParameters,u=t.customState,c=t.registerOnly,K.info(\"Verifier: \",r),this.isInitialized){e.next=4;break}throw new Error(\"Not initialized yet\");case 4:if(!c||n===f.WEBAUTHN){e.next=6;break}throw new Error(\"registerOnly flag can only be passed for webauthn\");case 6:if(h=Ce({typeOfLogin:n,clientId:i,verifier:r,redirect_uri:this.config.redirect_uri,redirectToOpener:this.config.redirectToOpener,jwtParams:o,uxMode:this.config.uxMode,customState:u,registerOnly:c}),!a||!s){e.next=15;break}if(m=Z(a,s),v=m.error,g=m.hashParameters,y=m.instanceParameters,!v){e.next=11;break}throw new Error(v);case 11:w=g.access_token,b=g.id_token,M=C()(g,Ke),d=Ze(Ze({accessToken:w,idToken:b},M),{},{state:y}),e.next=22;break;case 15:return ne(this.config.redirectParamsStorageMethod),ee({method:p.TRIGGER_LOGIN,args:t},this.config.redirectParamsStorageMethod,h.nonce),e.next=19,h.handleLoginWindow({locationReplaceOnRedirect:this.config.locationReplaceOnRedirect,popupFeatures:this.config.popupFeatures});case 19:if(d=e.sent,this.config.uxMode!==l.REDIRECT){e.next=22;break}return e.abrupt(\"return\",null);case 22:return e.next=24,h.getUserInfo(d);case 24:if(_=e.sent,!c){e.next=39;break}return e.next=28,this.nodeDetailManager.getNodeDetails();case 28:return O=e.sent,x=O.torusNodeEndpoints,k=O.torusNodePub,e.next=33,this.torus.getPublicAddress(x,k,{verifier:r,verifierId:_.verifierId},!0);case 33:if(P=e.sent,E={userInfo:Ze(Ze({},_),d)},\"string\"!==typeof P){e.next=37;break}throw new Error(\"should have returned extended pub key\");case 37:return S={pubKey:{pub_key_X:P.X,pub_key_Y:P.Y},publicAddress:P.address,privateKey:null,metadataNonce:null},e.abrupt(\"return\",Ze(Ze({},E),S));case 39:return e.next=41,this.getTorusKey(r,_.verifierId,{verifier_id:_.verifierId},d.idToken||d.accessToken,_.extraVerifierParams);case 41:return I=e.sent,e.abrupt(\"return\",Ze(Ze({},I),{},{userInfo:Ze(Ze({},_),d)}));case 43:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"triggerAggregateLogin\",value:function(){var e=g()(T.a.mark((function e(t){var r,n,i,o,a,s,u,c,f,d,m,v,g,y,w,b,M,_,O,x,k,P,E,S,I,L,R,j,A,N,D,U,B,J,W,F,G;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.aggregateVerifierType,n=t.verifierIdentifier,i=t.subVerifierDetailsArray,this.isInitialized){e.next=3;break}throw new Error(\"Not initialized yet\");case 3:if(r&&n&&Array.isArray(i)){e.next=5;break}throw new Error(\"Invalid params\");case 5:if(r!==h.SINGLE_VERIFIER_ID||1===i.length){e.next=7;break}throw new Error(\"Single id verifier can only have one sub verifier\");case 7:o=[],a=[],s=qe(i),e.prev=10,s.s();case 12:if((u=s.n()).done){e.next=36;break}if(c=u.value,f=c.clientId,d=c.typeOfLogin,m=c.verifier,v=c.jwtParams,g=c.hash,y=c.queryParameters,w=c.customState,b=Ce({typeOfLogin:d,clientId:f,verifier:m,redirect_uri:this.config.redirect_uri,redirectToOpener:this.config.redirectToOpener,jwtParams:v,uxMode:this.config.uxMode,customState:w}),M=void 0,!g||!y){e.next=25;break}if(_=Z(g,y),O=_.error,x=_.hashParameters,k=_.instanceParameters,!O){e.next=21;break}throw new Error(O);case 21:P=x.access_token,E=x.id_token,S=C()(x,He),M=Ze(Ze({accessToken:P,idToken:E},S),{},{state:k}),e.next=32;break;case 25:return ne(this.config.redirectParamsStorageMethod),ee({method:p.TRIGGER_AGGREGATE_LOGIN,args:t},this.config.redirectParamsStorageMethod,b.nonce),e.next=29,b.handleLoginWindow({locationReplaceOnRedirect:this.config.locationReplaceOnRedirect,popupFeatures:this.config.popupFeatures});case 29:if(M=e.sent,this.config.uxMode!==l.REDIRECT){e.next=32;break}return e.abrupt(\"return\",null);case 32:o.push(b.getUserInfo(M)),a.push(M);case 34:e.next=12;break;case 36:e.next=41;break;case 38:e.prev=38,e.t0=e.catch(10),s.e(e.t0);case 41:return e.prev=41,s.f(),e.finish(41);case 44:return e.next=46,Promise.all(o);case 46:for(I=e.sent,L=I.map((function(e){return Ze(Ze({},e),{},{aggregateVerifier:n})})),R={verify_params:[],sub_verifier_ids:[],verifier_id:\"\"},j=[],A=\"\",N={},D=0;D<i.length;D+=1)U=a[D],B=U.idToken,J=U.accessToken,W=L[D],R.verify_params.push({verifier_id:W.verifierId,idtoken:B||J}),R.sub_verifier_ids.push(W.verifier),j.push(B||J),A=W.verifierId,N=W.extraVerifierParams;return j.sort(),F=Object(We.keccak256)(j.join(String.fromCharCode(29))).slice(2),R.verifier_id=A,e.next=58,this.getTorusKey(n,A,R,F,N);case 58:return G=e.sent,e.abrupt(\"return\",Ze(Ze({},G),{},{userInfo:L.map((function(e,t){return Ze(Ze({},e),a[t])}))}));case 60:case\"end\":return e.stop()}}),e,this,[[10,38,41,44]])})));return function(t){return e.apply(this,arguments)}}()},{key:\"triggerHybridAggregateLogin\",value:function(){var e=g()(T.a.mark((function e(t){var r,n,i,o,a,s,u,c,f,d,m,v,g,y,w,b,M,_,O,x,k,P,E,S,I,L,R,j,A,N,D,U,B,J,F,G;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.singleLogin,n=t.aggregateLoginParams,this.isInitialized){e.next=3;break}throw new Error(\"Not initialized yet\");case 3:if(n.aggregateVerifierType&&n.verifierIdentifier&&Array.isArray(n.subVerifierDetailsArray)){e.next=5;break}throw new Error(\"Invalid params\");case 5:if(n.aggregateVerifierType!==h.SINGLE_VERIFIER_ID||1===n.subVerifierDetailsArray.length){e.next=7;break}throw new Error(\"Single id verifier can only have one sub verifier\");case 7:if(i=r.typeOfLogin,o=r.clientId,a=r.verifier,s=r.jwtParams,u=r.hash,c=r.queryParameters,f=r.customState,d=Ce({typeOfLogin:i,clientId:o,verifier:a,redirect_uri:this.config.redirect_uri,redirectToOpener:this.config.redirectToOpener,jwtParams:s,uxMode:this.config.uxMode,customState:f}),!u||!c){e.next=17;break}if(v=Z(u,c),g=v.error,y=v.hashParameters,w=v.instanceParameters,!g){e.next=13;break}throw new Error(g);case 13:b=y.access_token,M=y.id_token,_=C()(y,Ye),m=Ze(Ze({accessToken:b,idToken:M},_),{},{state:w}),e.next=24;break;case 17:return ne(this.config.redirectParamsStorageMethod),ee({method:p.TRIGGER_AGGREGATE_HYBRID_LOGIN,args:t},this.config.redirectParamsStorageMethod,d.nonce),e.next=21,d.handleLoginWindow({locationReplaceOnRedirect:this.config.locationReplaceOnRedirect,popupFeatures:this.config.popupFeatures});case 21:if(m=e.sent,this.config.uxMode!==l.REDIRECT){e.next=24;break}return e.abrupt(\"return\",null);case 24:return e.next=26,d.getUserInfo(m);case 26:for(O=e.sent,x=this.getTorusKey(a,O.verifierId,{verifier_id:O.verifierId},m.idToken||m.accessToken,O.extraVerifierParams),k=n.verifierIdentifier,P=n.subVerifierDetailsArray,E={verify_params:[],sub_verifier_ids:[],verifier_id:\"\"},S=[],I=\"\",L=0;L<P.length;L+=1)R=P[L],A=(j=m).idToken,N=j.accessToken,E.verify_params.push({verifier_id:O.verifierId,idtoken:A||N}),E.sub_verifier_ids.push(R.verifier),S.push(A||N),I=O.verifierId;return S.sort(),D=Object(We.keccak256)(S.join(String.fromCharCode(29))).slice(2),E.verifier_id=I,U=this.getTorusKey(k,I,E,D,O.extraVerifierParams),e.next=39,Promise.all([x,U]);case 39:return B=e.sent,J=W()(B,2),F=J[0],G=J[1],e.abrupt(\"return\",{singleLogin:Ze({userInfo:Ze(Ze({},O),m)},F),aggregateLogins:[G]});case 44:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"getTorusKey\",value:function(){var e=g()(T.a.mark((function e(t,r,n,i,o){var a,s,u,c,f,h;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.nodeDetailManager.getNodeDetails();case 2:return a=e.sent,s=a.torusNodeEndpoints,u=a.torusNodePub,c=a.torusIndexes,e.next=8,this.torus.getPublicAddress(s,u,{verifier:t,verifierId:r},!0);case 8:return f=e.sent,K.info(\"New private key assigned to user at address \",f),e.next=12,this.torus.retrieveShares(s,c,t,n,i,o);case 12:if(h=e.sent,\"string\"!==typeof f){e.next=15;break}throw new Error(\"must use extended pub key\");case 15:if(h.ethAddress.toLowerCase()===f.address.toLowerCase()){e.next=17;break}throw new Error(\"data ethAddress does not match response address\");case 17:return e.abrupt(\"return\",{publicAddress:h.ethAddress.toString(),privateKey:h.privKey.toString(),metadataNonce:h.metadataNonce.toString(\"hex\"),pubKey:{pub_key_X:f.X,pub_key_Y:f.Y}});case 18:case\"end\":return e.stop()}}),e,this)})));return function(t,r,n,i,o){return e.apply(this,arguments)}}()},{key:\"getAggregateTorusKey\",value:function(){var e=g()(T.a.mark((function e(t,r,n){var i,o,a,s,u,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i={verify_params:[],sub_verifier_ids:[],verifier_id:\"\"},o=[],a={},s=0;s<n.length;s+=1)u=n[s],i.verify_params.push({verifier_id:r,idtoken:u.idToken}),i.sub_verifier_ids.push(u.verifier),o.push(u.idToken),a=u.extraVerifierParams;return o.sort(),c=Object(We.keccak256)(o.join(String.fromCharCode(29))).slice(2),i.verifier_id=r,e.abrupt(\"return\",this.getTorusKey(t,r,i,c,a));case 8:case\"end\":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:\"getRedirectResult\",value:function(){var e=g()(T.a.mark((function e(){var t,r,n,i,o,a,s,u,c,f,h,l,d,m,v,g,y,w,b,M,_,O,x,k=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},r=t.replaceUrl,n=void 0===r||r,i=t.clearLoginDetails,o=void 0===i||i,e.next=3,this.init({skipInit:!0});case 3:if(a=new URL(window.location.href),s=a.hash.substr(1),u={},a.searchParams.forEach((function(e,t){u[t]=e})),n&&(c=window.location.origin+window.location.pathname,window.history.replaceState(null,\"\",c)),s||0!==Object.keys(u).length){e.next=10;break}throw new Error(\"Unable to fetch result from redirect\");case 10:if(f=Z(s,u),h=f.error,l=f.instanceParameters,d=f.hashParameters,m=l.instanceId,K.info(m,\"instanceId\"),v=te(this.config.redirectParamsStorageMethod,m),g=v.args,y=v.method,w=C()(v,ze),K.info(g,y),o&&re(this.config.redirectParamsStorageMethod,m),!h){e.next=19;break}return b=\"Error: \".concat(h,\". Instance params: \").concat(JSON.stringify(l||{}),\". Hash params: \").concat(JSON.stringify(d||{})),e.abrupt(\"return\",{error:b,state:l||{},method:y,result:{},hashParameters:d,args:g});case 19:if(e.prev=19,y!==p.TRIGGER_LOGIN){e.next=29;break}return(_=g).hash=s,_.queryParameters=u,e.next=26,this.triggerLogin(_);case 26:M=e.sent,e.next=44;break;case 29:if(y!==p.TRIGGER_AGGREGATE_LOGIN){e.next=37;break}return(O=g).subVerifierDetailsArray.forEach((function(e){e.hash=s,e.queryParameters=u})),e.next=34,this.triggerAggregateLogin(O);case 34:M=e.sent,e.next=44;break;case 37:if(y!==p.TRIGGER_AGGREGATE_HYBRID_LOGIN){e.next=44;break}return(x=g).singleLogin.hash=s,x.singleLogin.queryParameters=u,e.next=43,this.triggerHybridAggregateLogin(x);case 43:M=e.sent;case 44:e.next=50;break;case 46:return e.prev=46,e.t0=e.catch(19),K.error(e.t0),e.abrupt(\"return\",Ze({error:\"Could not get result from torus nodes \".concat((null===e.t0||void 0===e.t0?void 0:e.t0.message)||\"\"),state:l||{},method:y,result:{},hashParameters:d,args:g},w));case 50:if(M){e.next=52;break}return e.abrupt(\"return\",Ze({error:\"Unsupported method type\",state:l||{},method:y,result:{},hashParameters:d,args:g},w));case 52:return e.abrupt(\"return\",Ze({method:y,result:M,state:l||{},hashParameters:d,args:g},w));case 53:case\"end\":return e.stop()}}),e,this,[[19,46]])})));return function(){return e.apply(this,arguments)}}()}]),e}()}])},VCN7:function(e,t){var r;function n(e,t){navigator.onLine||e(\"offline\"),e(\"error\",t)}function i(e,t,r){navigator.serviceWorker.register(e,r).then((function(e){t(\"registered\",e),e.waiting?t(\"updated\",e):e.onupdatefound=function(){t(\"updatefound\",e);var r=e.installing;r.onstatechange=function(){\"installed\"===r.state&&(navigator.serviceWorker.controller?t(\"updated\",e):t(\"cached\",e))}}})).catch((function(e){return n(t,e)}))}\"undefined\"!==typeof window&&(r=\"undefined\"===typeof document||\"interactive\"!==document.readyState&&\"complete\"!==document.readyState?\"undefined\"!==typeof Promise?new Promise((function(e){return window.addEventListener(\"load\",e)})):{then:function(e){return window.addEventListener(\"load\",e)}}:Promise.resolve()),t.register=function(e,t){void 0===t&&(t={});var o=t.registrationOptions;void 0===o&&(o={}),delete t.registrationOptions;var a=function(e){for(var r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];t&&t[e]&&t[e].apply(t,r)};\"serviceWorker\"in navigator&&r.then((function(){Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))?(!function(e,t,r){fetch(e).then((function(n){404===n.status?(t(\"error\",new Error(\"Service worker not found at \"+e)),unregister()):-1===n.headers.get(\"content-type\").indexOf(\"javascript\")?(t(\"error\",new Error(\"Expected \"+e+\" to have javascript content-type, but received \"+n.headers.get(\"content-type\"))),unregister()):i(e,t,r)})).catch((function(e){return n(t,e)}))}(e,a,o),navigator.serviceWorker.ready.then((function(e){a(\"ready\",e)}))):(i(e,a,o),navigator.serviceWorker.ready.then((function(e){a(\"ready\",e)})))}))},t.unregister=function(){\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},WkPL:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.default=e.exports,e.exports.__esModule=!0},XH0y:function(e,t,r){var n,i;!function(o,a){\"use strict\";void 0===(i=\"function\"===typeof(n=function(){var e=function(){},t=\"undefined\",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\\/|MSIE /.test(window.navigator.userAgent),n=[\"trace\",\"debug\",\"info\",\"warn\",\"error\"];function i(e,t){var r=e[t];if(\"function\"===typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(n){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(n){return\"debug\"===n&&(n=\"log\"),typeof console!==t&&(\"trace\"===n&&r?o:void 0!==console[n]?i(console,n):void 0!==console.log?i(console,\"log\"):e)}function s(t,r){for(var i=0;i<n.length;i++){var o=n[i];this[o]=i<t?e:this.methodFactory(o,t,r)}this.log=this.debug}function u(e,r,n){return function(){typeof console!==t&&(s.call(this,r,n),this[e].apply(this,arguments))}}function c(e,t,r){return a(e)||u.apply(this,arguments)}function f(e,r,i){var o,a=this,u=\"loglevel\";function f(e){var r=(n[e]||\"silent\").toUpperCase();if(typeof window!==t&&u){try{return void(window.localStorage[u]=r)}catch(i){}try{window.document.cookie=encodeURIComponent(u)+\"=\"+r+\";\"}catch(i){}}}function h(){var e;if(typeof window!==t&&u){try{e=window.localStorage[u]}catch(i){}if(typeof e===t)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(u)+\"=\");-1!==n&&(e=/^([^;]+)/.exec(r.slice(n))[1])}catch(i){}return void 0===a.levels[e]&&(e=void 0),e}}\"string\"===typeof e?u+=\":\"+e:\"symbol\"===typeof e&&(u=void 0),a.name=e,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=i||c,a.getLevel=function(){return o},a.setLevel=function(r,n){if(\"string\"===typeof r&&void 0!==a.levels[r.toUpperCase()]&&(r=a.levels[r.toUpperCase()]),!(\"number\"===typeof r&&r>=0&&r<=a.levels.SILENT))throw\"log.setLevel() called with invalid level: \"+r;if(o=r,!1!==n&&f(r),s.call(a,r,e),typeof console===t&&r<a.levels.SILENT)return\"No console available for logging\"},a.setDefaultLevel=function(e){h()||a.setLevel(e,!1)},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var l=h();null==l&&(l=null==r?\"WARN\":r),a.setLevel(l,!1)}var h=new f,l={};h.getLogger=function(e){if(\"symbol\"!==typeof e&&\"string\"!==typeof e||\"\"===e)throw new TypeError(\"You must supply a name when creating a logger.\");var t=l[e];return t||(t=l[e]=new f(e,h.getLevel(),h.methodFactory)),t};var d=typeof window!==t?window.log:void 0;return h.noConflict=function(){return typeof window!==t&&window.log===h&&(window.log=d),h},h.getLoggers=function(){return l},h.default=h,h})?n.call(t,r,t,e):n)||(e.exports=i)}()},ZhPi:function(e,t,r){var n=r(\"WkPL\");e.exports=function(e,t){if(e){if(\"string\"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},a1gu:function(e,t,r){var n=r(\"cDf5\").default,i=r(\"PJYZ\");e.exports=function(e,t){if(t&&(\"object\"===n(t)||\"function\"===typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return i(e)},e.exports.default=e.exports,e.exports.__esModule=!0},b48C:function(e,t){e.exports=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.default=e.exports,e.exports.__esModule=!0},eRdg:function(e,t,r){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=4)}([function(e,t){e.exports=r(\"o0o1\")},function(e,t){e.exports=r(\"PE4B\")},function(e,t){e.exports=r(\"yXPU\")},function(e,t){e.exports=r(\"lSNA\")},function(e,t,r){\"use strict\";r.r(t),r.d(t,\"gatewayAuthHeader\",(function(){return m})),r.d(t,\"gatewayEmbedHostHeader\",(function(){return v})),r.d(t,\"setEmbedHost\",(function(){return g})),r.d(t,\"clearEmbedHost\",(function(){return y})),r.d(t,\"getEmbedHost\",(function(){return w})),r.d(t,\"setAPIKey\",(function(){return b})),r.d(t,\"clearAPIKey\",(function(){return M})),r.d(t,\"getAPIKey\",(function(){return _})),r.d(t,\"promiseTimeout\",(function(){return x})),r.d(t,\"get\",(function(){return k})),r.d(t,\"post\",(function(){return P})),r.d(t,\"put\",(function(){return E})),r.d(t,\"patch\",(function(){return S})),r.d(t,\"remove\",(function(){return I})),r.d(t,\"generateJsonRPCObject\",(function(){return L})),r.d(t,\"promiseRace\",(function(){return T}));var n=r(3),i=r.n(n),o=r(2),a=r.n(o),s=r(0),u=r.n(s),c=r(1),f=r.n(c);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=\"torus-default\",p=\"\",m=\"x-api-key\",v=\"x-embed-host\";function g(e){p=e}function y(){p=\"\"}function w(){return p}function b(e){d=e}function M(){d=\"torus-default\"}function _(){return d}function O(){var e={};return d&&(e[m]=d),p&&(e[v]=p),e}var x=function(e,t){var r=new Promise((function(t,r){var n=setTimeout((function(){clearTimeout(n),r(new Error(\"Timed out in \".concat(e,\"ms\")))}),e)}));return Promise.race([t,r])},k=function(){var e=a()(u.a.mark((function e(t){var r,n,i,o,a,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},n=s.length>2&&void 0!==s[2]?s[2]:{},i={mode:\"cors\",headers:{}},n.useAPIKey&&(i.headers=l(l({},i.headers),O())),o=f.a.all([i,r,{method:\"GET\"}]),e.next=7,fetch(t,o);case 7:if(!(a=e.sent).ok){e.next=10;break}return e.abrupt(\"return\",a.json());case 10:throw a;case 11:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={mode:\"cors\",headers:{\"Content-Type\":\"application/json; charset=utf-8\"}};n.useAPIKey&&(i.headers=l(l({},i.headers),O()));var o=f.a.all([i,r,{method:\"POST\"}]);return o.body=n.isUrlEncodedData?t:JSON.stringify(t),void 0===o.headers[\"Content-Type\"]&&delete o.headers[\"Content-Type\"],x(n.timeout||3e4,fetch(e,o).then((function(e){if(e.ok)return e.json();throw e})))},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={mode:\"cors\",headers:{\"Content-Type\":\"application/json; charset=utf-8\"}};n.useAPIKey&&(i.headers=l(l({},i.headers),O()));var o=f.a.all([i,r,{method:\"PUT\"}]);return o.body=n.isUrlEncodedData?t:JSON.stringify(t),void 0===o.headers[\"Content-Type\"]&&delete o.headers[\"Content-Type\"],x(n.timeout||3e4,fetch(e,o).then((function(e){if(e.ok)return e.json();throw e})))},S=function(){var e=a()(u.a.mark((function e(t){var r,n,i,o,a,s,c=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},n=c.length>2&&void 0!==c[2]?c[2]:{},i=c.length>3&&void 0!==c[3]?c[3]:{},o={mode:\"cors\",headers:{\"Content-Type\":\"application/json; charset=utf-8\"}},i.useAPIKey&&(o.headers=l(l({},o.headers),O())),(a=f.a.all([o,n,{method:\"PATCH\"}])).body=i.isUrlEncodedData?r:JSON.stringify(r),void 0===a.headers[\"Content-Type\"]&&delete a.headers[\"Content-Type\"],e.next=10,fetch(t,a);case 10:if(!(s=e.sent).ok){e.next=13;break}return e.abrupt(\"return\",s.json());case 13:throw s;case 14:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=a()(u.a.mark((function e(t){var r,n,i,o,a,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]&&s[1],r=s.length>2&&void 0!==s[2]?s[2]:{},n=s.length>3&&void 0!==s[3]?s[3]:{},i={mode:\"cors\",headers:{\"Content-Type\":\"application/json; charset=utf-8\"}},n.useAPIKey&&(i.headers=l(l({},i.headers),O())),o=f.a.all([i,r,{method:\"DELETE\"}]),e.next=8,fetch(t,o);case 8:if(!(a=e.sent).ok){e.next=11;break}return e.abrupt(\"return\",a.json());case 11:throw a;case 12:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e,t){return{jsonrpc:\"2.0\",method:e,id:10,params:t}},T=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e4;return Promise.race([k(e,t),new Promise((function(e,t){setTimeout((function(){t(new Error(\"timed out\"))}),r)}))])}}])},m0LI:function(e,t){e.exports=function(e,t){var r=null==e?null:\"undefined\"!==typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}},e.exports.default=e.exports,e.exports.__esModule=!0},oShl:function(e,t,r){var n=r(\"Nsbk\"),i=r(\"SksO\"),o=r(\"xfeJ\"),a=r(\"sXyB\");function s(t){var r=\"function\"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!o(e))return e;if(\"function\"!==typeof e)throw new TypeError(\"Super expression must either be null or a function\");if(\"undefined\"!==typeof r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return a(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.default=e.exports,e.exports.__esModule=!0,s(t)}e.exports=s,e.exports.default=e.exports,e.exports.__esModule=!0},pVtG:function(e,t,r){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=7)}([function(e,t){e.exports=r(\"lSNA\")},function(e,t){e.exports=r(\"o0o1\")},function(e,t){e.exports=r(\"bhFO\")},function(e,t){e.exports=r(\"W6Pm\")},function(e,t){e.exports=r(\"yXPU\")},function(e,t){e.exports=r(\"lwsE\")},function(e,t){e.exports=r(\"W8MJ\")},function(e,t,r){\"use strict\";r.r(t),r.d(t,\"ETHEREUM_NETWORK\",(function(){return n})),r.d(t,\"abi\",(function(){return i})),r.d(t,\"default\",(function(){return y}));var n={ROPSTEN:\"ropsten\",MAINNET:\"mainnet\"},i=[{constant:!0,inputs:[],name:\"currentEpoch\",outputs:[{internalType:\"uint256\",name:\"\",type:\"uint256\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{internalType:\"uint256\",name:\"epoch\",type:\"uint256\"}],name:\"getEpochInfo\",outputs:[{internalType:\"uint256\",name:\"id\",type:\"uint256\"},{internalType:\"uint256\",name:\"n\",type:\"uint256\"},{internalType:\"uint256\",name:\"k\",type:\"uint256\"},{internalType:\"uint256\",name:\"t\",type:\"uint256\"},{internalType:\"address[]\",name:\"nodeList\",type:\"address[]\"},{internalType:\"uint256\",name:\"prevEpoch\",type:\"uint256\"},{internalType:\"uint256\",name:\"nextEpoch\",type:\"uint256\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!0,inputs:[{internalType:\"address\",name:\"nodeAddress\",type:\"address\"}],name:\"getNodeDetails\",outputs:[{internalType:\"string\",name:\"declaredIp\",type:\"string\"},{internalType:\"uint256\",name:\"position\",type:\"uint256\"},{internalType:\"uint256\",name:\"pubKx\",type:\"uint256\"},{internalType:\"uint256\",name:\"pubKy\",type:\"uint256\"},{internalType:\"string\",name:\"tmP2PListenAddress\",type:\"string\"},{internalType:\"string\",name:\"p2pListenAddress\",type:\"string\"}],payable:!1,stateMutability:\"view\",type:\"function\"}],o=r(4),a=r.n(o),s=r(5),u=r.n(s),c=r(6),f=r.n(c),h=r(0),l=r.n(h),d=r(1),p=r.n(d),m=r(2),v=r.n(m),g=r(3),y=function(){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.network,a=void 0===o?n.MAINNET:o,s=r.proxyAddress,c=void 0===s?\"0x638646503746d5456209e33a2ff5e3226d698bea\":s;u()(this,e),l()(this,\"_currentEpoch\",\"19\"),l()(this,\"_torusNodeEndpoints\",[\"https://torus-19.torusnode.com/jrpc\",\"https://torus-node.ens.domains/jrpc\",\"https://torus-node.matic.network/jrpc\",\"https://torus.zilliqa.network/jrpc\",\"https://torus-mainnet.cosmos.network/jrpc\",\"https://torus2.etherscan.com/jrpc\",\"https://torus-node-v2.skalelabs.com/jrpc\",\"https://torus-node.binancex.dev/jrpc\",\"https://torusnode.ont.io/jrpc\"]),l()(this,\"_torusNodePub\",[{X:\"bbe83c64177c3775550e6ba6ac2bc059f6847d644c9e4894e42c60d7974d8c2b\",Y:\"82b49a7caf70def38cdad2740af45c1e4f969650105c5019a29bb18b21a9acb5\"},{X:\"c208cac4ef9a47d386097a9c915b28e9cb89213abee8d26a17198ee261201b0d\",Y:\"c7db2fe4631109f40833de9dc78d07e35706549ee48fa557b33e4e75e1047873\"},{X:\"ca1766bb426d4ca5582818a0c5439d560ea64f5baa060793ab29dd3d0ceacfe\",Y:\"d46c1d08c40e1306e1bca328c2287b8268166b11a1ba4b8442ea2ad0c5e32152\"},{X:\"c3934dd2f6f4b3d2e1e398cc501e143c1e1a381b52feb6d1525af34d16253768\",Y:\"71f5141a5035799099f5ea3e241e66946bc55dc857ac3bd7d6fcdb8dcd3eeeef\"},{X:\"22e66f1929631d00bf026227581597f085fd94fd952fc0dca9f0833398b5c064\",Y:\"6088b3912e10a1e9d50355a609c10db7d188f16a2e2fd7357e51bf4f6a74f0a1\"},{X:\"9dc9fa410f3ce9eb70df70cdea00a49f2c4cc7a31c08c0dab5f863ed35ff5139\",Y:\"627a291cb87a75c61da3f65d6818e1e05e360217179817ed27e8c73bca7ec122\"},{X:\"118b9fc07e97b096d899b9f6658463ce6a8caa64038e37fc969df4e6023dd8c6\",Y:\"baf9fa4e51770f4796ea165dd03a769b8606681a38954a0a92c4cbffd6609ce9\"},{X:\"8a6d8b925da15a273dec3d8f8395ec35cd6878f274b2b180e4e106999db64043\",Y:\"96f67f870c157743da0b1eb84d89bf30500d74dc84c11f501ee1cb013acc8c46\"},{X:\"39cecb62e863729f572f7dfc46c24867981bf04bb405fed0df39e33984bfade5\",Y:\"61c2364434012e68a2be2e9952805037e52629d7762fafc8e10e9fb5bad8f790\"}]),l()(this,\"_torusIndexes\",[1,2,3,4,5,6,7,8,9]),l()(this,\"_network\",n.MAINNET),l()(this,\"nodeListAddress\",void 0),l()(this,\"updated\",void 0),l()(this,\"nodeListContract\",void 0);try{var f=new URL(a);t=f.href}catch(e){t=\"https://\".concat(a,\".infura.io/v3/\").concat(\"b8cdb0e4cff24599a286bf8e87ff1c96\")}v.a.setProvider(t),this.nodeListContract=new v.a(i,c),this.nodeListAddress=c,this.updated=!1,this._network=a}var t;return f()(e,[{key:\"_nodeDetails\",get:function(){return{currentEpoch:this._currentEpoch,nodeListAddress:this.nodeListAddress,torusNodeEndpoints:this._torusNodeEndpoints,torusNodePub:this._torusNodePub,torusIndexes:this._torusIndexes,updated:this.updated}}},{key:\"getCurrentEpoch\",value:function(){return this.nodeListContract.methods.currentEpoch().call()}},{key:\"getEpochInfo\",value:function(e){return this.nodeListContract.methods.getEpochInfo(e).call()}},{key:\"getNodeEndpoint\",value:function(e){return this.nodeListContract.methods.getNodeDetails(e).call()}},{key:\"getNodeDetails\",value:(t=a()(p.a.mark((function e(){var t,r,i,o,a,s,u,c,f,h,l,d,m=this,v=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=v.length>0&&void 0!==v[0]&&v[0],r=v.length>1&&void 0!==v[1]&&v[1],e.prev=2,!t||this._network!==n.MAINNET){e.next=5;break}return e.abrupt(\"return\",this._nodeDetails);case 5:if(!this.updated){e.next=7;break}return e.abrupt(\"return\",this._nodeDetails);case 7:return e.next=9,this.getCurrentEpoch();case 9:if(i=e.sent,!r||this._network!==n.MAINNET||i!==this._currentEpoch){e.next=12;break}return e.abrupt(\"return\",this._nodeDetails);case 12:return this._currentEpoch=i,e.next=15,this.getEpochInfo(i);case 15:return o=e.sent,a=o.nodeList.map((function(e,t){return t+1})),this._torusIndexes=a,s=o.nodeList.map((function(e){return m.getNodeEndpoint(e)})),e.next=21,Promise.all(s);case 21:for(u=e.sent,c=[],f=[],h=0;h<u.length;h+=1)l=u[h],d=\"https://\".concat(l.declaredIp.split(\":\")[0],\"/jrpc\"),c.push(d),f.push({X:Object(g.toHex)(l.pubKx).replace(\"0x\",\"\"),Y:Object(g.toHex)(l.pubKy).replace(\"0x\",\"\")});return this._torusNodeEndpoints=c,this._torusNodePub=f,this.updated=!0,e.abrupt(\"return\",this._nodeDetails);case 31:return e.prev=31,e.t0=e.catch(2),e.abrupt(\"return\",this._nodeDetails);case 34:case\"end\":return e.stop()}}),e,this,[[2,31]])}))),function(){return t.apply(this,arguments)})}]),e}()}]).default},q1ed:function(e,t){var r=\"abcdefghijklmnopqrstuvwxyz\",n=\"ABCDEFGHIJKLMNOPQRSTUVWXYZ\",i=\"0123456789\",o=\"~!@#$%^&()_+-={}[];',\";e.exports=function(e,t){e||(e=30),t||(t=\"aA0\");var a=\"\";t.split(\"\").forEach(e=>{isNaN(parseInt(e))?/[a-z]/.test(e)?a+=r:/[A-Z]/.test(e)?a+=n:a+=o:a+=i});for(var s=\"\",u=0;u<e;u++)s+=a.charAt(Math.floor(Math.random()*a.length));return s}},sXyB:function(e,t,r){var n=r(\"SksO\"),i=r(\"b48C\");function o(t,r,a){return i()?(e.exports=o=Reflect.construct,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=o=function(e,t,r){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return r&&n(o,r.prototype),o},e.exports.default=e.exports,e.exports.__esModule=!0),o.apply(null,arguments)}e.exports=o,e.exports.default=e.exports,e.exports.__esModule=!0},wTVA:function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},wkBT:function(e,t){e.exports=function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")},e.exports.default=e.exports,e.exports.__esModule=!0},xfeJ:function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf(\"[native code]\")},e.exports.default=e.exports,e.exports.__esModule=!0},\"yDc/\":function(e,t){e.exports=!1}}]);","extractedComments":[]}