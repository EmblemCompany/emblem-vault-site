{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[22],{FpzS:function(e,t,r){\"use strict\";var n=r(\"pVnL\"),a=r.n(n),o=r(\"8OQS\"),i=r.n(o),s=r(\"qKvR\"),l=r(\"q1tI\"),c=r(\"we/t\"),u=r(\"+Cyc\"),d=r(\"lSNA\"),p=r.n(d),b=r(\"CjxU\"),f=r(\"mf32\"),h=r(\"za5s\");function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(r,!0).forEach((function(t){p()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v={_readOnly:{bg:\"transparent\",boxShadow:\"none !important\",userSelect:\"all\"}},g={bg:\"transparent\",px:void 0,height:void 0},j=function(e){switch(e.variant){case\"flushed\":return function(e){var t=e.theme,r=e.focusBorderColor,n=e.errorBorderColor,a=Object(h.h)(t.colors,r,r),o=Object(h.h)(t.colors,n,n);return O({},v,{borderBottom:\"2px\",borderColor:\"inherit\",rounded:0,px:void 0,bg:\"transparent\",_focus:{zIndex:1,borderColor:a},_invalid:{borderColor:o}})}(e);case\"unstyled\":return g;case\"filled\":return function(e){var t=e.theme,r=e.focusBorderColor,n=e.errorBorderColor,a=e.colorMode,o=Object(h.h)(t.colors,r,r),i=Object(h.h)(t.colors,n,n);return O({},v,{border:\"2px\",borderColor:\"transparent\",bg:{light:\"gray.100\",dark:\"whiteAlpha.50\"}[a],_hover:{bg:{light:\"gray.200\",dark:\"whiteAlpha.100\"}[a]},_disabled:{opacity:\"0.4\",cursor:\"not-allowed\"},_focus:{zIndex:1,bg:\"transparent\",borderColor:o},_invalid:{borderColor:i}})}(e);case\"outline\":return function(e){var t=e.theme,r=e.colorMode,n=e.focusBorderColor,a=e.errorBorderColor,o=Object(h.h)(t.colors,n,n),i=Object(h.h)(t.colors,a,a);return O({},v,{border:\"1px\",borderColor:{light:\"inherit\",dark:\"whiteAlpha.50\"}[r],bg:{light:\"white\",dark:\"whiteAlpha.100\"}[r],_hover:{borderColor:{light:\"gray.300\",dark:\"whiteAlpha.200\"}[r]},_disabled:{opacity:\"0.4\",cursor:\"not-allowed\"},_focus:{zIndex:1,borderColor:o,boxShadow:\"0 0 0 1px \"+o},_invalid:{borderColor:i,boxShadow:\"0 0 0 1px \"+i}})}(e);default:return{}}},w={display:\"flex\",alignItems:\"center\",position:\"relative\",transition:\"all 0.2s\",outline:\"none\",appearance:\"none\"},y={lg:{fontSize:\"lg\",px:4,height:12,rounded:\"md\"},md:{fontSize:\"md\",px:4,height:10,rounded:\"md\"},sm:{fontSize:\"sm\",px:3,height:8,rounded:\"sm\"}},C=function(e){var t=O({},e,{theme:Object(b.b)(),colorMode:Object(f.c)().colorMode});return O({width:e.isFullWidth?\"100%\":void 0},w,{},function(e){return y[e.size]}(t),{},j(t))},x=Object(l.forwardRef)((function(e,t){e.size,e.variant;var r=e.as,n=e[\"aria-label\"],o=e[\"aria-describedby\"],l=e.isReadOnly,d=(e.isFullWidth,e.isDisabled,e.isInvalid,e.isRequired,e.focusBorderColor,e.errorBorderColor,i()(e,[\"size\",\"variant\",\"as\",\"aria-label\",\"aria-describedby\",\"isReadOnly\",\"isFullWidth\",\"isDisabled\",\"isInvalid\",\"isRequired\",\"focusBorderColor\",\"errorBorderColor\"])),p=C(e),b=Object(c.b)(e);return Object(s.d)(u.a,a()({ref:t,as:r,readOnly:b.isReadOnly,\"aria-readonly\":l,disabled:b.isDisabled,\"aria-label\":n,\"aria-invalid\":b.isInvalid,required:b.isRequired,\"aria-required\":b.isRequired,\"aria-disabled\":b.isDisabled,\"aria-describedby\":o},p,d))}));x.displayName=\"Input\",x.defaultProps={size:\"md\",as:\"input\",variant:\"outline\",isFullWidth:!0,focusBorderColor:\"blue.500\",errorBorderColor:\"red.500\"};t.a=x},\"pZB+\":function(e,t,r){\"use strict\";r.r(t),r.d(t,\"default\",(function(){return q}));var n=r(\"q1tI\"),a=r.n(n),o=r(\"wx14\"),i=r(\"o0o1\"),s=r.n(i),l=r(\"HaE+\"),c=r(\"XZ7F\"),u=r(\"Weur\"),d=r(\"BMxC\"),p=r(\"Yn+B\"),b=r(\"bQFp\"),f=r(\"sK1y\"),h=r(\"FpzS\"),m=r(\"IP4Q\"),O=r(\"eJLp\"),v=r(\"Z6YE\"),g=r(\"nOHt\"),j=r(\"Y1ui\"),w=r.n(j),y=r(\"a6RD\"),C=r.n(y),x=r(\"iBPG\"),S=r(\"zIq6\"),k=r(\"N39q\"),I=r(\"21eR\"),_=a.a.createElement,B=C()((function(){return Promise.all([r.e(9),r.e(11),r.e(27)]).then(r.bind(null,\"X/Jl\"))}),{loadableGenerated:{webpack:function(){return[\"X/Jl\"]},modules:[\"./AddrModal\"]}}),E=C()((function(){return Promise.all([r.e(9),r.e(11),r.e(30)]).then(r.bind(null,\"0bCS\"))}),{loadableGenerated:{webpack:function(){return[\"0bCS\"]},modules:[\"./KeysModal\"]}});function R(){var e=Object(v.b)(),t=e.account,r=e.chainId,i=e.library,j=Object(g.useRouter)(),y=j.query,C=(j.pathname,j.replace,Object(n.useState)(y.id)),R=C[0],P=(C[1],Object(n.useState)(\"\")),q=P[0],z=P[1],A=Object(n.useState)(\"\"),T=A[0],F=A[1],D=Object(n.useState)(\"\"),H=D[0],N=D[1],W=Object(n.useState)([]),M=W[0],K=W[1],G=Object(n.useState)([]),J=G[0],Y=G[1],X=Object(n.useState)(!1),Q=X[0],V=X[1],Z=Object(n.useState)(null),L=Z[0],U=Z[1],$=Object(n.useState)(null),ee=$[0],te=$[1],re=Object(n.useState)(\"\"),ne=re[0],ae=re[1],oe=Object(n.useState)(\"\"),ie=oe[0],se=oe[1],le=Object(n.useState)({loaded:!1}),ce=le[0],ue=le[1],de=Object(n.useState)(!1),pe=de[0],be=de[1],fe=Object(n.useState)(!1),he=fe[0],me=fe[1],Oe=Object(n.useState)(!1),ve=Oe[0],ge=Oe[1],je=Object(n.useState)(\"claimed\"),we=je[0],ye=je[1],Ce=Object(n.useState)(null),xe=Ce[0],Se=Ce[1],ke=Object(n.useState)(\"\"),Ie=ke[0],_e=ke[1],Be=Object(n.useState)(\"\"),Ee=Be[0],Re=Be[1],Pe=Object(n.useState)(\"\"),qe=Pe[0],ze=Pe[1],Ae=(Object(I.b)(k.p.vaultHandler[r],k.p.vaultHandlerAbi,!0),Object(I.b)(k.p.emblemVault[r],k.p.emblemAbi,!0)),Te=Object(c.a)(),Fe=Te.isOpen,De=Te.onOpen,He=Te.onClose,Ne=Object(c.a)(),We=Ne.isOpen,Me=Ne.onOpen,Ke=Ne.onClose,Ge=function(){var e=Object(l.a)(s.a.mark((function e(){var t,r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(k.h+\"/meta/\"+R,{method:\"GET\",headers:{\"Content-Type\":\"application/json\",service:\"evmetadata\"}});case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,console.log(r),z(r.name),N(r.image),F(r.description),K(r.values),F(r.description),Y(r.addresses),U(\"mainnet\"==r.network?1:4),ye(r.status),\"claimed\"===we&&Se(r.claimedBy),ue({loaded:!0}),n=r.addresses.filter((function(e){return e.address.includes(\"private:\")})).length>0,console.log(\"pvt\",n),V(n);case 20:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Je=function(){var e=Object(l.a)(s.a.mark((function e(t,n,a){var o,i,l,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new Headers).append(\"chainId\",r.toString()),o.append(\"service\",\"evmetadata\"),o.append(\"Content-Type\",\"application/json\"),i=JSON.stringify({signature:t}),e.next=7,fetch(k.h+\"/verify/\"+n,{method:\"POST\",headers:o,body:i,redirect:\"follow\"});case 7:return l=e.sent,e.next=10,l.json();case 10:return c=e.sent,e.abrupt(\"return\",a(c));case 12:case\"end\":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),Ye=function(){var e=Object(l.a)(s.a.mark((function e(){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.ownerOf(R);case 2:r=e.sent,me(r===t),he&&be(!0),console.log(\"status\",we,\"claimedBy\",xe);case 6:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ae.setApprovalForAll(k.p.vaultHandler[r],!0).then((function(e){var t=e.hash;te(t)}));case 1:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.getSigner(t).signMessage(\"Claim: \"+R).then((function(e){Je(e,R,(function(e){_e(e.decrypted.phrase),Re(\"BTC KEY\"),ze(\"ETH KEY\"),Me(),console.log(e.decrypted)}))}));case 1:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ve=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ae.transferFrom(t,k.c,R).then((function(e){var t=e.hash;ge(!0),setTimeout((function(){te(t),Qe(),Me()}),100)}));case 1:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){Ge()}),[]),Object(n.useEffect)((function(){console.log(\"Account chainid = \"+r+\" and vaultchainid = \"+L),t&&r&&L&&r==L&&Ye()})),_(a.a.Fragment,null,_(B,{isOpen:Fe,onClose:He,addrCoin:ne,addrAddr:ie}),_(E,{isOpen:We,onClose:Ke,mnemonic:Ie,privKeyBTC:Ee,privKeyETH:qe}),_(w.a,{loaded:ce.loaded},_(u.a,{width:\"full\",align:\"center\",justifyContent:\"center\"},_(d.a,{maxW:\"sm\",borderWidth:\"1px\",borderColor:L!=r?\"orange.500\":null,rounded:\"lg\",overflow:\"hidden\",alignItems:\"center\"},L!=r?_(d.a,{mt:\"1\",fontWeight:\"semibold\",as:\"h3\",lineHeight:\"tight\",p:2,textAlign:\"center\",textTransform:\"uppercase\",alignItems:\"center\",color:\"orange.500\"},\"Your vault is on a different network than you are.\"):null,_(d.a,{mt:\"1\",fontWeight:\"semibold\",as:\"h3\",lineHeight:\"tight\",p:2,textAlign:\"center\",textTransform:\"uppercase\",alignItems:\"center\"},q),_(p.a,{align:\"center\"},_(b.a,{src:Object(x.j)(H)?H:\"https://circuitsofvalue.com/public/coval-logo.png\",width:\"250px\"})),_(p.a,{align:\"center\"},_(d.a,{mt:\"1\",ml:\"4\",lineHeight:\"tight\"},_(f.a,{as:\"h4\",ml:\"4\",mr:\"4\"},T.split(\"\\n\\n\\n\\n\")[0].trim()))),_(d.a,{p:\"6\"},_(d.a,{d:\"flex\",alignItems:\"baseline\"},_(d.a,{color:\"gray.500\",letterSpacing:\"wide\",fontSize:\"sm\",ml:\"2\"},_(f.a,{as:\"h4\",fontWeight:\"semibold\"},\"Current Contents:\"),Q?_(a.a.Fragment,null,_(f.a,null,\"Contents hidden. Enter password to unlock.\"),_(h.a,{type:\"password\",id:\"vault-password\",onChange:function(e){return t=e.target.value,void console.log(t);var t},\"aria-describedby\":\"password-helper-text\"})):M.length?M.map((function(e){return _(f.a,{key:e.name,isTruncated:!0},e.name,\": \",e.balance)})):_(f.a,null,\"Nothing in here! Fill 'er up!\"))),Q?null:_(d.a,{d:\"flex\",alignItems:\"baseline\",justifyContent:\"space-between\",mt:\"4\"},_(p.a,{direction:\"row\",align:\"center\",spacing:\"1rem\",flexWrap:\"wrap\",shouldWrapChildren:!0},_(m.a,{spacing:4},J.map((function(e){return _(O.a,{key:e.address,onClick:function(){ae(e.coin),se(e.address),De()}},\"Put \",\"ETH\"==e.coin?e.coin+\"/ERC20\":e.coin,\" In\")}))))),_(d.a,{d:\"flex\",alignItems:\"baseline\",justifyContent:\"space-between\",mt:\"4\"},\"claimed\"===we&&xe===t?_(O.a,{width:\"100%\",onClick:Qe},\"Get Keys\"):_(O.a,Object(o.a)({width:\"100%\",as:\"a\"},{href:\"https://\"+(4==L?\"rinkeby.\":\"\")+\"opensea.io/assets/\"+k.p.emblemVault[L]+\"/\"+R,target:\"_blank\",rel:\"noopener noreferrer\"}),he?\"Sell/Gift/Send\":\"Make an Offer\")),_(d.a,{d:\"flex\",alignItems:\"baseline\",justifyContent:\"space-between\",mt:\"4\"},he?_(O.a,{width:\"100%\",onClick:function(){pe?Ve():Xe()}},pe?\"Claim\":\"Approve\"):\"\")))),ee?_(S.a,{hash:ee,onComplete:function(){ve&&(alert(\"Claim tx complete. Now ask server for keys\"),te(null))}}):null))}var P=a.a.createElement;function q(){return P(R,null)}},\"we/t\":function(e,t,r){\"use strict\";r.d(t,\"b\",(function(){return u}));var n=r(\"pVnL\"),a=r.n(n),o=r(\"8OQS\"),i=r.n(o),s=r(\"qKvR\"),l=r(\"q1tI\"),c=r(\"BMxC\"),u=function(e){var t=p();return t?Object.keys(t).reduce((function(r,n){return r[n]=e[n],t&&null==e[n]&&(r[n]=t[n]),r}),{}):e},d=Object(l.createContext)(),p=function(){return Object(l.useContext)(d)},b=Object(l.forwardRef)((function(e,t){var r=e.isInvalid,n=e.isRequired,o=e.isDisabled,l=e.isReadOnly,u=i()(e,[\"isInvalid\",\"isRequired\",\"isDisabled\",\"isReadOnly\"]),p={isRequired:n,isDisabled:o,isInvalid:r,isReadOnly:l};return Object(s.d)(d.Provider,{value:p},Object(s.d)(c.a,a()({role:\"group\",ref:t},u)))}));b.displayName=\"FormControl\",t.a=b},zjfc:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/vault\",function(){return r(\"pZB+\")}])}},[[\"zjfc\",2,1,6,8,0,3,4,5,7,10,13]]]);","extractedComments":[]}