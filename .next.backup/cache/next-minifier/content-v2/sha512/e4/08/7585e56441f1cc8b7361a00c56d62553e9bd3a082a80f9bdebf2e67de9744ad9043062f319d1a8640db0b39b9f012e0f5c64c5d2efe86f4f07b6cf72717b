{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[28],{\"pZB+\":function(e,t,n){\"use strict\";n.r(t),n.d(t,\"default\",(function(){return W}));var a=n(\"q1tI\"),r=n.n(a),c=n(\"wx14\"),i=n(\"o0o1\"),s=n.n(i),o=n(\"HaE+\"),u=n(\"XZ7F\"),l=n(\"Weur\"),d=n(\"BMxC\"),p=n(\"Yn+B\"),f=n(\"bQFp\"),m=n(\"sK1y\"),b=n(\"FpzS\"),h=n(\"pboS\"),g=n(\"IP4Q\"),v=n(\"eJLp\"),w=n(\"LqLE\"),O=n(\"8Kt/\"),j=n.n(O),y=n(\"Z6YE\"),S=n(\"nOHt\"),x=n(\"Ute3\"),E=n(\"Y1ui\"),C=n.n(E),k=n(\"a6RD\"),T=n.n(k),_=n(\"iBPG\"),N=n(\"zIq6\"),I=n(\"N39q\"),A=n(\"21eR\"),H=n(\"c+OE\"),F=n.n(H),G=n(\"NFKh\"),J=n.n(G),R=r.a.createElement,B=T()((function(){return Promise.all([n.e(5),n.e(11),n.e(14)]).then(n.bind(null,\"X/Jl\"))}),{loadableGenerated:{webpack:function(){return[\"X/Jl\"]},modules:[\"./AddrModal\"]}}),K=T()((function(){return Promise.all([n.e(5),n.e(11),n.e(15)]).then(n.bind(null,\"0bCS\"))}),{loadableGenerated:{webpack:function(){return[\"0bCS\"]},modules:[\"./KeysModal\"]}});function M(){var e=Object(y.b)(),t=e.account,n=e.chainId,i=e.library,O=Object(S.useRouter)().query,E=Object(a.useState)(O.id),k=E[0],T=(E[1],Object(a.useState)(O.experimental)),H=T[0],G=(T[1],Object(a.useState)(\"\")),M=G[0],P=G[1],W=Object(a.useState)(\"\"),q=W[0],z=W[1],V=Object(a.useState)(\"\"),L=V[0],U=V[1],X=Object(a.useState)([]),D=X[0],Y=X[1],Z=Object(a.useState)([]),Q=Z[0],$=Z[1],ee=Object(a.useState)(!1),te=ee[0],ne=ee[1],ae=Object(a.useState)(0),re=ae[0],ce=ae[1],ie=Object(a.useState)(null),se=ie[0],oe=ie[1],ue=Object(a.useState)(null),le=ue[0],de=ue[1],pe=Object(a.useState)(\"\"),fe=pe[0],me=pe[1],be=Object(a.useState)(\"\"),he=be[0],ge=be[1],ve=Object(a.useState)({loaded:!1}),we=ve[0],Oe=ve[1],je=Object(a.useState)(!1),ye=je[0],Se=je[1],xe=Object(a.useState)(!1),Ee=xe[0],Ce=xe[1],ke=Object(a.useState)(\"claimed\"),Te=ke[0],_e=ke[1],Ne=Object(a.useState)(null),Ie=Ne[0],Ae=Ne[1],He=Object(a.useState)(\"\"),Fe=He[0],Ge=He[1],Je=Object(a.useState)(\"\"),Re=Je[0],Be=Je[1],Ke=Object(a.useState)(\"\"),Me=Ke[0],Pe=Ke[1],We=Object(a.useState)(!1),qe=We[0],ze=We[1],Ve=Object(a.useState)(\"\"),Le=Ve[0],Ue=Ve[1],Xe=Object(a.useState)(!1),De=Xe[0],Ye=Xe[1],Ze=Object(a.useState)(\"\"),Qe=Ze[0],$e=Ze[1],et=Object(a.useState)(!1),tt=et[0],nt=et[1],at=Object(a.useState)(!1),rt=(at[0],at[1],Object(A.b)(I.p.emblemVault[n],I.p.emblemAbi,!0)),ct=Object(u.a)(),it=ct.isOpen,st=ct.onOpen,ot=ct.onClose,ut=Object(u.a)(),lt=ut.isOpen,dt=ut.onOpen,pt=ut.onClose,ft=function(){var e=Object(o.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bt(),e.next=3,fetch(I.h+\"/meta/\"+k,{method:\"GET\",headers:{\"Content-Type\":\"application/json\",service:\"evmetadata\"}});case 3:return t=e.sent,e.next=6,t.json();case 6:(n=e.sent).name?(mt(n),wt(n),ze(!1),nt(!1)):(Oe({loaded:!0}),nt(!0));case 8:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),mt=function(e){P(e.name),U(e.image),z(e.description),ce(e.totalValue||0),Y(D.concat(e.values)),z(e.description),$(e.addresses),oe(\"mainnet\"==e.network?1:\"rinkeby\"==e.network?4:80001),_e(e.status),\"claimed\"===Te&&Ae(e.claimedBy),Oe({loaded:!0});var t=e.addresses.filter((function(e){return e.address.includes(\"private:\")})).length>0;ne(t),setTimeout((function(){!t&&vt(e.values,e.addresses.filter((function(e){return\"ETH\"===e.coin}))[0].address,(function(e){Y(e)}))}),5)},bt=function(){var e=JSON.parse(localStorage.getItem(t+\"_\"+n+\"_\"+k+\"_vault\"));e&&(Oe({loaded:!0}),mt(e),ze(!0))},ht=function(){var e=Object(o.a)(s.a.mark((function e(t,n){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(I.h+\"/eth/balance/\"+t,{method:\"GET\",headers:{\"Content-Type\":\"application/json\",service:\"evmetadata\"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,ce(Number(re)+Number(r.totalValue)),e.abrupt(\"return\",n(r.values));case 8:case\"end\":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),gt=function(){var e=Object(o.a)(s.a.mark((function e(t,n,a){var r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(I.h+\"/btc/balance/\"+n,{method:\"GET\",headers:{\"Content-Type\":\"application/json\",service:\"evmetadata\"}});case 2:return r=e.sent,e.next=5,r.json();case 5:return c=e.sent,e.abrupt(\"return\",a(t.concat(c.values)));case 7:case\"end\":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),vt=function(){var e=Object(o.a)(s.a.mark((function e(t,n,a){var r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(I.h+\"/eth/nft/\"+n,{method:\"GET\",headers:{\"Content-Type\":\"application/json\",service:\"evmetadata\"}});case 2:return r=e.sent,e.next=5,r.json();case 5:if(!((c=e.sent).length>0)){e.next=10;break}return e.abrupt(\"return\",a(t.concat(c)));case 10:return e.abrupt(\"return\",a(t));case 11:case\"end\":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),wt=function(e){localStorage.setItem(t+\"_\"+n+\"_\"+k+\"_vault\",JSON.stringify(e))},Ot=function(){var e=Object(o.a)(s.a.mark((function e(t,a,r){var c,i,o,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=new Headers).append(\"chainId\",n.toString()),c.append(\"service\",\"evmetadata\"),c.append(\"Content-Type\",\"application/json\"),i=JSON.stringify({signature:t}),e.next=7,fetch(I.h+\"/verify/\"+a,{method:\"POST\",headers:c,body:i,redirect:\"follow\"});case 7:return o=e.sent,e.next=10,o.json();case 10:return u=e.sent,e.abrupt(\"return\",r(u));case 12:case\"end\":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),jt=function(){var e=Object(o.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt.ownerOf(k);case 2:n=e.sent,Se(n===t);case 4:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),yt=function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.getSigner(t).signMessage(\"Claim: \"+k).then((function(e){Ot(e,k,(function(e){Ge(e.decrypted.phrase),Be(e.decrypted.keys.filter((function(e){return\"btc\"===e.coin}))[0].privkey),Pe(e.decrypted.keys.filter((function(e){return\"eth\"===e.coin}))[0].privkey),dt()}))}));case 1:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),St=function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:rt.transferFrom(t,I.c,k).then((function(e){var t=e.hash;Ce(!0),setTimeout((function(){de(t)}),100)}));case 1:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xt=function(){var e=Object(o.a)(s.a.mark((function e(){var t,n,a,r,c,i,o,u,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=function(e){for(var s=0;s<r-i;s++){var l=Math.floor(t.length*Math.random()),d=t.charAt(l);o+=d}c==a-1&&i++,c==a&&(u+=n.charAt(i-1),c=0),Ue(u+o),o=\"\"},!De){e.next=3;break}return e.abrupt(\"return\");case 3:Ye(!0),t=\"abcdefghijklmnopqrstuvwxyz\",5,r=(n=\"Decrypting\").length,c=0,i=0,o=\"\",u=\"\",function e(t){setTimeout((function(){--t?e(t):Ye(!1),l(t),c+=1}),5)}(r*(a=8)+1);case 14:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Et(e){return e.split(\"\\n\\n\\n\\n\")[0].trim()}function Ct(e){Qe&&(e=Qe),xt();var t=Q[0].address.replace(\"private:\",\"\");try{var n=J.a.AES.decrypt(t,e);JSON.parse(n.toString(J.a.enc.Utf8)),ne(!1),$e(e),$(function(e){return Q.forEach((function(t){var n=t.address.replace(\"private:\",\"\");t.address=function(e,t){var n=J.a.AES.decrypt(e,t);return JSON.parse(n.toString(J.a.enc.Utf8))}(n,e)})),Q}(e)),ht(Q.filter((function(e){return\"ETH\"===e.coin}))[0].address,(function(e){gt(e,Q.filter((function(e){return\"BTC\"===e.coin}))[0].address,(function(e){vt(e,Q.filter((function(e){return\"ETH\"===e.coin}))[0].address,(function(e){Y(e.concat(D))}))}))}))}catch(a){}}return Object(a.useEffect)((function(){ft()}),[]),Object(a.useEffect)((function(){t&&n&&se&&n==se&&jt()})),R(r.a.Fragment,null,R(j.a,null,R(\"meta\",{name:\"twitter:card\",content:\"summary_large_image\"}),R(\"meta\",{name:\"twitter:site\",content:\"Emblem.Finance\"}),R(\"meta\",{name:\"twitter:title\",content:M}),R(\"meta\",{name:\"twitter:description\",content:Et(q)}),R(\"meta\",{name:\"twitter:image\",content:L})),R(B,{isOpen:it,onClose:ot,addrCoin:fe,addrAddr:he}),R(K,{isOpen:lt,onClose:pt,mnemonic:Fe,privKeyBTC:Re,privKeyETH:Me}),R(C.a,{loaded:we.loaded},qe?R(x.a,null):\"\",tt?R(p.a,{align:\"center\"},R(f.a,{width:\"md\",src:\"https://starwarsblog.starwars.com/wp-content/uploads/2017/06/25-star-wars-quotes-obi-wan-kenobi-identification-tall.jpg\"}),R(m.a,null,\"THESE ARE NOT THE VAULTS YOU ARE LOOKING FOR\",\" \",R(h.a,{color:\"#638cd8\",href:\"../create\"},\"CREATE ONE HERE!\"))):R(F.a,{className:\"Tilt\",options:{max:H?19:0,scale:1}},R(l.a,{width:\"full\",align:\"center\",justifyContent:\"center\"},R(d.a,{maxW:\"sm\",borderWidth:\"1px\",borderColor:se!=n?\"orange.500\":\"claimed\"==Te?\"green.500\":null,rounded:\"lg\",overflow:\"hidden\",alignItems:\"center\",minW:390},se!=n?R(d.a,{mt:\"1\",fontWeight:\"semibold\",as:\"h3\",lineHeight:\"tight\",p:2,textAlign:\"center\",textTransform:\"uppercase\",alignItems:\"center\",color:\"orange.500\"},\"BEWARE: Vault is on a different network than you are.\"):null,R(d.a,{mt:\"1\",fontWeight:\"semibold\",as:\"h3\",lineHeight:\"tight\",p:2,textAlign:\"center\",textTransform:\"uppercase\",alignItems:\"center\"},M,te?null:\": ~$\"+re),R(p.a,{align:\"center\"},R(f.a,{src:Object(_.k)(L)?L:\"https://circuitsofvalue.com/public/coval-logo.png\",width:\"250px\"})),R(p.a,{align:\"center\"},R(d.a,{mt:\"2\",ml:\"4\",lineHeight:\"tight\"},R(m.a,{mt:2,as:\"h4\",ml:\"4\",mr:\"4\",fontSize:\"xs\",fontStyle:\"italic\"},Et(q)))),R(d.a,{p:\"6\"},R(d.a,{d:\"flex\",alignItems:\"baseline\"},R(d.a,{color:\"gray.500\",letterSpacing:\"wide\",fontSize:\"sm\",ml:\"2\"},R(m.a,{as:\"h4\",fontWeight:\"semibold\"},\"Current Contents:\"),te?R(r.a.Fragment,null,R(m.a,{pb:2,color:Le?\"green.500\":null},Le||\"Contents hidden. Enter password to unlock.\"),R(b.a,{type:\"password\",id:\"vault-password\",onChange:function(e){return Ct(e.target.value)},\"aria-describedby\":\"password-helper-text\"})):D.length?D.map((function(e){return R(m.a,{key:e.name,isTruncated:!0},R(f.a,{width:10,src:e.image}),e.name,\" :\",\" \",e.balance?e.balance:\"nft\"==e.type?R(h.a,{href:e.external_url,isExternal:!0},\"View NFT\"):null)})):R(m.a,null,\"Nothing in here! Fill 'er up!\"))),te?null:R(d.a,{d:\"flex\",alignItems:\"baseline\",justifyContent:\"space-between\",mt:\"4\"},R(g.a,{justifyContent:\"space-between\",spacing:6},Q.map((function(e){return R(v.a,{key:e.address,onClick:function(){me(e.coin),ge(e.address),st()}},\"Put \",\"ETH\"==e.coin?e.coin+\"/ERC20\":e.coin,\" In\")})))),\"claimed\"!==Te?R(d.a,{d:\"flex\",alignItems:\"baseline\",justifyContent:\"space-between\",mt:\"4\"},R(v.a,Object(c.a)({width:\"100%\",as:\"a\"},{href:\"https://\"+(4==se?\"rinkeby.\":\"\")+\"opensea.io/assets/\"+I.p.emblemVault[se]+\"/\"+k,target:\"_blank\",rel:\"noopener noreferrer\"}),ye?\"Sell/Gift/Send\":\"Make an Offer\")):null,\"claimed\"!==Te&&t&&se===n&&ye?R(d.a,{d:\"flex\",alignItems:\"baseline\",justifyContent:\"space-between\",mt:\"4\"},R(v.a,{width:\"100%\",onClick:function(){St()},isDisabled:Ee},Ee?\"Claiming ...\":\"Claim\")):\"claimed\"===Te&&Ie===t&&se===n?R(d.a,{d:\"flex\",alignItems:\"baseline\",justifyContent:\"space-between\",mt:\"4\"},R(v.a,{width:\"100%\",onClick:yt},\"Get Keys\")):null),R(p.a,{direction:\"column\",align:\"center\"},\"claimed\"==Te?R(m.a,{color:\"green.500\"},\"CLAIMED\"):null),le?R(w.a,{status:\"info\"},R(w.b,null),\"Claiming your vault ...\"):null))),le?R(N.a,{hash:le,onComplete:function(){Ee&&(de(null),_e(\"claimed\"),Ce(!1),Ae(t),yt())}}):null))}var P=r.a.createElement;function W(){return P(M,null)}},zjfc:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/vault\",function(){return n(\"pZB+\")}])}},[[\"zjfc\",2,1,6,7,0,3,4,8,9,10,12,13]]]);","extractedComments":[]}