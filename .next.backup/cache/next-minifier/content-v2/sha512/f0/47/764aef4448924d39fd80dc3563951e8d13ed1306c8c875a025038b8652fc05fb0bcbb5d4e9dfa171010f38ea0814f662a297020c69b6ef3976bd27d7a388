{"code":"(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[50,54,55],{ATmR:function(e,t,n){\"use strict\";var r=n(\"q1tI\"),a=n(\"i8i4\"),o=n(\"D7Da\");var c=Object(r.forwardRef)((function(e,t){var n=e.children,c=e.container,u=e.isDisabled,i=void 0!==u&&u,s=e.onRendered,l=Object(r.useState)(null),f=l[0],p=l[1],d=Object(o.g)(n.ref,t);return Object(o.f)((function(){i||p(function(e){return e=\"function\"===typeof e?e():e,Object(a.findDOMNode)(e)}(c)||document.body)}),[c,i]),Object(o.f)((function(){if(f&&!i)return Object(o.e)(t,f),function(){Object(o.e)(t,null)}}),[t,f,i]),Object(o.f)((function(){s&&(f||i)&&s()}),[s,f,i]),i?(r.Children.only(n),Object(r.cloneElement)(n,{ref:d})):f?Object(a.createPortal)(n,f):f}));c.displayName=\"Portal\",t.a=c},CoEt:function(e,t,n){\"use strict\";var r=n(\"8OQS\"),a=n.n(r),o=n(\"pVnL\"),c=n.n(o),u=n(\"qKvR\"),i=n(\"q1tI\"),s=n(\"FpzS\"),l=n(\"mf32\"),f=n(\"BMxC\"),p=[\"m\",\"mt\",\"mr\",\"mb\",\"ml\",\"mx\",\"my\",\"margin\",\"marginTop\",\"marginBottom\",\"marginLeft\",\"marginRight\",\"marginY\",\"marginX\",\"flex\",\"flexBasis\",\"width\",\"minWidth\",\"maxWidth\",\"maxW\",\"minW\",\"w\",\"zIndex\",\"top\",\"right\",\"bottom\",\"left\",\"position\",\"pos\"],d=function(e){var t={},n={};for(var r in e)p.includes(r)?t[r]=e[r]:n[r]=e[r];return[t,n]},m=n(\"w0db\"),b=function(e){var t=e.icon,n=a()(e,[\"icon\"]);return\"string\"===typeof t?Object(u.d)(m.a,c()({focusable:\"false\",name:t,color:\"currentColor\"},n)):Object(u.d)(f.a,c()({as:t,\"data-custom-icon\":!0,focusable:\"false\",color:\"currentColor\"},n))},h=Object(i.forwardRef)((function(e,t){return Object(u.d)(f.a,c()({ref:t,position:\"absolute\",display:\"inline-flex\",width:\"1.5rem\",height:\"100%\",alignItems:\"center\",justifyContent:\"center\",right:\"0.5rem\",top:\"50%\",pointerEvents:\"none\",zIndex:2,transform:\"translateY(-50%)\"},e))})),v=Object(i.forwardRef)((function(e,t){var n=e.placeholder,r=e.children,o=a()(e,[\"placeholder\",\"children\"]);return Object(u.d)(s.a,c()({as:\"select\",appearance:\"none\",ref:t,pr:\"2rem\",pb:\"px\",lineHeight:\"normal\"},o),n&&Object(u.d)(\"option\",{value:\"\"},n),r)})),O=Object(i.forwardRef)((function(e,t){var n=e.rootProps,r=e.icon,o=e.iconSize,i=void 0===o?5:o,s=e.iconColor,p=a()(e,[\"rootProps\",\"icon\",\"iconSize\",\"iconColor\"]),m=\"dark\"===Object(l.c)().colorMode?\"whiteAlpha.800\":\"inherit\",O=p.isReadOnly||p.isDisabled?.5:null,k=d(p),w=k[0],x=k[1];return Object(u.d)(f.a,c()({position:\"relative\",width:\"100%\"},w,n),Object(u.d)(v,c()({ref:t,color:m},x)),Object(u.d)(h,{opacity:O,color:s||x.color||m},Object(u.d)(b,{focusable:\"false\",\"aria-hidden\":\"true\",icon:r||\"chevron-down\",size:i})))}));O.displayName=\"Select\";t.a=O},D3uo:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"EMBLEM_API\",(function(){return C})),n.d(t,\"default\",(function(){return S}));var r=n(\"o0o1\"),a=n.n(r),o=n(\"HaE+\"),c=n(\"q1tI\"),u=n.n(c),i=n(\"mf32\"),s=n(\"XZ7F\"),l=n(\"IDkF\"),f=n(\"sK1y\"),p=n(\"Yn+B\"),d=n(\"CoEt\"),m=n(\"FpzS\"),b=n(\"eJLp\"),h=n(\"BMxC\"),v=n(\"pboS\"),O=(n(\"+QRC\"),n(\"N39q\")),k=n(\"Z6YE\"),w=n(\"iBPG\"),x=n(\"8XlW\"),g=n(\"zIq6\"),j=n(\"PLxQ\"),y=u.a.createElement,C=\"https://api.emblemvault.io\";function S(e){var t=e.isOpen,n=e.onClose,r=e.tokenId,S=e.mine,I=Object(i.c)().colorMode,E=Object(k.b)(),M=E.account,T=E.chainId,R=E.library,A=Object(c.useState)(!1),N=A[0],_=A[1],z=Object(c.useState)(!1),B=z[0],F=z[1],P=Object(c.useState)(!1),V=P[0],W=P[1],D=Object(c.useState)({address:\"\",balance:0,tokenType:\"\",name:\"\"}),q=D[0],L=D[1],H=Object(c.useState)([]),Y=H[0],G=H[1],J=Object(c.useState)(0),Q=J[0],U=J[1],X=Object(c.useState)(\"\"),K=X[0],Z=X[1],$=Object(c.useState)(0),ee=$[0],te=$[1],ne=Object(c.useState)(0),re=ne[0],ae=ne[1],oe=Object(c.useState)(!1),ce=oe[0],ue=oe[1],ie=Object(c.useState)(0),se=ie[0],le=ie[1],fe=Object(c.useState)(0),pe=fe[0],de=fe[1],me=Object(c.useState)([]),be=me[0],he=me[1],ve=Object(c.useState)([]),Oe=ve[0],ke=ve[1],we=Object(c.useState)(null),xe=we[0],ge=we[1],je=Object(c.useState)([]),ye=je[0],Ce=je[1],Se=Object(c.useState)(0),Ie=Se[0],Ee=Se[1],Me=Object(c.useState)(!1),Te=Me[0],Re=Me[1],Ae=Object(c.useState)(0),Ne=Ae[0],_e=Ae[1],ze=Object(c.useState)(!1),Be=ze[0],Fe=ze[1],Pe=Object(c.useState)(null),Ve=Pe[0],We=Pe[1],De=Object(c.useState)(0),qe=De[0],Le=De[1],He=Object(s.a)(),Ye=(He.isOpen,He.onToggle,function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.replace(\"http://104.154.252.216\",\"https://api.emblemvault.io/s:evmetadata\"),e.prev=1,e.next=4,fetch(t,{method:\"GET\",headers:{}});case 4:return r=e.sent,e.next=7,r.json();case 7:return o=e.sent,e.abrupt(\"return\",n(o));case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt(\"return\",n(!1));case 14:case\"end\":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()),Ge=function(e){return console.log(\"contract\",e),Ue(e,O.p.covalAbi,!0)},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Ue(e||O.p.emblemVault[T],O.p.emblemAbi,!0)},Qe=function(){return Ue(O.p.nftrade[T],O.p.nftradeAbi,!0)},Ue=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new x.a(e,t,n?R.getSigner(M).connectUnchecked():R)};Object(c.useEffect)((function(){M&&K!=M&&(Z(M),W(!1))}),[M,K]),Object(c.useEffect)((function(){if(N){var e=setTimeout((function(){_(!1)}),750);return function(){clearTimeout(e)}}}),[N]),Object(c.useEffect)((function(){V||B||(F(!0),ct(M,function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G(t),ot(),W(!0),F(!1);case 4:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}));var Xe=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:ee,r=Ge(t),console.log(\"decimals\",ee),e.next=5,r.approve(O.p.nftrade[T],Q*Math.pow(10,+n)).then((function(e){var t=e.hash;ge(t)}));case 5:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,r=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:null,n=Je(t),e.next=4,n.setApprovalForAll(O.p.nftrade[T],!0).then((function(e){var t=e.hash;ge(t)}));case 4:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,r,o=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:null,n=Je(t),e.next=4,n.isApprovedForAll(M,O.p.nftrade[T]);case 4:r=e.sent,ue(r);case 6:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$e=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,c,u,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){return(i=Object(o.a)(a.a.mark((function e(t,o){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tokenOfOwnerByIndex(M,t);case 2:if(i=e.sent,c.push(i.toNumber()),!(t+1>=r)){e.next=8;break}return e.abrupt(\"return\",o());case 8:return e.abrupt(\"return\",u(t+1,o));case 9:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)},u=function(e,t){return i.apply(this,arguments)},n=Je(t),e.next=5,n.balanceOf(M);case 5:r=e.sent,c=[],u(0,(function(){Ce(c)}));case 8:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),et=function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Qe(),e.next=3,t.addOffer(q.address,pe,O.p.emblemVault[T],r,se*Math.pow(10,+ee)).then((function(e){var t=e.hash;ge(t)}));case 3:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tt=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Qe(),e.next=3,n.withdrawOffer(O.p.emblemVault[T],r,t).then((function(e){var t=e.hash;ge(t)}));case 3:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nt=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Qe(),e.next=3,n.rejectOffer(O.p.emblemVault[T],r,t).then((function(e){var t=e.hash;ge(t)}));case 3:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rt=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Qe(),e.next=3,n.acceptOffer(O.p.emblemVault[T],r,t).then((function(e){var t=e.hash;ge(t)}));case 3:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ge(t),e.next=3,n.decimals();case 3:return r=e.sent,te(r),e.t0=ae,e.next=8,n.allowance(M,O.p.nftrade[T]).then((function(e){return(e*Math.pow(10,-r)).toString()}));case 8:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=U,e.next=13,n.balanceOf(M).then((function(e){return(e*Math.pow(10,-r)).toString()}));case 13:e.t3=e.sent,(0,e.t2)(e.t3);case 15:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ot=function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,c,u,i,s,l,f,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=function(){return(d=Object(o.a)(a.a.mark((function e(n,o,u,i){var s,l,f,d,m,b,h,v,k;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k=function(){return n+1>=c?i(o,u):p(n+1,o,u,i)},e.next=3,t.getOffer(O.p.emblemVault[T],r,n);case 3:if(s=e.sent,console.log(\"-------\",s),\"0x0000000000000000000000000000000000000000\"===s.token){e.next=40;break}return l={tokenId:s.tokenId.toNumber(),_from:s._from,token:s.token,amount:s.amount},f=Ge(l.token),e.next=10,f.name();case 10:if(d=e.sent,console.log(\"----- name ----\",d),l.name=d,l.index=n,l.address=l.token,console.log(\"----- offer tokenid ----\",s.tokenId.toNumber()),0!=s.tokenId.toNumber()){e.next=31;break}return e.next=19,f.decimals();case 19:return m=e.sent,e.next=22,f.symbol();case 22:b=e.sent,l.symbol=b,l.decimals=m,l.amount=l.amount.toNumber()*Math.pow(10,-m),o.push(l),l._from==M&&u.push(l),k(),e.next=38;break;case 31:return h=Je(l.token),e.next=34,h.tokenURI(l.tokenId);case 34:v=(v=e.sent).replace(\"ipfs://\",\"https://gateway.ipfs.io/\"),console.log(\"---------URI---------\",v),Ye(v,(function(e){console.log(\"metadata\",e),l.metadata=e,l.amount=s.amount.toNumber(),l.tokenId=s.tokenId.toNumber(),o.push(l),l._from==M&&u.push(l),k()}));case 38:e.next=42;break;case 40:console.log(\"----- wtf -----\"),k();case 42:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)},p=function(e,t,n,r){return d.apply(this,arguments)},t=Qe(),e.next=5,t.paymentAddress();case 5:return n=e.sent,We(n),e.next=9,at(n);case 9:return e.next=11,t.getOfferCount(O.p.emblemVault[T],r);case 11:return c=e.sent.toNumber(),e.next=14,t.payToMakeOffer();case 14:return u=e.sent,Re(u),e.next=18,t.makeOfferPrice();case 18:return i=e.sent.toNumber(),Ee(i),e.next=22,t.payToAcceptOffer();case 22:return s=e.sent,Fe(s),e.next=26,t.acceptOfferPrice();case 26:return l=e.sent.toNumber(),_e(l),f=Ge(n),e.t0=console,e.next=32,f.decimals();case 32:return e.t1=e.sent,e.t0.log.call(e.t0,\"dec\",e.t1),e.t2=Le,e.next=37,f.decimals();case 37:e.t3=e.sent,(0,e.t2)(e.t3),console.log(\"_paymentToken\",n),Ze(),console.log(\"--------- payment ---------\",u,i,s,l,n,re),console.log(\"------ offer count ------\",c),c>0&&p(0,[],[],(function(e,t){he(e),ke(t),console.log(\"offers\",e,t)}));case 44:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ct=function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S){e.next=2;break}return e.abrupt(\"return\",n([]));case 2:return e.next=4,fetch(C+\"/\"+w.d[T]+\"/balance/\"+t,{method:\"GET\",headers:{\"Content-Type\":\"application/json\",service:\"evmetadata\"}});case 4:return r=e.sent,e.next=7,r.json();case 7:return o=e.sent,e.abrupt(\"return\",n(o.values));case 9:case\"end\":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return y(l.a,{isOpen:t,onClose:n,isCentered:!0},y(l.g,null),y(l.d,{color:O.d[I]},y(l.f,null,y(f.a,null,S?null:\"Make\",\" Offer\",S?\"s\":null,\" for: \",r)),y(l.c,null),y(l.b,null,S?null:y(p.a,{direction:\"column\"},y(p.a,{mt:\"6\"},y(f.a,null,\"Choose your Offer Token\"),y(d.a,{w:\"100%\",value:q.address,onChange:function(e){if(\"0\"!==e.target.value){var t=Y.filter((function(t){return t.address==e.target.value}))[0];L(t),de(0),\"ERC-20\"==t.tokenType?at(t.address):$e(t.address),console.log(Y.filter((function(t){return t.address==e.target.value}))[0]),console.log(e.target.value)}}},y(\"option\",{value:\"0\"},\"Choose a Token\"),Y.map((function(e,t){if(\"native\"!==e.tokenType)return y(\"option\",{value:e.address},e.name)}))),q.balance>0&&\"ERC-20\"==q.tokenType&&re>0?y(u.a.Fragment,null,y(f.a,null,\"Max: \",Q),y(m.a,{onChange:function(e){return le(e.target.value)}})):null),y(p.a,{direction:\"row\",justify:\"center\"},\"ERC-20\"==q.tokenType?Q>0&&0==re?y(b.a,{onClick:function(){Xe(q.address)}},\"Approve offer of \",q.name):q&&0==Q?y(f.a,null,\"Insufficient Balance\"):y(b.a,{onClick:function(){et()}},\"Make Offer\"):ye.length>0?y(d.a,{width:\"100%\",onChange:function(e){\"0\"!==e.target.value&&(de(Number(e.target.value)),Ze(q.address))}},y(\"option\",{key:-1,value:\"0\"},\"Select TokenId\"),ye.map((function(e,t){return y(\"option\",{key:t,value:e},e)}))):null,q.name&&\"ERC-20\"!=q.tokenType&&!ce&&0!=pe?y(b.a,{width:\"100%\",onClick:function(){Ke(q.address)}},\"Approve \",q.name):q.name&&\"ERC-20\"!=q.tokenType&&ce?y(b.a,{onClick:function(){et()}},\"Make Offer\"):null),Te?y(f.a,null,\" Cost: \",Ne*Math.pow(10,-qe),\" $Coval to make offers\"):null,y(p.a,{maxHeight:\"200px\",overflow:\"scroll\"},Oe.length>0?y(f.a,null,\"My Offers\"):null,Te&&Q>0&&re*Math.pow(10,+qe)<Ie?y(u.a.Fragment,null,y(b.a,{onClick:function(){Xe(Ve,qe)}},\"Approve spending \")):q&&Q<Ie*Math.pow(10,-qe)?y(f.a,null,\"Insufficient Balance\"):null,Oe.map((function(e,t){return y(h.a,{borderRadius:\"0.25rem\",borderWidth:1,p:2,mb:2},y(f.a,{fontSize:\"bold\",color:\"dark\"==I?\"lightgreen\":\"forestgreen\"},e.amount>0?e.amount:null,y(v.a,{ml:3,color:\"dark\"==I?\"white\":\"black\",href:Object(w.f)(w.b.Token,[T,e.token]),isExternal:!0},e.name),e.amount<1?\"[\"+e.tokenId+\"]\":null),y(b.a,{onClick:function(){tt(e.index)},m:2},\"Withdraw Offer\"),e.metadata?y(h.a,null,y(j.b,{className:\"\",url:e.metadata.image.replace(\"ipfs://\",\"https://gateway.ipfs.io/\")})):null)})))),S?y(h.a,null,ce?null:y(b.a,{onClick:function(){Ke()}},\"Allow accepting of Offers\"),y(p.a,{direction:\"column\",maxHeight:\"200px\",overflow:\"scroll\"},Be&&Q>0&&re*Math.pow(10,+qe)<Ne?y(u.a.Fragment,null,y(f.a,null,\"Cost: \",Ne*Math.pow(10,-qe),\" $Coval to accept offers\"),y(b.a,{onClick:function(){Xe(Ve,qe)}},\"Approve spending \")):q&&Q<Ne*Math.pow(10,-qe)?y(f.a,null,\"Insufficient Balance\"):null,be.map((function(e,t){return y(h.a,{borderRadius:\"0.25rem\",borderWidth:1,p:2,mb:2},y(f.a,{fontSize:\"bold\",color:\"dark\"==I?\"lightgreen\":\"forestgreen\"},e.amount>0?e.amount:null,y(v.a,{ml:3,color:\"dark\"==I?\"white\":\"black\",href:Object(w.f)(w.b.Token,[T,e.token]),isExternal:!0},e.name),e.amount<1?\"[\"+e.tokenId+\"]\":null),y(f.a,{color:\"dark\"==I?\"#baaa94\":\"gray\",fontSize:\"xs\"},\"From:\",y(v.a,{ml:3,color:\"dark\"==I?\"white\":\"darkgray\",href:Object(w.f)(w.b.Account,[T,e._from]),isExternal:!0},e._from)),y(b.a,{onClick:function(){nt(e.index)},m:2},\"Reject Offer\"),ce?y(b.a,{onClick:function(){rt(e.index)},m:2},\"Accept Offer\"):null,e.metadata?y(h.a,null,y(j.b,{className:\"\",url:e.metadata.image.replace(\"ipfs://\",\"https://gateway.ipfs.io/\")})):null)})))):null,xe?y(g.a,{hash:xe,onComplete:function(){ge(null),W(!1)}}):null),y(l.e,null)))}}}]);","extractedComments":[]}