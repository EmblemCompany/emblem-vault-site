{"code":"(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[50,54,55],{ATmR:function(e,t,n){\"use strict\";var a=n(\"q1tI\"),r=n(\"i8i4\"),o=n(\"D7Da\");var c=Object(a.forwardRef)((function(e,t){var n=e.children,c=e.container,u=e.isDisabled,i=void 0!==u&&u,s=e.onRendered,l=Object(a.useState)(null),f=l[0],p=l[1],d=Object(o.g)(n.ref,t);return Object(o.f)((function(){i||p(function(e){return e=\"function\"===typeof e?e():e,Object(r.findDOMNode)(e)}(c)||document.body)}),[c,i]),Object(o.f)((function(){if(f&&!i)return Object(o.e)(t,f),function(){Object(o.e)(t,null)}}),[t,f,i]),Object(o.f)((function(){s&&(f||i)&&s()}),[s,f,i]),i?(a.Children.only(n),Object(a.cloneElement)(n,{ref:d})):f?Object(r.createPortal)(n,f):f}));c.displayName=\"Portal\",t.a=c},CoEt:function(e,t,n){\"use strict\";var a=n(\"8OQS\"),r=n.n(a),o=n(\"pVnL\"),c=n.n(o),u=n(\"qKvR\"),i=n(\"q1tI\"),s=n(\"FpzS\"),l=n(\"mf32\"),f=n(\"BMxC\"),p=[\"m\",\"mt\",\"mr\",\"mb\",\"ml\",\"mx\",\"my\",\"margin\",\"marginTop\",\"marginBottom\",\"marginLeft\",\"marginRight\",\"marginY\",\"marginX\",\"flex\",\"flexBasis\",\"width\",\"minWidth\",\"maxWidth\",\"maxW\",\"minW\",\"w\",\"zIndex\",\"top\",\"right\",\"bottom\",\"left\",\"position\",\"pos\"],d=function(e){var t={},n={};for(var a in e)p.includes(a)?t[a]=e[a]:n[a]=e[a];return[t,n]},m=n(\"w0db\"),b=function(e){var t=e.icon,n=r()(e,[\"icon\"]);return\"string\"===typeof t?Object(u.d)(m.a,c()({focusable:\"false\",name:t,color:\"currentColor\"},n)):Object(u.d)(f.a,c()({as:t,\"data-custom-icon\":!0,focusable:\"false\",color:\"currentColor\"},n))},h=Object(i.forwardRef)((function(e,t){return Object(u.d)(f.a,c()({ref:t,position:\"absolute\",display:\"inline-flex\",width:\"1.5rem\",height:\"100%\",alignItems:\"center\",justifyContent:\"center\",right:\"0.5rem\",top:\"50%\",pointerEvents:\"none\",zIndex:2,transform:\"translateY(-50%)\"},e))})),v=Object(i.forwardRef)((function(e,t){var n=e.placeholder,a=e.children,o=r()(e,[\"placeholder\",\"children\"]);return Object(u.d)(s.a,c()({as:\"select\",appearance:\"none\",ref:t,pr:\"2rem\",pb:\"px\",lineHeight:\"normal\"},o),n&&Object(u.d)(\"option\",{value:\"\"},n),a)})),O=Object(i.forwardRef)((function(e,t){var n=e.rootProps,a=e.icon,o=e.iconSize,i=void 0===o?5:o,s=e.iconColor,p=r()(e,[\"rootProps\",\"icon\",\"iconSize\",\"iconColor\"]),m=\"dark\"===Object(l.c)().colorMode?\"whiteAlpha.800\":\"inherit\",O=p.isReadOnly||p.isDisabled?.5:null,j=d(p),x=j[0],k=j[1];return Object(u.d)(f.a,c()({position:\"relative\",width:\"100%\"},x,n),Object(u.d)(v,c()({ref:t,color:m},k)),Object(u.d)(h,{opacity:O,color:s||k.color||m},Object(u.d)(b,{focusable:\"false\",\"aria-hidden\":\"true\",icon:a||\"chevron-down\",size:i})))}));O.displayName=\"Select\";t.a=O},D3uo:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"EMBLEM_API\",(function(){return Q})),n.d(t,\"default\",(function(){return X}));var a=n(\"o0o1\"),r=n.n(a),o=n(\"HaE+\"),c=n(\"q1tI\"),u=n.n(c),i=n(\"mf32\"),s=n(\"XZ7F\"),l=n(\"IDkF\"),f=n(\"sK1y\"),p=n(\"Yn+B\"),d=n(\"CoEt\"),m=n(\"FpzS\"),b=n(\"eJLp\"),h=n(\"BMxC\"),v=(n(\"+QRC\"),n(\"N39q\")),O=n(\"Z6YE\"),j=n(\"iBPG\"),x=n(\"8XlW\"),k=n(\"zIq6\"),w=n(\"PLxQ\"),g=n(\"RAs/\"),y=n(\"hVfy\"),C=n(\"eC2I\"),S=n.n(C),I=n(\"vUet\"),N=n(\"YdCC\"),E=function(e){return u.a.forwardRef((function(t,n){return u.a.createElement(\"div\",Object(g.a)({},t,{ref:n,className:S()(t.className,e)}))}))},M=u.a.createContext(null);M.displayName=\"CardContext\";var R=M,T=[\"bsPrefix\",\"className\",\"variant\",\"as\"],A=u.a.forwardRef((function(e,t){var n=e.bsPrefix,a=e.className,r=e.variant,o=e.as,c=void 0===o?\"img\":o,i=Object(y.a)(e,T),s=Object(I.a)(n,\"card-img\");return u.a.createElement(c,Object(g.a)({ref:t,className:S()(r?s+\"-\"+r:s,a)},i))}));A.displayName=\"CardImg\",A.defaultProps={variant:null};var P=A,B=[\"bsPrefix\",\"className\",\"bg\",\"text\",\"border\",\"body\",\"children\",\"as\"],F=E(\"h5\"),V=E(\"h6\"),_=Object(N.a)(\"card-body\"),z=Object(N.a)(\"card-title\",{Component:F}),H=Object(N.a)(\"card-subtitle\",{Component:V}),D=Object(N.a)(\"card-link\",{Component:\"a\"}),q=Object(N.a)(\"card-text\",{Component:\"p\"}),L=Object(N.a)(\"card-header\"),W=Object(N.a)(\"card-footer\"),Y=Object(N.a)(\"card-img-overlay\"),U=u.a.forwardRef((function(e,t){var n=e.bsPrefix,a=e.className,r=e.bg,o=e.text,i=e.border,s=e.body,l=e.children,f=e.as,p=void 0===f?\"div\":f,d=Object(y.a)(e,B),m=Object(I.a)(n,\"card\"),b=Object(c.useMemo)((function(){return{cardHeaderBsPrefix:m+\"-header\"}}),[m]);return u.a.createElement(R.Provider,{value:b},u.a.createElement(p,Object(g.a)({ref:t},d,{className:S()(a,m,r&&\"bg-\"+r,o&&\"text-\"+o,i&&\"border-\"+i)}),s?u.a.createElement(_,null,l):l))}));U.displayName=\"Card\",U.defaultProps={body:!1},U.Img=P,U.Title=z,U.Subtitle=H,U.Body=_,U.Link=D,U.Text=q,U.Header=L,U.Footer=W,U.ImgOverlay=Y;var G=U,J=u.a.createElement,Q=\"https://api.emblemvault.io\";function X(e){var t=e.isOpen,n=e.onClose,a=e.tokenId,g=e.mine,y=Object(i.c)().colorMode,C=Object(O.b)(),S=C.account,I=C.chainId,N=C.library,E=Object(c.useState)(!1),M=E[0],R=E[1],T=Object(c.useState)(!1),A=T[0],P=T[1],B=Object(c.useState)(!1),F=B[0],V=B[1],_=Object(c.useState)({address:\"\",balance:0,tokenType:\"\",name:\"\"}),z=_[0],H=_[1],D=Object(c.useState)([]),q=D[0],L=D[1],W=Object(c.useState)(0),Y=W[0],U=W[1],X=Object(c.useState)(\"\"),K=X[0],Z=X[1],$=Object(c.useState)(0),ee=$[0],te=$[1],ne=Object(c.useState)(0),ae=ne[0],re=ne[1],oe=Object(c.useState)(!1),ce=oe[0],ue=oe[1],ie=Object(c.useState)(0),se=ie[0],le=ie[1],fe=Object(c.useState)(0),pe=fe[0],de=fe[1],me=Object(c.useState)([]),be=me[0],he=me[1],ve=Object(c.useState)([]),Oe=ve[0],je=ve[1],xe=Object(c.useState)(null),ke=xe[0],we=xe[1],ge=Object(c.useState)([]),ye=ge[0],Ce=ge[1],Se=Object(c.useState)(0),Ie=Se[0],Ne=Se[1],Ee=Object(c.useState)(!1),Me=Ee[0],Re=Ee[1],Te=Object(c.useState)(0),Ae=Te[0],Pe=Te[1],Be=Object(c.useState)(!1),Fe=Be[0],Ve=Be[1],_e=Object(c.useState)(null),ze=_e[0],He=_e[1],De=Object(s.a)(),qe=(De.isOpen,De.onToggle,function(){var e=Object(o.a)(r.a.mark((function e(t,n){var a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.replace(\"http://104.154.252.216\",\"https://api.emblemvault.io/s:evmetadata\"),e.prev=1,e.next=4,fetch(t,{method:\"GET\",headers:{}});case 4:return a=e.sent,e.next=7,a.json();case 7:return o=e.sent,e.abrupt(\"return\",n(o));case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt(\"return\",n(!1));case 14:case\"end\":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()),Le=function(e){return console.log(\"contract\",e),Ue(e,v.p.covalAbi,!0)},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Ue(e||v.p.emblemVault[I],v.p.emblemAbi,!0)},Ye=function(){return Ue(v.p.nftrade[I],v.p.nftradeAbi,!0)},Ue=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new x.a(e,t,n?N.getSigner(S).connectUnchecked():N)};Object(c.useEffect)((function(){S&&K!=S&&(Z(S),V(!1))}),[S,K]),Object(c.useEffect)((function(){if(M){var e=setTimeout((function(){R(!1)}),750);return function(){clearTimeout(e)}}}),[M]),Object(c.useEffect)((function(){F||A||(P(!0),at(S,function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L(t),nt(),V(!0),P(!1);case 4:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}));var Ge=function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Le(t),console.log(\"decimals\",ee),e.next=4,n.approve(v.p.nftrade[I],Y*Math.pow(10,+ee)).then((function(e){var t=e.hash;we(t)}));case 4:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Je=function(){var e=Object(o.a)(r.a.mark((function e(){var t,n,a=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:null,n=We(t),e.next=4,n.setApprovalForAll(v.p.nftrade[I],!0).then((function(e){var t=e.hash;we(t)}));case 4:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(o.a)(r.a.mark((function e(){var t,n,a,o=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:null,n=We(t),e.next=4,n.isApprovedForAll(S,v.p.nftrade[I]);case 4:a=e.sent,ue(a);case 6:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a,c,u,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){return(i=Object(o.a)(r.a.mark((function e(t,o){var i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tokenOfOwnerByIndex(S,t);case 2:if(i=e.sent,c.push(i.toNumber()),!(t+1>=a)){e.next=8;break}return e.abrupt(\"return\",o());case 8:return e.abrupt(\"return\",u(t+1,o));case 9:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)},u=function(e,t){return i.apply(this,arguments)},n=We(t),e.next=5,n.balanceOf(S);case 5:a=e.sent,c=[],u(0,(function(){Ce(c)}));case 8:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ye(),e.next=3,t.addOffer(z.address,pe,v.p.emblemVault[I],a,se*Math.pow(10,+ee)).then((function(e){var t=e.hash;we(t)}));case 3:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ye(),e.next=3,n.withdrawOffer(v.p.emblemVault[I],a,t).then((function(e){var t=e.hash;we(t)}));case 3:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ye(),e.next=3,n.rejectOffer(v.p.emblemVault[I],a,t).then((function(e){var t=e.hash;we(t)}));case 3:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),et=function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ye(),e.next=3,n.acceptOffer(v.p.emblemVault[I],a,t).then((function(e){var t=e.hash;we(t)}));case 3:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Le(t),e.next=3,n.decimals();case 3:return a=e.sent,te(a),e.t0=re,e.next=8,n.allowance(S,v.p.nftrade[I]).then((function(e){return(e*Math.pow(10,-a)).toString()}));case 8:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=U,e.next=13,n.balanceOf(S).then((function(e){return(e*Math.pow(10,-a)).toString()}));case 13:e.t3=e.sent,(0,e.t2)(e.t3);case 15:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nt=function(){var e=Object(o.a)(r.a.mark((function e(){var t,n,c,u,i,s,l,f,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=function(){return(p=Object(o.a)(r.a.mark((function e(n,o,u,i){var s,l,p,d,m,b,h,O,j;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j=function(){return n+1>=c?i(o,u):f(n+1,o,u,i)},e.next=3,t.getOffer(v.p.emblemVault[I],a,n);case 3:if(s=e.sent,console.log(\"-------\",s),\"0x0000000000000000000000000000000000000000\"===s.token){e.next=40;break}return l={tokenId:s.tokenId.toNumber(),_from:s._from,token:s.token,amount:s.amount},p=Le(l.token),e.next=10,p.name();case 10:if(d=e.sent,console.log(\"----- name ----\",d),l.name=d,l.index=n,l.address=l.token,console.log(\"----- offer tokenid ----\",s.tokenId.toNumber()),0!=s.tokenId.toNumber()){e.next=31;break}return e.next=19,p.decimals();case 19:return m=e.sent,e.next=22,p.symbol();case 22:b=e.sent,l.symbol=b,l.decimals=m,l.amount=l.amount.toNumber()*Math.pow(10,-m),o.push(l),l._from==S&&u.push(l),j(),e.next=38;break;case 31:return h=We(l.token),e.next=34,h.tokenURI(l.tokenId);case 34:O=(O=e.sent).replace(\"ipfs://\",\"https://gateway.ipfs.io/\"),console.log(\"---------URI---------\",O),qe(O,(function(e){console.log(\"metadata\",e),l.metadata=e,l.amount=s.amount.toNumber(),l.tokenId=s.tokenId.toNumber(),o.push(l),l._from==S&&u.push(l),j()}));case 38:e.next=42;break;case 40:console.log(\"----- wtf -----\"),j();case 42:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)},f=function(e,t,n,a){return p.apply(this,arguments)},t=Ye(),e.next=5,t.paymentAddress();case 5:return n=e.sent,He(n),e.next=9,tt(n);case 9:return e.next=11,t.getOfferCount(v.p.emblemVault[I],a);case 11:return c=e.sent.toNumber(),e.next=14,t.payToMakeOffer();case 14:return u=e.sent,Re(u),e.next=18,t.makeOfferPrice();case 18:return i=e.sent.toNumber(),Ne(i),e.next=22,t.payToAcceptOffer();case 22:return s=e.sent,Ve(s),e.next=26,t.acceptOfferPrice();case 26:l=e.sent.toNumber(),Pe(l),console.log(\"--------- payment ---------\",u,i,s,l,n,ae),console.log(\"------ offer count ------\",c),g&&Qe(),c>0&&f(0,[],[],(function(e,t){he(e),je(t),console.log(\"offers\",e,t)}));case 32:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),at=function(){var e=Object(o.a)(r.a.mark((function e(t,n){var a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Q+\"/\"+j.d[I]+\"/balance/\"+t,{method:\"GET\",headers:{\"Content-Type\":\"application/json\",service:\"evmetadata\"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return o=e.sent,e.abrupt(\"return\",n(o.values));case 7:case\"end\":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return J(l.a,{isOpen:t,onClose:n,isCentered:!0},J(l.g,null),J(l.d,{color:v.d[y]},J(l.f,null,J(f.a,null,g?null:\"Make\",\" Offer\",g?\"s\":null,\" for: \",a)),J(l.c,null),J(l.b,null,g?null:J(p.a,{direction:\"column\"},J(p.a,{mt:\"6\"},J(f.a,null,\"Choose your Offer Token\"),J(d.a,{w:\"100%\",value:z.address,onChange:function(e){if(\"0\"!==e.target.value){var t=q.filter((function(t){return t.address==e.target.value}))[0];H(t),de(0),\"ERC-20\"==t.tokenType?tt(t.address):Xe(t.address),console.log(q.filter((function(t){return t.address==e.target.value}))[0]),console.log(e.target.value)}}},J(\"option\",{value:\"0\"},\"Choose a Token\"),q.map((function(e,t){if(\"native\"!==e.tokenType)return J(\"option\",{value:e.address},e.name)}))),z.balance>0&&\"ERC-20\"==z.tokenType&&ae>0?J(u.a.Fragment,null,J(f.a,null,\"Max: \",Y),J(m.a,{onChange:function(e){return le(e.target.value)}})):null),J(p.a,{direction:\"row\",justify:\"center\"},\"ERC-20\"==z.tokenType?Y>0&&0==ae?J(b.a,{onClick:function(){Ge(z.address)}},\"Approve offer of \",z.name):z&&0==Y?J(f.a,null,\"Insufficient Balance\"):J(b.a,{onClick:function(){Ke()}},\"Make Offer\"):ye.length>0?J(d.a,{width:\"100%\",onChange:function(e){\"0\"!==e.target.value&&(de(Number(e.target.value)),Qe(z.address))}},J(\"option\",{key:-1,value:\"0\"},\"Select TokenId\"),ye.map((function(e,t){return J(\"option\",{key:t,value:e},e)}))):null,z.name&&\"ERC-20\"!=z.tokenType&&!ce&&0!=pe?J(b.a,{width:\"100%\",onClick:function(){Je(z.address)}},\"Approve \",z.name):z.name&&\"ERC-20\"!=z.tokenType&&ce?J(b.a,{onClick:function(){Ke()}},\"Make Offer\"):null),J(p.a,{maxHeight:\"200px\",overflow:\"scroll\"},J(f.a,null,\"My Offers\"),Me&&Y>0&&ae*Math.pow(10,+ee)<Ie?J(u.a.Fragment,null,J(f.a,null,\"Cost: \",Ie*Math.pow(10,-ee),\" $Coval to make offers\"),J(b.a,{onClick:function(){Ge(ze)}},\"Approve spending \")):z&&Y<Ie*Math.pow(10,-ee)?J(f.a,null,\"Insufficient Balance\"):null,Oe.map((function(e,t){return J(G,{key:t},J(G.Header,{color:\"black\"},J(f.a,{color:\"black\"},e.name,\" \",e.amount>0?e.amount:e.tokenId)),J(G.Body,null,J(b.a,{backgroundColor:\"#2d3848\",onClick:function(){Ze(e.index)},m:2},\"Withdraw\"),e.metadata?J(h.a,null,J(w.b,{className:\"\",url:e.metadata.image.replace(\"ipfs://\",\"https://gateway.ipfs.io/\")})):null))})))),g?J(p.a,{direction:\"column\",maxHeight:\"200px\",overflow:\"scroll\"},ce?null:J(b.a,{onClick:function(){Je()}},\"Allow accepting of Offers\"),J(f.a,null,\"Offers\"),Fe&&Y>0&&ae*Math.pow(10,+ee)<Ae?J(u.a.Fragment,null,J(f.a,null,\"Cost: \",Ae*Math.pow(10,-ee),\" $Coval to accept offers\"),J(b.a,{onClick:function(){Ge(ze)}},\"Approve spending \")):z&&Y<Ae*Math.pow(10,-ee)?J(f.a,null,\"Insufficient Balance\"):null,be.map((function(e,t){return J(G,{key:t},J(G.Header,null,J(f.a,{color:\"black\"},e.name,\" \",e.amount>0?e.amount:e.tokenId)),J(G.Body,null,J(b.a,{backgroundColor:\"#2d3848\",onClick:function(){$e(e.index)},m:2},\"Reject Offer\"),ce?J(b.a,{backgroundColor:\"#2d3848\",onClick:function(){et(e.index)},m:2},\"Accept Offer\"):null,e.metadata?J(h.a,null,J(w.b,{className:\"\",url:e.metadata.image.replace(\"ipfs://\",\"https://gateway.ipfs.io/\")})):null))}))):null,ke?J(k.a,{hash:ke,onComplete:function(){we(null),V(!1)}}):null),J(l.e,null)))}}}]);","extractedComments":[]}