(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[206],{20640:function(e,t,r){"use strict";var o=r(11742),n={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var r,a,s,c,l,i,u,d,f=!1;t||(t={}),s=t.debug||!1;try{if(l=o(),i=document.createRange(),u=document.getSelection(),(d=document.createElement("span")).textContent=e,d.style.all="unset",d.style.position="fixed",d.style.top=0,d.style.clip="rect(0, 0, 0, 0)",d.style.whiteSpace="pre",d.style.webkitUserSelect="text",d.style.MozUserSelect="text",d.style.msUserSelect="text",d.style.userSelect="text",d.addEventListener("copy",function(r){if(r.stopPropagation(),t.format){if(r.preventDefault(),void 0===r.clipboardData){s&&console.warn("unable to use e.clipboardData"),s&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var o=n[t.format]||n.default;window.clipboardData.setData(o,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e)}t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))}),document.body.appendChild(d),i.selectNodeContents(d),u.addRange(i),!document.execCommand("copy"))throw Error("copy command was unsuccessful");f=!0}catch(o){s&&console.error("unable to copy using execCommand: ",o),s&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),f=!0}catch(o){s&&console.error("unable to copy using clipboardData: ",o),s&&console.error("falling back to prompt"),r="message"in t?t.message:"Copy to clipboard: #{key}, Enter",a=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C",c=r.replace(/#{\s*key\s*}/g,a),window.prompt(c,e)}}finally{u&&("function"==typeof u.removeRange?u.removeRange(i):u.removeAllRanges()),d&&document.body.removeChild(d),l()}return f}},63345:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return O}});var o=r(85893),n=r(67294),a=r(11163),s=r(77044),c=r(11987),l=r(45161),i=r(35541),u=r(46199),d=r(22243),f=r(64859),p=r(71293),m=r(66205),g=r(54346),h=r(51343),y=r(76171),w=r(25432),b=r(16554),v=r(77030),x=r(33179),j=r(65548),k=(0,b.G)(function(e,t){let r=(0,v.jC)("Switch",e),{spacing:a="0.5rem",children:s,...c}=(0,x.Lr)(e),{getIndicatorProps:l,getInputProps:i,getCheckboxProps:u,getRootProps:d,getLabelProps:f}=(0,y.O)(c),p=(0,n.useMemo)(()=>({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0,...r.container}),[r.container]),m=(0,n.useMemo)(()=>({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer",...r.track}),[r.track]),g=(0,n.useMemo)(()=>({userSelect:"none",marginStart:a,...r.label}),[a,r.label]);return(0,o.jsxs)(j.m.label,{...d(),className:(0,w.cx)("chakra-switch",e.className),__css:p,children:[(0,o.jsx)("input",{className:"chakra-switch__input",...i({},t)}),(0,o.jsx)(j.m.span,{...u(),className:"chakra-switch__track",__css:m,children:(0,o.jsx)(j.m.span,{__css:r.thumb,className:"chakra-switch__thumb",...l()})}),s&&(0,o.jsx)(j.m.span,{className:"chakra-switch__label",...f(),__css:g,children:s})]})});k.displayName="Switch";var C=r(33090),I=r(32883),_=r(14253),D=r(93108),S=r(20640),E=r.n(S),N=r(82174),P=r(59670),T=r(62368),A=r(11249);function O(e){let{isOpen:t,onClose:r}=e,{chainId:y,account:w}=(0,s.Ge)(),{colorMode:b,toggleColorMode:v}=(0,l.If)(),{pathname:x}=(0,a.useRouter)(),[j,S]=(0,P.u2)(),[O,R]=(0,P.xZ)(),[U,B]=(0,P.kX)(),[F,V]=(0,n.useState)("true"==localStorage.getItem("offline")),[K]=(0,P.GU)(),[L]=(0,P.HL)(),M=null;async function Z(){w&&(await A.SZ.loadWeb3(),await A.SZ.refreshLegacyOwnership(window.web3,w))}if("number"==typeof y&&(K||L)&&("/buy"===x||"/sell"===x)){let e={[N.nV.CHAIN]:y,..."/buy"===x?{...K?{[N.nV.OUTPUT]:K.address}:{},...L?{[N.nV.INPUT]:L.address}:{}}:{...K?{[N.nV.INPUT]:K.address}:{},...L?{[N.nV.OUTPUT]:L.address}:{}}};M=(0,c.resolve)("https://emblem.finance","".concat(x,"?").concat(Object.entries(e).map(e=>{let[t,r]=e;return"".concat(t,"=").concat(r)}).join("&")))}let[G,H]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(G){let e=setTimeout(()=>{H(!1)},750);return()=>{clearTimeout(e)}}},[G]),(0,o.jsxs)(i.u_,{isOpen:t,onClose:r,isCentered:!0,children:[(0,o.jsx)(u.Z,{}),(0,o.jsxs)(d.h,{color:N.r$[b],children:[(0,o.jsx)(f.x,{children:(0,o.jsx)(p.x,{children:"Settings (Build #2021)"})}),(0,o.jsx)(m.o,{}),(0,o.jsx)(g.f,{children:(0,o.jsxs)(h.K,{direction:"column",children:[(0,o.jsxs)(h.K,{direction:"row",justify:"space-between",children:[(0,o.jsx)(p.x,{children:"Dark Mode"}),(0,o.jsx)(k,{isChecked:"dark"===b,onChange:v})]}),(0,o.jsxs)(h.K,{direction:"row",justify:"space-between",children:[(0,o.jsx)(p.x,{children:"API-Key"}),(0,o.jsx)(C.I,{type:"password",placeholder:"API Key",defaultValue:localStorage.getItem("apiKey")||"",onChange:e=>{localStorage.setItem("apiKey",e.target.value)},width:"80%"})]}),(0,o.jsx)(h.K,{direction:"row",justify:"space-between",children:(0,o.jsx)(I.r,{textAlign:"left",isTruncated:!0,onClick:async()=>{await (0,T.Lj)(),await Z()},children:" Reset Cache "})}),(0,o.jsxs)(h.K,{direction:"row",justify:"space-between",children:[(0,o.jsx)(p.x,{children:"Offline Mode"}),(0,o.jsx)(k,{isChecked:F,onChange:e=>{let t=String(e.target.checked);localStorage.setItem("offline",t),V(e.target.checked)}})]})]})}),(0,o.jsxs)(_.m,{justifyContent:"space-between",children:["string"==typeof M&&(0,o.jsx)(D.z,{variant:"link",isDisabled:G,color:"blue.500",width:"min-content",onClick:()=>{try{window.navigator.share({title:"Emblem Vault",url:M}).catch(()=>{})}catch(t){var e;e=M,E()(e),H(!0)}},children:G?"Copied":"Share Permalink"}),(0,o.jsx)(I.r,{href:"https://github.com/NoahZinsmeister/hypertext",target:"_blank",rel:"noopener noreferrer",color:"blue.500",children:"Based on Hypertext."})]})]})]})}},62368:function(e,t,r){"use strict";r.d(t,{Lj:function(){return n},Nj:function(){return s},ZO:function(){return a},_o:function(){return l},mv:function(){return i},pk:function(){return c}});let o=async()=>"indexedDB"in window?new Promise((e,t)=>{let r=indexedDB.open("MyDatabase",1);r.onerror=e=>{console.error("Database error:",e.target.error),t(e.target.error)},r.onsuccess=t=>{e(t.target.result)},r.onupgradeneeded=e=>{let t=e.target.result;t.objectStoreNames.contains("vaults")||t.createObjectStore("vaults",{keyPath:"tokenId"})}}):(console.error("IndexedDB is not supported by this browser."),null),n=async()=>new Promise((e,t)=>{let r=indexedDB.deleteDatabase("MyDatabase");r.onerror=e=>{console.error("Database error:",e.target.error),t(e.target.error)},r.onsuccess=()=>{e(!0)}}),a=async(e,t)=>{console.log("getVaults - start");let r=await o();if(!r)throw console.error("Failed to open database"),Error("Failed to open database");let n=r.transaction(["vaults"],"readonly").objectStore("vaults").getAll();return new Promise((r,o)=>{n.onsuccess=()=>{console.log("All vaults successfully retrieved from store"),r(n.result.filter(t=>{var r,o;return e===(null===(r=t.ownership)||void 0===r?void 0:r.status)||e===(null===(o=t.ownershipInfo)||void 0===o?void 0:o.status)}).filter(r=>{var o,n,a,s,c,l;return"claimed"==e?t===(null===(o=r.ownership)||void 0===o?void 0:o.claimedBy)||t===(null===(n=r.ownershipInfo)||void 0===n?void 0:n.claimedBy):"unminted"==e?(null===(a=r.ownership)||void 0===a?void 0:a.createdBy)===t||t===(null===(s=r.ownershipInfo)||void 0===s?void 0:s.createdBy):t===(null===(c=r.ownership)||void 0===c?void 0:c.owner)||t===(null===(l=r.ownershipInfo)||void 0===l?void 0:l.owner)}))},n.onerror=e=>{console.error("Error retrieving vaults from store:",e.target.error),o(e.target.error)}})},s=async e=>{console.log("getVaults - start");let t=await o();if(!t)throw console.error("Failed to open database"),Error("Failed to open database");let r=t.transaction(["vaults"],"readonly").objectStore("vaults").get(e);return new Promise((e,t)=>{r.onsuccess=()=>{console.log("All vaults successfully retrieved from store"),e(r.result)},r.onerror=e=>{console.error("Error retrieving vaults from store:",e.target.error),t(e.target.error)}})},c=async e=>{console.log("useDB - start");let t=await o();if(!t)throw console.error("Failed to open database"),Error("Failed to open database");let r=t.transaction(["vaults"],"readwrite"),n=r.objectStore("vaults");return new Promise((o,a)=>{e.forEach((e,t)=>{if(console.log("Processing item ".concat(t),e),!e.tokenId){console.error("Item missing tokenId:",e);return}let r=n.get(e.tokenId);r.onsuccess=()=>{console.log("Got vault ".concat(e.tokenId," from store")),r.result||(console.error("Item missing tokenId:",e),o(u(n,e,t,a))),r&&r.result&&!r.result.addresses&&o(u(n,e,t,a))},r.onerror=r=>{console.error("Item missing tokenId:",e),o(u(n,e,t,a))}}),r.oncomplete=()=>{console.log("Transaction complete"),t.close(),o(!0)},r.onerror=e=>{console.error("Transaction error:",e.target.error),t.close(),a(e.target.error)}})},l=async e=>{console.log("useDB - start");let t=await o();if(!t)throw console.error("Failed to open database"),Error("Failed to open database");let r=t.transaction(["vaults"],"readwrite"),n=r.objectStore("vaults");return new Promise((o,a)=>{let s=n.put(e);s.onsuccess=()=>{console.log("Item ".concat(e.tokenId," successfully put into store"))},s.onerror=e=>{console.error("Error putting item ".concat(index," into store:"),e.target.error),a(e.target.error)},r.oncomplete=()=>{console.log("Transaction complete"),t.close(),o(!0)},r.onerror=e=>{console.error("Transaction error:",e.target.error),t.close(),a(e.target.error)}})},i=async e=>{console.log("deleteVaultFromDatabase - start");let t=await o();if(!t)throw console.error("Failed to open database"),Error("Failed to open database");let r=t.transaction(["vaults"],"readwrite"),n=r.objectStore("vaults");return new Promise((o,a)=>{(function(e,t,r,o){let n=e.delete(t);n.onsuccess=()=>{console.log("Item ".concat(r," successfully deleted from store"))},n.onerror=e=>{console.error("Error deleting item ".concat(r," from store:"),e.target.error),o(e.target.error)}})(n,e,e,a),r.oncomplete=()=>{console.log("Transaction complete"),t.close(),o(!0)},r.onerror=e=>{console.error("Transaction error:",e.target.error),t.close(),a(e.target.error)}})};function u(e,t,r,o){let n=e.put(t);return n.onsuccess=()=>{console.log("Item ".concat(r," successfully put into store"))},n.onerror=e=>{console.error("Error putting item ".concat(r," into store:"),e.target.error),o(e.target.error)},n}},11742:function(e){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,r=[],o=0;o<e.rangeCount;o++)r.push(e.getRangeAt(o));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||r.forEach(function(t){e.addRange(t)}),t&&t.focus()}}},75068:function(e,t,r){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,o(e,t)}r.d(t,{Z:function(){return n}})},63366:function(e,t,r){"use strict";function o(e,t){if(null==e)return{};var r={};for(var o in e)if(({}).hasOwnProperty.call(e,o)){if(t.includes(o))continue;r[o]=e[o]}return r}r.d(t,{Z:function(){return o}})},32883:function(e,t,r){"use strict";r.d(t,{r:function(){return i}});var o=r(16554),n=r(77030),a=r(33179),s=r(65548),c=r(25432),l=r(85893),i=(0,o.G)(function(e,t){let r=(0,n.mq)("Link",e),{className:o,isExternal:i,...u}=(0,a.Lr)(e);return(0,l.jsx)(s.m.a,{target:i?"_blank":void 0,rel:i?"noopener":void 0,ref:t,className:(0,c.cx)("chakra-link",o),...u,__css:r})});i.displayName="Link"},14253:function(e,t,r){"use strict";r.d(t,{m:function(){return l}});var o=r(35541),n=r(25432),a=r(16554),s=r(65548),c=r(85893),l=(0,a.G)((e,t)=>{let{className:r,...a}=e,l=(0,n.cx)("chakra-modal__footer",r),i={display:"flex",alignItems:"center",justifyContent:"flex-end",...(0,o.I_)().footer};return(0,c.jsx)(s.m.footer,{ref:t,...a,__css:i,className:l})});l.displayName="ModalFooter"},35155:function(e,t,r){"use strict";r.d(t,{W:function(){return n}});var o=r(67294);function n(e,t=[]){let r=(0,o.useRef)(e);return(0,o.useEffect)(()=>{r.current=e}),(0,o.useCallback)((...e)=>{var t;return null==(t=r.current)?void 0:t.call(r,...e)},t)}}}]);