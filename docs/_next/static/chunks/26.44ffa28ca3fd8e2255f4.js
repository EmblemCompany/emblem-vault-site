(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[26],{ATmR:function(e,t,n){"use strict";var r=n("q1tI"),a=n("i8i4"),o=n("D7Da");var c=Object(r.forwardRef)((function(e,t){var n=e.children,c=e.container,u=e.isDisabled,i=void 0!==u&&u,l=e.onRendered,s=Object(r.useState)(null),f=s[0],p=s[1],d=Object(o.g)(n.ref,t);return Object(o.f)((function(){i||p(function(e){return e="function"===typeof e?e():e,Object(a.findDOMNode)(e)}(c)||document.body)}),[c,i]),Object(o.f)((function(){if(f&&!i)return Object(o.e)(t,f),function(){Object(o.e)(t,null)}}),[t,f,i]),Object(o.f)((function(){l&&(f||i)&&l()}),[l,f,i]),i?(r.Children.only(n),Object(r.cloneElement)(n,{ref:d})):f?Object(a.createPortal)(n,f):f}));c.displayName="Portal",t.a=c},CoEt:function(e,t,n){"use strict";var r=n("8OQS"),a=n.n(r),o=n("pVnL"),c=n.n(o),u=n("qKvR"),i=n("q1tI"),l=n("FpzS"),s=n("mf32"),f=n("BMxC"),p=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginBottom","marginLeft","marginRight","marginY","marginX","flex","flexBasis","width","minWidth","maxWidth","maxW","minW","w","zIndex","top","right","bottom","left","position","pos"],d=function(e){var t={},n={};for(var r in e)p.includes(r)?t[r]=e[r]:n[r]=e[r];return[t,n]},b=n("w0db"),m=function(e){var t=e.icon,n=a()(e,["icon"]);return"string"===typeof t?Object(u.d)(b.a,c()({focusable:"false",name:t,color:"currentColor"},n)):Object(u.d)(f.a,c()({as:t,"data-custom-icon":!0,focusable:"false",color:"currentColor"},n))},h=Object(i.forwardRef)((function(e,t){return Object(u.d)(f.a,c()({ref:t,position:"absolute",display:"inline-flex",width:"1.5rem",height:"100%",alignItems:"center",justifyContent:"center",right:"0.5rem",top:"50%",pointerEvents:"none",zIndex:2,transform:"translateY(-50%)"},e))})),v=Object(i.forwardRef)((function(e,t){var n=e.placeholder,r=e.children,o=a()(e,["placeholder","children"]);return Object(u.d)(l.a,c()({as:"select",appearance:"none",ref:t,pr:"2rem",pb:"px",lineHeight:"normal"},o),n&&Object(u.d)("option",{value:""},n),r)})),O=Object(i.forwardRef)((function(e,t){var n=e.rootProps,r=e.icon,o=e.iconSize,i=void 0===o?5:o,l=e.iconColor,p=a()(e,["rootProps","icon","iconSize","iconColor"]),b="dark"===Object(s.c)().colorMode?"whiteAlpha.800":"inherit",O=p.isReadOnly||p.isDisabled?.5:null,k=d(p),g=k[0],x=k[1];return Object(u.d)(f.a,c()({position:"relative",width:"100%"},g,n),Object(u.d)(v,c()({ref:t,color:b},x)),Object(u.d)(h,{opacity:O,color:l||x.color||b},Object(u.d)(m,{focusable:"false","aria-hidden":"true",icon:r||"chevron-down",size:i})))}));O.displayName="Select";t.a=O},D3uo:function(e,t,n){"use strict";n.r(t),n.d(t,"EMBLEM_API",(function(){return C})),n.d(t,"default",(function(){return S}));var r=n("o0o1"),a=n.n(r),o=n("HaE+"),c=n("q1tI"),u=n.n(c),i=n("mf32"),l=n("XZ7F"),s=n("IDkF"),f=n("sK1y"),p=n("Yn+B"),d=n("CoEt"),b=n("FpzS"),m=n("eJLp"),h=n("BMxC"),v=n("pboS"),O=(n("+QRC"),n("N39q")),k=n("Z6YE"),g=n("iBPG"),x=n("8XlW"),j=n("zIq6"),w=n("PLxQ"),y=u.a.createElement,C="https://api.emblemvault.io";function S(e){var t=e.isOpen,n=e.onClose,r=e.tokenId,S=e.mine,I=Object(i.c)().colorMode,E=Object(k.b)(),A=E.account,M=E.chainId,T=E.library,R=Object(c.useState)(!1),q=R[0],N=R[1],_=Object(c.useState)(!1),z=_[0],F=_[1],B=Object(c.useState)(!1),P=B[0],D=B[1],V=Object(c.useState)({address:"",balance:0,tokenType:"",name:"",symbol:""}),W=V[0],L=V[1],Y=Object(c.useState)([]),H=Y[0],Q=Y[1],G=Object(c.useState)(0),J=G[0],K=G[1],U=Object(c.useState)(""),X=U[0],Z=U[1],$=Object(c.useState)(0),ee=$[0],te=$[1],ne=Object(c.useState)(0),re=ne[0],ae=ne[1],oe=Object(c.useState)(!1),ce=oe[0],ue=oe[1],ie=Object(c.useState)(0),le=ie[0],se=ie[1],fe=Object(c.useState)(0),pe=fe[0],de=fe[1],be=Object(c.useState)([]),me=be[0],he=be[1],ve=Object(c.useState)([]),Oe=ve[0],ke=ve[1],ge=Object(c.useState)(null),xe=ge[0],je=ge[1],we=Object(c.useState)([]),ye=we[0],Ce=we[1],Se=Object(c.useState)(0),Ie=Se[0],Ee=Se[1],Ae=Object(c.useState)(!1),Me=Ae[0],Te=Ae[1],Re=Object(c.useState)(0),qe=Re[0],Ne=Re[1],_e=Object(c.useState)(!1),ze=_e[0],Fe=_e[1],Be=Object(c.useState)(null),Pe=Be[0],De=Be[1],Ve=Object(c.useState)(0),We=Ve[0],Le=Ve[1],Ye=Object(l.a)(),He=(Ye.isOpen,Ye.onToggle,Object(c.useState)(!1)),Qe=He[0],Ge=He[1],Je=Object(c.useState)(0),Ke=Je[0],Ue=Je[1],Xe=function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.replace("http://104.154.252.216","https://api.emblemvault.io"),e.prev=1,e.next=4,fetch(t,{method:"GET",headers:{}});case 4:return r=e.sent,e.next=7,r.json();case 7:return o=e.sent,e.abrupt("return",n(o));case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",n(!1));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}(),Ze=function(e){return console.log("contract",e),tt(e,O.q.covalAbi,!0)},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return tt(e||O.q.emblemVault[M],O.q.emblemAbi,!0)},et=function(){return tt(O.q.nftrade[M],O.q.nftradeAbi,!0)},tt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new x.a(e,t,n?T.getSigner(A).connectUnchecked():T)};Object(c.useEffect)((function(){A&&X!=A&&(Z(A),D(!1))}),[A,X]),Object(c.useEffect)((function(){if(q){var e=setTimeout((function(){N(!1)}),750);return function(){clearTimeout(e)}}}),[q]),Object(c.useEffect)((function(){P||z||(F(!0),pt(A,function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q(t),ft(),D(!0),F(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}));var nt=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:ee,r=Ze(t),console.log("decimals",ee),e.next=5,r.approve(O.q.nftrade[M],J*Math.pow(10,+n)).then((function(e){var t=e.hash;je(t)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rt=function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,r=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:null,n=$e(t),e.next=4,n.setApprovalForAll(O.q.nftrade[M],!0).then((function(e){var t=e.hash;je(t)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),at=function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,r,o=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:null,n=$e(t),e.next=4,n.isApprovedForAll(A,O.q.nftrade[M]);case 4:r=e.sent,ue(r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ot=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,c,u,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){return(i=Object(o.a)(a.a.mark((function e(t,o){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tokenOfOwnerByIndex(A,t);case 2:if(i=e.sent,c.push(i.toNumber()),!(t+1>=r)){e.next=8;break}return e.abrupt("return",o());case 8:return e.abrupt("return",u(t+1,o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)},u=function(e,t){return i.apply(this,arguments)},n=$e(t),e.next=5,n.balanceOf(A);case 5:r=e.sent,c=[],u(0,(function(){Ce(c)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ct=function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=et(),e.next=3,t.addOffer(W.address,pe,O.q.emblemVault[M],r,le*Math.pow(10,+ee)).then((function(e){var t=e.hash;je(t)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ut=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=et(),e.next=3,n.withdrawOffer(O.q.emblemVault[M],r,t).then((function(e){var t=e.hash;je(t)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),it=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=et(),e.next=3,n.rejectOffer(O.q.emblemVault[M],r,t).then((function(e){var t=e.hash;je(t)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),lt=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=et(),e.next=3,n.acceptOffer(O.q.emblemVault[M],r,t).then((function(e){var t=e.hash;je(t)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),st=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ze(t),e.next=3,n.decimals();case 3:return r=e.sent,te(r),e.t0=ae,e.next=8,n.allowance(A,O.q.nftrade[M]).then((function(e){return(e*Math.pow(10,-r)).toString()}));case 8:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=K,e.next=13,n.balanceOf(A).then((function(e){return(e*Math.pow(10,-r)).toString()}));case 13:e.t3=e.sent,(0,e.t2)(e.t3);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ft=function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,c,u,i,l,s,f,p,d,b,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m=function(){return(m=Object(o.a)(a.a.mark((function e(n,o,u,i){var l,s,f,p,d,m,h,v,k;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k=function(){return n+1>=c?i(o,u):b(n+1,o,u,i)},e.next=3,t.getOffer(O.q.emblemVault[M],r,n);case 3:if(l=e.sent,console.log("-------",l),"0x0000000000000000000000000000000000000000"===l.token){e.next=40;break}return s={tokenId:l.tokenId.toNumber(),_from:l._from,token:l.token,amount:l.amount},f=Ze(s.token),e.next=10,f.name();case 10:if(p=e.sent,console.log("----- name ----",p),s.name=p,s.index=n,s.address=s.token,console.log("----- offer tokenid ----",l.tokenId.toNumber()),0!=l.tokenId.toNumber()){e.next=31;break}return e.next=19,f.decimals();case 19:return d=e.sent,e.next=22,f.symbol();case 22:m=e.sent,s.symbol=m,s.decimals=d,s.amount=s.amount.toNumber()*Math.pow(10,-d),o.push(s),s._from==A&&u.push(s),k(),e.next=38;break;case 31:return h=$e(s.token),e.next=34,h.tokenURI(s.tokenId);case 34:v=(v=e.sent).replace("ipfs://","https://gateway.ipfs.io/"),console.log("---------URI---------",v),Xe(v,(function(e){console.log("metadata",e),s.metadata=e,s.amount=l.amount.toNumber(),s.tokenId=l.tokenId.toNumber(),o.push(s),s._from==A&&u.push(s),k()}));case 38:e.next=42;break;case 40:console.log("----- wtf -----"),k();case 42:case"end":return e.stop()}}),e)})))).apply(this,arguments)},b=function(e,t,n,r){return m.apply(this,arguments)},t=et(),e.next=5,t.paymentAddress();case 5:return n=e.sent,De(n),e.next=9,st(n);case 9:return e.next=11,t.getOfferCount(O.q.emblemVault[M],r);case 11:return c=e.sent.toNumber(),e.next=14,t.payToMakeOffer();case 14:return u=e.sent,Te(u),e.next=18,t.makeOfferPrice();case 18:return i=e.sent.toNumber(),Ee(i),e.next=22,t.payToAcceptOffer();case 22:return l=e.sent,Fe(l),e.next=26,t.acceptOfferPrice();case 26:return s=e.sent.toNumber(),Ne(s),f=Ze(n),e.next=31,t.takePercentageOfERC20();case 31:return p=e.sent,Ge(p),e.next=35,t.percentageFee();case 35:return d=e.sent.toNumber(),Ue(d),console.log("-----%",p,d),e.t0=console,e.next=41,f.decimals();case 41:return e.t1=e.sent,e.t0.log.call(e.t0,"dec",e.t1),e.t2=Le,e.next=46,f.decimals();case 46:e.t3=e.sent,(0,e.t2)(e.t3),console.log("_paymentToken",n),at(),console.log("--------- payment ---------",u,i,l,s,n,re),console.log("------ offer count ------",c),c>0&&b(0,[],[],(function(e,t){he(e),ke(t),console.log("offers",e,t)}));case 53:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pt=function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S){e.next=2;break}return e.abrupt("return",n([]));case 2:return e.next=4,fetch(C+"/"+g.e[M]+"/balance/"+t,{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata"}});case 4:return r=e.sent,e.next=7,r.json();case 7:return o=e.sent,e.abrupt("return",n(o.values));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return y(s.a,{isOpen:t,onClose:n,isCentered:!0},y(s.g,null),y(s.d,{color:O.c[I]},y(s.f,null,y(f.a,null,S?null:"Make"," Offer",S?"s":null," for: ",r)),y(s.c,null),y(s.b,null,S?null:y(p.a,{direction:"column"},y(p.a,{mt:"6"},y(f.a,null,"Choose your Offer Token"),y(d.a,{w:"100%",value:W.address,onChange:function(e){if("0"!==e.target.value){var t=H.filter((function(t){return t.address==e.target.value}))[0];console.log(t),L(t),de(0),"ERC-20"==t.tokenType?st(t.address):ot(t.address),console.log(H.filter((function(t){return t.address==e.target.value}))[0]),console.log(e.target.value)}}},y("option",{value:"0"},"Choose a Token"),H.map((function(e,t){if("native"!==e.tokenType)return y("option",{value:e.address},e.name)}))),W.balance>0&&"ERC-20"==W.tokenType&&re>0?y(u.a.Fragment,null,y(f.a,null,"Max: ",Number(J)>Number(re)?re:J," "),y(b.a,{onChange:function(e){return se(e.target.value)}})):null),y(p.a,{direction:"row",justify:"center"},"ERC-20"==W.tokenType?J>0&&0==re?y(m.a,{onClick:function(){nt(W.address)}},"Approve offer of ",W.name):W&&0==J?y(f.a,null,"Insufficient Balance"):y(m.a,{onClick:function(){ct()}},"Make Offer"):ye.length>0?y(d.a,{width:"100%",onChange:function(e){"0"!==e.target.value&&(de(Number(e.target.value)),at(W.address))}},y("option",{key:-1,value:"0"},"Select TokenId"),ye.map((function(e,t){return y("option",{key:t,value:e},e)}))):null,W.name&&"ERC-20"!=W.tokenType&&!ce&&0!=pe?y(m.a,{width:"100%",onClick:function(){rt(W.address)}},"Approve ",W.name):W.name&&"ERC-20"!=W.tokenType&&ce?y(m.a,{onClick:function(){ct()}},"Make Offer"):null),Me?y(f.a,null," Cost: ",qe*Math.pow(10,-We)," $Coval to make offers"):null,Qe&&"ERC-20"==W.tokenType&&le?y(u.a.Fragment,null,y(f.a,null,"Fee: ",Ke,"%  (",le*(Ke/100)," ",W.symbol,")")):null,y(p.a,{maxHeight:"200px",overflow:"scroll"},Oe.length>0?y(f.a,{as:"h2"},"My Offers"):null,Me&&J>0&&re*Math.pow(10,+We)<Ie?y(u.a.Fragment,null,y(m.a,{onClick:function(){nt(Pe,We)}},"Approve spending ")):W&&J<Ie*Math.pow(10,-We)?y(f.a,null,"Insufficient Balance"):null,Oe.map((function(e,t){return y(h.a,{borderRadius:"0.25rem",borderWidth:1,p:2,mb:2},y(f.a,{fontSize:"bold",color:"dark"==I?"lightgreen":"forestgreen"},e.amount>0?e.amount:null,y(v.a,{ml:3,color:"dark"==I?"white":"black",href:Object(g.g)(g.c.Token,[M,e.token]),isExternal:!0},e.name),e.amount<1?" ["+e.tokenId+"]":null),y(m.a,{onClick:function(){ut(e.index)},m:2},"Withdraw Offer"),e.metadata?y(h.a,null,y(w.b,{className:"",url:e.metadata.image.replace("ipfs://","https://gateway.ipfs.io/")})):null)})))),S?y(h.a,null,ce?null:y(m.a,{onClick:function(){rt()}},"Allow accepting of Offers"),y(p.a,{direction:"column",maxHeight:"200px",overflow:"scroll"},ze&&J>0&&re*Math.pow(10,+We)<qe?y(u.a.Fragment,null,y(f.a,null,"Cost: ",qe*Math.pow(10,-We)," $Coval to accept offers"),y(m.a,{onClick:function(){nt(Pe,We)}},"Approve spending ")):W&&J<qe*Math.pow(10,-We)?y(f.a,null,"Insufficient Balance"):null,me.map((function(e,t){return y(h.a,{borderRadius:"0.25rem",borderWidth:1,p:2,mb:2},y(f.a,{fontSize:"bold",color:"dark"==I?"lightgreen":"forestgreen"},e.amount>0?e.amount:null,y(v.a,{ml:3,color:"dark"==I?"white":"black",href:Object(g.g)(g.c.Token,[M,e.token]),isExternal:!0},e.name),e.amount<1?"["+e.tokenId+"]":null),y(f.a,{color:"dark"==I?"#baaa94":"gray",fontSize:"xs"},"From:",y(v.a,{ml:3,color:"dark"==I?"white":"darkgray",href:Object(g.g)(g.c.Account,[M,e._from]),isExternal:!0},e._from)),y(m.a,{onClick:function(){it(e.index)},m:2},"Reject Offer"),ce?y(m.a,{onClick:function(){lt(e.index)},m:2},"Accept Offer"):null,e.metadata?y(h.a,null,y(w.b,{className:"",url:e.metadata.image.replace("ipfs://","https://gateway.ipfs.io/")})):null)})))):null,xe?y(j.a,{hash:xe,onComplete:function(){je(null),D(!1)}}):null),y(s.e,null)))}},YTna:function(e,t,n){"use strict";var r=n("pVnL"),a=n.n(r),o=n("8OQS"),c=n.n(o),u=n("qKvR"),i=n("w0db"),l=n("+Cyc"),s=n("mf32"),f={display:"inline-flex",alignItems:"center",justifyContent:"center",rounded:"md",transition:"all 0.2s",flex:"0 0 auto",_hover:{bg:"blackAlpha.100"},_active:{bg:"blackAlpha.200"},_disabled:{cursor:"not-allowed"},_focus:{boxShadow:"outline"}},p={lg:{button:"40px",icon:"16px"},md:{button:"32px",icon:"12px"},sm:{button:"24px",icon:"10px"}};t.a=function(e){var t=e.size,n=void 0===t?"md":t,r=e.type,o=void 0===r?"button":r,d=e.isDisabled,b=e.color,m=e["aria-label"],h=void 0===m?"Close":m,v=c()(e,["size","type","isDisabled","color","aria-label"]),O=Object(s.c)().colorMode,k=p[n]&&p[n].button,g=p[n]&&p[n].icon;return Object(u.d)(l.a,a()({as:"button",outline:"none","aria-disabled":d,disabled:d,"aria-label":h,size:k,_hover:{bg:{light:"blackAlpha.100",dark:"whiteAlpha.100"}[O]},_active:{bg:{light:"blackAlpha.200",dark:"whiteAlpha.200"}[O]},type:o},f,v),Object(u.d)(i.a,{color:b,focusable:"false",name:"close","aria-hidden":!0,size:g}))}}}]);