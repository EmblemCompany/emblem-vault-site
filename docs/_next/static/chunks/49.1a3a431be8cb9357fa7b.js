(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[49,54,55],{ATmR:function(e,t,n){"use strict";var r=n("q1tI"),a=n("i8i4"),o=n("D7Da");var c=Object(r.forwardRef)((function(e,t){var n=e.children,c=e.container,u=e.isDisabled,i=void 0!==u&&u,s=e.onRendered,l=Object(r.useState)(null),f=l[0],p=l[1],d=Object(o.g)(n.ref,t);return Object(o.f)((function(){i||p(function(e){return e="function"===typeof e?e():e,Object(a.findDOMNode)(e)}(c)||document.body)}),[c,i]),Object(o.f)((function(){if(f&&!i)return Object(o.e)(t,f),function(){Object(o.e)(t,null)}}),[t,f,i]),Object(o.f)((function(){s&&(f||i)&&s()}),[s,f,i]),i?(r.Children.only(n),Object(r.cloneElement)(n,{ref:d})):f?Object(a.createPortal)(n,f):f}));c.displayName="Portal",t.a=c},CoEt:function(e,t,n){"use strict";var r=n("8OQS"),a=n.n(r),o=n("pVnL"),c=n.n(o),u=n("qKvR"),i=n("q1tI"),s=n("FpzS"),l=n("mf32"),f=n("BMxC"),p=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginBottom","marginLeft","marginRight","marginY","marginX","flex","flexBasis","width","minWidth","maxWidth","maxW","minW","w","zIndex","top","right","bottom","left","position","pos"],d=function(e){var t={},n={};for(var r in e)p.includes(r)?t[r]=e[r]:n[r]=e[r];return[t,n]},m=n("w0db"),h=function(e){var t=e.icon,n=a()(e,["icon"]);return"string"===typeof t?Object(u.d)(m.a,c()({focusable:"false",name:t,color:"currentColor"},n)):Object(u.d)(f.a,c()({as:t,"data-custom-icon":!0,focusable:"false",color:"currentColor"},n))},b=Object(i.forwardRef)((function(e,t){return Object(u.d)(f.a,c()({ref:t,position:"absolute",display:"inline-flex",width:"1.5rem",height:"100%",alignItems:"center",justifyContent:"center",right:"0.5rem",top:"50%",pointerEvents:"none",zIndex:2,transform:"translateY(-50%)"},e))})),v=Object(i.forwardRef)((function(e,t){var n=e.placeholder,r=e.children,o=a()(e,["placeholder","children"]);return Object(u.d)(s.a,c()({as:"select",appearance:"none",ref:t,pr:"2rem",pb:"px",lineHeight:"normal"},o),n&&Object(u.d)("option",{value:""},n),r)})),O=Object(i.forwardRef)((function(e,t){var n=e.rootProps,r=e.icon,o=e.iconSize,i=void 0===o?5:o,s=e.iconColor,p=a()(e,["rootProps","icon","iconSize","iconColor"]),m="dark"===Object(l.c)().colorMode?"whiteAlpha.800":"inherit",O=p.isReadOnly||p.isDisabled?.5:null,w=d(p),k=w[0],j=w[1];return Object(u.d)(f.a,c()({position:"relative",width:"100%"},k,n),Object(u.d)(v,c()({ref:t,color:m},j)),Object(u.d)(b,{opacity:O,color:s||j.color||m},Object(u.d)(h,{focusable:"false","aria-hidden":"true",icon:r||"chevron-down",size:i})))}));O.displayName="Select";t.a=O},D3uo:function(e,t,n){"use strict";n.r(t),n.d(t,"EMBLEM_API",(function(){return y})),n.d(t,"default",(function(){return C}));var r=n("o0o1"),a=n.n(r),o=n("HaE+"),c=n("q1tI"),u=n.n(c),i=n("mf32"),s=n("IDkF"),l=n("sK1y"),f=n("Yn+B"),p=n("CoEt"),d=n("FpzS"),m=n("eJLp"),h=n("bQFp"),b=(n("+QRC"),n("N39q")),v=n("Z6YE"),O=n("iBPG"),w=n("8XlW"),k=n("wZsY"),j=n("zIq6"),x=n("sd7e"),g=u.a.createElement,y="https://api.emblemvault.io";function C(e){var t=e.isOpen,n=e.onClose,r=e.tokenId,C=e.mine,S=Object(i.c)().colorMode,I=Object(v.b)(),E=I.account,T=I.chainId,M=I.library,R=Object(c.useState)(!1),N=R[0],A=R[1],P=Object(c.useState)(!1),_=P[0],z=P[1],B=Object(c.useState)(!1),V=B[0],W=B[1],D=Object(c.useState)({address:"",balance:0,tokenType:"",name:""}),F=D[0],q=D[1],L=Object(c.useState)([]),U=L[0],Y=L[1],X=Object(c.useState)(0),G=X[0],J=X[1],Q=Object(c.useState)(""),H=Q[0],K=Q[1],Z=Object(c.useState)(0),$=Z[0],ee=Z[1],te=Object(c.useState)(0),ne=te[0],re=te[1],ae=Object(c.useState)(!1),oe=ae[0],ce=ae[1],ue=Object(c.useState)(0),ie=ue[0],se=ue[1],le=Object(c.useState)(0),fe=le[0],pe=le[1],de=Object(c.useState)([]),me=de[0],he=de[1],be=Object(c.useState)([]),ve=be[0],Oe=be[1],we=Object(c.useState)(null),ke=we[0],je=we[1],xe=Object(c.useState)([]),ge=xe[0],ye=xe[1],Ce=function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.replace("http://104.154.252.216","https://api.emblemvault.io/s:evmetadata"),e.prev=1,e.next=4,fetch(t,{method:"GET",headers:{}});case 4:return r=e.sent,e.next=7,r.json();case 7:return o=e.sent,e.abrupt("return",n(o));case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",n(!1));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}(),Se=function(e){return console.log("contract",e),Te(e,b.p.covalAbi,!0)},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Te(e||b.p.emblemVault[T],b.p.emblemAbi,!0)},Ee=function(){return Te(b.p.nftrade[T],b.p.nftradeAbi,!0)},Te=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new w.a(e,t,n?M.getSigner(E).connectUnchecked():M)};Object(c.useEffect)((function(){E&&H!=E&&(K(E),W(!1))}),[E,H]),Object(c.useEffect)((function(){if(N){var e=setTimeout((function(){A(!1)}),750);return function(){clearTimeout(e)}}}),[N]),Object(c.useEffect)((function(){V||_||(z(!0),De(E,function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Y(t),We(),z(!1),W(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}));var Me=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Se(t),console.log("decimals",$),e.next=4,n.approve(b.p.nftrade[T],G*Math.pow(10,+$)).then((function(e){var t=e.hash;je(t)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,r=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:null,n=Ie(t),e.next=4,n.setApprovalForAll(b.p.nftrade[T],!0).then((function(e){var t=e.hash;je(t)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,r,o=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:null,n=Ie(t),e.next=4,n.isApprovedForAll(E,b.p.nftrade[T]);case 4:r=e.sent,ce(r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,c,u,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){return(i=Object(o.a)(a.a.mark((function e(t,o){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tokenOfOwnerByIndex(E,t);case 2:if(i=e.sent,c.push(i.toNumber()),!(t+1>=r)){e.next=8;break}return e.abrupt("return",o());case 8:return e.abrupt("return",u(t+1,o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)},u=function(e,t){return i.apply(this,arguments)},n=Ie(t),e.next=5,n.balanceOf(E);case 5:r=e.sent,c=[],u(0,(function(){ye(c)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ee(),e.next=3,t.addOffer(F.address,fe,b.p.emblemVault[T],r,ie*Math.pow(10,+$)).then((function(e){var t=e.hash;je(t)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ee(),e.next=3,n.withdrawOffer(b.p.emblemVault[T],r,t).then((function(e){var t=e.hash;je(t)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ee(),e.next=3,n.rejectOffer(b.p.emblemVault[T],r,t).then((function(e){var t=e.hash;je(t)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ee(),e.next=3,n.acceptOffer(b.p.emblemVault[T],r,t).then((function(e){var t=e.hash;je(t)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ve=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Se(t),e.next=3,n.decimals();case 3:return r=e.sent,ee(r),e.t0=re,e.next=8,n.allowance(E,b.p.nftrade[T]).then((function(e){return(e*Math.pow(10,-r)).toString()}));case 8:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=J,e.next=13,n.balanceOf(E).then((function(e){return(e*Math.pow(10,-r)).toString()}));case 13:e.t3=e.sent,(0,e.t2)(e.t3);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),We=function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,c,u,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(){return(s=Object(o.a)(a.a.mark((function e(o,s){var l,f,p,d,m,h,v,O,w;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w=function(){return o+1>=n?s():i(o+1,s)},e.next=3,t.getOffer(b.p.emblemVault[T],r,o);case 3:if(l=e.sent,console.log("-------",l),"0x0000000000000000000000000000000000000000"===l.token){e.next=38;break}return f={tokenId:l.tokenId.toNumber(),_from:l._from,token:l.token,amount:l.amount},p=Se(f.token),e.next=10,p.name();case 10:if(d=e.sent,console.log("----- name ----",d),f.name=d,f.index=o,f.address=f.token,console.log("----- offer tokenid ----",l.tokenId.toNumber()),0!=l.tokenId.toNumber()){e.next=31;break}return console.log("---------","herererererere"),e.next=20,p.decimals();case 20:return m=e.sent,e.next=23,p.symbol();case 23:h=e.sent,f.symbol=h,f.decimals=m,f.amount=f.amount.toNumber()*Math.pow(10,-m),c.push(f),f._from==E&&u.push(f),e.next=38;break;case 31:return v=Ie(f.token),e.next=34,v.tokenURI(f.tokenId);case 34:O=(O=e.sent).replace("ipfs://","https://gateway.ipfs.io/"),console.log("---------URI---------",O),Ce(O,(function(e){console.log("metadata",e),f.metadata=e,f.amount=l.amount.toNumber(),f.tokenId=l.tokenId.toNumber(),c.push(f),f._from==E&&u.push(f)}));case 38:w();case 39:case"end":return e.stop()}}),e)})))).apply(this,arguments)},i=function(e,t){return s.apply(this,arguments)},t=Ee(),e.next=5,t.getOfferCount(b.p.emblemVault[T],r);case 5:n=e.sent.toNumber(),console.log("------ offer count ------",n),C&&Ne(),c=[],u=[],n>0&&i(0,(function(){he(c),Oe(u),console.log("offers",c,u)}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),De=function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(y+"/"+O.d[T]+"/balance/"+t,{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata"}});case 2:return r=e.sent,e.next=5,r.json();case 5:return o=e.sent,e.abrupt("return",n(o.values));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return g(s.a,{isOpen:t,onClose:n,isCentered:!0},g(s.g,null),g(s.d,{color:b.d[S]},g(s.f,null,g(l.a,null,C?null:"Make"," Offer",C?"s":null," for: ",r)),g(s.c,null),g(s.b,null,C?null:g(f.a,{direction:"column"},g(f.a,{mt:"6"},g(l.a,null,"Choose your Offer Token"),g(p.a,{w:"100%",value:F.address,onChange:function(e){if("0"!==e.target.value){var t=U.filter((function(t){return t.address==e.target.value}))[0];q(t),pe(0),"ERC-20"==t.tokenType?Ve(t.address):Ae(t.address),console.log(U.filter((function(t){return t.address==e.target.value}))[0]),console.log(e.target.value)}}},g("option",{value:"0"},"Choose a Token"),U.map((function(e,t){if("native"!==e.tokenType)return g("option",{value:e.address},e.name)}))),F.balance>0&&"ERC-20"==F.tokenType&&ne>0?g(u.a.Fragment,null,g(l.a,null,"Max: ",G),g(d.a,{onChange:function(e){return se(e.target.value)}})):null),g(f.a,{direction:"row",justify:"center"},"ERC-20"==F.tokenType?G>0&&0==ne?g(m.a,{onClick:function(){Me(F.address)}},"Approve offer of ",F.name):F&&0==G?g(l.a,null,"Insufficient Balance"):g(m.a,{onClick:function(){Pe()}},"Make Offer"):ge.length>0?g(p.a,{width:"100%",onChange:function(e){"0"!==e.target.value&&(pe(Number(e.target.value)),Ne(F.address))}},g("option",{value:"0"},"Select TokenId"),ge.map((function(e,t){return g("option",{value:e},e)}))):null,F.name&&"ERC-20"!=F.tokenType&&!oe&&0!=fe?g(m.a,{width:"100%",onClick:function(){Re(F.address)}},"Approve ",F.name):F.name&&"ERC-20"!=F.tokenType&&oe?g(m.a,{onClick:function(){Pe()}},"Make Offer"):null),g(f.a,null,g(l.a,null,"My Offers"),ve.map((function(e,t){return g(k.a,null,e.metadata?g(h.a,{p:"5px",className:"d-block",src:e.metadata.image.replace("ipfs://","https://gateway.ipfs.io/"),width:"65px"}):null,g(l.a,null,e.name," ",e.amount>0?e.amount:e.tokenId),g(m.a,{onClick:function(){_e(e.index)}},"Withdraw Offer"))})))),C?g(f.a,{direction:"column"},oe?null:g(m.a,{onClick:function(){Re()}},"Allow accepting of Offers"),g(l.a,null,"Offers"),me.map((function(e,t){return g(k.a,null,e.metadata?g(h.a,{p:"5px",className:"d-block",src:e.metadata.image.replace("ipfs://","https://gateway.ipfs.io/"),width:"65px"}):null,g(l.a,{onClick:function(){Object(x.addTokenToWallet)(e)}},e.name," ",e.amount>0?e.amount:e.tokenId),g(m.a,{onClick:function(){ze(e.index)}},"Reject Offer"),oe?g(m.a,{onClick:function(){Be(e.index)}},"Accept Offer"):null)}))):null,ke?g(j.a,{hash:ke,onComplete:function(){je(null),W(!1)}}):null),g(s.e,null)))}},sd7e:function(e,t,n){var r=n("o0o1"),a=n("yXPU"),o=function(e){console.log(e),web3.currentProvider.sendAsync({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:e.address,symbol:e.symbol,decimals:e.decimals,image:e.image||"https://raw.githubusercontent.com/trustwallet/tokens/master/tokens/"+e.address+".png"}},id:Math.round(1e5*Math.random())},(function(e,t){}))};function c(e){return new Promise((function(t){return setTimeout(t,e)}))}e.exports={addTokenToWallet:o,addMany:function(){var e=a(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.reverse().pop(),n=t.pop(),o(n),e.next=5,c(1);case 5:return alert("Loading all tokens into wallet.."),e.next=8,c(1);case 8:t.reverse().forEach((function(e){return o(e)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},yXPU:function(e,t){function n(e,t,n,r,a,o,c){try{var u=e[o](c),i=u.value}catch(s){return void n(s)}u.done?t(i):Promise.resolve(i).then(r,a)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(a,o){var c=e.apply(t,r);function u(e){n(c,a,o,u,i,"next",e)}function i(e){n(c,a,o,u,i,"throw",e)}u(void 0)}))}}}}]);