(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[50,54,55],{ATmR:function(e,t,n){"use strict";var r=n("q1tI"),a=n("i8i4"),o=n("D7Da");var c=Object(r.forwardRef)((function(e,t){var n=e.children,c=e.container,u=e.isDisabled,i=void 0!==u&&u,s=e.onRendered,l=Object(r.useState)(null),f=l[0],p=l[1],d=Object(o.g)(n.ref,t);return Object(o.f)((function(){i||p(function(e){return e="function"===typeof e?e():e,Object(a.findDOMNode)(e)}(c)||document.body)}),[c,i]),Object(o.f)((function(){if(f&&!i)return Object(o.e)(t,f),function(){Object(o.e)(t,null)}}),[t,f,i]),Object(o.f)((function(){s&&(f||i)&&s()}),[s,f,i]),i?(r.Children.only(n),Object(r.cloneElement)(n,{ref:d})):f?Object(a.createPortal)(n,f):f}));c.displayName="Portal",t.a=c},CoEt:function(e,t,n){"use strict";var r=n("8OQS"),a=n.n(r),o=n("pVnL"),c=n.n(o),u=n("qKvR"),i=n("q1tI"),s=n("FpzS"),l=n("mf32"),f=n("BMxC"),p=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginBottom","marginLeft","marginRight","marginY","marginX","flex","flexBasis","width","minWidth","maxWidth","maxW","minW","w","zIndex","top","right","bottom","left","position","pos"],d=function(e){var t={},n={};for(var r in e)p.includes(r)?t[r]=e[r]:n[r]=e[r];return[t,n]},m=n("w0db"),b=function(e){var t=e.icon,n=a()(e,["icon"]);return"string"===typeof t?Object(u.d)(m.a,c()({focusable:"false",name:t,color:"currentColor"},n)):Object(u.d)(f.a,c()({as:t,"data-custom-icon":!0,focusable:"false",color:"currentColor"},n))},h=Object(i.forwardRef)((function(e,t){return Object(u.d)(f.a,c()({ref:t,position:"absolute",display:"inline-flex",width:"1.5rem",height:"100%",alignItems:"center",justifyContent:"center",right:"0.5rem",top:"50%",pointerEvents:"none",zIndex:2,transform:"translateY(-50%)"},e))})),v=Object(i.forwardRef)((function(e,t){var n=e.placeholder,r=e.children,o=a()(e,["placeholder","children"]);return Object(u.d)(s.a,c()({as:"select",appearance:"none",ref:t,pr:"2rem",pb:"px",lineHeight:"normal"},o),n&&Object(u.d)("option",{value:""},n),r)})),O=Object(i.forwardRef)((function(e,t){var n=e.rootProps,r=e.icon,o=e.iconSize,i=void 0===o?5:o,s=e.iconColor,p=a()(e,["rootProps","icon","iconSize","iconColor"]),m="dark"===Object(l.c)().colorMode?"whiteAlpha.800":"inherit",O=p.isReadOnly||p.isDisabled?.5:null,j=d(p),k=j[0],w=j[1];return Object(u.d)(f.a,c()({position:"relative",width:"100%"},k,n),Object(u.d)(v,c()({ref:t,color:m},w)),Object(u.d)(h,{opacity:O,color:s||w.color||m},Object(u.d)(b,{focusable:"false","aria-hidden":"true",icon:r||"chevron-down",size:i})))}));O.displayName="Select";t.a=O},D3uo:function(e,t,n){"use strict";n.r(t),n.d(t,"EMBLEM_API",(function(){return g})),n.d(t,"default",(function(){return x}));var r=n("o0o1"),a=n.n(r),o=n("HaE+"),c=n("q1tI"),u=n.n(c),i=n("mf32"),s=n("XZ7F"),l=n("IDkF"),f=n("sK1y"),p=n("Yn+B"),d=n("CoEt"),m=n("FpzS"),b=n("eJLp"),h=(n("+QRC"),n("N39q")),v=n("Z6YE"),O=n("iBPG"),j=n("8XlW"),k=n("zIq6"),w=u.a.createElement,g="https://api.emblemvault.io";function x(e){var t=e.isOpen,n=e.onClose,r=e.tokenId,x=e.mine,y=Object(i.c)().colorMode,C=Object(v.b)(),S=C.account,I=C.chainId,E=C.library,T=Object(c.useState)(!1),R=T[0],M=T[1],N=Object(c.useState)(!1),A=N[0],_=N[1],z=Object(c.useState)(!1),B=z[0],D=z[1],F=Object(c.useState)({address:"",balance:0,tokenType:"",name:""}),q=F[0],P=F[1],V=Object(c.useState)([]),W=V[0],L=V[1],Y=Object(c.useState)(0),G=Y[0],J=Y[1],U=Object(c.useState)(""),X=U[0],H=U[1],K=Object(c.useState)(0),Q=K[0],Z=K[1],$=Object(c.useState)(0),ee=$[0],te=$[1],ne=Object(c.useState)(!1),re=ne[0],ae=ne[1],oe=Object(c.useState)(0),ce=oe[0],ue=oe[1],ie=Object(c.useState)(0),se=ie[0],le=ie[1],fe=Object(c.useState)([]),pe=(fe[0],fe[1]),de=Object(c.useState)([]),me=(de[0],de[1]),be=Object(c.useState)(null),he=be[0],ve=be[1],Oe=Object(c.useState)([]),je=Oe[0],ke=Oe[1],we=Object(s.a)(),ge=(we.isOpen,we.onToggle,function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.replace("http://104.154.252.216","https://api.emblemvault.io/s:evmetadata"),e.prev=1,e.next=4,fetch(t,{method:"GET",headers:{}});case 4:return r=e.sent,e.next=7,r.json();case 7:return o=e.sent,e.abrupt("return",n(o));case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",n(!1));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()),xe=function(e){return console.log("contract",e),Se(e,h.p.covalAbi,!0)},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Se(e||h.p.emblemVault[I],h.p.emblemAbi,!0)},Ce=function(){return Se(h.p.nftrade[I],h.p.nftradeAbi,!0)},Se=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new j.a(e,t,n?E.getSigner(S).connectUnchecked():E)};Object(c.useEffect)((function(){S&&X!=S&&(H(S),D(!1))}),[S,X]),Object(c.useEffect)((function(){if(R){var e=setTimeout((function(){M(!1)}),750);return function(){clearTimeout(e)}}}),[R]),Object(c.useEffect)((function(){B||A||(_(!0),_e(S,function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L(t),Ae(),_(!1),D(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}));var Ie=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=xe(t),console.log("decimals",Q),e.next=4,n.approve(h.p.nftrade[I],G*Math.pow(10,+Q)).then((function(e){var t=e.hash;ve(t)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,r=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:null,n=ye(t),e.next=4,n.setApprovalForAll(h.p.nftrade[I],!0).then((function(e){var t=e.hash;ve(t)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Te=function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,r,o=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:null,n=ye(t),e.next=4,n.isApprovedForAll(S,h.p.nftrade[I]);case 4:r=e.sent,ae(r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Re=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,c,u,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){return(i=Object(o.a)(a.a.mark((function e(t,o){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tokenOfOwnerByIndex(S,t);case 2:if(i=e.sent,c.push(i.toNumber()),!(t+1>=r)){e.next=8;break}return e.abrupt("return",o());case 8:return e.abrupt("return",u(t+1,o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)},u=function(e,t){return i.apply(this,arguments)},n=ye(t),e.next=5,n.balanceOf(S);case 5:r=e.sent,c=[],u(0,(function(){ke(c)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ce(),e.next=3,t.addOffer(q.address,se,h.p.emblemVault[I],r,ce*Math.pow(10,+Q)).then((function(e){var t=e.hash;ve(t)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=xe(t),e.next=3,n.decimals();case 3:return r=e.sent,Z(r),e.t0=te,e.next=8,n.allowance(S,h.p.nftrade[I]).then((function(e){return(e*Math.pow(10,-r)).toString()}));case 8:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=J,e.next=13,n.balanceOf(S).then((function(e){return(e*Math.pow(10,-r)).toString()}));case 13:e.t3=e.sent,(0,e.t2)(e.t3);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,c,u,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(){return(s=Object(o.a)(a.a.mark((function e(o,s){var l,f,p,d,m,b,v,O,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j=function(){return o+1>=n?s():i(o+1,s)},e.next=3,t.getOffer(h.p.emblemVault[I],r,o);case 3:if(l=e.sent,console.log("-------",l),"0x0000000000000000000000000000000000000000"===l.token){e.next=38;break}return f={tokenId:l.tokenId.toNumber(),_from:l._from,token:l.token,amount:l.amount},p=xe(f.token),e.next=10,p.name();case 10:if(d=e.sent,console.log("----- name ----",d),f.name=d,f.index=o,f.address=f.token,console.log("----- offer tokenid ----",l.tokenId.toNumber()),0!=l.tokenId.toNumber()){e.next=31;break}return console.log("---------","herererererere"),e.next=20,p.decimals();case 20:return m=e.sent,e.next=23,p.symbol();case 23:b=e.sent,f.symbol=b,f.decimals=m,f.amount=f.amount.toNumber()*Math.pow(10,-m),c.push(f),f._from==S&&u.push(f),e.next=38;break;case 31:return v=ye(f.token),e.next=34,v.tokenURI(f.tokenId);case 34:O=(O=e.sent).replace("ipfs://","https://gateway.ipfs.io/"),console.log("---------URI---------",O),ge(O,(function(e){console.log("metadata",e),f.metadata=e,f.amount=l.amount.toNumber(),f.tokenId=l.tokenId.toNumber(),c.push(f),f._from==S&&u.push(f)}));case 38:j();case 39:case"end":return e.stop()}}),e)})))).apply(this,arguments)},i=function(e,t){return s.apply(this,arguments)},t=Ce(),e.next=5,t.getOfferCount(h.p.emblemVault[I],r);case 5:n=e.sent.toNumber(),console.log("------ offer count ------",n),x&&Te(),c=[],u=[],n>0&&i(0,(function(){pe(c),me(u),console.log("offers",c,u)}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(g+"/"+O.d[I]+"/balance/"+t,{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata"}});case 2:return r=e.sent,e.next=5,r.json();case 5:return o=e.sent,e.abrupt("return",n(o.values));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return w(l.a,{isOpen:t,onClose:n,isCentered:!0},w(l.g,null),w(l.d,{color:h.d[y]},w(l.f,null,w(f.a,null,x?null:"Make"," Offer",x?"s":null," for: ",r)),w(l.c,null),w(l.b,null,x?null:w(p.a,{direction:"column"},w(p.a,{mt:"6"},w(f.a,null,"Choose your Offer Token"),w(d.a,{w:"100%",value:q.address,onChange:function(e){if("0"!==e.target.value){var t=W.filter((function(t){return t.address==e.target.value}))[0];P(t),le(0),"ERC-20"==t.tokenType?Ne(t.address):Re(t.address),console.log(W.filter((function(t){return t.address==e.target.value}))[0]),console.log(e.target.value)}}},w("option",{value:"0"},"Choose a Token"),W.map((function(e,t){if("native"!==e.tokenType)return w("option",{value:e.address},e.name)}))),q.balance>0&&"ERC-20"==q.tokenType&&ee>0?w(u.a.Fragment,null,w(f.a,null,"Max: ",G),w(m.a,{onChange:function(e){return ue(e.target.value)}})):null),w(p.a,{direction:"row",justify:"center"},"ERC-20"==q.tokenType?G>0&&0==ee?w(b.a,{onClick:function(){Ie(q.address)}},"Approve offer of ",q.name):q&&0==G?w(f.a,null,"Insufficient Balance"):w(b.a,{onClick:function(){Me()}},"Make Offer"):je.length>0?w(d.a,{width:"100%",onChange:function(e){"0"!==e.target.value&&(le(Number(e.target.value)),Te(q.address))}},w("option",{value:"0"},"Select TokenId"),je.map((function(e,t){return w("option",{value:e},e)}))):null,q.name&&"ERC-20"!=q.tokenType&&!re&&0!=se?w(b.a,{width:"100%",onClick:function(){Ee(q.address)}},"Approve ",q.name):q.name&&"ERC-20"!=q.tokenType&&re?w(b.a,{onClick:function(){Me()}},"Make Offer"):null),w(p.a,null,w(f.a,null,"My Offers"))),x?w(p.a,{direction:"column"},re?null:w(b.a,{onClick:function(){Ee()}},"Allow accepting of Offers"),w(f.a,null,"Offers")):null,he?w(k.a,{hash:he,onComplete:function(){ve(null),D(!1)}}):null),w(l.e,null)))}}}]);