(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5206],{20640:function(e,t,r){"use strict";var o=r(11742),n={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var r,a,s,l,i,c,u,d,f=!1;t||(t={}),s=t.debug||!1;try{if(i=o(),c=document.createRange(),u=document.getSelection(),(d=document.createElement("span")).textContent=e,d.style.all="unset",d.style.position="fixed",d.style.top=0,d.style.clip="rect(0, 0, 0, 0)",d.style.whiteSpace="pre",d.style.webkitUserSelect="text",d.style.MozUserSelect="text",d.style.msUserSelect="text",d.style.userSelect="text",d.addEventListener("copy",function(r){if(r.stopPropagation(),t.format){if(r.preventDefault(),void 0===r.clipboardData){s&&console.warn("unable to use e.clipboardData"),s&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var o=n[t.format]||n.default;window.clipboardData.setData(o,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e)}t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))}),document.body.appendChild(d),c.selectNodeContents(d),u.addRange(c),!document.execCommand("copy"))throw Error("copy command was unsuccessful");f=!0}catch(o){s&&console.error("unable to copy using execCommand: ",o),s&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),f=!0}catch(o){s&&console.error("unable to copy using clipboardData: ",o),s&&console.error("falling back to prompt"),r="message"in t?t.message:"Copy to clipboard: #{key}, Enter",a=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C",l=r.replace(/#{\s*key\s*}/g,a),window.prompt(l,e)}}finally{u&&("function"==typeof u.removeRange?u.removeRange(c):u.removeAllRanges()),d&&document.body.removeChild(d),i()}return f}},63345:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return B}});var o=r(85893),n=r(67294),a=r(11163),s=r(77044),l=r(11987),i=r(45161),c=r(35541),u=r(46199),d=r(22243),f=r(64859),p=r(71293),m=r(66205),g=r(54346),h=r(51343),v=r(78125),b=r(25432),y=r(16554),x=r(77030),w=r(33179),k=r(65548),j=(0,y.G)(function(e,t){let r=(0,x.jC)("Switch",e),{spacing:a="0.5rem",children:s,...l}=(0,w.Lr)(e),{getIndicatorProps:i,getInputProps:c,getCheckboxProps:u,getRootProps:d,getLabelProps:f}=(0,v.O)(l),p=(0,n.useMemo)(()=>({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0,...r.container}),[r.container]),m=(0,n.useMemo)(()=>({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer",...r.track}),[r.track]),g=(0,n.useMemo)(()=>({userSelect:"none",marginStart:a,...r.label}),[a,r.label]);return(0,o.jsxs)(k.m.label,{...d(),className:(0,b.cx)("chakra-switch",e.className),__css:p,children:[(0,o.jsx)("input",{className:"chakra-switch__input",...c({},t)}),(0,o.jsx)(k.m.span,{...u(),className:"chakra-switch__track",__css:m,children:(0,o.jsx)(k.m.span,{__css:r.thumb,className:"chakra-switch__thumb",...i()})}),s&&(0,o.jsx)(k.m.span,{className:"chakra-switch__label",...f(),__css:g,children:s})]})});j.displayName="Switch";var C=r(33090),I=r(32883),_=r(14253),S=r(93108),D=r(20640),N=r.n(D),P=r(82174),F=r(59670),E=r(62368),T=r(11249);function B(e){let{isOpen:t,onClose:r}=e,{chainId:v,account:b}=(0,s.Ge)(),{colorMode:y,toggleColorMode:x}=(0,i.If)(),{pathname:w}=(0,a.useRouter)(),[k,D]=(0,F.u2)(),[B,O]=(0,F.xZ)(),[R,A]=(0,F.kX)(),[U,L]=(0,n.useState)("true"==localStorage.getItem("offline")),[K]=(0,F.GU)(),[M]=(0,F.HL)(),V=null;async function q(){b&&(await T.SZ.loadWeb3(),await T.SZ.refreshLegacyOwnership(window.web3,b))}if("number"==typeof v&&(K||M)&&("/buy"===w||"/sell"===w)){let e={[P.nV.CHAIN]:v,..."/buy"===w?{...K?{[P.nV.OUTPUT]:K.address}:{},...M?{[P.nV.INPUT]:M.address}:{}}:{...K?{[P.nV.INPUT]:K.address}:{},...M?{[P.nV.OUTPUT]:M.address}:{}}};V=(0,l.resolve)("https://emblem.finance","".concat(w,"?").concat(Object.entries(e).map(e=>{let[t,r]=e;return"".concat(t,"=").concat(r)}).join("&")))}let[G,Z]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(G){let e=setTimeout(()=>{Z(!1)},750);return()=>{clearTimeout(e)}}},[G]),(0,o.jsxs)(c.u_,{isOpen:t,onClose:r,isCentered:!0,children:[(0,o.jsx)(u.Z,{}),(0,o.jsxs)(d.h,{color:P.r$[y],children:[(0,o.jsx)(f.x,{children:(0,o.jsx)(p.x,{children:"Settings (Build #2021)"})}),(0,o.jsx)(m.o,{}),(0,o.jsx)(g.f,{children:(0,o.jsxs)(h.K,{direction:"column",children:[(0,o.jsxs)(h.K,{direction:"row",justify:"space-between",children:[(0,o.jsx)(p.x,{children:"Dark Mode"}),(0,o.jsx)(j,{isChecked:"dark"===y,onChange:x})]}),(0,o.jsxs)(h.K,{direction:"row",justify:"space-between",children:[(0,o.jsx)(p.x,{children:"API-Key"}),(0,o.jsx)(C.I,{type:"password",placeholder:"API Key",defaultValue:localStorage.getItem("apiKey")||"",onChange:e=>{localStorage.setItem("apiKey",e.target.value)},width:"80%"})]}),(0,o.jsx)(h.K,{direction:"row",justify:"space-between",children:(0,o.jsx)(I.r,{textAlign:"left",isTruncated:!0,onClick:async()=>{await (0,E.Lj)(),await q()},children:" Reset Cache "})}),(0,o.jsxs)(h.K,{direction:"row",justify:"space-between",children:[(0,o.jsx)(p.x,{children:"Offline Mode"}),(0,o.jsx)(j,{isChecked:U,onChange:e=>{let t=String(e.target.checked);localStorage.setItem("offline",t),L(e.target.checked)}})]})]})}),(0,o.jsxs)(_.m,{justifyContent:"space-between",children:["string"==typeof V&&(0,o.jsx)(S.z,{variant:"link",isDisabled:G,color:"blue.500",width:"min-content",onClick:()=>{try{window.navigator.share({title:"Emblem Vault",url:V}).catch(()=>{})}catch(t){var e;e=V,N()(e),Z(!0)}},children:G?"Copied":"Share Permalink"}),(0,o.jsx)(I.r,{href:"https://github.com/NoahZinsmeister/hypertext",target:"_blank",rel:"noopener noreferrer",color:"blue.500",children:"Based on Hypertext."})]})]})]})}},62368:function(e,t,r){"use strict";r.d(t,{Lj:function(){return n},Nj:function(){return s},ZO:function(){return a},_o:function(){return i},mv:function(){return c},pk:function(){return l}});let o=async()=>"indexedDB"in window?new Promise((e,t)=>{let r=indexedDB.open("MyDatabase",1);r.onerror=e=>{console.error("Database error:",e.target.error),t(e.target.error)},r.onsuccess=t=>{e(t.target.result)},r.onupgradeneeded=e=>{let t=e.target.result;t.objectStoreNames.contains("vaults")||t.createObjectStore("vaults",{keyPath:"tokenId"})}}):(console.error("IndexedDB is not supported by this browser."),null),n=async()=>new Promise((e,t)=>{let r=indexedDB.deleteDatabase("MyDatabase");r.onerror=e=>{console.error("Database error:",e.target.error),t(e.target.error)},r.onsuccess=()=>{e(!0)}}),a=async(e,t)=>{console.log("getVaults - start");let r=await o();if(!r)throw console.error("Failed to open database"),Error("Failed to open database");let n=r.transaction(["vaults"],"readonly").objectStore("vaults").getAll();return new Promise((r,o)=>{n.onsuccess=()=>{console.log("All vaults successfully retrieved from store"),r(n.result.filter(t=>{var r,o;return e===(null===(r=t.ownership)||void 0===r?void 0:r.status)||e===(null===(o=t.ownershipInfo)||void 0===o?void 0:o.status)}).filter(r=>{var o,n,a,s,l,i;return"claimed"==e?t===(null===(o=r.ownership)||void 0===o?void 0:o.claimedBy)||t===(null===(n=r.ownershipInfo)||void 0===n?void 0:n.claimedBy):"unminted"==e?(null===(a=r.ownership)||void 0===a?void 0:a.createdBy)===t||t===(null===(s=r.ownershipInfo)||void 0===s?void 0:s.createdBy):t===(null===(l=r.ownership)||void 0===l?void 0:l.owner)||t===(null===(i=r.ownershipInfo)||void 0===i?void 0:i.owner)}))},n.onerror=e=>{console.error("Error retrieving vaults from store:",e.target.error),o(e.target.error)}})},s=async e=>{console.log("getVaults - start");let t=await o();if(!t)throw console.error("Failed to open database"),Error("Failed to open database");let r=t.transaction(["vaults"],"readonly").objectStore("vaults").get(e);return new Promise((e,t)=>{r.onsuccess=()=>{console.log("All vaults successfully retrieved from store"),e(r.result)},r.onerror=e=>{console.error("Error retrieving vaults from store:",e.target.error),t(e.target.error)}})},l=async e=>{console.log("useDB - start");let t=await o();if(!t)throw console.error("Failed to open database"),Error("Failed to open database");let r=t.transaction(["vaults"],"readwrite"),n=r.objectStore("vaults");return new Promise((o,a)=>{e.forEach((e,t)=>{if(console.log("Processing item ".concat(t),e),!e.tokenId){console.error("Item missing tokenId:",e);return}let r=n.get(e.tokenId);r.onsuccess=()=>{console.log("Got vault ".concat(e.tokenId," from store")),r.result||(console.error("Item missing tokenId:",e),o(u(n,e,t,a))),r&&r.result&&!r.result.addresses&&o(u(n,e,t,a))},r.onerror=r=>{console.error("Item missing tokenId:",e),o(u(n,e,t,a))}}),r.oncomplete=()=>{console.log("Transaction complete"),t.close(),o(!0)},r.onerror=e=>{console.error("Transaction error:",e.target.error),t.close(),a(e.target.error)}})},i=async e=>{console.log("useDB - start");let t=await o();if(!t)throw console.error("Failed to open database"),Error("Failed to open database");let r=t.transaction(["vaults"],"readwrite"),n=r.objectStore("vaults");return new Promise((o,a)=>{let s=n.put(e);s.onsuccess=()=>{console.log("Item ".concat(e.tokenId," successfully put into store"))},s.onerror=e=>{console.error("Error putting item ".concat(index," into store:"),e.target.error),a(e.target.error)},r.oncomplete=()=>{console.log("Transaction complete"),t.close(),o(!0)},r.onerror=e=>{console.error("Transaction error:",e.target.error),t.close(),a(e.target.error)}})},c=async e=>{console.log("deleteVaultFromDatabase - start");let t=await o();if(!t)throw console.error("Failed to open database"),Error("Failed to open database");let r=t.transaction(["vaults"],"readwrite"),n=r.objectStore("vaults");return new Promise((o,a)=>{(function(e,t,r,o){let n=e.delete(t);n.onsuccess=()=>{console.log("Item ".concat(r," successfully deleted from store"))},n.onerror=e=>{console.error("Error deleting item ".concat(r," from store:"),e.target.error),o(e.target.error)}})(n,e,e,a),r.oncomplete=()=>{console.log("Transaction complete"),t.close(),o(!0)},r.onerror=e=>{console.error("Transaction error:",e.target.error),t.close(),a(e.target.error)}})};function u(e,t,r,o){let n=e.put(t);return n.onsuccess=()=>{console.log("Item ".concat(r," successfully put into store"))},n.onerror=e=>{console.error("Error putting item ".concat(r," into store:"),e.target.error),o(e.target.error)},n}},11742:function(e){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,r=[],o=0;o<e.rangeCount;o++)r.push(e.getRangeAt(o));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||r.forEach(function(t){e.addRange(t)}),t&&t.focus()}}},75068:function(e,t,r){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,o(e,t)}r.d(t,{Z:function(){return n}})},63366:function(e,t,r){"use strict";function o(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}r.d(t,{Z:function(){return o}})},28912:function(e,t,r){"use strict";r.d(t,{K:function(){return s},Y:function(){return a}});var o=r(85970),n=r(25432);function a(e){let{isDisabled:t,isInvalid:r,isReadOnly:o,isRequired:a,...l}=s(e);return{...l,disabled:t,readOnly:o,required:a,"aria-invalid":(0,n.Qm)(r),"aria-required":(0,n.Qm)(a),"aria-readonly":(0,n.Qm)(o)}}function s(e){var t,r,a;let s=(0,o.NJ)(),{id:l,disabled:i,readOnly:c,required:u,isRequired:d,isInvalid:f,isReadOnly:p,isDisabled:m,onFocus:g,onBlur:h,...v}=e,b=e["aria-describedby"]?[e["aria-describedby"]]:[];return(null==s?void 0:s.hasFeedbackText)&&(null==s?void 0:s.isInvalid)&&b.push(s.feedbackId),(null==s?void 0:s.hasHelpText)&&b.push(s.helpTextId),{...v,"aria-describedby":b.join(" ")||void 0,id:null!=l?l:null==s?void 0:s.id,isDisabled:null!=(t=null!=i?i:m)?t:null==s?void 0:s.isDisabled,isReadOnly:null!=(r=null!=c?c:p)?r:null==s?void 0:s.isReadOnly,isRequired:null!=(a=null!=u?u:d)?a:null==s?void 0:s.isRequired,isInvalid:null!=f?f:null==s?void 0:s.isInvalid,onFocus:(0,n.v0)(null==s?void 0:s.onFocus,g),onBlur:(0,n.v0)(null==s?void 0:s.onBlur,h)}}},85970:function(e,t,r){"use strict";r.d(t,{NI:function(){return h},NJ:function(){return g},Q6:function(){return v},e:function(){return p}});var o=r(55227),n=r(81103),a=r(16554),s=r(77030),l=r(33179),i=r(65548),c=r(25432),u=r(67294),d=r(85893),[f,p]=(0,o.k)({name:"FormControlStylesContext",errorMessage:"useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<FormControl />\" "}),[m,g]=(0,o.k)({strict:!1,name:"FormControlContext"}),h=(0,a.G)(function(e,t){let r=(0,s.jC)("Form",e),{getRootProps:o,htmlProps:a,...p}=function(e){let{id:t,isRequired:r,isInvalid:o,isDisabled:a,isReadOnly:s,...l}=e,i=(0,u.useId)(),d=t||`field-${i}`,f=`${d}-label`,p=`${d}-feedback`,m=`${d}-helptext`,[g,h]=(0,u.useState)(!1),[v,b]=(0,u.useState)(!1),[y,x]=(0,u.useState)(!1),w=(0,u.useCallback)((e={},t=null)=>({id:m,...e,ref:(0,n.lq)(t,e=>{e&&b(!0)})}),[m]),k=(0,u.useCallback)((e={},t=null)=>({...e,ref:t,"data-focus":(0,c.PB)(y),"data-disabled":(0,c.PB)(a),"data-invalid":(0,c.PB)(o),"data-readonly":(0,c.PB)(s),id:void 0!==e.id?e.id:f,htmlFor:void 0!==e.htmlFor?e.htmlFor:d}),[d,a,y,o,s,f]),j=(0,u.useCallback)((e={},t=null)=>({id:p,...e,ref:(0,n.lq)(t,e=>{e&&h(!0)}),"aria-live":"polite"}),[p]),C=(0,u.useCallback)((e={},t=null)=>({...e,...l,ref:t,role:"group","data-focus":(0,c.PB)(y),"data-disabled":(0,c.PB)(a),"data-invalid":(0,c.PB)(o),"data-readonly":(0,c.PB)(s)}),[l,a,y,o,s]);return{isRequired:!!r,isInvalid:!!o,isReadOnly:!!s,isDisabled:!!a,isFocused:!!y,onFocus:()=>x(!0),onBlur:()=>x(!1),hasFeedbackText:g,setHasFeedbackText:h,hasHelpText:v,setHasHelpText:b,id:d,labelId:f,feedbackId:p,helpTextId:m,htmlProps:l,getHelpTextProps:w,getErrorMessageProps:j,getRootProps:C,getLabelProps:k,getRequiredIndicatorProps:(0,u.useCallback)((e={},t=null)=>({...e,ref:t,role:"presentation","aria-hidden":!0,children:e.children||"*"}),[])}}((0,l.Lr)(e)),g=(0,c.cx)("chakra-form-control",e.className);return(0,d.jsx)(m,{value:p,children:(0,d.jsx)(f,{value:r,children:(0,d.jsx)(i.m.div,{...o({},t),className:g,__css:r.container})})})});h.displayName="FormControl";var v=(0,a.G)(function(e,t){let r=g(),o=p(),n=(0,c.cx)("chakra-form__helper-text",e.className);return(0,d.jsx)(i.m.div,{...null==r?void 0:r.getHelpTextProps(e,t),__css:o.helperText,className:n})});v.displayName="FormHelperText"},33090:function(e,t,r){"use strict";r.d(t,{I:function(){return u}});var o=r(28912),n=r(16554),a=r(77030),s=r(33179),l=r(65548),i=r(25432),c=r(85893),u=(0,n.G)(function(e,t){let{htmlSize:r,...n}=e,u=(0,a.jC)("Input",n),d=(0,s.Lr)(n),f=(0,o.Y)(d),p=(0,i.cx)("chakra-input",e.className);return(0,c.jsx)(l.m.input,{size:r,...f,__css:u.field,ref:t,className:p})});u.displayName="Input",u.id="Input"},32883:function(e,t,r){"use strict";r.d(t,{r:function(){return c}});var o=r(16554),n=r(77030),a=r(33179),s=r(65548),l=r(25432),i=r(85893),c=(0,o.G)(function(e,t){let r=(0,n.mq)("Link",e),{className:o,isExternal:c,...u}=(0,a.Lr)(e);return(0,i.jsx)(s.m.a,{target:c?"_blank":void 0,rel:c?"noopener":void 0,ref:t,className:(0,l.cx)("chakra-link",o),...u,__css:r})});c.displayName="Link"},14253:function(e,t,r){"use strict";r.d(t,{m:function(){return i}});var o=r(35541),n=r(25432),a=r(16554),s=r(65548),l=r(85893),i=(0,a.G)((e,t)=>{let{className:r,...a}=e,i=(0,n.cx)("chakra-modal__footer",r),c={display:"flex",alignItems:"center",justifyContent:"flex-end",...(0,o.I_)().footer};return(0,l.jsx)(s.m.footer,{ref:t,...a,__css:c,className:i})});i.displayName="ModalFooter"},35155:function(e,t,r){"use strict";r.d(t,{W:function(){return n}});var o=r(67294);function n(e,t=[]){let r=(0,o.useRef)(e);return(0,o.useEffect)(()=>{r.current=e}),(0,o.useCallback)((...e)=>{var t;return null==(t=r.current)?void 0:t.call(r,...e)},t)}}}]);