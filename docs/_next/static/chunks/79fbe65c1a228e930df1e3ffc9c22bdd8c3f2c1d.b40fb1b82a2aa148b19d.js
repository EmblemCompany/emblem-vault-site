(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[26],{ePsk:function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));var a=n("o0o1"),r=n.n(a),o=n("HaE+"),c=n("q1tI"),i=n.n(c),s=n("XZ7F"),u=n("mf32"),l=n("BMxC"),f=n("Weur"),p=n("Yn+B"),d=n("eJLp"),m=n("sK1y"),g=n("pboS"),h=n("wCB1"),b=n("FpzS"),v=n("IP4Q"),w=n("MKZ1"),O=n("LqLE"),S=n("bQFp"),j=n("wZsY"),y=n("8Kt/"),k=n.n(y),x=n("Z6YE"),C=n("nOHt"),T=n("Ute3"),N=n("a6RD"),A=n.n(N),I=n("8XlW"),E=n("zIq6"),_=n("N39q"),M=n("21eR"),H=n("iBPG"),F=n("NFKh"),P=n.n(F),V=n("IujW"),L=n.n(V),D=n("wH4i"),G=n.n(D),W=n("PLxQ"),J=n("zNBI"),K=n("fksj"),B=(n("Q/0U"),n("r9y0")),R=n("diTF"),U=n("PSLY"),q=n("FGWJ"),z=i.a.createElement,X=A()((function(){return Promise.all([n.e(13),n.e(16),n.e(28)]).then(n.bind(null,"X/Jl"))}),{loadableGenerated:{webpack:function(){return["X/Jl"]},modules:["./AddrModal"]}}),Y=A()((function(){return Promise.all([n.e(13),n.e(16),n.e(29)]).then(n.bind(null,"0bCS"))}),{loadableGenerated:{webpack:function(){return["0bCS"]},modules:["./KeysModal"]}}),Z=A()((function(){return Promise.all([n.e(13),n.e(16),n.e(30)]).then(n.bind(null,"D3uo"))}),{loadableGenerated:{webpack:function(){return["D3uo"]},modules:["./OfferModal"]}});function $(){var e=Object(x.b)(),t=e.account,n=e.chainId,a=e.library,y=Object(C.useRouter)(),N=y.query,A=Object(c.useState)("t"==N.cc),F=A[0],V=(A[1],Object(c.useState)("t"==N.curated)),D=V[0],$=(V[1],Object(c.useState)({name:"",chain:""})),Q=$[0],ee=$[1],te=Object(c.useState)(!1),ne=te[0],ae=te[1],re=Object(c.useState)(!1),oe=re[0],ce=re[1],ie=Object(c.useState)(N.useOldMint),se=(ie[0],ie[1],Object(c.useState)(N.key)),ue=se[0],le=se[1],fe=Object(c.useState)(N.offer||!1),pe=fe[0],de=(fe[1],Object(c.useState)(N.framed||!0)),me=de[0],ge=(de[1],Object(c.useState)(N.id)),he=ge[0],be=(ge[1],Object(c.useState)(N.experimental)),ve=(be[0],be[1],Object(c.useState)(N.noLayout)),we=(ve[0],ve[1],Object(c.useState)(N.slideshowOnly||!1)),Oe=we[0],Se=(we[1],Object(c.useState)("")),je=Se[0],ye=Se[1],ke=Object(c.useState)(""),xe=ke[0],Ce=ke[1],Te=Object(c.useState)(""),Ne=Te[0],Ae=Te[1],Ie=Object(c.useState)(""),Ee=Ie[0],_e=Ie[1],Me=Object(c.useState)(""),He=Me[0],Fe=Me[1],Pe=Object(c.useState)(""),Ve=Pe[0],Le=Pe[1],De=Object(c.useState)(""),Ge=De[0],We=De[1],Je=Object(c.useState)([]),Ke=Je[0],Be=Je[1],Re=Object(c.useState)(!1),Ue=Re[0],qe=Re[1],ze=Object(c.useState)([]),Xe=ze[0],Ye=ze[1],Ze=Object(c.useState)([]),$e=Ze[0],Qe=Ze[1],et=Object(c.useState)([]),tt=et[0],nt=et[1],at=Object(c.useState)(!1),rt=at[0],ot=at[1],ct=Object(c.useState)(0),it=ct[0],st=ct[1],ut=Object(c.useState)(null),lt=ut[0],ft=ut[1],pt=Object(c.useState)(null),dt=(pt[0],pt[1]),mt=Object(c.useState)(null),gt=mt[0],ht=mt[1],bt=Object(c.useState)(""),vt=bt[0],wt=bt[1],Ot=Object(c.useState)(""),St=Ot[0],jt=Ot[1],yt=Object(c.useState)({loaded:!1}),kt=(yt[0],yt[1]),xt=Object(c.useState)(!1),Ct=xt[0],Tt=xt[1],Nt=Object(c.useState)(!1),At=Nt[0],It=Nt[1],Et=Object(c.useState)("claimed"),_t=Et[0],Mt=Et[1],Ht=Object(c.useState)(!1),Ft=Ht[0],Pt=Ht[1],Vt=Object(c.useState)(null),Lt=Vt[0],Dt=Vt[1],Gt=Object(c.useState)(""),Wt=Gt[0],Jt=Gt[1],Kt=Object(c.useState)(""),Bt=Kt[0],Rt=Kt[1],Ut=Object(c.useState)(""),qt=Ut[0],zt=Ut[1],Xt=Object(c.useState)([]),Yt=Xt[0],Zt=Xt[1],$t=Object(c.useState)(!1),Qt=$t[0],en=$t[1],tn=Object(c.useState)(""),nn=tn[0],an=tn[1],rn=Object(c.useState)(!1),on=rn[0],cn=rn[1],sn=Object(c.useState)(""),un=sn[0],ln=sn[1],fn=Object(c.useState)(!1),pn=fn[0],dn=fn[1],mn=Object(c.useState)(!1),gn=(mn[0],mn[1],Object(c.useState)(!1)),hn=gn[0],bn=gn[1],vn=Object(c.useState)(!1),wn=vn[0],On=vn[1],Sn=Object(c.useState)(!1),jn=Sn[0],yn=Sn[1],kn=Object(c.useState)(""),xn=kn[0],Cn=(kn[1],Object(c.useState)(!1)),Tn=Cn[0],Nn=Cn[1],An=Object(c.useState)(!1),In=An[0],En=An[1],_n=Object(c.useState)(null),Mn=(_n[0],_n[1],Object(c.useState)(!1)),Hn=Mn[0],Fn=Mn[1],Pn=Object(c.useState)(null),Vn=Pn[0],Ln=Pn[1],Dn=Object(c.useState)(!1),Gn=Dn[0],Wn=Dn[1],Jn=Object(c.useState)(null),Kn=(Jn[0],Jn[1]),Bn=Object(c.useState)(null),Rn=(Bn[0],Bn[1]),Un=Object(c.useState)(null),qn=(Un[0],Un[1]),zn=Object(c.useState)(null),Xn=zn[0],Yn=zn[1],Zn=Object(c.useState)(!1),$n=Zn[0],Qn=Zn[1],ea=Object(c.useState)(!1),ta=ea[0],na=ea[1],aa=Object(c.useState)(!1),ra=aa[0],oa=aa[1],ca=Object(c.useState)(!1),ia=(ca[0],ca[1]),sa=Object(c.useState)(null),ua=sa[0],la=sa[1],fa=Object(c.useState)({name:"",image:"",metadata:""}),pa=(fa[0],fa[1]),da=Object(c.useState)({name:"",chain:"",4:"",1:"",tokenId:{},serialNumber:{hex:""}}),ma=da[0],ga=da[1],ha=Object(c.useState)(!1),ba=ha[0],va=ha[1],wa=Object(c.useState)(null),Oa=wa[0],Sa=wa[1],ja=Object(c.useState)(null),ya=ja[0],ka=ja[1],xa=Object(c.useState)(null),Ca=(xa[0],xa[1]),Ta=Object(c.useState)(null),Na=Ta[0],Aa=Ta[1],Ia=Object(M.b)(_.p.vaultHandler[n],_.p.vaultHandlerAbi,!0),Ea=Object(M.b)(_.p.vaultHandlerV8[n],_.p.vaultHandlerV8Abi,!0),_a=Object(M.b)(_.p.emblemVault[n],_.p.emblemAbi,!0),Ma=Object(M.b)(_.p.coval[n],_.p.covalAbi,!0),Ha=Object(s.a)(),Fa=Ha.isOpen,Pa=Ha.onOpen,Va=Ha.onClose,La=Object(s.a)(),Da=La.isOpen,Ga=La.onOpen,Wa=La.onClose,Ja=Object(s.a)(),Ka=Ja.isOpen,Ba=Ja.onOpen,Ra=Ja.onClose,Ua=Object(s.a)(),qa=(Ua.isOpen,Ua.onToggle,Object(s.a)()),za=qa.isOpen,Xa=qa.onToggle,Ya=Object(u.c)().colorMode,Za=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new I.a(e,_.p.erc1155Abi,a.getSigner(t).connectUnchecked())},$a=function(e,t){return fetch(_.g+"/liveliness",{method:"POST",headers:{"Content-Type":"application/json",service:"evmetadata",chainid:n.toString()},body:JSON.stringify({tokenId:e})}).then(function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:n=e.sent,Wn(n.live),console.log("Liveliness check",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t()},Qa=function(e,n,a){console.log("Delayed Minting"),Qn(!1),na(!0),oa(!0);var r=tt.filter((function(e){return"ETH"==e.coin}))[0].address;Ia.buyWithSignature2(t,he,r,e,n,a).then((function(e){var t=e.hash;setTimeout((function(){ht(t),na(!1)}),100)})).catch((function(e){console.log("AAAAAHHHHHH",e),na(!1)}))},er=function(){var e=Object(o.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getvault"),e.next=3,fetch(_.g+"/meta/"+he+"?experimental=true"+(F?"&_vercel_no_cache=1":""),{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata",cc:F?"t":""}});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,ar(n),n.image_ipfs,n.collectionAddress&&(ia(!0),la(n.collectionAddress)),n.name?(en(!1),dn(!1)):(kt({loaded:!0}),dn(!0)),!rt&&!Ue&&or([],he,(function(e){e&&Be(e)})),n.targetContract&&setTimeout((function(){location.href=location.origin+"/nft2?id="+n.targetContract.tokenId}),500);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tr=function(){var e=Object(o.a)(r.a.mark((function e(t){var a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(_.g+"/witness/"+he,{method:"GET",headers:{"Content-Type":"application/json",cc:"t",service:"evmetadata",chainid:n.toString()}});case 2:return a=e.sent,e.next=5,a.json();case 5:if(!(o=e.sent).signature){e.next=11;break}return console.log("witness",o),e.abrupt("return",t(o));case 11:return e.abrupt("return",t(!1));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nr=function(){var e=Object(o.a)(r.a.mark((function e(){var t,n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("-----------------------------------",Ke.length,$e.length),1==Ke.length&&$e.length>0&&(t=$e.filter((function(e){return e.value==Ke[0].name}))).length>0&&(n=t[0].trait_type,(a=_.r.filter((function(e){return e.name==n}))).length>0&&ee(a[0]));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ar=function(e){me&&e.image&&!e.image.includes("framed=")&&!e.image.includes("http")&&(e.image=e.image+"&framed="+me),e.ciphertextV2&&(_e(e.ciphertextV2),console.log("ciphertextV2",e.ciphertextV2)),ye(e.name),Le(e.image),We(e.ownedImage||null),Fe(e.description),st(e.totalValue||0),e.values&&Be(Ke.concat(e.values)),e.attributes&&Ye(e.attributes.filter((function(e){return"key"===e.trait_type}))),e.attributes&&Qe(e.attributes),nt(e.addresses),Ce(e.ipfs||null),Ae(e.image_ipfs||null),e.targetAsset&&pa(e.targetAsset),e.targetContract&&ga(e.targetContract),e.targetContract&&setTimeout((function(){location.href=location.origin+"/nft2?id="+e.targetContract.tokenId}),500),0==e.live&&$a(e.tokenId,(function(){})),Wn(0!=e.live),Kn(e.nonce),qn(e.signature),Yn(e.to),dt(e.network),ft("mainnet"==e.network?1:"rinkeby"==e.network?4:"mumbai"==e.network?80001:"matic"==e.network?137:"xdai"==e.network?100:"bsc"==e.network?56:"fantom"==e.network?250:"bitcoin"==e.network?0:"aurora"==e.network?1313161554:97),Mt(e.status),"claimed"===_t&&Dt(e.claimedBy),kt({loaded:!0});var t=e.addresses.filter((function(e){return e.address.includes("private:")})).length>0;ot(t),e.sealed?Pt(!0):Pt(!1),nr()},rr=function(){var e=Object(o.a)(r.a.mark((function e(t,n,a){var o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(_.g+"/vault/balance/"+n,{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata"}});case 2:return o=e.sent,e.next=5,o.json();case 5:if(c=e.sent,console.log("responce",o,c),!(c.balances.length>0)){e.next=11;break}return e.abrupt("return",a(t.concat(c.balances)));case 11:return e.abrupt("return",a(t));case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),or=function(){var e=Object(o.a)(r.a.mark((function e(t,n,a){var o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ue){e.next=2;break}return e.abrupt("return",a(!1));case 2:return qe(!0),e.next=5,fetch(_.g+"/vault/balance/"+n+"?live=true&_vercel_no_cache=1",{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata"}});case 5:return o=e.sent,e.next=8,o.json();case 8:if(c=e.sent,console.log("responce",o,c),!(c.balances.length>0)){e.next=14;break}return e.abrupt("return",a(t.concat(c.balances)));case 14:return e.abrupt("return",a(t));case 15:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),cr=function(){var e=Object(o.a)(r.a.mark((function e(t,n,a,o){var c,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(_.g+"/vault/balance/"+n+"/"+a,{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata"}});case 2:return c=e.sent,e.next=5,c.json();case 5:if(i=e.sent,console.log("responce",c,i),!(i.balances.length>0)){e.next=11;break}return e.abrupt("return",o(t.concat(i.balances)));case 11:return e.abrupt("return",o(t));case 12:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),ir=function(){var e=localStorage.getItem(t+"_"+n+"_"+he+"_mintPassword");e&&jn&&le(e)},sr=function(){var e=Object(o.a)(r.a.mark((function e(t,a,o){var c,i,s,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=new Headers).append("chainid",n.toString()),c.append("Content-Type","application/json"),i=JSON.stringify({signature:t,tokenId:a}),e.next=6,fetch(_.n+"/sign",{method:"POST",headers:c,body:i,redirect:"follow"});case 6:return s=e.sent,e.next=9,s.json();case 9:return u=e.sent,e.abrupt("return",o(u));case 11:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();function ur(e,t,n){return lr.apply(this,arguments)}function lr(){return(lr=Object(o.a)(r.a.mark((function e(t,n,a){var o,c,i,s,u,l,f;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new U.a({network:"mainnet"}),c=new q.a({enableOneKey:!0,network:"mainnet"}),e.next=4,o.getNodeDetails({verifier:"tor-us-signer-vercel",verifierId:t});case 4:return i=e.sent,s=i.torusNodeEndpoints,u=i.torusIndexes,e.next=9,c.retrieveShares(s,u,"tor-us-signer-vercel",{verifier_id:t},n);case 9:return l=e.sent,f=l.privKey,e.abrupt("return",a({privateKey:f}));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fr=function(){var e=Object(o.a)(r.a.mark((function e(t,a,o,c){var i,s,u,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=new Headers).append("chainId",n.toString()),i.append("service","evmetadata"),i.append("Content-Type","application/json"),s=JSON.stringify({signature:t,coin:o}),e.next=7,fetch(_.g+"/address/"+a,{method:"POST",headers:i,body:s,redirect:"follow"});case 7:return u=e.sent,e.next=10,u.json();case 10:return l=e.sent,e.abrupt("return",c(l));case 12:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),pr=function(){var e=Object(o.a)(r.a.mark((function e(t,a,o){var c,i,s,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=new Headers).append("chainId",n.toString()),c.append("service","evmetadata"),c.append("Content-Type","application/json"),i=JSON.stringify({signature:t}),e.next=7,fetch(_.g+"/embed/"+a,{method:"POST",headers:c,body:i,redirect:"follow"});case 7:return s=e.sent,e.next=10,s.json();case 10:return u=e.sent,e.abrupt("return",o(u));case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),dr=function(){var e=Object(o.a)(r.a.mark((function e(){var a,c,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=function(){return(i=Object(o.a)(r.a.mark((function e(){var o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ia.getPreTransfer(he);case 2:if(o=e.sent,!ma[n]){e.next=9;break}return e.next=6,_a.isApprovedForAll(t,_.p.vaultHandlerV8[n]);case 6:c=e.sent,e.next=12;break;case 9:return e.next=11,_a.isApprovedForAll(t,_.p.vaultHandler[n]);case 11:c=e.sent;case 12:ce(c),yn("0x0000000000000000000000000000000000000000"!==o._from),Ln(a),Tt(a===t||Xn==t),ir();case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)},c=function(){return i.apply(this,arguments)},console.log("Contract states"),!1,e.prev=4,!ma[n]){e.next=14;break}return console.log("Checking owner wth targetContract"),_a=Za(ma[n]),e.next=10,_a.getOwnerOfSerial(ma.serialNumber);case 10:a=e.sent,console.log("--------------------------- owner",a,oe,t,_.p.vaultHandlerV8[n]),e.next=22;break;case 14:if(!Gn){e.next=20;break}return e.next=17,_a.ownerOf(he);case 17:e.t0=e.sent,e.next=21;break;case 20:e.t0=0;case 21:a=e.t0;case 22:return e.t1=Sa,e.next=25,Ma.decimals();case 25:return e.t2=e.sent,(0,e.t1)(e.t2),e.t3=ka,e.next=30,Ma.allowance(t,_.p.vaultHandler[n]).then((function(e){return e.toString()}));case 30:return e.t4=e.sent,(0,e.t3)(e.t4),e.t5=Ca,e.next=35,Ma.balanceOf(t).then((function(e){return e.toString()}));case 35:return e.t6=e.sent,(0,e.t5)(e.t6),e.t7=Aa,e.next=40,Ia.price().then((function(e){return e.toString()}));case 40:e.t8=e.sent,(0,e.t7)(e.t8),Number(ya)>=Number(Na)?va(!0):va(!1),c(),e.next=51;break;case 46:e.prev=46,e.t9=e.catch(4),console.log("-------",e.t9),a="0x0000000000000000000000000000000000000000",c();case 51:case"end":return e.stop()}}),e,null,[[4,46]])})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){console.log("mine?",Ct),console.log("claiming?",At),console.log("accepting?",hn),console.log("acceptable",jn),console.log("qualified",Q)}));var mr=function(e){return console.log(e,tt.filter((function(t){return t.coin==e})).length>0),tt.filter((function(t){return t.coin==e})).length>0},gr=function(){var e=Object(o.a)(r.a.mark((function e(c){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.getSigner(t).signMessage("Renew: "+he).then((function(e){var t=tt.filter((function(e){return"NMC"==e.coin}))[0].address;console.log("signature",e,c),fetch(_.g+"/nmc/renew/"+t,{method:"POST",headers:{"Content-Type":"application/json",service:"evmetadata",chainid:n.toString()},body:JSON.stringify({tokenId:he,signature:e,name:c})}).then(function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:n=e.sent,console.log("Requested Renew",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),hr=function(){var e=Object(o.a)(r.a.mark((function e(){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ma[n]){e.next=5;break}return _a=Za(ma[n]),e.next=4,_a.getSerial(ma.tokenId,0);case 4:c=e.sent;case 5:a.getSigner(t).signMessage("Claim: "+(ma[n]?c:he)).then((function(e){sr(e,he,(function(e){ur(he,e.token,function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=P.a.AES.decrypt(Ee,t.privateKey),a=JSON.parse(n.toString(P.a.enc.Utf8)),Zt(a.values),Jt(a.phrase),tt.forEach(function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("STX"!=t.coin){e.next=6;break}return e.next=3,br(t,a.phrase);case 3:t.key=e.sent,e.next=7;break;case 6:t.key=window.phrasePathToKey(a.phrase,t.path);case 7:"BTC"==t.coin&&Rt(t.key),"ETH"==t.coin&&zt(t.key);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,void(localStorage.getItem(he+"-v")||fetch(_.g+"/sync/"+he,{method:"POST",headers:{"Content-Type":"application/json",service:"evmetadata"}}).then(function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.setItem(he+"-v","1"),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){return!1})));case 12:setTimeout((function(){location.href=location.href}),2e3);case 13:Ga();case 14:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}))}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),br=function(){var e=Object(o.a)(r.a.mark((function e(t,n){var a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.a)({secretKey:n,password:""});case 2:return a=e.sent,console.log("------ stacks account -",a.accounts[0]),o=a.accounts[0],t.key=o.stxPrivateKey,e.abrupt("return",t.key);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),vr=function(){var e=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.getSigner(t).signMessage("HideAsset: "+he).then((function(e){console.log("----------------------------------------------------------------",e),console.log(n.name,n.coin,n.address),wr(he,n.coin,n.address,n.name,e,(function(){console.log("Done hiding coin and getting new balances")}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function wr(e,t,a,c,i,s){fetch(_.g+"/hide/"+e,{method:"POST",headers:{"Content-Type":"application/json",service:"evmetadata",chainid:n.toString()},body:JSON.stringify({coin:t||null,address:a||null,name:c||null,signature:i||null})}).then(function(){var t=Object(o.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.json();case 2:a=t.sent,console.log("-------",a),rr([],e,(function(e){return Be(e),s()}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}var Or=function(){var e=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.getSigner(t).signMessage("Address: "+he).then((function(e){fr(e,he,n,(function(e){er()}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Sr=function(){var e=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.getSigner(t).signMessage("Embed: "+he).then((function(e){pr(e,he,(function(e){Le(e.ownedImage)}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),jr=function(){var e=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:nr(),console.log("---------- qualified move",Q),fetch(_.g+"/v2/move-vault/",{method:"POST",headers:{"Content-Type":"application/json",service:"evmetadata",chainid:n.toString()},body:JSON.stringify({chainId:1,from:t,sourceContract:{1:"0x82c7a8f707110f5fbb16184a5933e9f78a34c6ab"},targetContract:{1:Q[n],name:Q.name,chain:Q.chain},targetAsset:{name:Ke[0].name},amount:1,tokenId:he})}).then(function(){var e=Object(o.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:(a=e.sent).sig&&Ea.moveVault("0x82c7a8f707110f5fbb16184a5933e9f78a34c6ab",Q[n],he,a.tokenId,a.nonce,a.sig,"0x0000000000000000000000000000000000000000000000000000000000000000").then((function(e){ht(e),ae(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),yr=function(){var e=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ma[n]?Ea.claim(ma[n],ma.tokenId).then((function(e){var t=e.hash;It(!0),setTimeout((function(){ht(t)}),100)})):Ia.claimOnChain(he).then((function(e){var t=e.hash;It(!0),setTimeout((function(){ht(t)}),100)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),kr=function(){var e=Object(o.a)(r.a.mark((function e(){var t,n,a,o,c,i,s,u,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=function(e){for(var r=0;r<o-i;r++){var l=Math.floor(t.length*Math.random()),f=t.charAt(l);s+=f}c==a-1&&i++,c==a&&(u+=n.charAt(i-1),c=0),an(u+s),s=""},!on){e.next=3;break}return e.abrupt("return");case 3:cn(!0),t="abcdefghijklmnopqrstuvwxyz",5,o=(n="Decrypting").length,c=0,i=0,s="",u="",function e(t){setTimeout((function(){--t?e(t):cn(!1),l(t),c+=1}),5)}(o*(a=8)+1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function xr(e){return(e?e.split("\n\n\n\n"):[" "])[0].trim()}function Cr(e){un&&(e=un),kr(),console.log(tt);var t=tt[0].address.replace("private:","");try{var n=P.a.AES.decrypt(t,e);JSON.parse(n.toString(P.a.enc.Utf8)),ot(!1),ln(e),nt(function(e){return tt.forEach((function(t){if(t.address.includes("private")){var n=t.address.replace("private:","");t.address=function(e,t){var n=P.a.AES.decrypt(e,t);return JSON.parse(n.toString(P.a.enc.Utf8))}(n,e)}})),tt}(e));var a=tt.filter((function(e){return"ETH"===e.coin}))[0].address,r=tt.filter((function(e){return"BTC"===e.coin}))[0].address;console.log("SUCCESS",tt),cr([],a,r,(function(e){Be(e)}))}catch(o){console.log("WTF",o)}}return Object(c.useEffect)((function(){console.log("----"),er()}),[]),Object(c.useEffect)((function(){(t&&n&&lt&&n==lt||N.noLayout&&"true"==N.noLayout||N.slideshowOnly&&"true"==N.slideshowOnly)&&dr()})),ua&&(_a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new I.a(e||_.p.emblemVault[n],_.p.emblemAbi,a.getSigner(t).connectUnchecked())}(ua||null)),z(i.a.Fragment,null,z(k.a,null,z("meta",{name:"twitter:card",content:"summary_large_image"}),z("meta",{name:"twitter:site",content:"Emblem.Finance"}),z("meta",{name:"twitter:title",content:je}),z("meta",{name:"twitter:description",content:xr(He)}),z("meta",{name:"twitter:image",content:Ve}),z("script",{dangerouslySetInnerHTML:{__html:'\n              // $(".NFT").tilt({    \n              //     maxTilt: 3\n              // });\n              $(".NFT").trigger(\'mouseenter\');\n              $(".NFT").trigger(\'mouseclick\'), \'.NFT\';\n              if (localStorage.getItem("darkMode") == \'false\') {\n                localStorage.setItem("darkMode","true"); location.href = location.href\n              }\n              '}})),z(X,{isOpen:Fa,onClose:Va,addrCoin:vt,addrAddr:St}),z(Y,{isOpen:Da,onClose:Wa,mnemonic:Wt,privKeyBTC:Bt,privKeyETH:qt,privValues:Yt,addresses:tt}),pe?z(Z,{isOpen:Ka,onClose:Ra,tokenId:he,mine:Ct}):null,z(l.a,{height:"40px"}),Qt?z(T.a,null):"",pn||Oe?Ke.length>0&&Oe?z(p.a,{className:"NFT-content",align:"center"},Ke.length&&Ke.filter((function(e){return"nft"==e.type})).length>0?z(J.a,{name:je,image:Ke[0].image,items:Ke.filter((function(e){return e.image!==Ke[0].image})).map((function(e){return{image:e.image,description:e.description,name:e.name,type:e.type}})),properties:{duration:3e3,canSwipe:!1}}):z(W.b,{className:"d-block w-100 NFT-image",url:Ve})):pn?z(p.a,{align:"center"},z(S.a,{width:"md",src:"https://starwarsblog.starwars.com/wp-content/uploads/2017/06/25-star-wars-quotes-obi-wan-kenobi-identification-tall.jpg"}),z(m.a,null,"THESE ARE NOT THE VAULTS YOU ARE LOOKING FOR"," ",z(g.a,{color:"#638cd8",href:"../create"},"CREATE ONE HERE!"))):null:z(f.a,{width:"full",align:"center",justifyContent:"center"},z(l.a,{className:"NFT",maxW:"sm",borderWidth:"1px",borderColor:lt!=n?"orange.500":"claimed"==_t?"green.500":null,rounded:"lg",overflow:"hidden",alignItems:"center",minW:390},z(l.a,{mt:"1",fontWeight:"semibold",as:"h3",lineHeight:"tight",p:2,textAlign:"center",textTransform:"uppercase",alignItems:"center",color:"blue.500"},"Vault Network: ",H.a[lt]),z(l.a,{mt:"1",fontWeight:"semibold",as:"h3",lineHeight:"tight",p:2,textAlign:"center",alignItems:"center"},je,!rt&&it>0?": ~$"+it.toLocaleString():null),z(p.a,{className:"NFT-content",align:"center"},Ke.length&&Ke.filter((function(e){return"nft"==e.type})).length>0?z(J.a,{name:je,image:Ve,items:Ke.map((function(e){return{image:e.image,description:e.description,name:e.name,type:e.type}})),properties:{duration:3e3,canSwipe:!1}}):z(W.b,{className:"d-block w-100 NFT-image",url:Ve}),Ct&&Ge?z(d.a,{onClick:function(){Sr()}},"(OWNED) Show Full Embed"):null),z(p.a,{align:"center",maxWidth:"400px"},z(l.a,{mt:"2",ml:"4",lineHeight:"tight",maxWidth:"400px"},z(p.a,null,z(m.a,{fontSize:"xs"},lt==n?z(g.a,{href:"./vaults?address="+Vn},"Owner: ",Vn):null),z(m.a,{overflowWrap:"anywhere",mt:2,as:"h4",ml:"4",mr:"4",fontSize:"xs",fontStyle:"italic",className:"md"},z(L.a,{plugins:[G.a],children:xr(He)}))))),z(l.a,{p:"6"},z(h.f,{isFitted:!0,variant:"enclosed"},z(h.c,{mb:"1em"},z(h.a,null,"Balances"),z(h.a,null,"Attributes")),z(h.e,null,z(h.d,null,rt?z(l.a,{mb:5},z(m.a,{pb:2,color:nn?"green.500":null},nn||"Contents hidden. Enter password to unlock."),z(b.a,{type:"password",id:"vault-password",onChange:function(e){return Cr(e.target.value)},"aria-describedby":"password-helper-text"})):z(l.a,{d:"flex",backgroundColor:"light"==Ya?"gray.100":"gray.700",alignItems:"baseline",className:"coin-balance-content"},z(l.a,{color:"gray.500",letterSpacing:"wide",fontSize:"sm",ml:"2"},z(m.a,{as:"h4",mt:2,fontWeight:"semibold"},"Current Contents:  ",z("button",{onClick:function(){or([],he,(function(e){qe(!1),Be(e)}))}}," [Refresh Balances]")),z(m.a,{as:"p",color:"dark"==Ya?"lightgreen":"forestgreen"},"$",Number(it.toFixed(4)).toLocaleString()),Ke.length?Ke.map((function(e){return z(p.a,null,z(K.a,{colorMode:Ya,coin:e,mine:"claimed"===_t&&Lt===t||Ct,onRenew:gr,hideAsset:vr}))})):z(T.a,null),Xe.length?Xe.map((function(e){return z(m.a,null,"Data: ",e.attribute_key)})):Xe.length||Ke.length?null:z(m.a,null,"Nothing in here! Fill 'er up!")))),z(h.d,null,z(B.a,{colorMode:Ya,attributes:$e})))),rt?null:z(l.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},z(v.a,{justifyContent:"space-between",spacing:6},z(p.a,null,z(m.a,null,"Deposit Addresses"),z(f.a,{w:"340px",justify:"center",flexWrap:"wrap"},tt.map((function(e){return z(d.a,{className:"address_nft_button",ml:2,mt:2,"font-weight":"100 !important",key:e.address,onClick:function(){wt(e.coin),jt(e.address),Pa()}},"ETH"==e.coin?e.coin+"/EVM":"BTC"==e.coin?e.coin+"/XCP/OMNI":"BCH"==e.coin?e.coin+"/SLP":"TAP"==e.coin?"TAPROOT":e.coin)}))),(Ct||"claimed"===_t)&&tt.length<12?z(i.a.Fragment,null,z("button",{className:"nft_button",onClick:function(){Xa()}},"Manage Addresses"),z(f.a,{w:"340px",justify:"center",flexWrap:"wrap"},z(w.a,{isOpen:za},mr("DOGE")?null:z(d.a,{className:"nft_button",mr:2,mt:2,onClick:function(){Or("DOGE")}},"Add DOGE"),mr("DGB")?null:z(d.a,{className:"nft_button",mr:2,mt:2,onClick:function(){Or("DGB")}},"Add Digibyte"),mr("NMC")?null:z(d.a,{className:"nft_button",mr:2,mt:2,onClick:function(){Or("NMC")}},"Add Namecoin"),mr("LTC")?null:z(d.a,{className:"nft_button",mr:2,mt:2,onClick:function(){Or("LTC")}},"Add Litecoin"),mr("MONA")?null:z(d.a,{className:"nft_button",mr:2,mt:2,onClick:function(){Or("MONA")}},"Add Mona"),mr("TEZOS")?null:z(d.a,{className:"nft_button",mr:2,mt:2,onClick:function(){Or("TEZOS")}},"Add Tezos"),mr("SOLANA")?null:z(d.a,{className:"nft_button",mr:2,mt:2,onClick:function(){Or("SOLANA")}},"Add Solana"),mr("STX")?null:z(d.a,{className:"nft_button",mr:2,mt:2,onClick:function(){Or("STX")}},"Add Stacks"),mr("TAP")?null:z(d.a,{className:"nft_button",mr:2,mt:2,onClick:function(){Or("TAP")}},"Add Taproot")))):null))),"claimed"===_t||!Gn||1!==lt&&4!==lt&&137!==lt?null:z(l.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},z(d.a,{className:"nft_button",width:"50%",m:5,onClick:function(){window.open("https://"+(4==lt?"rinkeby.":"")+"opensea.io/assets/"+(137==lt?"matic/":"")+(ua||_.p.emblemVault[lt])+"/"+he,"_blank")}},"Opensea"),z(d.a,{className:"nft_button",width:"50%",m:5,onClick:function(){window.open("https://"+(4==lt?"rinkeby.":"")+"looksrare.org/collections/"+(137==lt?"matic/":"")+(ua||_.p.emblemVault[lt])+"/"+he,"_blank")}},"LooksRare"),pe?z(d.a,{className:"",onClick:function(){Ba()}},Ct?"My Offers":"Make an Offer"," (NFT\xb2NFT)"):null),ba?z(p.a,{direction:"row",align:"flex-start",spacing:"0rem",flexWrap:"wrap",shouldWrapChildren:!0},z(l.a,{maxW:"sm",borderWidth:"1px",p:1,rounded:"lg",overflow:"hidden"},z(m.a,null,"Creating a vault spends ",Na*Math.pow(10,-Oa)," Coval from your wallet"))):null,Ct&&!oe?z(i.a.Fragment,null,z(l.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},z(d.a,{className:"nft_button",width:"100%",onClick:function(){return On(!0),void _a.setApprovalForAll(_.p.vaultHandler[n],!0).then((function(e){var t=e.hash;setTimeout((function(){ht(t)}),100)})).catch((function(e){4001!==(null===e||void 0===e?void 0:e.code)?console.log("tx failed.",e):On(!1)}))}}," Approve Minting"))):null,(Tn||ue)&&jn?z(l.a,null,z(g.a,{href:location.protocol+"//"+location.host+"/nft?id="+he+"&key="+(xn||ue)},"Copy Gift Link"),z(m.a,null,"Password: ",xn||ue)):null,jn&&Lt!==t?z(i.a.Fragment,null,z(d.a,{mt:2,width:"100%",onClick:function(){console.log(ue),bn(!0),tr((function(e){Ia.transferWithCode(he,ue,t,e.nonce,e.signature).then((function(e){var t=e.hash;setTimeout((function(){ht(t)}),100)})).catch((function(e){bn(!1),4001!==(null===e||void 0===e?void 0:e.code)&&console.log("tx failed.",e)}))}))}},"Accept"),z(b.a,{mt:2,type:"password",id:"mintPassword",minLength:3,maxLength:200,value:ue||"",onChange:function(e){console.log("grrr",e.target.value,ue),le(e.target.value)},autoComplete:"off"})):null,Ct&&D&&Q?z(l.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},z(d.a,{width:"100%",onClick:function(){jr()},isDisabled:ne},ne?"Moving ...":"Move Vault")):null,"claimed"!==_t&&t&&lt===n&&Ct&&!Ft&&oe&&Gn?z(l.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},z(d.a,{width:"100%",onClick:function(){yr()},isDisabled:At},At?"Claiming ...":"Unlock Vault (Get Private Keys)")):"claimed"===_t&&Lt===t&&lt===n?z(l.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},z(d.a,{width:"100%",onClick:hr},"Get Keys")):null,!Gn&&Ct&&lt==n&&"claimed"!==_t&&!ta&&oe&&ba?z(i.a.Fragment,null,z(d.a,{width:"100%",mt:5,onClick:function(){a.getSigner(t).signMessage("Delayed Minting: "+he).then((function(e){console.log("sig",e),fetch(_.g+"/lazyMint",{method:"POST",headers:{"Content-Type":"application/json",service:"evmetadata",chainid:n.toString()},body:JSON.stringify({tokenId:he,signature:e})}).then(function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:!(n=e.sent).error&&n.data?(qn(n.data.signature),Kn(n.data.nonce),Rn(n.data.block),Qn(!0),setTimeout((function(){Qa(n.data.nonce,n.data.block,n.data.signature)}),1500)):alert(n.error?n.msg:"unknown error");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}},"Mint Vault")):null,Gn||!Ct||lt!=n||"claimed"===_t||ta||!oe||ba?null:z(i.a.Fragment,null,z(d.a,{width:"100%",mt:5,onClick:function(){On(!0),Ma.approve(_.p.vaultHandler[n],"100000000000000").then((function(e){var t=e.hash;ht(t)})).catch((function(e){4001==(null===e||void 0===e?void 0:e.code)&&On(!1)}))}},"Approve Spending Coval")),Gn&&"claimed"!=_t||Xn!=t||lt!=n||ta||!(Ke.length<1)?null:z(d.a,{width:"100%",mt:5,onClick:function(){a.getSigner(t).signMessage("Delete: "+he).then((function(e){console.log("sig",e),fetch(_.g+"/v2/delete",{method:"POST",headers:{"Content-Type":"application/json",service:"evmetadata"},body:JSON.stringify({tokenId:he,signature:e,chainId:n.toString()})}).then(function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:e.sent,location.href=location.href.split("/")[0]+"/vaults";case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}},"Delete Vault "),$n?z(d.a,{isDisabled:!0,type:"submit"},"Verifying Signature ..."):null,ta?z(d.a,{isDisabled:!0,type:"submit"},"Minting Vault ..."):null),xe?z(j.a,{align:"center"},z(g.a,{target:"new",mb:2,ml:35,href:"https://gateway.ipfs.io/ipfs/"+xe,isExternal:!0},"View Metadata on IPFS "),Ne?z(g.a,{mb:2,href:"https://gateway.ipfs.io/ipfs/"+Ne,isExternal:!0},"View Image on IPFS "):null):null,Ft?z(l.a,{d:"flex",mb:2,ml:35,alignItems:"baseline",justifyContent:"space-between",mt:"4"},z(m.a,null,"*This vault is sealed forever.")):null,z(p.a,{direction:"column",align:"center"},"claimed"==_t?z(m.a,{color:"green.500"},"CLAIMED"):null),gt?z(O.a,{status:"info"},z(O.b,null),hn?"Accepting Your Gift Vault":At?"Claiming your Vault ...":wn?"Handling Approval Flow ...":Hn?"Transfering Vault ...":ra?"Minting Vault":"Generating Gift Link ..."):null)),gt?z(E.a,{hash:gt,onComplete:function(){var e;!At||hn||In?In?(localStorage.setItem(t+"_"+n+"_"+he+"_mintPassword",xn),Nn(!0),En(!1),ht(null)):hn?(bn(!1),er(),ht(null)):wn?(On(!1),er(),ht(null)):Hn?(Fn(!1),er(),ht(null)):ra?$a(he,(function(){oa(!1),Wn(!0)})):(console.log("minting",ra),console.log("claiming",At),console.log("accepting",hn),console.log("preTransfering",In),console.log("approving",wn),console.log("Unknown state")):(ht(null),Mt("claimed"),It(!1),Dt(t),e=function(){location.href=location.origin+"/nft?id="+he+"&cc=t"},fetch(_.g+"/web3/selfClaimLogs?chainId="+n.toString()+"_vercel_no_cache=1",{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata",cc:"t"}}).then(function(){var t=Object(o.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.json();case 2:return a=t.sent,console.log("Log check",a),t.abrupt("return",e());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}}):null,z(l.a,{height:"40px"}))}}}]);