"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9167],{69824:function(e,t,r){r.r(t),r.d(t,{default:function(){return L}});var n=r(85893),o=r(67294),a=r(11163),l=r(77044),i=r(11987),s=r(45161),c=r(16576),u=r(7636),d=r(70727),f=r(46685),m=r(71293),p=r(89693),v=r(89423),b=r(51343),h=r(78125),y=r(25432),g=r(16554),k=r(27440),w=r(33179),x=r(65548),j=(0,g.G)(function(e,t){let r=(0,k.jC)("Switch",e),{spacing:a="0.5rem",children:l,...i}=(0,w.Lr)(e),{getIndicatorProps:s,getInputProps:c,getCheckboxProps:u,getRootProps:d,getLabelProps:f}=(0,h.O)(i),m=(0,o.useMemo)(()=>({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0,...r.container}),[r.container]),p=(0,o.useMemo)(()=>({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer",...r.track}),[r.track]),v=(0,o.useMemo)(()=>({userSelect:"none",marginStart:a,...r.label}),[a,r.label]);return(0,n.jsxs)(x.m.label,{...d(),className:(0,y.cx)("chakra-switch",e.className),__css:m,children:[(0,n.jsx)("input",{className:"chakra-switch__input",...c({},t)}),(0,n.jsx)(x.m.span,{...u(),className:"chakra-switch__track",__css:p,children:(0,n.jsx)(x.m.span,{__css:r.thumb,className:"chakra-switch__thumb",...s()})}),l&&(0,n.jsx)(x.m.span,{className:"chakra-switch__label",...f(),__css:v,children:l})]})});j.displayName="Switch";var P=r(33090),B=r(32883),C=r(97878),S=r(93108),I=r(20640),_=r.n(I),E=r(31238),N=r(93007),F=r(10063);function L(e){let{isOpen:t,onClose:r}=e,{chainId:h}=(0,l.Ge)(),{colorMode:y,toggleColorMode:g}=(0,s.If)(),{pathname:k}=(0,a.useRouter)(),[w,x]=(0,N.u2)(),[I,L]=(0,N.xZ)(),[D,T]=(0,N.kX)(),[O,M]=(0,o.useState)("true"==localStorage.getItem("offline")),[K]=(0,N.GU)(),[R]=(0,N.HL)(),q=null;if("number"==typeof h&&(K||R)&&("/buy"===k||"/sell"===k)){let e={[E.nV.CHAIN]:h,..."/buy"===k?{...K?{[E.nV.OUTPUT]:K.address}:{},...R?{[E.nV.INPUT]:R.address}:{}}:{...K?{[E.nV.INPUT]:K.address}:{},...R?{[E.nV.OUTPUT]:R.address}:{}}};q=(0,i.resolve)("https://emblem.finance","".concat(k,"?").concat(Object.entries(e).map(e=>{let[t,r]=e;return"".concat(t,"=").concat(r)}).join("&")))}let[Z,G]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{if(Z){let e=setTimeout(()=>{G(!1)},750);return()=>{clearTimeout(e)}}},[Z]),(0,n.jsxs)(c.u_,{isOpen:t,onClose:r,isCentered:!0,children:[(0,n.jsx)(u.Z,{}),(0,n.jsxs)(d.h,{color:E.r$[y],children:[(0,n.jsx)(f.x,{children:(0,n.jsx)(m.x,{children:"Settings (Build #2021)"})}),(0,n.jsx)(p.o,{}),(0,n.jsx)(v.f,{children:(0,n.jsxs)(b.K,{direction:"column",children:[(0,n.jsxs)(b.K,{direction:"row",justify:"space-between",children:[(0,n.jsx)(m.x,{children:"Dark Mode"}),(0,n.jsx)(j,{isChecked:"dark"===y,onChange:g})]}),(0,n.jsxs)(b.K,{direction:"row",justify:"space-between",children:[(0,n.jsx)(m.x,{children:"API-Key"}),(0,n.jsx)(P.I,{type:"password",placeholder:"API Key",defaultValue:localStorage.getItem("apiKey")||"",onChange:e=>{localStorage.setItem("apiKey",e.target.value)},width:"80%"})]}),(0,n.jsx)(b.K,{direction:"row",justify:"space-between",children:(0,n.jsx)(B.r,{textAlign:"left",isTruncated:!0,onClick:async()=>{await (0,F.Lj)()},children:" Reset Cache "})}),(0,n.jsxs)(b.K,{direction:"row",justify:"space-between",children:[(0,n.jsx)(m.x,{children:"Offline Mode"}),(0,n.jsx)(j,{isChecked:O,onChange:e=>{let t=String(e.target.checked);localStorage.setItem("offline",t),M(e.target.checked)}})]})]})}),(0,n.jsxs)(C.m,{justifyContent:"space-between",children:["string"==typeof q&&(0,n.jsx)(S.z,{variant:"link",isDisabled:Z,color:"blue.500",width:"min-content",onClick:()=>{try{window.navigator.share({title:"Emblem Vault",url:q}).catch(()=>{})}catch(t){var e;e=q,_()(e),G(!0)}},children:Z?"Copied":"Share Permalink"}),(0,n.jsx)(B.r,{href:"https://github.com/NoahZinsmeister/hypertext",target:"_blank",rel:"noopener noreferrer",color:"blue.500",children:"Based on Hypertext."})]})]})]})}},10063:function(e,t,r){r.d(t,{Lj:function(){return o},Nj:function(){return l},ZO:function(){return a},_o:function(){return s},pk:function(){return i}});let n=async()=>"indexedDB"in window?new Promise((e,t)=>{let r=indexedDB.open("MyDatabase",1);r.onerror=e=>{console.error("Database error:",e.target.error),t(e.target.error)},r.onsuccess=t=>{e(t.target.result)},r.onupgradeneeded=e=>{let t=e.target.result;t.objectStoreNames.contains("vaults")||t.createObjectStore("vaults",{keyPath:"tokenId"})}}):(console.error("IndexedDB is not supported by this browser."),null),o=async()=>new Promise((e,t)=>{let r=indexedDB.deleteDatabase("MyDatabase");r.onerror=e=>{console.error("Database error:",e.target.error),t(e.target.error)},r.onsuccess=()=>{e(!0)}}),a=async(e,t)=>{console.log("getVaults - start");let r=await n();if(!r)throw console.error("Failed to open database"),Error("Failed to open database");let o=r.transaction(["vaults"],"readonly"),a=o.objectStore("vaults"),l=a.getAll();return new Promise((r,n)=>{l.onsuccess=()=>{console.log("All vaults successfully retrieved from store");let n=l.result.filter(t=>{var r,n;return e===(null===(r=t.ownership)||void 0===r?void 0:r.status)||e===(null===(n=t.ownershipInfo)||void 0===n?void 0:n.status)}).filter(r=>{var n,o,a;return"claimed"==e?t===(null===(n=r.ownership)||void 0===n?void 0:n.claimedBy)||t===r.ownershipInfo.claimedBy:"unminted"==e?t===(null===(o=r.ownership)||void 0===o?void 0:o.createdBy)||t===r.ownershipInfo.createdBy:t===(null===(a=r.ownership)||void 0===a?void 0:a.owner)||t===r.ownershipInfo.owner});r(n)},l.onerror=e=>{console.error("Error retrieving vaults from store:",e.target.error),n(e.target.error)}})},l=async e=>{console.log("getVaults - start");let t=await n();if(!t)throw console.error("Failed to open database"),Error("Failed to open database");let r=t.transaction(["vaults"],"readonly"),o=r.objectStore("vaults"),a=o.get(e);return new Promise((e,t)=>{a.onsuccess=()=>{console.log("All vaults successfully retrieved from store"),e(a.result)},a.onerror=e=>{console.error("Error retrieving vaults from store:",e.target.error),t(e.target.error)}})},i=async e=>{console.log("useDB - start");let t=await n();if(!t)throw console.error("Failed to open database"),Error("Failed to open database");let r=t.transaction(["vaults"],"readwrite"),o=r.objectStore("vaults");return new Promise((n,a)=>{e.forEach((e,t)=>{if(console.log("Processing item ".concat(t),e),!e.tokenId){console.error("Item missing tokenId:",e);return}let r=o.get(e.tokenId);r.onsuccess=()=>{console.log("Got vault ".concat(e.tokenId," from store")),r.result||(console.error("Item missing tokenId:",e),n(c(o,e,t,a))),r&&r.result&&!r.result.addresses&&n(c(o,e,t,a))},r.onerror=r=>{console.error("Item missing tokenId:",e),n(c(o,e,t,a))}}),r.oncomplete=()=>{console.log("Transaction complete"),t.close(),n(!0)},r.onerror=e=>{console.error("Transaction error:",e.target.error),t.close(),a(e.target.error)}})},s=async e=>{console.log("useDB - start");let t=await n();if(!t)throw console.error("Failed to open database"),Error("Failed to open database");let r=t.transaction(["vaults"],"readwrite"),o=r.objectStore("vaults");return new Promise((n,a)=>{let l=o.put(e);l.onsuccess=()=>{console.log("Item ".concat(e.tokenId," successfully put into store"))},l.onerror=e=>{console.error("Error putting item ".concat(index," into store:"),e.target.error),a(e.target.error)},r.oncomplete=()=>{console.log("Transaction complete"),t.close(),n(!0)},r.onerror=e=>{console.error("Transaction error:",e.target.error),t.close(),a(e.target.error)}})};function c(e,t,r,n){let o=e.put(t);return o.onsuccess=()=>{console.log("Item ".concat(r," successfully put into store"))},o.onerror=e=>{console.error("Error putting item ".concat(r," into store:"),e.target.error),n(e.target.error)},o}},4942:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(83997);function o(e,t,r){return(t=(0,n.Z)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},75068:function(e,t,r){function n(e,t){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)}r.d(t,{Z:function(){return o}})},63366:function(e,t,r){r.d(t,{Z:function(){return n}});function n(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}},83997:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(71002);function o(e){var t=function(e,t){if("object"!==(0,n.Z)(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==(0,n.Z)(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,n.Z)(t)?t:String(t)}},71002:function(e,t,r){r.d(t,{Z:function(){return n}});function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},78125:function(e,t,r){r.d(t,{O:function(){return d}});var n=r(57265),o=r(26245),a=r(67294),l=r(35155),i=r(81103),s=r(25432),c={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},u=r(78879);function d(e={}){let t=(0,n.K)(e),{isDisabled:r,isReadOnly:d,isRequired:m,isInvalid:p,id:v,onBlur:b,onFocus:h,"aria-describedby":y}=t,{defaultChecked:g,isChecked:k,isFocusable:w,onChange:x,isIndeterminate:j,name:P,value:B,tabIndex:C,"aria-label":S,"aria-labelledby":I,"aria-invalid":_,...E}=e,N=function(e,t=[]){let r=Object.assign({},e);for(let e of t)e in r&&delete r[e];return r}(E,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),F=(0,l.W)(x),L=(0,l.W)(b),D=(0,l.W)(h),[T,O]=(0,a.useState)(!1),[M,K]=(0,a.useState)(!1),[R,q]=(0,a.useState)(!1),[Z,G]=(0,a.useState)(!1);(0,a.useEffect)(()=>(0,u.BT)(O),[]);let U=(0,a.useRef)(null),[A,H]=(0,a.useState)(!0),[V,$]=(0,a.useState)(!!g),z=void 0!==k,Q=z?k:V,W=(0,a.useCallback)(e=>{if(d||r){e.preventDefault();return}z||(Q?$(e.target.checked):$(!!j||e.target.checked)),null==F||F(e)},[d,r,Q,z,j,F]);(0,o.G)(()=>{U.current&&(U.current.indeterminate=!!j)},[j]),function(e,t){let r=(0,a.useRef)(!1),n=(0,a.useRef)(!1);(0,a.useEffect)(()=>{let t=r.current,o=t&&n.current;if(o)return e();n.current=!0},t),(0,a.useEffect)(()=>(r.current=!0,()=>{r.current=!1}),[])}(()=>{r&&K(!1)},[r,K]),(0,o.G)(()=>{let e=U.current;if(!(null==e?void 0:e.form))return;let t=()=>{$(!!g)};return e.form.addEventListener("reset",t),()=>{var r;return null==(r=e.form)?void 0:r.removeEventListener("reset",t)}},[]);let J=r&&!w,Y=(0,a.useCallback)(e=>{" "===e.key&&G(!0)},[G]),X=(0,a.useCallback)(e=>{" "===e.key&&G(!1)},[G]);(0,o.G)(()=>{if(!U.current)return;let e=U.current.checked!==Q;e&&$(U.current.checked)},[U.current]);let ee=(0,a.useCallback)((e={},t=null)=>({...e,ref:t,"data-active":(0,s.PB)(Z),"data-hover":(0,s.PB)(R),"data-checked":(0,s.PB)(Q),"data-focus":(0,s.PB)(M),"data-focus-visible":(0,s.PB)(M&&T),"data-indeterminate":(0,s.PB)(j),"data-disabled":(0,s.PB)(r),"data-invalid":(0,s.PB)(p),"data-readonly":(0,s.PB)(d),"aria-hidden":!0,onMouseDown:(0,s.v0)(e.onMouseDown,e=>{M&&e.preventDefault(),G(!0)}),onMouseUp:(0,s.v0)(e.onMouseUp,()=>G(!1)),onMouseEnter:(0,s.v0)(e.onMouseEnter,()=>q(!0)),onMouseLeave:(0,s.v0)(e.onMouseLeave,()=>q(!1))}),[Z,Q,r,M,T,R,j,p,d]),et=(0,a.useCallback)((e={},t=null)=>({...e,ref:t,"data-active":(0,s.PB)(Z),"data-hover":(0,s.PB)(R),"data-checked":(0,s.PB)(Q),"data-focus":(0,s.PB)(M),"data-focus-visible":(0,s.PB)(M&&T),"data-indeterminate":(0,s.PB)(j),"data-disabled":(0,s.PB)(r),"data-invalid":(0,s.PB)(p),"data-readonly":(0,s.PB)(d)}),[Z,Q,r,M,T,R,j,p,d]),er=(0,a.useCallback)((e={},t=null)=>({...N,...e,ref:(0,i.lq)(t,e=>{e&&H("LABEL"===e.tagName)}),onClick:(0,s.v0)(e.onClick,()=>{var e;A||(null==(e=U.current)||e.click(),requestAnimationFrame(()=>{var e;null==(e=U.current)||e.focus({preventScroll:!0})}))}),"data-disabled":(0,s.PB)(r),"data-checked":(0,s.PB)(Q),"data-invalid":(0,s.PB)(p)}),[N,r,Q,p,A]),en=(0,a.useCallback)((e={},t=null)=>({...e,ref:(0,i.lq)(U,t),type:"checkbox",name:P,value:B,id:v,tabIndex:C,onChange:(0,s.v0)(e.onChange,W),onBlur:(0,s.v0)(e.onBlur,L,()=>K(!1)),onFocus:(0,s.v0)(e.onFocus,D,()=>K(!0)),onKeyDown:(0,s.v0)(e.onKeyDown,Y),onKeyUp:(0,s.v0)(e.onKeyUp,X),required:m,checked:Q,disabled:J,readOnly:d,"aria-label":S,"aria-labelledby":I,"aria-invalid":_?!!_:p,"aria-describedby":y,"aria-disabled":r,style:c}),[P,B,v,W,L,D,Y,X,m,Q,J,d,S,I,_,p,y,r,C]),eo=(0,a.useCallback)((e={},t=null)=>({...e,ref:t,onMouseDown:(0,s.v0)(e.onMouseDown,f),"data-disabled":(0,s.PB)(r),"data-checked":(0,s.PB)(Q),"data-invalid":(0,s.PB)(p)}),[Q,r,p]);return{state:{isInvalid:p,isFocused:M,isChecked:Q,isActive:Z,isHovered:R,isIndeterminate:j,isDisabled:r,isReadOnly:d,isRequired:m},getRootProps:er,getCheckboxProps:ee,getIndicatorProps:et,getInputProps:en,getLabelProps:eo,htmlProps:N}}function f(e){e.preventDefault(),e.stopPropagation()}},18020:function(e,t,r){r.d(t,{NI:function(){return b},NJ:function(){return v},Q6:function(){return h},e:function(){return m}});var n=r(55227),o=r(81103),a=r(16554),l=r(27440),i=r(33179),s=r(65548),c=r(25432),u=r(67294),d=r(85893),[f,m]=(0,n.k)({name:"FormControlStylesContext",errorMessage:"useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<FormControl />\" "}),[p,v]=(0,n.k)({strict:!1,name:"FormControlContext"}),b=(0,a.G)(function(e,t){let r=(0,l.jC)("Form",e),n=(0,i.Lr)(e),{getRootProps:a,htmlProps:m,...v}=function(e){let{id:t,isRequired:r,isInvalid:n,isDisabled:a,isReadOnly:l,...i}=e,s=(0,u.useId)(),d=t||`field-${s}`,f=`${d}-label`,m=`${d}-feedback`,p=`${d}-helptext`,[v,b]=(0,u.useState)(!1),[h,y]=(0,u.useState)(!1),[g,k]=(0,u.useState)(!1),w=(0,u.useCallback)((e={},t=null)=>({id:p,...e,ref:(0,o.lq)(t,e=>{e&&y(!0)})}),[p]),x=(0,u.useCallback)((e={},t=null)=>({...e,ref:t,"data-focus":(0,c.PB)(g),"data-disabled":(0,c.PB)(a),"data-invalid":(0,c.PB)(n),"data-readonly":(0,c.PB)(l),id:void 0!==e.id?e.id:f,htmlFor:void 0!==e.htmlFor?e.htmlFor:d}),[d,a,g,n,l,f]),j=(0,u.useCallback)((e={},t=null)=>({id:m,...e,ref:(0,o.lq)(t,e=>{e&&b(!0)}),"aria-live":"polite"}),[m]),P=(0,u.useCallback)((e={},t=null)=>({...e,...i,ref:t,role:"group"}),[i]),B=(0,u.useCallback)((e={},t=null)=>({...e,ref:t,role:"presentation","aria-hidden":!0,children:e.children||"*"}),[]);return{isRequired:!!r,isInvalid:!!n,isReadOnly:!!l,isDisabled:!!a,isFocused:!!g,onFocus:()=>k(!0),onBlur:()=>k(!1),hasFeedbackText:v,setHasFeedbackText:b,hasHelpText:h,setHasHelpText:y,id:d,labelId:f,feedbackId:m,helpTextId:p,htmlProps:i,getHelpTextProps:w,getErrorMessageProps:j,getRootProps:P,getLabelProps:x,getRequiredIndicatorProps:B}}(n),b=(0,c.cx)("chakra-form-control",e.className);return(0,d.jsx)(p,{value:v,children:(0,d.jsx)(f,{value:r,children:(0,d.jsx)(s.m.div,{...a({},t),className:b,__css:r.container})})})});b.displayName="FormControl";var h=(0,a.G)(function(e,t){let r=v(),n=m(),o=(0,c.cx)("chakra-form__helper-text",e.className);return(0,d.jsx)(s.m.div,{...null==r?void 0:r.getHelpTextProps(e,t),__css:n.helperText,className:o})});h.displayName="FormHelperText"},57265:function(e,t,r){r.d(t,{K:function(){return l},Y:function(){return a}});var n=r(18020),o=r(25432);function a(e){let{isDisabled:t,isInvalid:r,isReadOnly:n,isRequired:a,...i}=l(e);return{...i,disabled:t,readOnly:n,required:a,"aria-invalid":(0,o.Qm)(r),"aria-required":(0,o.Qm)(a),"aria-readonly":(0,o.Qm)(n)}}function l(e){var t,r,a;let l=(0,n.NJ)(),{id:i,disabled:s,readOnly:c,required:u,isRequired:d,isInvalid:f,isReadOnly:m,isDisabled:p,onFocus:v,onBlur:b,...h}=e,y=e["aria-describedby"]?[e["aria-describedby"]]:[];return(null==l?void 0:l.hasFeedbackText)&&(null==l?void 0:l.isInvalid)&&y.push(l.feedbackId),(null==l?void 0:l.hasHelpText)&&y.push(l.helpTextId),{...h,"aria-describedby":y.join(" ")||void 0,id:null!=i?i:null==l?void 0:l.id,isDisabled:null!=(t=null!=s?s:p)?t:null==l?void 0:l.isDisabled,isReadOnly:null!=(r=null!=c?c:m)?r:null==l?void 0:l.isReadOnly,isRequired:null!=(a=null!=u?u:d)?a:null==l?void 0:l.isRequired,isInvalid:null!=f?f:null==l?void 0:l.isInvalid,onFocus:(0,o.v0)(null==l?void 0:l.onFocus,v),onBlur:(0,o.v0)(null==l?void 0:l.onBlur,b)}}},33090:function(e,t,r){r.d(t,{I:function(){return u}});var n=r(57265),o=r(16554),a=r(27440),l=r(33179),i=r(65548),s=r(25432),c=r(85893),u=(0,o.G)(function(e,t){let{htmlSize:r,...o}=e,u=(0,a.jC)("Input",o),d=(0,l.Lr)(o),f=(0,n.Y)(d),m=(0,s.cx)("chakra-input",e.className);return(0,c.jsx)(i.m.input,{size:r,...f,__css:u.field,ref:t,className:m})});u.displayName="Input",u.id="Input"},32883:function(e,t,r){r.d(t,{r:function(){return c}});var n=r(16554),o=r(27440),a=r(33179),l=r(65548),i=r(25432),s=r(85893),c=(0,n.G)(function(e,t){let r=(0,o.mq)("Link",e),{className:n,isExternal:c,...u}=(0,a.Lr)(e);return(0,s.jsx)(l.m.a,{target:c?"_blank":void 0,rel:c?"noopener":void 0,ref:t,className:(0,i.cx)("chakra-link",n),...u,__css:r})});c.displayName="Link"},97878:function(e,t,r){r.d(t,{m:function(){return s}});var n=r(16576),o=r(25432),a=r(16554),l=r(65548),i=r(85893),s=(0,a.G)((e,t)=>{let{className:r,...a}=e,s=(0,o.cx)("chakra-modal__footer",r),c=(0,n.I_)(),u={display:"flex",alignItems:"center",justifyContent:"flex-end",...c.footer};return(0,i.jsx)(l.m.footer,{ref:t,...a,__css:u,className:s})});s.displayName="ModalFooter"},35155:function(e,t,r){r.d(t,{W:function(){return o}});var n=r(67294);function o(e,t=[]){let r=(0,n.useRef)(e);return(0,n.useEffect)(()=>{r.current=e}),(0,n.useCallback)((...e)=>{var t;return null==(t=r.current)?void 0:t.call(r,...e)},t)}},78879:function(e,t,r){r.d(t,{BT:function(){return h}});let n=()=>"undefined"!=typeof document,o=!1,a=null,l=!1,i=!1,s=new Set;function c(e,t){s.forEach(r=>r(e,t))}let u="undefined"!=typeof window&&null!=window.navigator&&/^Mac/.test(window.navigator.platform);function d(e){l=!0,e.metaKey||!u&&e.altKey||e.ctrlKey||"Control"===e.key||"Shift"===e.key||"Meta"===e.key||(a="keyboard",c("keyboard",e))}function f(e){if(a="pointer","mousedown"===e.type||"pointerdown"===e.type){l=!0;let t=e.composedPath?e.composedPath()[0]:e.target,r=!1;try{r=t.matches(":focus-visible")}catch{}r||c("pointer",e)}}function m(e){(0===e.mozInputSource&&e.isTrusted||0===e.detail&&!e.pointerType)&&(l=!0,a="virtual")}function p(e){e.target!==window&&e.target!==document&&(l||i||(a="virtual",c("virtual",e)),l=!1,i=!1)}function v(){l=!1,i=!0}function b(){return"pointer"!==a}function h(e){!function(){if(!n()||o)return;let{focus:e}=HTMLElement.prototype;HTMLElement.prototype.focus=function(...t){l=!0,e.apply(this,t)},document.addEventListener("keydown",d,!0),document.addEventListener("keyup",d,!0),document.addEventListener("click",m,!0),window.addEventListener("focus",p,!0),window.addEventListener("blur",v,!1),"undefined"!=typeof PointerEvent?(document.addEventListener("pointerdown",f,!0),document.addEventListener("pointermove",f,!0),document.addEventListener("pointerup",f,!0)):(document.addEventListener("mousedown",f,!0),document.addEventListener("mousemove",f,!0),document.addEventListener("mouseup",f,!0)),o=!0}(),e(b());let t=()=>e(b());return s.add(t),()=>{s.delete(t)}}}}]);