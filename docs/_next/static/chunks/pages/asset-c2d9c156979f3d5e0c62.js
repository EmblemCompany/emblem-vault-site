_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[38,28,29,30],{15:function(e,t){},16:function(e,t){},2:function(e,t){},"7W2i":function(e,t,r){var n=r("SksO");e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},Bnag:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},C99U:function(e,t,r){"use strict";function n(){var e=Object.create(null),t=0,r=0,n=0,i=!1;function o(t){n--,delete e[t]}this.put=function(t,r,a,s){if(i&&console.log("caching: %s = %j (@%s)",t,r,a),"undefined"!==typeof a&&("number"!==typeof a||isNaN(a)||a<=0))throw new Error("Cache timeout must be a positive number");if("undefined"!==typeof s&&"function"!==typeof s)throw new Error("Cache timeout callback must be a function");var u=e[t];u?clearTimeout(u.timeout):n++;var c={value:r,expire:a+Date.now()};return isNaN(c.expire)||(c.timeout=setTimeout(function(){o(t),s&&s(t,r)}.bind(this),a)),e[t]=c,r},this.del=function(t){var r=!0,n=e[t];return n?(clearTimeout(n.timeout),!isNaN(n.expire)&&n.expire<Date.now()&&(r=!1)):r=!1,r&&o(t),r},this.clear=function(){for(var o in e)clearTimeout(e[o].timeout);n=0,e=Object.create(null),i&&(t=0,r=0)},this.get=function(o){var a=e[o];if("undefined"!=typeof a){if(isNaN(a.expire)||a.expire>=Date.now())return i&&t++,a.value;i&&r++,n--,delete e[o]}else i&&r++;return null},this.size=function(){return n},this.memsize=function(){var t,r=0;for(t in e)r++;return r},this.debug=function(e){i=e},this.hits=function(){return t},this.misses=function(){return r},this.keys=function(){return Object.keys(e)},this.exportJson=function(){var t={};for(var r in e){var n=e[r];t[r]={value:n.value,expire:n.expire||"NaN"}}return JSON.stringify(t)},this.importJson=function(t,r){var n=JSON.parse(t),o=Date.now(),a=r&&r.skipDuplicates;for(var s in n)if(n.hasOwnProperty(s)){if(a)if(e[s]){i&&console.log("Skipping duplicate imported key '%s'",s);continue}var u=n[s],c=u.expire-o;if(c<=0){this.del(s);continue}c=c>0?c:void 0,this.put(s,u.value,c)}return this.size()}}e.exports=new n,e.exports.Cache=n},CDBg:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return $}));var n=r("q1tI"),i=r.n(n),o=r("o0o1"),a=r.n(o),s=r("HaE+"),u=r("XZ7F"),c=r("mf32"),l=r("BMxC"),f=r("Weur"),h=r("Yn+B"),d=r("eJLp"),p=r("sK1y"),m=r("pboS"),v=r("FpzS"),g=r("IP4Q"),y=r("MKZ1"),b=r("jgTY"),w=r("LqLE"),O=r("bQFp"),M=r("wZsY"),x=r("S5RI"),_=r.n(x),k=r("8Kt/"),S=r.n(k),P=r("Z6YE"),E=r("nOHt"),j=r("Ute3"),I=r("Y1ui"),T=r.n(I),L=r("a6RD"),R=r.n(L),A=r("iBPG"),N=r("zIq6"),C=r("N39q"),D=r("21eR"),U=r("NFKh"),B=r.n(U),F=r("IujW"),G=r.n(F),J=r("wH4i"),W=r.n(J),H=r("PLxQ"),K=r("zNBI"),z=r("fksj"),Y=(r("Q/0U"),i.a.createElement),q=R()((function(){return Promise.all([r.e(14),r.e(13),r.e(16)]).then(r.bind(null,"X/Jl"))}),{loadableGenerated:{webpack:function(){return["X/Jl"]},modules:["./AddrModal"]}}),V=R()((function(){return Promise.all([r.e(14),r.e(13),r.e(16)]).then(r.bind(null,"0bCS"))}),{loadableGenerated:{webpack:function(){return["0bCS"]},modules:["./KeysModal"]}}),X=R()((function(){return Promise.all([r.e(14),r.e(13),r.e(16)]).then(r.bind(null,"D3uo"))}),{loadableGenerated:{webpack:function(){return["D3uo"]},modules:["./OfferModal"]}});function Z(){var e,t=Object(P.b)(),r=t.account,o=t.chainId,x=t.library,k=Object(E.useRouter)().query,I=Object(n.useState)(!1),L=I[0],R=I[1],U=Object(n.useState)(k.key),F=U[0],J=U[1],Z=Object(n.useState)(k.offer||!1),Q=Z[0],$=(Z[1],Object(n.useState)(k.framed||!0)),ee=($[0],$[1],Object(n.useState)(k.id)),te=ee[0],re=(ee[1],Object(n.useState)(k.experimental)),ne=(re[0],re[1],Object(n.useState)("")),ie=ne[0],oe=(ne[1],Object(n.useState)("")),ae=oe[0],se=(oe[1],Object(n.useState)("")),ue=se[0],ce=(se[1],Object(n.useState)("")),le=ce[0],fe=(ce[1],Object(n.useState)("")),he=fe[0],de=(fe[1],Object(n.useState)("")),pe=de[0],me=de[1],ve=Object(n.useState)(""),ge=ve[0],ye=(ve[1],Object(n.useState)([])),be=ye[0],we=ye[1],Oe=Object(n.useState)(!1),Me=Oe[0],xe=Oe[1],_e=Object(n.useState)([]),ke=_e[0],Se=(_e[1],Object(n.useState)([])),Pe=Se[0],Ee=Se[1],je=Object(n.useState)(!1),Ie=je[0],Te=je[1],Le=Object(n.useState)(0),Re=Le[0],Ae=(Le[1],Object(n.useState)(null)),Ne=Ae[0],Ce=(Ae[1],Object(n.useState)(null)),De=(Ce[0],Ce[1],Object(n.useState)(null)),Ue=De[0],Be=De[1],Fe=Object(n.useState)(""),Ge=Fe[0],Je=Fe[1],We=Object(n.useState)(""),He=We[0],Ke=We[1],ze=Object(n.useState)({loaded:!1}),Ye=ze[0],qe=(ze[1],Object(n.useState)(!1)),Ve=qe[0],Xe=qe[1],Ze=Object(n.useState)(!1),Qe=Ze[0],$e=Ze[1],et=Object(n.useState)("claimed"),tt=et[0],rt=et[1],nt=Object(n.useState)(null),it=nt[0],ot=nt[1],at=Object(n.useState)(""),st=at[0],ut=at[1],ct=Object(n.useState)(""),lt=ct[0],ft=ct[1],ht=Object(n.useState)(""),dt=ht[0],pt=ht[1],mt=Object(n.useState)([]),vt=mt[0],gt=mt[1],yt=Object(n.useState)(!1),bt=yt[0],wt=(yt[1],Object(n.useState)("")),Ot=wt[0],Mt=wt[1],xt=Object(n.useState)(!1),_t=xt[0],kt=xt[1],St=Object(n.useState)(""),Pt=St[0],Et=St[1],jt=Object(n.useState)(!1),It=jt[0],Tt=(jt[1],Object(n.useState)(!1)),Lt=(Tt[0],Tt[1],Object(n.useState)(!1)),Rt=Lt[0],At=Lt[1],Nt=Object(n.useState)(!1),Ct=Nt[0],Dt=Nt[1],Ut=Object(n.useState)(!1),Bt=Ut[0],Ft=Ut[1],Gt=Object(n.useState)(""),Jt=Gt[0],Wt=Gt[1],Ht=Object(n.useState)(!1),Kt=Ht[0],zt=Ht[1],Yt=Object(n.useState)(!1),qt=Yt[0],Vt=Yt[1],Xt=Object(n.useState)(null),Zt=Xt[0],Qt=Xt[1],$t=Object(n.useState)(!1),er=$t[0],tr=$t[1],rr=Object(n.useState)(null),nr=rr[0],ir=rr[1],or=Object(n.useState)(function(){return Wr.apply(this,arguments)}()),ar=or[0],sr=(or[1],Object(n.useState)(!1)),ur=sr[0],cr=sr[1],lr=Object(n.useState)(null),fr=lr[0],hr=(lr[1],Object(n.useState)(null)),dr=hr[0],pr=(hr[1],Object(n.useState)(null)),mr=pr[0],vr=(pr[1],Object(n.useState)(!1)),gr=vr[0],yr=(vr[1],Object(n.useState)(!1)),br=yr[0],wr=yr[1],Or=Object(n.useState)(k.contract),Mr=(Or[0],Or[1],Object(D.b)(C.p.vaultHandler[o],C.p.vaultHandlerAbi,!0)),xr=Object(D.b)(C.p.emblemVault[o],C.p.emblemAbi,!0),_r=Object(u.a)(),kr=_r.isOpen,Sr=_r.onOpen,Pr=_r.onClose,Er=Object(u.a)(),jr=Er.isOpen,Ir=Er.onOpen,Tr=Er.onClose,Lr=Object(u.a)(),Rr=Lr.isOpen,Ar=Lr.onOpen,Nr=Lr.onClose,Cr=Object(u.a)(),Dr=Cr.isOpen,Ur=Cr.onToggle,Br=Object(u.a)(),Fr=Br.isOpen,Gr=Br.onToggle,Jr=Object(c.c)().colorMode;function Wr(){return(Wr=Object(s.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new _.a({baseUrl:"".concat(window.location.origin,"/serviceworker"),enableLogging:!0,network:"testnet"}),e.next=3,t.init({skipSw:!0,skipInit:!0,skipPrefetch:!0});case 3:return console.log("Initialized Torus"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hr=function(){var e=Object(s.a)(a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(C.g+"/witness/"+te,{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata",chainid:o.toString()}});case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(n=e.sent).signature){e.next=11;break}return console.log("witness",n),e.abrupt("return",t(n));case 11:return e.abrupt("return",t(!1));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Kr=function(){var e=Object(s.a)(a.a.mark((function e(t,r,n){var i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Me){e.next=2;break}return e.abrupt("return",n(!1));case 2:return xe(!0),e.next=5,fetch(C.g+"/vault/balance/"+r+"?live=true",{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata"}});case 5:return i=e.sent,e.next=8,i.json();case 8:if(o=e.sent,console.log("responce",i,o),!(o.balances.length>0)){e.next=14;break}return e.abrupt("return",n(t.concat(o.balances)));case 14:return e.abrupt("return",n(t));case 15:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),zr=function(){var e=Object(s.a)(a.a.mark((function e(t,r,n,i){var o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(C.g+"/vault/balance/"+r+"/"+n,{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata"}});case 2:return o=e.sent,e.next=5,o.json();case 5:if(s=e.sent,console.log("responce",o,s),!(s.balances.length>0)){e.next=11;break}return e.abrupt("return",i(t.concat(s.balances)));case 11:return e.abrupt("return",i(t));case 12:case"end":return e.stop()}}),e)})));return function(t,r,n,i){return e.apply(this,arguments)}}(),Yr=function(){var e=localStorage.getItem(r+"_"+o+"_"+te+"_mintPassword");e&&Bt&&J(e)},qr=function(){var e=Object(s.a)(a.a.mark((function e(t,r,n){var i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=new Headers).append("chainid",o.toString()),i.append("Content-Type","application/json"),s=JSON.stringify({signature:t,tokenId:r}),e.next=6,fetch(C.n+"/sign",{method:"POST",headers:i,body:s,redirect:"follow"});case 6:return u=e.sent,e.next=9,u.json();case 9:return c=e.sent,e.abrupt("return",n(c));case 11:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),Vr=function(){var e=Object(s.a)(a.a.mark((function e(t,r,n){var i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=!1,e.next=3,ar;case 3:return e.next=5,e.sent.getTorusKey("tor-us-signer-vercel",t,{verifier_id:t},r).catch((function(e){i=e.message}));case 5:if(o=e.sent,!i){e.next=11;break}return console.log("error",i),e.abrupt("return",n(!1));case 11:return e.abrupt("return",n(o));case 12:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),Xr=function(){var e=Object(s.a)(a.a.mark((function e(t,r,n,i){var s,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s=new Headers).append("chainId",o.toString()),s.append("service","evmetadata"),s.append("Content-Type","application/json"),u=JSON.stringify({signature:t,coin:n}),e.next=7,fetch(C.g+"/address/"+r,{method:"POST",headers:s,body:u,redirect:"follow"});case 7:return c=e.sent,e.next=10,c.json();case 10:return l=e.sent,e.abrupt("return",i(l));case 12:case"end":return e.stop()}}),e)})));return function(t,r,n,i){return e.apply(this,arguments)}}(),Zr=function(){var e=Object(s.a)(a.a.mark((function e(t,r,n){var i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=new Headers).append("chainId",o.toString()),i.append("service","evmetadata"),i.append("Content-Type","application/json"),s=JSON.stringify({signature:t}),e.next=7,fetch(C.g+"/embed/"+r,{method:"POST",headers:i,body:s,redirect:"follow"});case 7:return u=e.sent,e.next=10,u.json();case 10:return c=e.sent,e.abrupt("return",n(c));case 12:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),Qr=function(){var e=Object(s.a)(a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){return(i=Object(s.a)(a.a.mark((function e(){var n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mr.getPreTransfer(te);case 2:return n=e.sent,e.next=5,xr.isApprovedForAll(r,C.p.vaultHandler[o]);case 5:i=e.sent,R(i),Ft("0x0000000000000000000000000000000000000000"!==n._from),ir(t),Xe(t===r),Yr();case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)},n=function(){return i.apply(this,arguments)},!1,e.prev=3,e.next=6,xr.ownerOf(te);case 6:t=e.sent,n(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),t="0x0000000000000000000000000000000000000000",n();case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){}));var $r=function(e){return console.log(e,Pe.filter((function(t){return t.coin==e})).length>0),Pe.filter((function(t){return t.coin==e})).length>0},en=function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.getSigner(r).signMessage("Renew: "+te).then((function(e){var r=Pe.filter((function(e){return"NMC"==e.coin}))[0].address;console.log("signature",e,t),fetch(C.g+"/nmc/renew/"+r,{method:"POST",headers:{"Content-Type":"application/json",service:"evmetadata",chainid:o.toString()},body:JSON.stringify({tokenId:te,signature:e,name:t})}).then(function(){var e=Object(s.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:r=e.sent,console.log("Requested Renew",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tn=function(){var e=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.getSigner(r).signMessage("Claim: "+te).then((function(e){qr(e,te,(function(e){Vr(te,e.token,(function(e){var t=B.a.AES.decrypt(le,e.privateKey),r=JSON.parse(t.toString(B.a.enc.Utf8));gt(r.values),ut(r.phrase);var n=window.phrasePathToKey(r.phrase,Pe.filter((function(e){return"BTC"==e.coin}))[0].path);ft(n);var i=window.phrasePathToKey(r.phrase,Pe.filter((function(e){return"ETH"==e.coin}))[0].path);pt(i),Pe.forEach((function(e){e.key=window.phrasePathToKey(r.phrase,e.path)})),Ir()}))}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),rn=function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.getSigner(r).signMessage("Address: "+te).then((function(e){Xr(e,te,t,(function(e){}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nn=function(){var e=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.getSigner(r).signMessage("Embed: "+te).then((function(e){Zr(e,te,(function(e){me(e.ownedImage)}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),on=function(){var e=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:xr.burn(te).then((function(e){var t=e.hash;$e(!0),setTimeout((function(){Be(t)}),100)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),an=function(){var e=Object(s.a)(a.a.mark((function e(){var t,r,n,i,o,s,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=function(e){for(var a=0;a<i-s;a++){var l=Math.floor(t.length*Math.random()),f=t.charAt(l);u+=f}o==n-1&&s++,o==n&&(c+=r.charAt(s-1),o=0),Mt(c+u),u=""},!_t){e.next=3;break}return e.abrupt("return");case 3:kt(!0),t="abcdefghijklmnopqrstuvwxyz",5,i=(r="Decrypting").length,o=0,s=0,u="",c="",function e(t){setTimeout((function(){--t?e(t):kt(!1),l(t),o+=1}),5)}(i*(n=8)+1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function sn(e){return e.split("\n\n\n\n")[0].trim()}function un(e){Pt&&(e=Pt),an(),console.log(Pe);var t=Pe[0].address.replace("private:","");try{var r=B.a.AES.decrypt(t,e);JSON.parse(r.toString(B.a.enc.Utf8)),Te(!1),Et(e),Ee(function(e){return Pe.forEach((function(t){if(t.address.includes("private")){var r=t.address.replace("private:","");t.address=function(e,t){var r=B.a.AES.decrypt(e,t);return JSON.parse(r.toString(B.a.enc.Utf8))}(r,e)}})),Pe}(e));var n=Pe.filter((function(e){return"ETH"===e.coin}))[0].address,i=Pe.filter((function(e){return"BTC"===e.coin}))[0].address;console.log("SUCCESS",Pe),zr([],n,i,(function(e){we(e)}))}catch(o){console.log("WTF",o)}}return Object(n.useEffect)((function(){}),[]),Object(n.useEffect)((function(){r&&o&&Ne&&o==Ne&&Qr()})),Y(i.a.Fragment,null,Y(S.a,null,Y("meta",{name:"twitter:card",content:"summary_large_image"}),Y("meta",{name:"twitter:site",content:"Emblem.Finance"}),Y("meta",{name:"twitter:title",content:ie}),Y("meta",{name:"twitter:description",content:sn(he)}),Y("meta",{name:"twitter:image",content:pe}),Y("script",{dangerouslySetInnerHTML:{__html:"\n              // $(\".NFT\").tilt({    \n              //     maxTilt: 3\n              // });\n              $(\".NFT\").trigger('mouseenter');\n              $(\".NFT\").trigger('mouseclick'), '.NFT';\n              "}})),Y(q,{isOpen:kr,onClose:Pr,addrCoin:Ge,addrAddr:He}),Y(V,{isOpen:jr,onClose:Tr,mnemonic:st,privKeyBTC:lt,privKeyETH:dt,privValues:vt,addresses:Pe}),Q?Y(X,{isOpen:Rr,onClose:Nr,tokenId:te,mine:Ve}):null,Y(T.a,{loaded:Ye.loaded},Y(l.a,{height:"40px"}),bt?Y(j.a,null):"",It?Y(h.a,{align:"center"},Y(O.a,{width:"md",src:"https://starwarsblog.starwars.com/wp-content/uploads/2017/06/25-star-wars-quotes-obi-wan-kenobi-identification-tall.jpg"}),Y(p.a,null,"THESE ARE NOT THE VAULTS YOU ARE LOOKING FOR"," ",Y(m.a,{color:"#638cd8",href:"../create"},"CREATE ONE HERE!"))):Y(f.a,{width:"full",align:"center",justifyContent:"center"},Y(l.a,{className:"NFT",maxW:"sm",borderWidth:"1px",borderColor:Ne!=o?"orange.500":"claimed"==tt?"green.500":null,rounded:"lg",overflow:"hidden",alignItems:"center",minW:390},Y(l.a,{mt:"1",fontWeight:"semibold",as:"h3",lineHeight:"tight",p:2,textAlign:"center",textTransform:"uppercase",alignItems:"center",color:"blue.500"},"Vault Network: ",A.a[Ne]),Y(l.a,{mt:"1",fontWeight:"semibold",as:"h3",lineHeight:"tight",p:2,textAlign:"center",alignItems:"center"},ie,!Ie&&Re>0?": ~$"+Re.toLocaleString():null),Y(h.a,{className:"NFT-content",align:"center"},be.length&&be.filter((function(e){return"nft"==e.type})).length>0?Y(K.a,{name:ie,image:pe,items:be.map((function(e){return{image:e.image,description:e.description,name:e.name,type:e.type}})),properties:{duration:3e3,canSwipe:!1}}):Y(H.b,{className:"d-block w-100 NFT-image",url:pe}),Ve&&ge?Y(d.a,{onClick:function(){nn()}},"(OWNED) Show Full Embed"):null),Y(h.a,{align:"center"},Y(l.a,{mt:"2",ml:"4",lineHeight:"tight"},Y(h.a,null,Y(p.a,{fontSize:"xs"},Ne==o?Y(m.a,{href:"./myvaults?address="+nr},"Owner: ",nr):null),Y(p.a,{mt:2,as:"h4",ml:"4",mr:"4",fontSize:"xs",fontStyle:"italic",className:"md"},Y(G.a,{plugins:[W.a],children:sn(he)}))))),Y(l.a,{p:"6"},Ie?Y(l.a,{mb:5},Y(p.a,{pb:2,color:Ot?"green.500":null},Ot||"Contents hidden. Enter password to unlock."),Y(v.a,{type:"password",id:"vault-password",onChange:function(e){return un(e.target.value)},"aria-describedby":"password-helper-text"})):Y(l.a,{d:"flex",backgroundColor:"light"==Jr?"gray.100":"gray.700",alignItems:"baseline",className:"coin-balance-content"},Y(l.a,{color:"gray.500",letterSpacing:"wide",fontSize:"sm",ml:"2"},Y(p.a,{as:"h4",mt:2,fontWeight:"semibold"},"Current Contents:  ",Y("button",{onClick:function(){Kr([],te,(function(e){xe(!1),we(e)}))}}," [Refresh Balances]")),Y(p.a,{as:"p",color:"dark"==Jr?"lightgreen":"forestgreen"},"$",Number(Re.toFixed(4)).toLocaleString()),be.length?be.map((function(e){return Y(h.a,null,Y(z.a,{colorMode:Jr,coin:e,mine:"claimed"===tt&&it===r||Ve,onRenew:en,hideAsset:function(){}}))})):Y(j.a,null),ke.length?ke.map((function(e){return Y(p.a,null,"Data: ",e.attribute_key)})):ke.length||be.length?null:Y(p.a,null,"Nothing in here! Fill 'er up!"))),Ie?null:Y(l.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},Y(g.a,{justifyContent:"space-between",spacing:6},Y(h.a,null,Y(p.a,null,"Deposit Addresses"),Y(f.a,{w:"340px",justify:"center",flexWrap:"wrap"},Pe.map((function(e){return Y(d.a,{className:"address_nft_button",ml:2,mt:2,"font-weight":"100 !important",key:e.address,onClick:function(){Je(e.coin),Ke(e.address),Sr()}},"ETH"==e.coin?e.coin+"":"BTC"==e.coin?e.coin+"/XCP/OMNI":"BCH"==e.coin?e.coin+"/SLP":e.coin)}))),(Ve||"claimed"===tt)&&Pe.length<8?Y(i.a.Fragment,null,Y("button",{className:"nft_button",onClick:function(){Gr()}},"Manage Addresses"),Y(f.a,{w:"340px",justify:"center",flexWrap:"wrap"},Y(y.a,{isOpen:Fr},$r("DOGE")?null:Y(d.a,{className:"nft_button",mr:2,mt:2,onClick:function(){rn("DOGE")}},"Add DOGE"),$r("DGB")?null:Y(d.a,{className:"nft_button",mr:2,mt:2,onClick:function(){rn("DGB")}},"Add Digibyte"),$r("NMC")?null:Y(d.a,{className:"nft_button",mr:2,mt:2,onClick:function(){rn("NMC")}},"Add Namecoin"),$r("LTC")?null:Y(d.a,{className:"nft_button",mr:2,mt:2,onClick:function(){rn("LTC")}},"Add Litecoin"),$r("MONA")?null:Y(d.a,{className:"nft_button",mr:2,mt:2,onClick:function(){rn("MONA")}},"Add Mona")))):null))),"claimed"===tt||1!==Ne&&4!==Ne&&137!==Ne?null:Y(l.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},Y(h.a,{d:"flex",width:"100%"},Y(d.a,{className:"nft_button",width:"100%",onClick:function(){location.href="https://"+(4==Ne?"rinkeby.":"")+"opensea.io/assets/"+(137==Ne?"matic/":"")+C.p.emblemVault[Ne]+"/"+te}},"View Vault on Opensea"),Q?Y(d.a,{className:"",onClick:function(){Ar()}},Ve?"My Offers":"Make an Offer"," (NFT\xb2NFT)"):null)),"claimed"!==tt&&Ve&&!Bt?Y(i.a.Fragment,null,Y(l.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4",width:"100%"},Y(h.a,{direction:"column",align:"center",width:"100%"},Y(d.a,{className:"nft_button",width:"100%",onClick:Ur},"Transfer Vault"),Y(y.a,{isOpen:Dr},Y(l.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"2",width:"100%"},Y(b.a,{htmlFor:"owner-address"},"Address"),Y(v.a,{mt:1,type:"text",id:"transferAddress",value:Zt||"",onChange:function(e){console.log("Transfer to",e.target.value),Qt(e.target.value)},autoComplete:"off"})),Y(l.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"2",width:"100%"},Y(d.a,{isDisabled:!Object(A.k)(Zt),onClick:function(){Ur(),tr(!0),xr.transferFrom(r,Zt,te).then((function(e){var t=e.hash;Be(t)})).catch((function(e){}))}},"Transfer Now")))))):null,Ve&&!Bt?Y(i.a.Fragment,null,Y(l.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},Y(d.a,{className:"nft_button",width:"100%",onClick:function(){if(!L)return Dt(!0),void xr.setApprovalForAll(C.p.vaultHandler[o],!0).then((function(e){var t=e.hash;setTimeout((function(){Be(t)}),100)})).catch((function(e){4001!==(null===e||void 0===e?void 0:e.code)?console.log("tx failed.",e):Dt(!1)}));var t=B.a.lib.WordArray.random(16).toString(),r=B.a.SHA256(t).toString();console.log("plain",t),console.log("sha",r),Wt(t),e=r,setTimeout((function(){console.log("transferImage","0x"+e),Vt(!0),Mr.addPreTransfer(te,"0x"+e).then((function(e){var t=e.hash;Be(t),console.log("Set Pre Transfering True",qt)})).catch((function(e){null!==e&&void 0!==e&&e.code&&(console.log("Error?"),Vt(!1),zt(!1),Wt(""))}))}),500)}}," ",L?"Get Link (Send Vault Via Link)":"Approve Gifting"," "))):null,(Kt||F)&&Bt?Y(l.a,null,Y(m.a,{href:location.protocol+"//"+location.host+"/nft?id="+te+"&key="+(Jt||F)},"Copy Gift Link"),Y(p.a,null,"Password: ",Jt||F)):null,Bt&&it!==r?Y(i.a.Fragment,null,Y(d.a,{mt:2,width:"100%",onClick:function(){console.log(F),At(!0),Hr((function(e){Mr.transferWithCode(te,F,r,e.nonce,e.signature).then((function(e){var t=e.hash;setTimeout((function(){Be(t)}),100)})).catch((function(e){At(!1),4001!==(null===e||void 0===e?void 0:e.code)&&console.log("tx failed.",e)}))}))}},"Accept"),Y(v.a,{mt:2,type:"password",id:"mintPassword",minLength:3,maxLength:200,value:F||"",onChange:function(e){console.log("grrr",e.target.value,F),J(e.target.value)},autoComplete:"off"})):null,"claimed"!==tt&&r&&Ne===o&&Ve?Y(l.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},Y(d.a,{width:"100%",onClick:function(){on()},isDisabled:Qe},Qe?"Claiming ...":"Claim (Crack Open Vault)")):"claimed"===tt&&it===r&&Ne===o?Y(l.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},Y(d.a,{width:"100%",onClick:tn},"Get Keys")):null,!ur&&fr&&dr&&le&&mr==r&&Ne==o&&"claimed"!==tt?Y(d.a,{width:"100%",mt:5,onClick:function(){wr(!0);var e=Pe.filter((function(e){return"ETH"==e.coin}))[0].address;Mr.buyWithSignature(r,te,e,fr,dr).then((function(e){var t=e.hash;setTimeout((function(){Be(t)}),100)})).catch((function(e){}))}},"Mint Me "):null,gr?Y(d.a,{isDisabled:!0,type:"submit"},"Making Vault ..."):null),ae?Y(h.a,null,Y(M.a,{align:"center"},Y(m.a,{target:"new",mb:2,ml:35,href:"https://gateway.ipfs.io/ipfs/"+ae,isExternal:!0},"View Metadata on IPFS "),ue?Y(m.a,{mb:2,href:"https://gateway.ipfs.io/ipfs/"+ue,isExternal:!0},"View Image on IPFS "):null)):null,Y(h.a,{direction:"column",align:"center"},"claimed"==tt?Y(p.a,{color:"green.500"},"CLAIMED"):null),Ue?Y(w.a,{status:"info"},Y(w.b,null),Rt?"Accepting Your Gift Vault":Qe?"Claiming your Vault ...":Ct?"Handling Approval Flow ...":er?"Transfering Vault ...":br?"Minting Vault":"Generating Gift Link ..."):null)),Ue?Y(N.a,{hash:Ue,onComplete:function(){var e;!Qe||Rt||qt?qt?(localStorage.setItem(r+"_"+o+"_"+te+"_mintPassword",Jt),zt(!0),Vt(!1),Be(null)):Rt?(At(!1),Be(null)):Ct?(Dt(!1),Be(null)):er?(tr(!1),Be(null)):br?function(e,t){fetch(C.g+"/liveliness",{method:"POST",headers:{"Content-Type":"application/json",service:"evmetadata",chainid:o.toString()},body:JSON.stringify({tokenId:e})}).then(function(){var e=Object(s.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:r=e.sent,cr(r.live),console.log("Liveliness check",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t()}(te,(function(){wr(!1),cr(!0)})):(console.log("minting",br),console.log("claiming",Qe),console.log("accepting",Rt),console.log("preTransfering",qt),console.log("approving",Ct),console.log("Unknown state")):(Be(null),rt("claimed"),$e(!1),ot(r),e=function(){location.href=location.origin+"/nft?id="+te},fetch(C.g+"/web3/selfClaimLogs?chainId="+o.toString()+"_vercel_no_cache=1",{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata"}}).then(function(){var t=Object(s.a)(a.a.mark((function t(r){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.json();case 2:return n=t.sent,console.log("Log check",n),t.abrupt("return",e());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}}):null,Y(l.a,{height:"40px"})))}var Q=i.a.createElement;function $(){return Q(Z,null)}},EbDI:function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},EjJx:function(e,t,r){"use strict";function n(e){this.message=e}r.r(t),r.d(t,"InvalidTokenError",(function(){return a})),n.prototype=new Error,n.prototype.name="InvalidCharacterError";var i="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,i,o=0,a=0,s="";i=t.charAt(a++);~i&&(r=o%4?64*r+i:i,o++%4)?s+=String.fromCharCode(255&r>>(-2*o&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return s};function o(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(i(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return i(t)}}function a(e){this.message=e}a.prototype=new Error,a.prototype.name="InvalidTokenError",t.default=function(e,t){if("string"!=typeof e)throw new a("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(o(e.split(".")[r]))}catch(e){throw new a("Invalid token specified: "+e.message)}}},"Hvl/":function(e,t,r){"use strict";(function(e){function n(e){return!(!e||"function"!==typeof e.then)}function i(e){return e||(e=0),new Promise((function(t){return setTimeout(t,e)}))}function o(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function a(){return Math.random().toString(36).substring(2)}r.d(t,"b",(function(){return n})),r.d(t,"f",(function(){return i})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return a})),r.d(t,"c",(function(){return c})),r.d(t,"a",(function(){return l}));var s=0,u=0;function c(){var e=(new Date).getTime();return e===s?1e3*e+ ++u:(s=e,u=0,1e3*e)}var l="[object process]"===Object.prototype.toString.call("undefined"!==typeof e?e:0)}).call(this,r("8oxB"))},I24s:function(e,t,r){"use strict";r.r(t),r.d(t,"BroadcastChannel",(function(){return S})),r.d(t,"clearNodeFolder",(function(){return P})),r.d(t,"enforceOptions",(function(){return E})),r.d(t,"createLeaderElection",(function(){return z})),r.d(t,"beLeader",(function(){return K}));var n=r("Hvl/");var i={create:function(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(e){t.messagesCallback&&t.messagesCallback(e.data)},t},close:function(e){e.bc.close(),e.subFns=[]},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){try{return e.bc.postMessage(t,!1),Promise.resolve()}catch(r){return Promise.reject(r)}},canBeUsed:function(){if(n.a&&"undefined"===typeof window)return!1;if("function"===typeof BroadcastChannel){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}return!1},type:"native",averageResponseTime:function(){return 150},microSeconds:n.c},o=function(){function e(e){this.ttl=e,this.set=new Set,this.timeMap=new Map}return e.prototype.has=function(e){return this.set.has(e)},e.prototype.add=function(e){var t=this;this.timeMap.set(e,a()),this.set.add(e),setTimeout((function(){!function(e){var t=a()-e.ttl,r=e.set[Symbol.iterator]();for(;;){var n=r.next().value;if(!n)return;if(!(e.timeMap.get(n)<t))return;e.timeMap.delete(n),e.set.delete(n)}}(t)}),0)},e.prototype.clear=function(){this.set.clear(),this.timeMap.clear()},e}();function a(){return(new Date).getTime()}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return"undefined"===typeof t.webWorkerSupport&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=45e3),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&"function"===typeof e.idb.onclose&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=6e4),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=12e4),"undefined"===typeof t.node.useFastPath&&(t.node.useFastPath=!0),t}var u=n.c;function c(){if("undefined"!==typeof indexedDB)return indexedDB;if("undefined"!==typeof window){if("undefined"!==typeof window.mozIndexedDB)return window.mozIndexedDB;if("undefined"!==typeof window.webkitIndexedDB)return window.webkitIndexedDB;if("undefined"!==typeof window.msIndexedDB)return window.msIndexedDB}return!1}function l(e,t){var r=e.transaction("messages").objectStore("messages"),n=[];return new Promise((function(e){(function(){try{var e=IDBKeyRange.bound(t+1,1/0);return r.openCursor(e)}catch(n){return r.openCursor()}}()).onsuccess=function(r){var i=r.target.result;i?i.value.id<t+1?i.continue(t+1):(n.push(i.value),i.continue()):e(n)}}))}function f(e,t){return function(e,t){var r=(new Date).getTime()-t,n=e.transaction("messages").objectStore("messages"),i=[];return new Promise((function(e){n.openCursor().onsuccess=function(t){var n=t.target.result;if(n){var o=n.value;if(!(o.time<r))return void e(i);i.push(o),n.continue()}else e(i)}}))}(e,t).then((function(t){return Promise.all(t.map((function(t){return function(e,t){var r=e.transaction(["messages"],"readwrite").objectStore("messages").delete(t);return new Promise((function(e){r.onsuccess=function(){return e()}}))}(e,t.id)})))}))}function h(e){return e.closed?Promise.resolve():e.messagesCallback?l(e.db,e.lastCursorId).then((function(t){return t.filter((function(e){return!!e})).map((function(t){return t.id>e.lastCursorId&&(e.lastCursorId=t.id),t})).filter((function(t){return function(e,t){return e.uuid!==t.uuid&&!t.eMIs.has(e.id)&&!(e.data.time<t.messagesCallbackTime)}(t,e)})).sort((function(e,t){return e.time-t.time})).forEach((function(t){e.messagesCallback&&(e.eMIs.add(t.id),e.messagesCallback(t.data))})),Promise.resolve()})):Promise.resolve()}var d={create:function(e,t){return t=s(t),function(e){var t="pubkey.broadcast-channel-0-"+e,r=c().open(t,1);return r.onupgradeneeded=function(e){e.target.result.createObjectStore("messages",{keyPath:"id",autoIncrement:!0})},new Promise((function(e,t){r.onerror=function(e){return t(e)},r.onsuccess=function(){e(r.result)}}))}(e).then((function(r){var i={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:Object(n.e)(),eMIs:new o(2*t.idb.ttl),writeBlockPromise:Promise.resolve(),messagesCallback:null,readQueuePromises:[],db:r};return r.onclose=function(){i.closed=!0,t.idb.onclose&&t.idb.onclose()},function e(t){if(t.closed)return;h(t).then((function(){return Object(n.f)(t.options.idb.fallbackInterval)})).then((function(){return e(t)}))}(i),i}))},close:function(e){e.closed=!0,e.db.close()},onMessage:function(e,t,r){e.messagesCallbackTime=r,e.messagesCallback=t,h(e)},postMessage:function(e,t){return e.writeBlockPromise=e.writeBlockPromise.then((function(){return function(e,t,r){var n={uuid:t,time:(new Date).getTime(),data:r},i=e.transaction(["messages"],"readwrite");return new Promise((function(e,t){i.oncomplete=function(){return e()},i.onerror=function(e){return t(e)},i.objectStore("messages").add(n)}))}(e.db,e.uuid,t)})).then((function(){0===Object(n.d)(0,10)&&f(e.db,e.options.idb.ttl)})),e.writeBlockPromise},canBeUsed:function(){return!n.a&&!!c()},type:"idb",averageResponseTime:function(e){return 2*e.idb.fallbackInterval},microSeconds:u},p=n.c;function m(){var e;if("undefined"===typeof window)return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch(t){}return e}function v(e){return"pubkey.broadcastChannel-"+e}function g(){if(n.a)return!1;var e=m();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch(r){return!1}return!0}var y={create:function(e,t){if(t=s(t),!g())throw new Error("BroadcastChannel: localstorage cannot be used");var r=Object(n.e)(),i=new o(t.localstorage.removeTimeout),a={channelName:e,uuid:r,eMIs:i};return a.listener=function(e,t){var r=v(e),n=function(e){e.key===r&&t(JSON.parse(e.newValue))};return window.addEventListener("storage",n),n}(e,(function(e){a.messagesCallback&&e.uuid!==r&&e.token&&!i.has(e.token)&&(e.data.time&&e.data.time<a.messagesCallbackTime||(i.add(e.token),a.messagesCallback(e.data)))})),a},close:function(e){var t;t=e.listener,window.removeEventListener("storage",t)},onMessage:function(e,t,r){e.messagesCallbackTime=r,e.messagesCallback=t},postMessage:function(e,t){return new Promise((function(r){Object(n.f)().then((function(){var i=v(e.channelName),o={token:Object(n.e)(),time:(new Date).getTime(),data:t,uuid:e.uuid},a=JSON.stringify(o);m().setItem(i,a);var s=document.createEvent("Event");s.initEvent("storage",!0,!0),s.key=i,s.newValue=a,window.dispatchEvent(s),r()}))}))},canBeUsed:g,type:"localstorage",averageResponseTime:function(){var e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?240:120},microSeconds:p},b=n.c,w=new Set;var O={create:function(e){var t={name:e,messagesCallback:null};return w.add(t),t},close:function(e){w.delete(e)},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){return new Promise((function(r){return setTimeout((function(){Array.from(w).filter((function(t){return t.name===e.name})).filter((function(t){return t!==e})).filter((function(e){return!!e.messagesCallback})).forEach((function(e){return e.messagesCallback(t)})),r()}),5)}))},canBeUsed:function(){return!0},type:"simulate",averageResponseTime:function(){return 5},microSeconds:b},M=[i,d,y];if(n.a){var x=r(15);"function"===typeof x.canBeUsed&&M.push(x)}function _(e){var t=[].concat(e.methods,M).filter(Boolean);if(e.type){if("simulate"===e.type)return O;var r=t.find((function(t){return t.type===e.type}));if(r)return r;throw new Error("method-type "+e.type+" not found")}e.webWorkerSupport||n.a||(t=t.filter((function(e){return"idb"!==e.type})));var i=t.find((function(e){return e.canBeUsed()}));if(i)return i;throw new Error("No useable methode found:"+JSON.stringify(M.map((function(e){return e.type}))))}var k,S=function(e,t){this.name=e,k&&(t=k),this.options=s(t),this.method=_(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,function(e){var t=e.method.create(e.name,e.options);Object(n.b)(t)?(e._prepP=t,t.then((function(t){e._state=t}))):e._state=t}(this)};function P(e){var t=_(e=s(e));return"node"===t.type?t.clearNodeFolder().then((function(){return!0})):Promise.resolve(!1)}function E(e){k=e}function j(e,t,r){var n={time:e.method.microSeconds(),type:t,data:r};return(e._prepP?e._prepP:Promise.resolve()).then((function(){var t=e.method.postMessage(e._state,n);return e._uMP.add(t),t.catch().then((function(){return e._uMP.delete(t)})),t}))}function I(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function T(e,t,r){e._addEL[t].push(r),function(e){if(!e._iL&&I(e)){var t=function(t){e._addEL[t.type].forEach((function(e){t.time>=e.time&&e.fn(t.data)}))},r=e.method.microSeconds();e._prepP?e._prepP.then((function(){e._iL=!0,e.method.onMessage(e._state,t,r)})):(e._iL=!0,e.method.onMessage(e._state,t,r))}}(e)}function L(e,t,r){e._addEL[t]=e._addEL[t].filter((function(e){return e!==r})),function(e){if(e._iL&&!I(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}(e)}S._pubkey=!0,S.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed");return j(this,"message",e)},postInternal:function(e){return j(this,"internal",e)},set onmessage(e){var t={time:this.method.microSeconds(),fn:e};L(this,"message",this._onML),e&&"function"===typeof e?(this._onML=t,T(this,"message",t)):this._onML=null},addEventListener:function(e,t){T(this,e,{time:this.method.microSeconds(),fn:t})},removeEventListener:function(e,t){L(this,e,this._addEL[e].find((function(e){return e.fn===t})))},close:function(){var e=this;if(!this.closed){this.closed=!0;var t=this._prepP?this._prepP:Promise.resolve();return this._onML=null,this._addEL.message=[],t.then((function(){return Promise.all(Array.from(e._uMP))})).then((function(){return Promise.all(e._befC.map((function(e){return e()})))})).then((function(){return e.method.close(e._state)}))}},get type(){return this.method.type},get isClosed(){return this.closed}};var R=r("yDc/"),A=r.n(R);var N={add:function(e){if("function"===typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);else{if("function"!==typeof window.addEventListener)return;window.addEventListener("beforeunload",(function(){e()}),!0),window.addEventListener("unload",(function(){e()}),!0)}}},C=r(2),D=r.n(C),U=A.a?D.a:N,B=new Set,F=!1;function G(){var e=[];return B.forEach((function(t){e.push(t()),B.delete(t)})),Promise.all(e)}var J={add:function(e){if(F||(F=!0,U.add(G)),"function"!==typeof e)throw new Error("Listener is no function");return B.add(e),{remove:function(){return B.delete(e)},run:function(){return B.delete(e),e()}}},runAll:G,removeAll:function(){B.clear()},getSize:function(){return B.size}},W=function(e,t){this._channel=e,this._options=t,this.isLeader=!1,this.isDead=!1,this.token=Object(n.e)(),this._isApl=!1,this._reApply=!1,this._unl=[],this._lstns=[],this._invs=[],this._dpL=function(){},this._dpLC=!1};function H(e,t){var r={context:"leader",action:t,token:e.token};return e._channel.postInternal(r)}function K(e){e.isLeader=!0;var t=J.add((function(){return e.die()}));e._unl.push(t);var r=function(t){"leader"===t.context&&"apply"===t.action&&H(e,"tell"),"leader"!==t.context||"tell"!==t.action||e._dpLC||(e._dpLC=!0,e._dpL(),H(e,"tell"))};return e._channel.addEventListener("internal",r),e._lstns.push(r),H(e,"tell")}function z(e,t){if(e._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");t=function(e,t){return e||(e={}),(e=JSON.parse(JSON.stringify(e))).fallbackInterval||(e.fallbackInterval=3e3),e.responseTime||(e.responseTime=t.method.averageResponseTime(t.options)),e}(t,e);var r=new W(e,t);return e._befC.push((function(){return r.die()})),e._leaderElector=r,r}W.prototype={applyOnce:function(){var e=this;if(this.isLeader)return Promise.resolve(!1);if(this.isDead)return Promise.resolve(!1);if(this._isApl)return this._reApply=!0,Promise.resolve(!1);this._isApl=!0;var t=!1,r=[],i=function(n){"leader"===n.context&&n.token!=e.token&&(r.push(n),"apply"===n.action&&n.token>e.token&&(t=!0),"tell"===n.action&&(t=!0))};return this._channel.addEventListener("internal",i),H(this,"apply").then((function(){return Object(n.f)(e._options.responseTime)})).then((function(){return t?Promise.reject(new Error):H(e,"apply")})).then((function(){return Object(n.f)(e._options.responseTime)})).then((function(){return t?Promise.reject(new Error):H(e)})).then((function(){return K(e)})).then((function(){return!0})).catch((function(){return!1})).then((function(t){return e._channel.removeEventListener("internal",i),e._isApl=!1,!t&&e._reApply?(e._reApply=!1,e.applyOnce()):t}))},awaitLeadership:function(){var e;return this._aLP||(this._aLP=(e=this).isLeader?Promise.resolve():new Promise((function(t){var r=!1;function n(){r||(r=!0,clearInterval(i),e._channel.removeEventListener("internal",o),t(!0))}e.applyOnce().then((function(){e.isLeader&&n()}));var i=setInterval((function(){e.applyOnce().then((function(){e.isLeader&&n()}))}),e._options.fallbackInterval);e._invs.push(i);var o=function(t){"leader"===t.context&&"death"===t.action&&e.applyOnce().then((function(){e.isLeader&&n()}))};e._channel.addEventListener("internal",o),e._lstns.push(o)}))),this._aLP},set onduplicate(e){this._dpL=e},die:function(){var e=this;if(!this.isDead)return this.isDead=!0,this._lstns.forEach((function(t){return e._channel.removeEventListener("internal",t)})),this._invs.forEach((function(e){return clearInterval(e)})),this._unl.forEach((function(e){e.remove()})),H(this,"death")}}},Ijbi:function(e,t,r){var n=r("WkPL");e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.default=e.exports,e.exports.__esModule=!0},J4zp:function(e,t,r){var n=r("wTVA"),i=r("m0LI"),o=r("ZhPi"),a=r("wkBT");e.exports=function(e,t){return n(e)||i(e,t)||o(e,t)||a()},e.exports.default=e.exports,e.exports.__esModule=!0},JUoo:function(e,t,r){(function(e){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function o(e,t,r){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var a;"object"===typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(16).Buffer}catch(E){}function s(e,t){var r=e.charCodeAt(t);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+e)}function u(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function c(e,t,r,i){for(var o=0,a=0,s=Math.min(e.length,r),u=t;u<s;u++){var c=e.charCodeAt(u)-48;o*=i,a=c>=49?c-49+10:c>=17?c-17+10:c,n(c>=0&&a<i,"Invalid character"),o+=a}return o}function l(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(o.isBN=function(e){return e instanceof o||null!==e&&"object"===typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,r){if("number"===typeof e)return this._initNumber(e,t,r);if("object"===typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},o.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},o.prototype._initArray=function(e,t,r){if(n("number"===typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=e.length-1,o=0;i>=0;i-=3)a=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<e.length;i+=3)a=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this._strip()},o.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,a=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=u(e,t,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(n=(e.length-t)%2===0?t+1:t;n<e.length;n+=2)i=u(e,t,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this._strip()},o.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,a=o%n,s=Math.min(o,o-a)+r,u=0,l=r;l<s;l+=n)u=c(e,l,l+n,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var f=1;for(u=c(e,l,e.length,t),l=0;l<a;l++)f*=t;this.imuln(f),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype._move=function(e){l(e,this)},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!==typeof Symbol&&"function"===typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch(E){o.prototype.inspect=f}else o.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);o=s>>>24-i&16777215,(i+=2)>=26&&(i-=26,a--),r=0!==o||a!==this.length-1?h[6-u.length]+u+r:u+r}for(0!==o&&(r=o.toString(16)+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=d[e],l=p[e];r="";var f=this.clone();for(f.negative=0;!f.isZero();){var m=f.modrn(l).toString(e);r=(f=f.idivn(l)).isZero()?m+r:h[c-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16,2)},a&&(o.prototype.toBuffer=function(e,t){return this.toArrayLike(a,e,t)}),o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function m(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],o=0|t.words[0],a=i*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var c=1;c<n;c++){for(var l=u>>>26,f=67108863&u,h=Math.min(c,t.length-1),d=Math.max(0,c-e.length+1);d<=h;d++){var p=c-d|0;l+=(a=(i=0|e.words[p])*(o=0|t.words[d])+f)/67108864|0,f=67108863&a}r.words[c]=0|f,u=0|l}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}o.prototype.toArrayLike=function(e,t,r){this._strip();var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0");var a=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,o);return this["_toArrayLike"+("le"===t?"LE":"BE")](a,i),a},o.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|n;e[r++]=255&a,r<e.length&&(e[r++]=a>>8&255),r<e.length&&(e[r++]=a>>16&255),6===o?(r<e.length&&(e[r++]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},o.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|n;e[r--]=255&a,r>=0&&(e[r--]=a>>8&255),r>=0&&(e[r--]=a>>16&255),6===o?(r>=0&&(e[r--]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0===(8191&t)&&(r+=13,t>>>=13),0===(127&t)&&(r+=7,t>>>=7),0===(15&t)&&(r+=4,t>>>=4),0===(3&t)&&(r+=2,t>>>=2),0===(1&t)&&r++,r},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},o.prototype.ior=function(e){return n(0===(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},o.prototype.iand=function(e){return n(0===(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},o.prototype.ixor=function(e){return n(0===(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){n("number"===typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){n("number"===typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},o.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<r.length;o++)t=(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var o=0,a=0;a<n.length;a++)o=(t=(0|r.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&t;for(;0!==o&&a<r.length;a++)o=(t=(0|r.words[a])+o)>>26,this.words[a]=67108863&t;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var v=function(e,t,r){var n,i,o,a=e.words,s=t.words,u=r.words,c=0,l=0|a[0],f=8191&l,h=l>>>13,d=0|a[1],p=8191&d,m=d>>>13,v=0|a[2],g=8191&v,y=v>>>13,b=0|a[3],w=8191&b,O=b>>>13,M=0|a[4],x=8191&M,_=M>>>13,k=0|a[5],S=8191&k,P=k>>>13,E=0|a[6],j=8191&E,I=E>>>13,T=0|a[7],L=8191&T,R=T>>>13,A=0|a[8],N=8191&A,C=A>>>13,D=0|a[9],U=8191&D,B=D>>>13,F=0|s[0],G=8191&F,J=F>>>13,W=0|s[1],H=8191&W,K=W>>>13,z=0|s[2],Y=8191&z,q=z>>>13,V=0|s[3],X=8191&V,Z=V>>>13,Q=0|s[4],$=8191&Q,ee=Q>>>13,te=0|s[5],re=8191&te,ne=te>>>13,ie=0|s[6],oe=8191&ie,ae=ie>>>13,se=0|s[7],ue=8191&se,ce=se>>>13,le=0|s[8],fe=8191&le,he=le>>>13,de=0|s[9],pe=8191&de,me=de>>>13;r.negative=e.negative^t.negative,r.length=19;var ve=(c+(n=Math.imul(f,G))|0)+((8191&(i=(i=Math.imul(f,J))+Math.imul(h,G)|0))<<13)|0;c=((o=Math.imul(h,J))+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(p,G),i=(i=Math.imul(p,J))+Math.imul(m,G)|0,o=Math.imul(m,J);var ge=(c+(n=n+Math.imul(f,H)|0)|0)+((8191&(i=(i=i+Math.imul(f,K)|0)+Math.imul(h,H)|0))<<13)|0;c=((o=o+Math.imul(h,K)|0)+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(g,G),i=(i=Math.imul(g,J))+Math.imul(y,G)|0,o=Math.imul(y,J),n=n+Math.imul(p,H)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(m,H)|0,o=o+Math.imul(m,K)|0;var ye=(c+(n=n+Math.imul(f,Y)|0)|0)+((8191&(i=(i=i+Math.imul(f,q)|0)+Math.imul(h,Y)|0))<<13)|0;c=((o=o+Math.imul(h,q)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(w,G),i=(i=Math.imul(w,J))+Math.imul(O,G)|0,o=Math.imul(O,J),n=n+Math.imul(g,H)|0,i=(i=i+Math.imul(g,K)|0)+Math.imul(y,H)|0,o=o+Math.imul(y,K)|0,n=n+Math.imul(p,Y)|0,i=(i=i+Math.imul(p,q)|0)+Math.imul(m,Y)|0,o=o+Math.imul(m,q)|0;var be=(c+(n=n+Math.imul(f,X)|0)|0)+((8191&(i=(i=i+Math.imul(f,Z)|0)+Math.imul(h,X)|0))<<13)|0;c=((o=o+Math.imul(h,Z)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(x,G),i=(i=Math.imul(x,J))+Math.imul(_,G)|0,o=Math.imul(_,J),n=n+Math.imul(w,H)|0,i=(i=i+Math.imul(w,K)|0)+Math.imul(O,H)|0,o=o+Math.imul(O,K)|0,n=n+Math.imul(g,Y)|0,i=(i=i+Math.imul(g,q)|0)+Math.imul(y,Y)|0,o=o+Math.imul(y,q)|0,n=n+Math.imul(p,X)|0,i=(i=i+Math.imul(p,Z)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,Z)|0;var we=(c+(n=n+Math.imul(f,$)|0)|0)+((8191&(i=(i=i+Math.imul(f,ee)|0)+Math.imul(h,$)|0))<<13)|0;c=((o=o+Math.imul(h,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(S,G),i=(i=Math.imul(S,J))+Math.imul(P,G)|0,o=Math.imul(P,J),n=n+Math.imul(x,H)|0,i=(i=i+Math.imul(x,K)|0)+Math.imul(_,H)|0,o=o+Math.imul(_,K)|0,n=n+Math.imul(w,Y)|0,i=(i=i+Math.imul(w,q)|0)+Math.imul(O,Y)|0,o=o+Math.imul(O,q)|0,n=n+Math.imul(g,X)|0,i=(i=i+Math.imul(g,Z)|0)+Math.imul(y,X)|0,o=o+Math.imul(y,Z)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,ee)|0;var Oe=(c+(n=n+Math.imul(f,re)|0)|0)+((8191&(i=(i=i+Math.imul(f,ne)|0)+Math.imul(h,re)|0))<<13)|0;c=((o=o+Math.imul(h,ne)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(j,G),i=(i=Math.imul(j,J))+Math.imul(I,G)|0,o=Math.imul(I,J),n=n+Math.imul(S,H)|0,i=(i=i+Math.imul(S,K)|0)+Math.imul(P,H)|0,o=o+Math.imul(P,K)|0,n=n+Math.imul(x,Y)|0,i=(i=i+Math.imul(x,q)|0)+Math.imul(_,Y)|0,o=o+Math.imul(_,q)|0,n=n+Math.imul(w,X)|0,i=(i=i+Math.imul(w,Z)|0)+Math.imul(O,X)|0,o=o+Math.imul(O,Z)|0,n=n+Math.imul(g,$)|0,i=(i=i+Math.imul(g,ee)|0)+Math.imul(y,$)|0,o=o+Math.imul(y,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(m,re)|0,o=o+Math.imul(m,ne)|0;var Me=(c+(n=n+Math.imul(f,oe)|0)|0)+((8191&(i=(i=i+Math.imul(f,ae)|0)+Math.imul(h,oe)|0))<<13)|0;c=((o=o+Math.imul(h,ae)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(L,G),i=(i=Math.imul(L,J))+Math.imul(R,G)|0,o=Math.imul(R,J),n=n+Math.imul(j,H)|0,i=(i=i+Math.imul(j,K)|0)+Math.imul(I,H)|0,o=o+Math.imul(I,K)|0,n=n+Math.imul(S,Y)|0,i=(i=i+Math.imul(S,q)|0)+Math.imul(P,Y)|0,o=o+Math.imul(P,q)|0,n=n+Math.imul(x,X)|0,i=(i=i+Math.imul(x,Z)|0)+Math.imul(_,X)|0,o=o+Math.imul(_,Z)|0,n=n+Math.imul(w,$)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(O,$)|0,o=o+Math.imul(O,ee)|0,n=n+Math.imul(g,re)|0,i=(i=i+Math.imul(g,ne)|0)+Math.imul(y,re)|0,o=o+Math.imul(y,ne)|0,n=n+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,ae)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,ae)|0;var xe=(c+(n=n+Math.imul(f,ue)|0)|0)+((8191&(i=(i=i+Math.imul(f,ce)|0)+Math.imul(h,ue)|0))<<13)|0;c=((o=o+Math.imul(h,ce)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(N,G),i=(i=Math.imul(N,J))+Math.imul(C,G)|0,o=Math.imul(C,J),n=n+Math.imul(L,H)|0,i=(i=i+Math.imul(L,K)|0)+Math.imul(R,H)|0,o=o+Math.imul(R,K)|0,n=n+Math.imul(j,Y)|0,i=(i=i+Math.imul(j,q)|0)+Math.imul(I,Y)|0,o=o+Math.imul(I,q)|0,n=n+Math.imul(S,X)|0,i=(i=i+Math.imul(S,Z)|0)+Math.imul(P,X)|0,o=o+Math.imul(P,Z)|0,n=n+Math.imul(x,$)|0,i=(i=i+Math.imul(x,ee)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,ee)|0,n=n+Math.imul(w,re)|0,i=(i=i+Math.imul(w,ne)|0)+Math.imul(O,re)|0,o=o+Math.imul(O,ne)|0,n=n+Math.imul(g,oe)|0,i=(i=i+Math.imul(g,ae)|0)+Math.imul(y,oe)|0,o=o+Math.imul(y,ae)|0,n=n+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,ce)|0;var _e=(c+(n=n+Math.imul(f,fe)|0)|0)+((8191&(i=(i=i+Math.imul(f,he)|0)+Math.imul(h,fe)|0))<<13)|0;c=((o=o+Math.imul(h,he)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(U,G),i=(i=Math.imul(U,J))+Math.imul(B,G)|0,o=Math.imul(B,J),n=n+Math.imul(N,H)|0,i=(i=i+Math.imul(N,K)|0)+Math.imul(C,H)|0,o=o+Math.imul(C,K)|0,n=n+Math.imul(L,Y)|0,i=(i=i+Math.imul(L,q)|0)+Math.imul(R,Y)|0,o=o+Math.imul(R,q)|0,n=n+Math.imul(j,X)|0,i=(i=i+Math.imul(j,Z)|0)+Math.imul(I,X)|0,o=o+Math.imul(I,Z)|0,n=n+Math.imul(S,$)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(P,$)|0,o=o+Math.imul(P,ee)|0,n=n+Math.imul(x,re)|0,i=(i=i+Math.imul(x,ne)|0)+Math.imul(_,re)|0,o=o+Math.imul(_,ne)|0,n=n+Math.imul(w,oe)|0,i=(i=i+Math.imul(w,ae)|0)+Math.imul(O,oe)|0,o=o+Math.imul(O,ae)|0,n=n+Math.imul(g,ue)|0,i=(i=i+Math.imul(g,ce)|0)+Math.imul(y,ue)|0,o=o+Math.imul(y,ce)|0,n=n+Math.imul(p,fe)|0,i=(i=i+Math.imul(p,he)|0)+Math.imul(m,fe)|0,o=o+Math.imul(m,he)|0;var ke=(c+(n=n+Math.imul(f,pe)|0)|0)+((8191&(i=(i=i+Math.imul(f,me)|0)+Math.imul(h,pe)|0))<<13)|0;c=((o=o+Math.imul(h,me)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(U,H),i=(i=Math.imul(U,K))+Math.imul(B,H)|0,o=Math.imul(B,K),n=n+Math.imul(N,Y)|0,i=(i=i+Math.imul(N,q)|0)+Math.imul(C,Y)|0,o=o+Math.imul(C,q)|0,n=n+Math.imul(L,X)|0,i=(i=i+Math.imul(L,Z)|0)+Math.imul(R,X)|0,o=o+Math.imul(R,Z)|0,n=n+Math.imul(j,$)|0,i=(i=i+Math.imul(j,ee)|0)+Math.imul(I,$)|0,o=o+Math.imul(I,ee)|0,n=n+Math.imul(S,re)|0,i=(i=i+Math.imul(S,ne)|0)+Math.imul(P,re)|0,o=o+Math.imul(P,ne)|0,n=n+Math.imul(x,oe)|0,i=(i=i+Math.imul(x,ae)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,ae)|0,n=n+Math.imul(w,ue)|0,i=(i=i+Math.imul(w,ce)|0)+Math.imul(O,ue)|0,o=o+Math.imul(O,ce)|0,n=n+Math.imul(g,fe)|0,i=(i=i+Math.imul(g,he)|0)+Math.imul(y,fe)|0,o=o+Math.imul(y,he)|0;var Se=(c+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((o=o+Math.imul(m,me)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(U,Y),i=(i=Math.imul(U,q))+Math.imul(B,Y)|0,o=Math.imul(B,q),n=n+Math.imul(N,X)|0,i=(i=i+Math.imul(N,Z)|0)+Math.imul(C,X)|0,o=o+Math.imul(C,Z)|0,n=n+Math.imul(L,$)|0,i=(i=i+Math.imul(L,ee)|0)+Math.imul(R,$)|0,o=o+Math.imul(R,ee)|0,n=n+Math.imul(j,re)|0,i=(i=i+Math.imul(j,ne)|0)+Math.imul(I,re)|0,o=o+Math.imul(I,ne)|0,n=n+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,ae)|0)+Math.imul(P,oe)|0,o=o+Math.imul(P,ae)|0,n=n+Math.imul(x,ue)|0,i=(i=i+Math.imul(x,ce)|0)+Math.imul(_,ue)|0,o=o+Math.imul(_,ce)|0,n=n+Math.imul(w,fe)|0,i=(i=i+Math.imul(w,he)|0)+Math.imul(O,fe)|0,o=o+Math.imul(O,he)|0;var Pe=(c+(n=n+Math.imul(g,pe)|0)|0)+((8191&(i=(i=i+Math.imul(g,me)|0)+Math.imul(y,pe)|0))<<13)|0;c=((o=o+Math.imul(y,me)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(U,X),i=(i=Math.imul(U,Z))+Math.imul(B,X)|0,o=Math.imul(B,Z),n=n+Math.imul(N,$)|0,i=(i=i+Math.imul(N,ee)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,ee)|0,n=n+Math.imul(L,re)|0,i=(i=i+Math.imul(L,ne)|0)+Math.imul(R,re)|0,o=o+Math.imul(R,ne)|0,n=n+Math.imul(j,oe)|0,i=(i=i+Math.imul(j,ae)|0)+Math.imul(I,oe)|0,o=o+Math.imul(I,ae)|0,n=n+Math.imul(S,ue)|0,i=(i=i+Math.imul(S,ce)|0)+Math.imul(P,ue)|0,o=o+Math.imul(P,ce)|0,n=n+Math.imul(x,fe)|0,i=(i=i+Math.imul(x,he)|0)+Math.imul(_,fe)|0,o=o+Math.imul(_,he)|0;var Ee=(c+(n=n+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,me)|0)+Math.imul(O,pe)|0))<<13)|0;c=((o=o+Math.imul(O,me)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(U,$),i=(i=Math.imul(U,ee))+Math.imul(B,$)|0,o=Math.imul(B,ee),n=n+Math.imul(N,re)|0,i=(i=i+Math.imul(N,ne)|0)+Math.imul(C,re)|0,o=o+Math.imul(C,ne)|0,n=n+Math.imul(L,oe)|0,i=(i=i+Math.imul(L,ae)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,ae)|0,n=n+Math.imul(j,ue)|0,i=(i=i+Math.imul(j,ce)|0)+Math.imul(I,ue)|0,o=o+Math.imul(I,ce)|0,n=n+Math.imul(S,fe)|0,i=(i=i+Math.imul(S,he)|0)+Math.imul(P,fe)|0,o=o+Math.imul(P,he)|0;var je=(c+(n=n+Math.imul(x,pe)|0)|0)+((8191&(i=(i=i+Math.imul(x,me)|0)+Math.imul(_,pe)|0))<<13)|0;c=((o=o+Math.imul(_,me)|0)+(i>>>13)|0)+(je>>>26)|0,je&=67108863,n=Math.imul(U,re),i=(i=Math.imul(U,ne))+Math.imul(B,re)|0,o=Math.imul(B,ne),n=n+Math.imul(N,oe)|0,i=(i=i+Math.imul(N,ae)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,ae)|0,n=n+Math.imul(L,ue)|0,i=(i=i+Math.imul(L,ce)|0)+Math.imul(R,ue)|0,o=o+Math.imul(R,ce)|0,n=n+Math.imul(j,fe)|0,i=(i=i+Math.imul(j,he)|0)+Math.imul(I,fe)|0,o=o+Math.imul(I,he)|0;var Ie=(c+(n=n+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,me)|0)+Math.imul(P,pe)|0))<<13)|0;c=((o=o+Math.imul(P,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(U,oe),i=(i=Math.imul(U,ae))+Math.imul(B,oe)|0,o=Math.imul(B,ae),n=n+Math.imul(N,ue)|0,i=(i=i+Math.imul(N,ce)|0)+Math.imul(C,ue)|0,o=o+Math.imul(C,ce)|0,n=n+Math.imul(L,fe)|0,i=(i=i+Math.imul(L,he)|0)+Math.imul(R,fe)|0,o=o+Math.imul(R,he)|0;var Te=(c+(n=n+Math.imul(j,pe)|0)|0)+((8191&(i=(i=i+Math.imul(j,me)|0)+Math.imul(I,pe)|0))<<13)|0;c=((o=o+Math.imul(I,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(U,ue),i=(i=Math.imul(U,ce))+Math.imul(B,ue)|0,o=Math.imul(B,ce),n=n+Math.imul(N,fe)|0,i=(i=i+Math.imul(N,he)|0)+Math.imul(C,fe)|0,o=o+Math.imul(C,he)|0;var Le=(c+(n=n+Math.imul(L,pe)|0)|0)+((8191&(i=(i=i+Math.imul(L,me)|0)+Math.imul(R,pe)|0))<<13)|0;c=((o=o+Math.imul(R,me)|0)+(i>>>13)|0)+(Le>>>26)|0,Le&=67108863,n=Math.imul(U,fe),i=(i=Math.imul(U,he))+Math.imul(B,fe)|0,o=Math.imul(B,he);var Re=(c+(n=n+Math.imul(N,pe)|0)|0)+((8191&(i=(i=i+Math.imul(N,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((o=o+Math.imul(C,me)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863;var Ae=(c+(n=Math.imul(U,pe))|0)+((8191&(i=(i=Math.imul(U,me))+Math.imul(B,pe)|0))<<13)|0;return c=((o=Math.imul(B,me))+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,u[0]=ve,u[1]=ge,u[2]=ye,u[3]=be,u[4]=we,u[5]=Oe,u[6]=Me,u[7]=xe,u[8]=_e,u[9]=ke,u[10]=Se,u[11]=Pe,u[12]=Ee,u[13]=je,u[14]=Ie,u[15]=Te,u[16]=Le,u[17]=Re,u[18]=Ae,0!==c&&(u[19]=c,r.length++),r};function g(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,f=(0|e.words[l])*(0|t.words[c]),h=67108863&f;s=67108863&(h=h+s|0),i+=(a=(a=a+(f/67108864|0)|0)+(h>>>26)|0)>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function y(e,t,r){return g(e,t,r)}function b(e,t){this.x=e,this.y=t}Math.imul||(v=m),o.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?v(this,e,t):r<63?m(this,e,t):r<1024?g(this,e,t):y(this,e,t)},b.prototype.makeRBT=function(e){for(var t=new Array(e),r=o.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},b.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},b.prototype.permute=function(e,t,r,n,i,o){for(var a=0;a<o;a++)n[a]=t[e[a]],i[a]=r[e[a]]},b.prototype.transform=function(e,t,r,n,i,o){this.permute(o,e,t,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),l=0;l<i;l+=s)for(var f=u,h=c,d=0;d<a;d++){var p=r[l+d],m=n[l+d],v=r[l+d+a],g=n[l+d+a],y=f*v-h*g;g=f*g+h*v,v=y,r[l+d]=p+v,n[l+d]=m+g,r[l+d+a]=p-v,n[l+d+a]=m-g,d!==s&&(y=u*f-c*h,h=u*h+c*f,f=y)}},b.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},b.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},b.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},b.prototype.convert13b=function(e,t,r,i){for(var o=0,a=0;a<t;a++)o+=0|e[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<i;++a)r[a]=0;n(0===o),n(0===(-8192&o))},b.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},b.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),u=new Array(n),c=new Array(n),l=new Array(n),f=new Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,a,n),this.convert13b(t.words,t.length,c,n),this.transform(a,o,s,u,n,i),this.transform(c,o,l,f,n,i);for(var d=0;d<n;d++){var p=s[d]*l[d]-u[d]*f[d];u[d]=s[d]*f[d]+u[d]*l[d],s[d]=p}return this.conjugate(s,u,n),this.transform(s,u,h,o,n,i),this.conjugate(h,o,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),y(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"===typeof e),n(e<67108864);for(var r=0,i=0;i<this.length;i++){var o=(0|this.words[i])*e,a=(67108863&o)+(67108863&r);r>>=26,r+=o/67108864|0,r+=a>>>26,this.words[i]=67108863&a}return 0!==r&&(this.words[i]=r,this.length++),t?this.ineg():this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=e.words[n]>>>i&1}return t}(e);if(0===t.length)return new o(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(e){n("number"===typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,u=(0|this.words[t])-s<<r;this.words[t]=u|a,a=s>>>26-r}a&&(this.words[t]=a,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},o.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,r){var i;n("number"===typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var c=0;c<a;c++)u.words[c]=this.words[c];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var f=0|this.words[c];this.words[c]=l<<26-o|f>>>o,l=f&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){n("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(e){n("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return n("number"===typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(n("number"===typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,r){var i,o,a=e.length+r;this._expand(a);var s=0;for(i=0;i<e.length;i++){o=(0|this.words[i+r])+s;var u=(0|e.words[i])*t;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this._strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,a=0|i.words[i.length-1];0!==(r=26-this._countBits(a))&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var s,u=n.length-i.length;if("mod"!==t){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var l=n.clone()._ishlnsubmul(i,1,u);0===l.negative&&(n=l,s&&(s.words[u]=1));for(var f=u-1;f>=0;f--){var h=67108864*(0|n.words[i.length+f])+(0|n.words[i.length+f-1]);for(h=Math.min(h/a|0,67108863),n._ishlnsubmul(i,h,f);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,f),n.isZero()||(n.negative^=1);s&&(s.words[f]=h)}return s&&s._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},o.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(i=s.div.neg()),"div"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(e)),{div:i,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(i=s.div.neg()),{div:i,mod:s.mod}):0!==(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,a,s},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=(1<<26)%e,i=0,o=this.length-1;o>=0;o--)i=(r*i+(0|this.words[o]))%e;return t?-i:i},o.prototype.modn=function(e){return this.modrn(e)},o.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*r;this.words[i]=o/e|0,r=o%e}return this._strip(),t?this.ineg():this},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),f=t.clone();!t.isZero();){for(var h=0,d=1;0===(t.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(l),a.isub(f)),i.iushrn(1),a.iushrn(1);for(var p=0,m=1;0===(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(f)),s.iushrn(1),u.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(s),a.isub(u)):(r.isub(t),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:r.iushln(c)}},o.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,a=new o(1),s=new o(0),u=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var c=0,l=1;0===(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var f=0,h=1;0===(r.words[0]&h)&&f<26;++f,h<<=1);if(f>0)for(r.iushrn(f);f-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);t.cmp(r)>=0?(t.isub(r),a.isub(s)):(r.isub(t),s.isub(a))}return(i=0===t.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){n("number"===typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new S(e)},o.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var w={k256:null,p224:null,p192:null,p25519:null};function O(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function M(){O.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){O.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){O.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function k(){O.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"===typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function P(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}O.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},O.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},O.prototype.split=function(e,t){e.iushrn(this.n,0,t)},O.prototype.imulK=function(e){return e.imul(this.k)},i(M,O),M.prototype.split=function(e,t){for(var r=Math.min(e.length,9),n=0;n<r;n++)t.words[n]=e.words[n];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,n=10;n<e.length;n++){var o=0|e.words[n];e.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,e.words[n-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},M.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(x,O),i(_,O),i(k,O),k.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(w[e])return w[e];var t;if("k256"===e)t=new M;else if("p224"===e)t=new x;else if("p192"===e)t=new _;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new k}return w[e]=t,t},S.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){n(0===(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(l(e,e.umod(this.m)._forceRed(this)),e)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},S.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2===1),3===t){var r=this.m.add(new o(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var f=this.pow(l,i),h=this.pow(e,i.addn(1).iushrn(1)),d=this.pow(e,i),p=a;0!==d.cmp(s);){for(var m=d,v=0;0!==m.cmp(s);v++)m=m.redSqr();n(v<p);var g=this.pow(f,new o(1).iushln(p-v-1));h=h.redMul(g),f=g.redSqr(),d=d.redMul(f),p=v}return h},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],a=0,s=0,u=t.bitLength()%26;for(0===u&&(u=26),n=t.length-1;n>=0;n--){for(var c=t.words[n],l=u-1;l>=0;l--){var f=c>>l&1;i!==r[0]&&(i=this.sqr(i)),0!==f||0!==a?(a<<=1,a|=f,(4===++s||0===n&&0===l)&&(i=this.mul(i,r[a]),s=0,a=0)):s=0}u=26}return i},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new P(e)},i(P,S),P.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},P.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},P.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},P.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},P.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,r("YuTi")(e))},MTkB:function(e,t,r){(function(t){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=19)}([function(e,t){e.exports=r("JUoo")},function(e,t){e.exports=r("o0o1")},function(e,t){e.exports=r("yXPU")},function(e,t){e.exports=r("eRdg")},function(e,t){e.exports=r("W6Pm")},function(e,t){e.exports=r("rE/H")},function(e,t){e.exports=r("uIhD")},function(e,t){e.exports=r("lSNA")},function(e,t){e.exports=r("lwsE")},function(e,t){e.exports=r("Nsbk")},function(e,t){e.exports=r("RIqP")},function(e,t){e.exports=r("cDf5")},function(e,t){e.exports=r("W8MJ")},function(e,t){e.exports=r("MzeL")},function(e,t){e.exports=r("C99U")},function(e,t){e.exports=r("XH0y")},function(e,t){e.exports=r("7W2i")},function(e,t){e.exports=r("a1gu")},function(e,t){e.exports=r("oShl")},function(e,r,n){"use strict";n.r(r);var i=n(7),o=n.n(i),a=n(11),s=n.n(a),u=n(2),c=n.n(u),l=n(8),f=n.n(l),h=n(12),d=n.n(h),p=n(1),m=n.n(p),v=n(6),g=n(3),y=n(0),b=n.n(y),w=n(13),O=n(5),M=n.n(O),x=n(14),_=n.n(x),k=n(4),S=n(15),P=n.n(S).a.getLogger("torus.js"),E=n(16),j=n.n(E),I=n(17),T=n.n(I),L=n(9),R=n.n(L),A=n(18);var N=function(e){j()(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=R()(e);if(t){var i=R()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return T()(this,r)}}(r);function r(e){var n,i=e.errors,o=e.responses,a=e.predicate;return f()(this,r),(n=t.call(this,"Unable to resolve enough promises.")).errors=i,n.responses=o,n.predicate=a,n}return r}(n.n(A)()(Error)),C=function(e,t){return new Promise((function(r,n){var i,o=0,a={resolved:!1},s=new Array(e.length).fill(void 0),u=new Array(e.length).fill(void 0);e.forEach((function(c,l){c.then((function(e){u[l]=e})).catch((function(e){s[l]=e})).finally((function(){a.resolved||t(u.slice(0),a).then((function(e){a.resolved=!0,r(e)})).catch((function(e){i=e})).finally((function(t){if((o+=1)===e.length){var r=Object.values(u.reduce((function(e,t){var r,n,i=t||{},o=i.id,a=i.error;return(null==a||null===(r=a.data)||void 0===r?void 0:r.length)>0&&(a.data.startsWith("Error occurred while verifying params")?e[o]=(n=a.data).charAt(0).toUpperCase()+n.slice(1):e[o]=a.data),e}),{}));if(r.length>0){var a=r.length>1?"\n".concat(r.map((function(e){return"\u2022 ".concat(e)})).join("\n")):r[0];n(new Error(a))}else{var c;n(new N({errors:s,responses:u,predicate:(null===(c=i)||void 0===c?void 0:c.message)||i}))}}}))}))}))}))},D=n(10),U=n.n(D);function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var G=function e(t,r){var n=t;if("number"==typeof n&&(n=Array.from({length:n},(function(e,t){return t}))),r>n.length||r<=0)return[];if(r===n.length)return[n];if(1===r)return n.reduce((function(e,t){return[].concat(U()(e),[[t]])}),[]);for(var i=[],o=[],a=0;a<=n.length-r+1;a+=1){o=e(n.slice(a+1),r-1);for(var s=0;s<o.length;s+=1)i.push([n[a]].concat(U()(o[s])))}return i},J=function(e,t){for(var r={},n=0;n<e.length;n+=1){var i=M()(e[n]);if(r[i]=r[i]?r[i]+1:1,r[i]===t)return e[n]}},W=function(){var e=c()(m.a.mark((function e(t,r,n){var i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.map((function(e){return Object(g.post)(e,Object(g.generateJsonRPCObject)("VerifierLookupRequest",{verifier:r,verifier_id:n.toString()})).catch((function(e){return P.error("lookup request failed",e)}))})),e.abrupt("return",C(i,(function(e){var r=e.filter((function(e){return e})),n=J(r.map((function(e){return e&&e.error})),1+~~(t.length/2)),i=J(r.map((function(e){return e&&e.result})),1+~~(t.length/2));return i||n?Promise.resolve({keyResult:i,errorResult:n}):Promise.reject(new Error("invalid results ".concat(JSON.stringify(e))))})));case 2:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),H=function(e,t,r,n){return new Promise((function(i,o){setTimeout((function(){W(e,t,r).then(i).catch(o)}),n)}))},K=function(){var e=c()(m.a.mark((function e(t,r,n,i,o,a){var s,u,c,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n?(s=Math.floor(Math.random()*t.length),u=s):s=n%t.length,s!==i){e.next=3;break}throw new Error("Looped through all");case 3:return void 0!==i&&(u=i),c=Object(g.generateJsonRPCObject)("KeyAssign",{verifier:o,verifier_id:a.toString()}),e.prev=5,e.next=8,Object(g.post)("https://signer.tor.us/api/sign",c,{headers:{pubKeyX:r[s].X,pubKeyY:r[s].Y}},{useAPIKey:!0});case 8:return l=e.sent,e.abrupt("return",Object(g.post)(t[s],F(F({},c),l),{headers:{"Content-Type":"application/json; charset=utf-8"}}));case 12:return e.prev=12,e.t0=e.catch(5),P.error(e.t0),e.abrupt("return",K(t,r,s+1,u,o,a));case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,r,n,i,o,a){return e.apply(this,arguments)}}();function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var q=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.enableLogging,n=void 0!==r&&r,i=t.metadataHost,o=void 0===i?"https://metadata.tor.us":i,a=t.allowHost,s=void 0===a?"https://signer.tor.us/api/allow":a,u=t.serverTimeOffset,c=void 0===u?0:u;f()(this,e),this.ec=new w.ec("secp256k1"),this.metadataHost=o,this.allowHost=s,this.metadataCache=_.a,n||P.disableAll(),this.metadataLock={},this.serverTimeOffset=c||0}var r,n,i,o,a;return d()(e,[{key:"setCustomKey",value:(a=c()(m.a.mark((function e(t){var r,n,i,o,a,s,u,c,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.privKeyHex,n=t.metadataNonce,i=t.torusKeyHex,o=t.customKeyHex,i?a=new b.a(i,16):(s=new b.a(r,16),a=s.sub(n).umod(this.ec.curve.n)),u=new b.a(o,16),c=u.sub(a).umod(this.ec.curve.n),l=this.generateMetadataParams(c.toString(16),a.toString(16)),e.next=7,this.setMetadata(l);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"retrieveShares",value:(o=c()(m.a.mark((function e(r,n,i,o,a){var u,l,f,h,d,p,y,w,O,M=this,x=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=x.length>5&&void 0!==x[5]?x[5]:{},l=[],e.next=4,Object(g.get)(this.allowHost,{headers:{verifier:i,verifier_id:o.verifier_id}},{useAPIKey:!0});case 4:for(f=Object(v.generatePrivate)(),h=Object(v.getPublic)(f).toString("hex"),d=h.slice(2,66),p=h.slice(66),y=Object(k.keccak256)(a),w=0;w<r.length;w+=1)O=Object(g.post)(r[w],Object(g.generateJsonRPCObject)("CommitmentRequest",{messageprefix:"mug00",tokencommitment:y.slice(2),temppubx:d,temppuby:p,verifieridentifier:i})).catch((function(e){return P.error("commitment",e)})),l.push(O);return e.abrupt("return",C(l,(function(e){return e.filter((function(e){return!(!e||"object"!==s()(e)||e.error)})).length>=3*~~(r.length/4)+1?Promise.resolve(e):Promise.reject(new Error("invalid ".concat(JSON.stringify(e))))})).then((function(e){for(var s=[],l=[],h=0;h<e.length;h+=1)e[h]&&l.push(e[h].result);for(var d=0;d<r.length;d+=1){var p=Object(g.post)(r[d],Object(g.generateJsonRPCObject)("ShareRequest",{encrypted:"yes",item:[Y(Y({},o),{},{idtoken:a,nodesignatures:l,verifieridentifier:i},u)]})).catch((function(e){return P.error("share req",e)}));s.push(p)}return C(s,function(){var e=c()(m.a.mark((function e(i,o){var a,s,u,c,l,h,d,p,g,y,w,O,x,_;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.filter((function(e){return e})),s=J(i.map((function(e){return e&&e.result&&e.result.keys[0].PublicKey})),1+~~(r.length/2)),!(a.length>=1+~~(r.length/2)&&s)){e.next=32;break}for(u=[],c=[],l=0;l<i.length;l+=1)i[l]&&i[l].result&&i[l].result.keys&&i[l].result.keys.length>0?(i[l].result.keys.sort((function(e,t){return new b.a(e.Index,16).cmp(new b.a(t.Index,16))})),i[l].result.keys[0].Metadata?(h={ephemPublicKey:t.from(i[l].result.keys[0].Metadata.ephemPublicKey,"hex"),iv:t.from(i[l].result.keys[0].Metadata.iv,"hex"),mac:t.from(i[l].result.keys[0].Metadata.mac,"hex"),mode:t.from(i[l].result.keys[0].Metadata.mode,"hex")},u.push(Object(v.decrypt)(f,Y(Y({},h),{},{ciphertext:t.from(atob(i[l].result.keys[0].Share).padStart(64,"0"),"hex")})).catch((function(e){return P.debug("share decryption",e)})))):u.push(Promise.resolve(t.from(i[l].result.keys[0].Share.padStart(64,"0"),"hex")))):u.push(Promise.resolve(void 0)),c.push(new b.a(n[l],16));return e.next=8,Promise.all(u);case 8:if(d=e.sent,!o.resolved){e.next=11;break}return e.abrupt("return",void 0);case 11:p=d.reduce((function(e,t,r){return t&&e.push({index:c[r],value:new b.a(t)}),e}),[]),g=G(p.length,1+~~(r.length/2)),w=function(e){var r=g[e],n=p.filter((function(e,t){return r.includes(t)})),i=n.map((function(e){return e.value})),o=n.map((function(e){return e.index})),a=M.lagrangeInterpolation(i,o),u=Object(v.getPublic)(t.from(a.toString(16,64),"hex")).toString("hex"),c=u.slice(2,66),l=u.slice(66);if(0===new b.a(c,16).cmp(new b.a(s.X,16))&&0===new b.a(l,16).cmp(new b.a(s.Y,16)))return y=a,"break"},O=0;case 15:if(!(O<g.length)){e.next=22;break}if("break"!==w(O)){e.next=19;break}return e.abrupt("break",22);case 19:O+=1,e.next=15;break;case 22:if(void 0!==y){e.next=24;break}throw new Error("could not derive private key");case 24:return e.next=26,M.getMetadata({pub_key_X:s.X,pub_key_Y:s.Y});case 26:if(x=e.sent,!o.resolved){e.next=29;break}return e.abrupt("return",void 0);case 29:return y=y.add(x).umod(M.ec.curve.n),_=M.generateAddressFromPrivKey(y),e.abrupt("return",{ethAddress:_,privKey:y.toString("hex",64),metadataNonce:x});case 32:throw new Error("invalid");case 33:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())})));case 11:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n,i){return o.apply(this,arguments)})},{key:"getMetadata",value:(i=c()(m.a.mark((function e(t,r){var n,i,o,a,s=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=M()(t),null===this.metadataLock[i]){e.next=7;break}return e.next=5,this.metadataLock[i];case 5:e.next=8;break;case 7:this.metadataLock[i]=new Promise((function(e){n=function(){s.metadataLock[i]=null,e()}}));case 8:if(null===(o=this.metadataCache.get(i))){e.next=12;break}return n&&n(),e.abrupt("return",o);case 12:return e.next=14,Object(g.post)("".concat(this.metadataHost,"/get"),t,r,{useAPIKey:!0});case 14:if((a=e.sent)&&a.message){e.next=19;break}return this.metadataCache.put(i,new b.a(0),6e4),n&&n(),e.abrupt("return",new b.a(0));case 19:return this.metadataCache.put(i,new b.a(a.message,16),6e4),e.abrupt("return",new b.a(a.message,16));case 23:return e.prev=23,e.t0=e.catch(0),P.error("get metadata error",e.t0),n&&n(),e.abrupt("return",new b.a(0));case 28:case"end":return e.stop()}}),e,this,[[0,23]])}))),function(e,t){return i.apply(this,arguments)})},{key:"generateMetadataParams",value:function(e,r){var n=this.ec.keyFromPrivate(r.toString("hex",64)),i={data:e,timestamp:new b.a(~~(this.serverTimeOffset+Date.now()/1e3)).toString(16)},o=n.sign(Object(k.keccak256)(M()(i)).slice(2));return{pub_key_X:n.getPublic().getX().toString("hex"),pub_key_Y:n.getPublic().getY().toString("hex"),set_data:i,signature:t.from(o.r.toString(16,64)+o.s.toString(16,64)+new b.a(o.v).toString(16,2),"hex").toString("base64")}}},{key:"setMetadata",value:(n=c()(m.a.mark((function e(t,r){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.metadataCache.del(M()({pub_key_X:t.pub_key_X,pub_key_Y:t.pub_key_Y})),e.next=4,Object(g.post)("".concat(this.metadataHost,"/set"),t,r,{useAPIKey:!0});case 4:return n=e.sent,e.abrupt("return",n.message);case 8:return e.prev=8,e.t0=e.catch(0),P.error("set metadata error",e.t0),e.abrupt("return","");case 12:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e,t){return n.apply(this,arguments)})},{key:"lagrangeInterpolation",value:function(e,t){if(e.length!==t.length)return null;for(var r=new b.a(0),n=0;n<e.length;n+=1){for(var i=new b.a(1),o=new b.a(1),a=0;a<e.length;a+=1)if(n!==a){i=(i=i.mul(t[a].neg())).umod(this.ec.curve.n);var s=t[n].sub(t[a]);s=s.umod(this.ec.curve.n),o=o.mul(s).umod(this.ec.curve.n)}var u=i.mul(o.invm(this.ec.curve.n)).umod(this.ec.curve.n);u=u.mul(e[n]).umod(this.ec.curve.n),r=r.add(u)}return r.umod(this.ec.curve.n)}},{key:"generateAddressFromPrivKey",value:function(e){var r=this.ec.keyFromPrivate(e.toString("hex",64),"hex").getPublic().encode("hex").slice(2),n="0x".concat(Object(k.keccak256)(t.from(r,"hex")).slice(26));return Object(k.toChecksumAddress)(n)}},{key:"generateAddressFromPubKey",value:function(e,r){var n=this.ec.keyFromPublic({x:e.toString("hex",64),y:r.toString("hex",64)}).getPublic().encode("hex").slice(2),i="0x".concat(Object(k.keccak256)(t.from(n,"hex")).slice(26));return Object(k.toChecksumAddress)(i)}},{key:"getPublicAddress",value:(r=c()(m.a.mark((function e(t,r,n){var i,o,a,s,u,c,l,f,h,d,p,v,g,y,b=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.verifier,o=n.verifierId,a=b.length>3&&void 0!==b[3]&&b[3],e.next=4,W(t,i,o);case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:if(u=e.t0,c=u.keyResult,!(l=u.errorResult)||!JSON.stringify(l).includes("Verifier + VerifierID has not yet been assigned")){e.next=22;break}return e.next=13,K(t,r,void 0,void 0,i,o);case 13:return e.next=15,H(t,i,o,1e3);case 15:if(e.t1=e.sent,e.t1){e.next=18;break}e.t1={};case 18:f=e.t1,s=f.keyResult,e.next=27;break;case 22:if(!c){e.next=26;break}s=c,e.next=27;break;case 26:throw new Error("node results do not match at first lookup ".concat(JSON.stringify(c||{}),", ").concat(JSON.stringify(l||{})));case 27:if(!s){e.next=39;break}return h=s.keys[0],d=h.pub_key_X,p=h.pub_key_Y,e.next=31,this.getMetadata({pub_key_X:d,pub_key_Y:p});case 31:if(v=e.sent,g=this.ec.keyFromPublic({x:d.toString(16),y:p.toString(16)}).getPublic().add(this.ec.keyFromPrivate(v.toString(16)).getPublic()),d=g.getX().toString(16),p=g.getY().toString(16),y=this.generateAddressFromPubKey(g.getX(),g.getY()),a){e.next=38;break}return e.abrupt("return",y);case 38:return e.abrupt("return",{address:y,X:d,Y:p,metadataNonce:v});case 39:throw new Error("node results do not match at final lookup ".concat(JSON.stringify(c||{}),", ").concat(JSON.stringify(l||{})));case 40:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return r.apply(this,arguments)})}],[{key:"setAPIKey",value:function(e){Object(g.setAPIKey)(e)}},{key:"setEmbedHost",value:function(e){Object(g.setEmbedHost)(e)}}]),e}();r.default=q}]).default}).call(this,r("HDXh").Buffer)},Nsbk:function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,r(t)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0},NwGJ:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/asset",function(){return r("CDBg")}])},PE4B:function(e,t,r){"use strict";var n=function(e){return function(e){return!!e&&"object"===typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===i}(e)}(e)};var i="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function o(e,t){return!1!==t.clone&&t.isMergeableObject(e)?l((r=e,Array.isArray(r)?[]:{}),e,t):e;var r}function a(e,t,r){return e.concat(t).map((function(e){return o(e,r)}))}function s(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function u(e,t){try{return t in e}catch(r){return!1}}function c(e,t,r){var n={};return r.isMergeableObject(e)&&s(e).forEach((function(t){n[t]=o(e[t],r)})),s(t).forEach((function(i){(function(e,t){return u(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(u(e,i)&&r.isMergeableObject(t[i])?n[i]=function(e,t){if(!t.customMerge)return l;var r=t.customMerge(e);return"function"===typeof r?r:l}(i,r)(e[i],t[i],r):n[i]=o(t[i],r))})),n}function l(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||a,r.isMergeableObject=r.isMergeableObject||n,r.cloneUnlessOtherwiseSpecified=o;var i=Array.isArray(t);return i===Array.isArray(e)?i?r.arrayMerge(e,t,r):c(e,t,r):o(t,r)}l.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,r){return l(e,r,t)}),{})};var f=l;e.exports=f},PJYZ:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},QILm:function(e,t,r){var n=r("8OQS");e.exports=function(e,t){if(null==e)return{};var r,i,o=n(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o},e.exports.default=e.exports,e.exports.__esModule=!0},RIqP:function(e,t,r){var n=r("Ijbi"),i=r("EbDI"),o=r("ZhPi"),a=r("Bnag");e.exports=function(e){return n(e)||i(e)||o(e)||a()},e.exports.default=e.exports,e.exports.__esModule=!0},S5RI:function(e,t,r){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=22)}([function(e,t){e.exports=r("lSNA")},function(e,t){e.exports=r("o0o1")},function(e,t){e.exports=r("yXPU")},function(e,t){e.exports=r("PJYZ")},function(e,t){e.exports=r("Nsbk")},function(e,t){e.exports=r("lwsE")},function(e,t){e.exports=r("W8MJ")},function(e,t){e.exports=r("7W2i")},function(e,t){e.exports=r("a1gu")},function(e,t){e.exports=r("PE4B")},function(e,t){e.exports=r("QILm")},function(e,t){e.exports=r("J4zp")},function(e,t){e.exports=r("XH0y")},function(e,t){e.exports=r("EjJx")},function(e,t){e.exports=r("eRdg")},function(e,t){e.exports=r("I24s")},function(e,t){e.exports=r("W6Pm")},function(e,t){e.exports=r("MTkB")},function(e,t){e.exports=r("q1ed")},function(e,t,r){"use strict";var n,i="object"===typeof Reflect?Reflect:null,o=i&&"function"===typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!==e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(r,n){function i(){void 0!==o&&e.removeListener("error",o),r([].slice.call(arguments))}var o;"error"!==t&&(o=function(r){e.removeListener(t,i),n(r)},e.once("error",o)),e.once(t,i)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function f(e,t,r,n){var i,o,a,s;if(c(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]),void 0===a)a=o[t]=r,++e._eventsCount;else if("function"===typeof a?a=o[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=l(e))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=h.bind(n);return i.listener=r,n.wrapFn=i,i}function p(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"===typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):v(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function v(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[e];if(void 0===u)return!1;if("function"===typeof u)o(u,this,t);else{var c=u.length,l=v(u,c);for(r=0;r<c;++r)o(l[r],this,t)}return!0},s.prototype.addListener=function(e,t){return f(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return f(this,e,t,!0)},s.prototype.once=function(e,t){return c(t),this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,d(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,n,i,o,a;if(c(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!==typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},s.prototype.listeners=function(e){return p(this,e,!0)},s.prototype.rawListeners=function(e){return p(this,e,!1)},s.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t){e.exports=r("pVtG")},function(e,t){e.exports=r("VCN7")},function(e,t,r){"use strict";r.r(t),r.d(t,"createHandler",(function(){return Ce})),r.d(t,"default",(function(){return Qe})),r.d(t,"TORUS_NETWORK",(function(){return u})),r.d(t,"ETHEREUM_NETWORK",(function(){return c})),r.d(t,"LOGIN",(function(){return l})),r.d(t,"AGGREGATE_VERIFIER",(function(){return f})),r.d(t,"UX_MODE",(function(){return h})),r.d(t,"REDIRECT_PARAMS_STORAGE_METHOD",(function(){return d})),r.d(t,"TORUS_METHOD",(function(){return p})),r.d(t,"CONTRACT_MAP",(function(){return m})),r.d(t,"eventToPromise",(function(){return K})),r.d(t,"loginToConnectionMap",(function(){return z})),r.d(t,"padUrlString",(function(){return Y})),r.d(t,"broadcastChannelOptions",(function(){return q})),r.d(t,"getVerifierId",(function(){return X})),r.d(t,"handleRedirectParameters",(function(){return Z})),r.d(t,"storageAvailable",(function(){return Q})),r.d(t,"storeLoginDetails",(function(){return ee})),r.d(t,"retrieveLoginDetails",(function(){return te})),r.d(t,"clearLoginDetailsStorage",(function(){return re})),r.d(t,"clearOrphanedLoginDetails",(function(){return ne})),r.d(t,"getPopupFeatures",(function(){return ie})),r.d(t,"isFirefox",(function(){return oe})),r.d(t,"constructURL",(function(){return ae}));var n,i,o,a=r(0),s=r.n(a),u={TESTNET:"testnet",MAINNET:"mainnet"},c={ROPSTEN:"ropsten",MAINNET:"mainnet"},l={GOOGLE:"google",FACEBOOK:"facebook",REDDIT:"reddit",DISCORD:"discord",TWITCH:"twitch",APPLE:"apple",GITHUB:"github",LINKEDIN:"linkedin",TWITTER:"twitter",WEIBO:"weibo",LINE:"line",EMAIL_PASSWORD:"email_password",PASSWORDLESS:"passwordless",JWT:"jwt",WEBAUTHN:"webauthn"},f={SINGLE_VERIFIER_ID:"single_id_verifier"},h={POPUP:"popup",REDIRECT:"redirect"},d={LOCAL_STORAGE:"localStorage",SESSION_STORAGE:"sessionStorage"},p={TRIGGER_LOGIN:"triggerLogin",TRIGGER_AGGREGATE_LOGIN:"triggerAggregateLogin",TRIGGER_AGGREGATE_HYBRID_LOGIN:"triggerHybridAggregateLogin"},m=(n={},s()(n,u.MAINNET,"0x638646503746d5456209e33a2ff5e3226d698bea"),s()(n,u.TESTNET,"0x4023d2a0D330bF11426B12C6144Cfb96B7fa6183"),n),v=r(2),g=r.n(v),y=r(5),b=r.n(y),w=r(6),O=r.n(w),M=r(3),x=r.n(M),_=r(7),k=r.n(_),S=r(8),P=r.n(S),E=r(4),j=r.n(E),I=r(1),T=r.n(I),L=r(9),R=r.n(L),A=r(14),N=r(10),C=r.n(N),D=r(18),U=r.n(D),B=r(15),F=r(11),G=r.n(F),J=r(12),W=r.n(J),H=W.a.getLogger("torus-direct-web-sdk");function K(e){return new Promise((function(t,r){e.addEventListener("message",(function n(i){var o=i.error,a=void 0===o?"":o,s=i.data;return e.removeEventListener("message",n),a?r(new Error(a)):t(s)}))}))}var z=(i={},s()(i,l.APPLE,"apple"),s()(i,l.GITHUB,"github"),s()(i,l.LINKEDIN,"linkedin"),s()(i,l.TWITTER,"twitter"),s()(i,l.WEIBO,"weibo"),s()(i,l.LINE,"line"),s()(i,l.EMAIL_PASSWORD,"Username-Password-Authentication"),s()(i,l.PASSWORDLESS,"email"),i),Y=function(e){return e.href.endsWith("/")?e.href:"".concat(e.href,"/")},q={webWorkerSupport:!1};function V(e,t){return t?e:e.toLowerCase()}var X=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=e.name,o=e.sub;if(r)return V(e[r],n);switch(t){case l.PASSWORDLESS:case l.EMAIL_PASSWORD:return V(i,n);case l.WEIBO:case l.GITHUB:case l.TWITTER:case l.APPLE:case l.LINKEDIN:case l.LINE:case l.JWT:return V(o,n);default:throw new Error("Invalid login type")}},Z=function(e,t){var r=e.split("&").reduce((function(e,t){var r=t.split("="),n=G()(r,2),i=n[0],o=n[1];return e[i]=o,e}),{});H.info(r,t);var n={},i="";return Object.keys(r).length>0&&r.state?(n=JSON.parse(atob(decodeURIComponent(decodeURIComponent(r.state))))||{},i=r.error_description||r.error||i):Object.keys(t).length>0&&t.state&&(n=JSON.parse(atob(decodeURIComponent(decodeURIComponent(t.state))))||{},t.error&&(i=t.error)),{error:i,instanceParameters:n,hashParameters:r}};function Q(e){var t;try{t=window[e];var r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(n){return n&&(22===n.code||1014===n.code||"QuotaExceededError"===n.name||"NS_ERROR_DOM_QUOTA_REACHED"===n.name)&&t&&0!==t.length}}var $=(o={},s()(o,d.LOCAL_STORAGE,Q(d.LOCAL_STORAGE)),s()(o,d.SESSION_STORAGE,Q(d.SESSION_STORAGE)),o);function ee(e,t,r){$[t]&&window[t].setItem("torus_login_".concat(r),JSON.stringify(e))}function te(e,t){if($[e]){var r=window[e].getItem("torus_login_".concat(t));return JSON.parse(r||"{}")}throw new Error("Unable to retrieve stored login details")}function re(e,t){$[e]&&window[e].removeItem("torus_login_".concat(t))}function ne(e){$[e]&&Object.keys(window[e]).forEach((function(t){t.startsWith("torus_login_")&&window[e].removeItem(t)}))}function ie(){var e=void 0!==window.screenLeft?window.screenLeft:window.screenX,t=void 0!==window.screenTop?window.screenTop:window.screenY,r=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,n=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,i=Math.abs((r-1200)/2/1+e),o=Math.abs((n-700)/2/1+t);return"titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=".concat(700,",width=").concat(1200,",top=").concat(o,",left=").concat(i)}var oe=function(){var e,t;return(null===(e=window)||void 0===e||null===(t=e.navigator)||void 0===t?void 0:t.userAgent.toLowerCase().indexOf("firefox"))>-1||!1};function ae(e){var t=e.baseURL,r=e.query,n=e.hash,i=new URL(t);if(r&&Object.keys(r).forEach((function(e){i.searchParams.append(e,r[e])})),n){var o=new URL(ae({baseURL:t,query:n})).searchParams.toString();i.hash=o}return i.toString()}function se(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j()(e);if(t){var i=j()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P()(this,r)}}var ue=function(e){k()(r,e);var t=se(r);function r(e){var n,i=e.url,o=e.target,a=e.features;return b()(this,r),n=t.call(this),s()(x()(n),"url",void 0),s()(x()(n),"target",void 0),s()(x()(n),"features",void 0),s()(x()(n),"window",void 0),s()(x()(n),"windowTimer",void 0),s()(x()(n),"iClosedWindow",void 0),n.url=i,n.target=o||"_blank",n.features=a||ie(),n.window=void 0,n.windowTimer=void 0,n.iClosedWindow=!1,n._setupTimer(),n}return O()(r,[{key:"_setupTimer",value:function(){var e=this;this.windowTimer=Number(setInterval((function(){e.window&&e.window.closed&&(clearInterval(e.windowTimer),e.iClosedWindow||e.emit("close"),e.iClosedWindow=!1,e.window=void 0),void 0===e.window&&clearInterval(e.windowTimer)}),500))}},{key:"open",value:function(){var e;return this.window=window.open(this.url.href,this.target,this.features),null!==(e=this.window)&&void 0!==e&&e.focus&&this.window.focus(),Promise.resolve()}},{key:"close",value:function(){this.iClosedWindow=!0,this.window&&this.window.close()}},{key:"redirect",value:function(e){e?window.location.replace(this.url.href):window.location.href=this.url.href}}]),r}(r(19).EventEmitter),ce=["access_token","id_token"];function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var he=function(){function e(t,r,n,i,o,a,u,c){b()(this,e),this.clientId=t,this.verifier=r,this.redirect_uri=n,this.typeOfLogin=i,this.uxMode=o,this.redirectToOpener=a,this.jwtParams=u,this.customState=c,s()(this,"nonce",U()()),s()(this,"finalURL",void 0)}return O()(e,[{key:"state",get:function(){return encodeURIComponent(window.btoa(JSON.stringify(fe(fe({},this.customState||{}),{},{instanceId:this.nonce,verifier:this.verifier,typeOfLogin:this.typeOfLogin,redirectToOpener:this.redirectToOpener||!1}))))}},{key:"handleLoginWindow",value:function(e){var t=this,r=new ue({url:this.finalURL,features:e.popupFeatures});return this.uxMode!==h.REDIRECT?new Promise((function(e,n){var i,o=function(){var r=g()(T.a.mark((function r(o){var a,s,u,c,l,f,h,d;return T.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,a=o.error,s=o.data,c=(u=s||{}).instanceParams,l=u.hashParams,f=l.access_token,h=l.id_token,d=C()(l,ce),!a){r.next=7;break}return H.error(o),n(new Error("Error: ".concat(a,". Info: ").concat(JSON.stringify(o.data||{})))),r.abrupt("return");case 7:if(!o.data||c.verifier!==t.verifier){r.next=13;break}if(H.info(o.data),t.redirectToOpener||!i){r.next=12;break}return r.next=12,i.postMessage({success:!0});case 12:e(fe(fe({accessToken:f,idToken:h||""},d),{},{state:c}));case 13:r.next=19;break;case 15:r.prev=15,r.t0=r.catch(0),H.error(r.t0),n(r.t0);case 19:case"end":return r.stop()}}),r,null,[[0,15]])})));return function(e){return r.apply(this,arguments)}}();if(t.redirectToOpener){var a=function(){var e=g()(T.a.mark((function e(n){var i;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.data){e.next=2;break}return e.abrupt("return");case 2:if((i=n.data).channel==="redirect_channel_".concat(t.nonce)){e.next=5;break}return e.abrupt("return");case 5:window.removeEventListener("message",a),o(i),r.close();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();window.addEventListener("message",a)}else(i=new B.BroadcastChannel("redirect_channel_".concat(t.nonce),q)).addEventListener("message",function(){var e=g()(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t);case 2:i.close(),r.close();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());r.open(),r.once("close",(function(){i&&i.close(),n(new Error("user closed popup"))}))})):(r.redirect(e.locationReplaceOnRedirect),null)}}]),e}();function de(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j()(e);if(t){var i=j()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P()(this,r)}}var pe=function(e){k()(r,e);var t=de(r);function r(e,n,i,o,a,u,c,l){var f;return b()(this,r),(f=t.call(this,e,n,i,o,a,u,c,l)).clientId=e,f.verifier=n,f.redirect_uri=i,f.typeOfLogin=o,f.uxMode=a,f.redirectToOpener=u,f.jwtParams=c,f.customState=l,s()(x()(f),"RESPONSE_TYPE","token"),s()(x()(f),"SCOPE","identify email"),f.setFinalUrl(),f}return O()(r,[{key:"setFinalUrl",value:function(){var e=new URL("https://discordapp.com/api/oauth2/authorize"),t=JSON.parse(JSON.stringify(this.jwtParams||{})),r=R()({state:this.state,response_type:this.RESPONSE_TYPE,client_id:this.clientId,redirect_uri:this.redirect_uri,scope:this.SCOPE},t);Object.keys(r).forEach((function(t){r[t]&&e.searchParams.append(t,r[t])})),this.finalURL=e}},{key:"getUserInfo",value:function(){var e=g()(T.a.mark((function e(t){var r,n,i,o,a,s,u,c,l,f,h;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.accessToken,e.next=3,Object(A.get)("https://discordapp.com/api/users/@me",{headers:{Authorization:"Bearer ".concat(r)}});case 3:return n=e.sent,i=n.id,o=n.avatar,a=n.email,s=void 0===a?"":a,u=n.username,c=void 0===u?"":u,l=n.discriminator,f=void 0===l?"":l,h=null===o?"https://cdn.discordapp.com/embed/avatars/".concat(Number(f)%5,".png"):"https://cdn.discordapp.com/avatars/".concat(i,"/").concat(o,".png?size=2048"),e.abrupt("return",{profileImage:h,name:"".concat(c,"#").concat(f),email:s,verifierId:i,verifier:this.verifier,typeOfLogin:this.typeOfLogin});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(he);function me(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j()(e);if(t){var i=j()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P()(this,r)}}var ve=function(e){k()(r,e);var t=me(r);function r(e,n,i,o,a,u,c,l){var f;return b()(this,r),(f=t.call(this,e,n,i,o,a,u,c,l)).clientId=e,f.verifier=n,f.redirect_uri=i,f.typeOfLogin=o,f.uxMode=a,f.redirectToOpener=u,f.jwtParams=c,f.customState=l,s()(x()(f),"RESPONSE_TYPE","token"),s()(x()(f),"SCOPE","public_profile email"),f.setFinalUrl(),f}return O()(r,[{key:"setFinalUrl",value:function(){var e=new URL("https://www.facebook.com/v6.0/dialog/oauth"),t=JSON.parse(JSON.stringify(this.jwtParams||{})),r=R()({state:this.state,response_type:this.RESPONSE_TYPE,client_id:this.clientId,redirect_uri:this.redirect_uri,scope:this.SCOPE},t);Object.keys(r).forEach((function(t){r[t]&&e.searchParams.append(t,r[t])})),this.finalURL=e}},{key:"getUserInfo",value:function(){var e=g()(T.a.mark((function e(t){var r,n,i,o,a,s,u,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.accessToken,e.next=3,Object(A.get)("https://graph.facebook.com/me?fields=name,email,picture.type(large)",{headers:{Authorization:"Bearer ".concat(r)}});case 3:return n=e.sent,i=n.name,o=void 0===i?"":i,a=n.id,s=n.picture,u=n.email,c=void 0===u?"":u,e.abrupt("return",{email:c,name:o,profileImage:s.data.url||"",verifier:this.verifier,verifierId:a,typeOfLogin:this.typeOfLogin});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(he);function ge(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j()(e);if(t){var i=j()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P()(this,r)}}var ye=function(e){k()(r,e);var t=ge(r);function r(e,n,i,o,a,u,c,l){var f;return b()(this,r),(f=t.call(this,e,n,i,o,a,u,c,l)).clientId=e,f.verifier=n,f.redirect_uri=i,f.typeOfLogin=o,f.uxMode=a,f.redirectToOpener=u,f.jwtParams=c,f.customState=l,s()(x()(f),"RESPONSE_TYPE","token id_token"),s()(x()(f),"SCOPE","profile email openid"),s()(x()(f),"PROMPT","consent select_account"),f.setFinalUrl(),f}return O()(r,[{key:"setFinalUrl",value:function(){var e=new URL("https://accounts.google.com/o/oauth2/v2/auth"),t=JSON.parse(JSON.stringify(this.jwtParams||{})),r=R()({state:this.state,response_type:this.RESPONSE_TYPE,client_id:this.clientId,prompt:this.PROMPT,redirect_uri:this.redirect_uri,scope:this.SCOPE,nonce:this.nonce},t);Object.keys(r).forEach((function(t){r[t]&&e.searchParams.append(t,r[t])})),this.finalURL=e}},{key:"getUserInfo",value:function(){var e=g()(T.a.mark((function e(t){var r,n,i,o,a,s,u,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.accessToken,e.next=3,Object(A.get)("https://www.googleapis.com/userinfo/v2/me",{headers:{Authorization:"Bearer ".concat(r)}});case 3:return n=e.sent,i=n.picture,o=void 0===i?"":i,a=n.email,s=void 0===a?"":a,u=n.name,c=void 0===u?"":u,e.abrupt("return",{email:s,name:c,profileImage:o,verifier:this.verifier,verifierId:s.toLowerCase(),typeOfLogin:this.typeOfLogin});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(he),be=r(13),we=r.n(be);function Oe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j()(e);if(t){var i=j()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P()(this,r)}}var Me=function(e){k()(r,e);var t=Oe(r);function r(e,n,i,o,a,u,c,l){var f;return b()(this,r),(f=t.call(this,e,n,i,o,a,u,c,l)).clientId=e,f.verifier=n,f.redirect_uri=i,f.typeOfLogin=o,f.uxMode=a,f.redirectToOpener=u,f.jwtParams=c,f.customState=l,s()(x()(f),"SCOPE","openid profile email"),s()(x()(f),"RESPONSE_TYPE","token id_token"),s()(x()(f),"PROMPT","login"),f.setFinalUrl(),f}return O()(r,[{key:"setFinalUrl",value:function(){var e=this.jwtParams.domain,t=new URL(e);t.pathname+=t.pathname.endsWith("/")?"authorize":"/authorize";var r=JSON.parse(JSON.stringify(this.jwtParams));delete r.domain;var n=R()({state:this.state,response_type:this.RESPONSE_TYPE,client_id:this.clientId,prompt:this.PROMPT,redirect_uri:this.redirect_uri,scope:this.SCOPE,connection:z[this.typeOfLogin],nonce:this.nonce},r);Object.keys(n).forEach((function(e){n[e]&&t.searchParams.append(e,n[e])})),this.finalURL=t}},{key:"getUserInfo",value:function(){var e=g()(T.a.mark((function e(t){var r,n,i,o,a,s,u,c,l,f,h,d,p,m,v,g,y;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.idToken,n=t.accessToken,i=this.jwtParams,o=i.domain,a=i.verifierIdField,s=i.isVerifierIdCaseSensitive,u=i.user_info_route,c=void 0===u?"userinfo":u,!n){e.next=15;break}return e.prev=3,l=new URL(o),e.next=7,Object(A.get)("".concat(Y(l)).concat(c),{headers:{Authorization:"Bearer ".concat(n)}});case 7:return f=e.sent,h=f.picture,d=f.name,p=f.email,e.abrupt("return",{email:p,name:d,profileImage:h,verifierId:X(f,this.typeOfLogin,a,s),verifier:this.verifier,typeOfLogin:this.typeOfLogin});case 12:e.prev=12,e.t0=e.catch(3),W.a.warn(e.t0,"Unable to get userinfo from endpoint");case 15:if(!r){e.next=19;break}return m=we()(r),v=m.name,g=m.email,y=m.picture,e.abrupt("return",{profileImage:y,name:v,email:g,verifierId:X(m,this.typeOfLogin,a,s),verifier:this.verifier,typeOfLogin:this.typeOfLogin});case 19:throw new Error("Access/id token not available");case 20:case"end":return e.stop()}}),e,this,[[3,12]])})));return function(t){return e.apply(this,arguments)}}()}]),r}(he);function xe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j()(e);if(t){var i=j()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P()(this,r)}}var _e=function(e){k()(r,e);var t=xe(r);function r(e,n,i,o,a,s,u,c){var l;return b()(this,r),(l=t.call(this,e,n,i,o,a,s,u,c)).clientId=e,l.verifier=n,l.redirect_uri=i,l.typeOfLogin=o,l.uxMode=a,l.redirectToOpener=s,l.jwtParams=u,l.customState=c,l.setFinalUrl(),l}return O()(r,[{key:"setFinalUrl",value:function(){var e=JSON.parse(JSON.stringify(this.jwtParams));delete e.domain;var t=R()({state:this.state,client_id:this.clientId,nonce:this.nonce},e);this.finalURL=new URL(ae({baseURL:this.redirect_uri,query:null,hash:t}))}},{key:"getUserInfo",value:function(){var e=g()(T.a.mark((function e(t){var r,n,i,o,a,s,u,c,l,f,h,d,p,m,v,g,y;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.idToken,n=t.accessToken,i=this.jwtParams,o=i.domain,a=i.verifierIdField,s=i.isVerifierIdCaseSensitive,u=i.user_info_route,c=void 0===u?"userinfo":u,!n){e.next=15;break}return e.prev=3,l=new URL(o),e.next=7,Object(A.get)("".concat(Y(l)).concat(c),{headers:{Authorization:"Bearer ".concat(n)}});case 7:return f=e.sent,h=f.picture,d=f.name,p=f.email,e.abrupt("return",{email:p,name:d,profileImage:h,verifierId:X(f,this.typeOfLogin,a,s),verifier:this.verifier,typeOfLogin:this.typeOfLogin});case 12:e.prev=12,e.t0=e.catch(3),W.a.warn(e.t0,"Unable to get userinfo from endpoint");case 15:if(!r){e.next=19;break}return m=we()(r),v=m.name,g=m.email,y=m.picture,e.abrupt("return",{profileImage:y,name:v,email:g,verifierId:X(m,this.typeOfLogin,a,s),verifier:this.verifier,typeOfLogin:this.typeOfLogin});case 19:throw new Error("Access/id token not available");case 20:case"end":return e.stop()}}),e,this,[[3,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleLoginWindow",value:function(e){var t=this.jwtParams,r=t.id_token,n=t.access_token,i=new ue({url:this.finalURL,features:e.popupFeatures});return this.uxMode!==h.REDIRECT?Promise.resolve({state:{},idToken:r,accessToken:n}):(i.redirect(e.locationReplaceOnRedirect),null)}}]),r}(he),ke=["access_token","id_token"];function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ee(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j()(e);if(t){var i=j()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P()(this,r)}}var je=function(e){k()(r,e);var t=Ee(r);function r(e,n,i,o,a,u,c,l){var f;return b()(this,r),(f=t.call(this,e,n,i,o,a,u,c,l)).clientId=e,f.verifier=n,f.redirect_uri=i,f.typeOfLogin=o,f.uxMode=a,f.redirectToOpener=u,f.jwtParams=c,f.customState=l,s()(x()(f),"SCOPE","openid profile email"),s()(x()(f),"RESPONSE_TYPE","token id_token"),s()(x()(f),"PROMPT","login"),f.setFinalUrl(),f}return O()(r,[{key:"setFinalUrl",value:function(){var e=this.jwtParams.domain,t=new URL(e);t.pathname="/passwordless/start",this.finalURL=t}},{key:"getUserInfo",value:function(){var e=g()(T.a.mark((function e(t){var r,n,i,o,a,s,u,c,l,f,h,d,p,m,v;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.idToken,n=t.accessToken,i=this.jwtParams,o=i.domain,a=i.verifierIdField,s=i.isVerifierIdCaseSensitive,e.prev=2,u=new URL(o),e.next=6,Object(A.get)("".concat(Y(u),"userinfo"),{headers:{Authorization:"Bearer ".concat(n)}});case 6:return c=e.sent,l=c.picture,f=c.name,h=c.email,e.abrupt("return",{email:h,name:f,profileImage:l,verifierId:X(c,this.typeOfLogin,a,s),verifier:this.verifier,typeOfLogin:this.typeOfLogin});case 11:return e.prev=11,e.t0=e.catch(2),H.error(e.t0),d=we()(r),p=d.name,m=d.email,v=d.picture,e.abrupt("return",{profileImage:v,name:p,email:m,verifierId:X(d,this.typeOfLogin,a,s),verifier:this.verifier,typeOfLogin:this.typeOfLogin});case 17:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleLoginWindow",value:function(){var e=this;return new Promise((function(t,r){if(e.redirectToOpener)r(new Error("Cannot use redirect to opener for passwordless"));else{var n=function(n){try{var i=n.error,o=n.data||{},a=o.instanceParams,s=o.hashParams,u=s.access_token,c=s.id_token,l=C()(s,ke);if(i)return H.error(n.error),void r(new Error(i));n.data&&a.verifier===e.verifier&&(H.info(n.data),t(Pe(Pe({accessToken:u,idToken:c||""},l),{},{state:a})))}catch(i){H.error(i),r(i)}},i=new B.BroadcastChannel("redirect_channel_".concat(e.nonce),q);i.addEventListener("message",function(){var e=g()(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t),i.close();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());try{var o=e.jwtParams,a=o.connection,s=void 0===a?"email":a,u=o.login_hint,c=R()({client_id:e.clientId,connection:s,email:"email"===s?u:void 0,phone_number:"sms"===s?u:void 0,send:"link",authParams:{scope:e.SCOPE,state:e.state,response_type:e.RESPONSE_TYPE,redirect_uri:e.redirect_uri,nonce:e.nonce,prompt:e.PROMPT}},{authParams:e.jwtParams});Object(A.post)(e.finalURL.href,JSON.parse(JSON.stringify(c))).then((function(e){H.info("posted",e)})).catch((function(e){H.error(e),r(e)}))}catch(l){H.error(l),r(l)}}}))}}]),r}(he);function Ie(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j()(e);if(t){var i=j()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P()(this,r)}}var Te=function(e){k()(r,e);var t=Ie(r);function r(e,n,i,o,a,u,c,l){var f;return b()(this,r),(f=t.call(this,e,n,i,o,a,u,c,l)).clientId=e,f.verifier=n,f.redirect_uri=i,f.typeOfLogin=o,f.uxMode=a,f.redirectToOpener=u,f.jwtParams=c,f.customState=l,s()(x()(f),"RESPONSE_TYPE","token"),s()(x()(f),"SCOPE","identity"),f.setFinalUrl(),f}return O()(r,[{key:"setFinalUrl",value:function(){var e=new URL("https://www.reddit.com/api/v1/authorize".concat(window.innerWidth<600?".compact":"")),t=JSON.parse(JSON.stringify(this.jwtParams||{})),r=R()({state:this.state,response_type:this.RESPONSE_TYPE,client_id:this.clientId,redirect_uri:this.redirect_uri,scope:this.SCOPE},t);Object.keys(r).forEach((function(t){r[t]&&e.searchParams.append(t,r[t])})),this.finalURL=e}},{key:"getUserInfo",value:function(){var e=g()(T.a.mark((function e(t){var r,n,i,o,a,s;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.accessToken,e.next=3,Object(A.get)("https://oauth.reddit.com/api/v1/me",{headers:{Authorization:"Bearer ".concat(r)}});case 3:return n=e.sent,i=n.icon_img,o=void 0===i?"":i,a=n.name,s=void 0===a?"":a,e.abrupt("return",{email:"",name:s,profileImage:o.split("?").length>0?o.split("?")[0]:o,verifier:this.verifier,verifierId:s.toLowerCase(),typeOfLogin:this.typeOfLogin});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(he);function Le(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j()(e);if(t){var i=j()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P()(this,r)}}var Re=function(e){k()(r,e);var t=Le(r);function r(e,n,i,o,a,u,c,l){var f;return b()(this,r),(f=t.call(this,e,n,i,o,a,u,c,l)).clientId=e,f.verifier=n,f.redirect_uri=i,f.typeOfLogin=o,f.uxMode=a,f.redirectToOpener=u,f.jwtParams=c,f.customState=l,s()(x()(f),"RESPONSE_TYPE","token"),s()(x()(f),"SCOPE","user:read:email"),f.setFinalUrl(),f}return O()(r,[{key:"setFinalUrl",value:function(){var e=new URL("https://id.twitch.tv/oauth2/authorize"),t=JSON.parse(JSON.stringify(this.jwtParams||{})),r=R()({state:this.state,response_type:this.RESPONSE_TYPE,client_id:this.clientId,redirect_uri:this.redirect_uri,scope:this.SCOPE,force_verify:!0},t);Object.keys(r).forEach((function(t){r[t]&&e.searchParams.append(t,r[t])})),this.finalURL=e}},{key:"getUserInfo",value:function(){var e=g()(T.a.mark((function e(t){var r,n,i,o,a,s,u,c,l,f,h,d;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.accessToken,e.next=3,Object(A.get)("https://api.twitch.tv/helix/users",{headers:{Authorization:"Bearer ".concat(r),"Client-ID":this.clientId}});case 3:return n=e.sent,i=n.data||[],o=G()(i,1),a=o[0],s=a.profile_image_url,u=void 0===s?"":s,c=a.display_name,l=void 0===c?"":c,f=a.email,h=void 0===f?"":f,d=a.id,e.abrupt("return",{profileImage:u,name:l,email:h,verifierId:d,verifier:this.verifier,typeOfLogin:this.typeOfLogin});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(he);function Ae(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j()(e);if(t){var i=j()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P()(this,r)}}var Ne=function(e){k()(r,e);var t=Ae(r);function r(e,n,i,o,a,s,u,c,l){var f;return b()(this,r),(f=t.call(this,e,n,i,o,a,s,u,c)).clientId=e,f.verifier=n,f.redirect_uri=i,f.typeOfLogin=o,f.uxMode=a,f.redirectToOpener=s,f.jwtParams=u,f.customState=c,f.registerOnly=l,f.setFinalUrl(),f}return O()(r,[{key:"setFinalUrl",value:function(){var e=new URL("https://webauthn.openlogin.com"),t=JSON.parse(JSON.stringify(this.jwtParams||{})),r=R()({register_only:!!this.registerOnly,state:this.state,client_id:this.clientId,redirect_uri:this.redirect_uri},t);Object.keys(r).forEach((function(t){r[t]&&e.searchParams.append(t,r[t])})),this.finalURL=e}},{key:"getUserInfo",value:function(){var e=g()(T.a.mark((function e(t){var r,n,i,o,a,s,u,c,l,f,h,d,p,m,v;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.idToken,n=t.ref,i=t.extraParamsPassed,o=t.extraParams,"true"!==i){e.next=31;break}H.debug("extraParamsPassed is true, using extraParams passed through hashParams"),e.prev=3,p=JSON.parse(atob(o)),a=p.verifier_id,s=p.signature,u=p.clientDataJSON,c=p.authenticatorData,l=p.publicKey,f=p.challenge,h=p.rpOrigin,d=p.credId,e.next=29;break;case 15:return e.prev=15,e.t0=e.catch(3),H.warn("unable to parse extraParams",e.t0),e.next=20,Object(A.get)("".concat("https://api.webauthn.openlogin.com","/signature/fetch/").concat(r));case 20:m=e.sent,a=m.verifier_id,s=m.signature,u=m.clientDataJSON,c=m.authenticatorData,l=m.publicKey,f=m.challenge,h=m.rpOrigin,d=m.credId;case 29:e.next=43;break;case 31:return H.debug("extraParamsPassed is false, using extraParams passed through bridge server"),e.next=34,Object(A.get)("".concat("https://api.webauthn.openlogin.com","/signature/fetch/").concat(r));case 34:v=e.sent,a=v.verifier_id,s=v.signature,u=v.clientDataJSON,c=v.authenticatorData,l=v.publicKey,f=v.challenge,h=v.rpOrigin,d=v.credId;case 43:if(s===r){e.next=45;break}throw new Error("idtoken should be equal to signature");case 45:return e.abrupt("return",{email:"",name:"WebAuthn Login",profileImage:"",verifier:this.verifier,verifierId:a,typeOfLogin:this.typeOfLogin,ref:n,registerOnly:this.registerOnly,extraVerifierParams:{signature:s,clientDataJSON:u,authenticatorData:c,publicKey:l,challenge:f,rpOrigin:h,credId:d}});case 46:case"end":return e.stop()}}),e,this,[[3,15]])})));return function(t){return e.apply(this,arguments)}}()}]),r}(he),Ce=function(e){var t=e.clientId,r=e.redirect_uri,n=e.typeOfLogin,i=e.verifier,o=e.jwtParams,a=e.redirectToOpener,s=e.uxMode,u=e.customState,c=e.registerOnly;if(!i||!n||!t)throw new Error("Invalid params");var f=o||{},h=f.domain,d=f.login_hint,p=f.id_token,m=f.access_token;switch(n){case l.GOOGLE:return new ye(t,i,r,n,s,a,o,u);case l.FACEBOOK:return new ve(t,i,r,n,s,a,o,u);case l.TWITCH:return new Re(t,i,r,n,s,a,o,u);case l.REDDIT:return new Te(t,i,r,n,s,a,o,u);case l.DISCORD:return new pe(t,i,r,n,s,a,o,u);case l.PASSWORDLESS:if(!h||!d)throw new Error("Invalid params");return new je(t,i,r,n,s,a,o,u);case l.APPLE:case l.GITHUB:case l.LINKEDIN:case l.TWITTER:case l.WEIBO:case l.LINE:case l.EMAIL_PASSWORD:case l.JWT:if(!h)throw new Error("Invalid params");return p||m?new _e(t,i,r,n,s,a,o,u):new Me(t,i,r,n,s,a,o,u);case l.WEBAUTHN:return new Ne(t,i,r,n,s,a,o,u,c);default:throw new Error("Invalid login type")}},De=r(20),Ue=r.n(De),Be=r(17),Fe=r.n(Be),Ge=r(16),Je=r(21),We=function(e){return new Promise((function(t,r){var n="".concat(e,"sw.js");"serviceWorker"in window.navigator?Object(Je.register)(n,{ready:function(){H.info("App is being served from cache by a service worker.\n For more details, visit https://goo.gl/AFskqB"),t(void 0)},registered:function(){H.info("Service worker has been registered."),t(void 0)},cached:function(){H.info("Content has been cached for offline use."),t(void 0)},updatefound:function(){H.info("New content is downloading.")},updated:function(){H.info("New content is available; please refresh.")},offline:function(){H.info("No internet connection found. App is running in offline mode."),r(new Error("App is offline"))},error:function(e){H.error("Error during service worker registration:",e),r(e)}}):r(new Error("Service workers are not supported"))}))},He=["access_token","id_token"],Ke=["access_token","id_token"],ze=["access_token","id_token"],Ye=["args","method"];function qe(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return Ve(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ve(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Qe=function(){function e(t){var r=t.baseUrl,n=t.network,i=void 0===n?u.MAINNET:n,o=t.proxyContractAddress,a=t.enableLogging,l=void 0!==a&&a,f=t.redirectToOpener,p=void 0!==f&&f,v=t.redirectPathName,g=void 0===v?"redirect":v,y=t.apiKey,w=void 0===y?"torus-default":y,O=t.uxMode,M=void 0===O?h.POPUP:O,x=t.redirectParamsStorageMethod,_=void 0===x?d.SESSION_STORAGE:x,k=t.locationReplaceOnRedirect,S=void 0!==k&&k,P=t.popupFeatures,E=t.skipFetchingNodeDetails,j=void 0!==E&&E;b()(this,e),s()(this,"isInitialized",void 0),s()(this,"config",void 0),s()(this,"torus",void 0),s()(this,"nodeDetailManager",void 0),this.isInitialized=!1;var I=new URL(r);this.config={baseUrl:Y(I),get redirect_uri(){return"".concat(this.baseUrl).concat(g)},redirectToOpener:p,uxMode:M,redirectParamsStorageMethod:_,locationReplaceOnRedirect:S,popupFeatures:P};var T=new Fe.a({enableLogging:l,metadataHost:"https://metadata.tor.us",allowHost:"https://signer.tor.us/api/allow"});Fe.a.setAPIKey(w),this.torus=T;var L=i===u.TESTNET?c.ROPSTEN:i;this.nodeDetailManager=new Ue.a({network:L,proxyAddress:o||m[i]}),j||this.nodeDetailManager.getNodeDetails(),l?H.enableAll():H.disableAll()}return O()(e,[{key:"init",value:function(){var e=g()(T.a.mark((function e(){var t,r,n,i,o,a,s,u=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},r=t.skipSw,n=void 0!==r&&r,i=t.skipInit,o=void 0!==i&&i,a=t.skipPrefetch,s=void 0!==a&&a,!o){e.next=4;break}return this.isInitialized=!0,e.abrupt("return");case 4:if(n){e.next=22;break}return e.next=7,fetch("".concat(this.config.baseUrl,"sw.js"),{cache:"reload"});case 7:if(!e.sent.ok){e.next=21;break}return e.prev=9,e.next=12,We(this.config.baseUrl);case 12:return this.isInitialized=!0,e.abrupt("return");case 16:e.prev=16,e.t0=e.catch(9),H.warn(e.t0);case 19:e.next=22;break;case 21:throw new Error("Service worker is not being served. Please serve it");case 22:if(s){e.next=29;break}if(!oe()){e.next=26;break}return this.isInitialized=!0,e.abrupt("return");case 26:return e.next=28,this.handlePrefetchRedirectUri();case 28:return e.abrupt("return");case 29:this.isInitialized=!0;case 30:case"end":return e.stop()}}),e,this,[[9,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"handlePrefetchRedirectUri",value:function(){var e=g()(T.a.mark((function e(){var t=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return e.abrupt("return",new Promise((function(e,r){var n=document.createElement("link");n.href=t.config.redirect_uri,window.location.origin!==new URL(t.config.redirect_uri).origin&&(n.crossOrigin="anonymous"),n.type="text/html",n.rel="prefetch";var i=function(){t.isInitialized=!0,e()};try{n.relList&&n.relList.supports&&n.relList.supports("prefetch")?(n.onload=i,n.onerror=function(){r(new Error("Please serve redirect.html present in serviceworker folder of this package on ".concat(t.config.redirect_uri)))},document.head.appendChild(n)):i()}catch(o){i()}})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"triggerLogin",value:function(){var e=g()(T.a.mark((function e(t){var r,n,i,o,a,s,u,c,f,d,m,v,g,y,b,w,O,M,x,_,k,S,P,E,j;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.verifier,n=t.typeOfLogin,i=t.clientId,o=t.jwtParams,a=t.hash,s=t.queryParameters,u=t.customState,c=t.registerOnly,H.info("Verifier: ",r),this.isInitialized){e.next=4;break}throw new Error("Not initialized yet");case 4:if(!c||n===l.WEBAUTHN){e.next=6;break}throw new Error("registerOnly flag can only be passed for webauthn");case 6:if(f=Ce({typeOfLogin:n,clientId:i,verifier:r,redirect_uri:this.config.redirect_uri,redirectToOpener:this.config.redirectToOpener,jwtParams:o,uxMode:this.config.uxMode,customState:u,registerOnly:c}),!a||!s){e.next=15;break}if(m=Z(a,s),v=m.error,g=m.hashParameters,y=m.instanceParameters,!v){e.next=11;break}throw new Error(v);case 11:b=g.access_token,w=g.id_token,O=C()(g,He),d=Ze(Ze({accessToken:b,idToken:w},O),{},{state:y}),e.next=22;break;case 15:return ne(this.config.redirectParamsStorageMethod),ee({method:p.TRIGGER_LOGIN,args:t},this.config.redirectParamsStorageMethod,f.nonce),e.next=19,f.handleLoginWindow({locationReplaceOnRedirect:this.config.locationReplaceOnRedirect,popupFeatures:this.config.popupFeatures});case 19:if(d=e.sent,this.config.uxMode!==h.REDIRECT){e.next=22;break}return e.abrupt("return",null);case 22:return e.next=24,f.getUserInfo(d);case 24:if(M=e.sent,!c){e.next=39;break}return e.next=28,this.nodeDetailManager.getNodeDetails();case 28:return x=e.sent,_=x.torusNodeEndpoints,k=x.torusNodePub,e.next=33,this.torus.getPublicAddress(_,k,{verifier:r,verifierId:M.verifierId},!0);case 33:if(S=e.sent,P={userInfo:Ze(Ze({},M),d)},"string"!==typeof S){e.next=37;break}throw new Error("should have returned extended pub key");case 37:return E={pubKey:{pub_key_X:S.X,pub_key_Y:S.Y},publicAddress:S.address,privateKey:null,metadataNonce:null},e.abrupt("return",Ze(Ze({},P),E));case 39:return e.next=41,this.getTorusKey(r,M.verifierId,{verifier_id:M.verifierId},d.idToken||d.accessToken,M.extraVerifierParams);case 41:return j=e.sent,e.abrupt("return",Ze(Ze({},j),{},{userInfo:Ze(Ze({},M),d)}));case 43:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"triggerAggregateLogin",value:function(){var e=g()(T.a.mark((function e(t){var r,n,i,o,a,s,u,c,l,d,m,v,g,y,b,w,O,M,x,_,k,S,P,E,j,I,L,R,A,N,D,U,B,F,G,J,W;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.aggregateVerifierType,n=t.verifierIdentifier,i=t.subVerifierDetailsArray,this.isInitialized){e.next=3;break}throw new Error("Not initialized yet");case 3:if(r&&n&&Array.isArray(i)){e.next=5;break}throw new Error("Invalid params");case 5:if(r!==f.SINGLE_VERIFIER_ID||1===i.length){e.next=7;break}throw new Error("Single id verifier can only have one sub verifier");case 7:o=[],a=[],s=qe(i),e.prev=10,s.s();case 12:if((u=s.n()).done){e.next=36;break}if(c=u.value,l=c.clientId,d=c.typeOfLogin,m=c.verifier,v=c.jwtParams,g=c.hash,y=c.queryParameters,b=c.customState,w=Ce({typeOfLogin:d,clientId:l,verifier:m,redirect_uri:this.config.redirect_uri,redirectToOpener:this.config.redirectToOpener,jwtParams:v,uxMode:this.config.uxMode,customState:b}),O=void 0,!g||!y){e.next=25;break}if(M=Z(g,y),x=M.error,_=M.hashParameters,k=M.instanceParameters,!x){e.next=21;break}throw new Error(x);case 21:S=_.access_token,P=_.id_token,E=C()(_,Ke),O=Ze(Ze({accessToken:S,idToken:P},E),{},{state:k}),e.next=32;break;case 25:return ne(this.config.redirectParamsStorageMethod),ee({method:p.TRIGGER_AGGREGATE_LOGIN,args:t},this.config.redirectParamsStorageMethod,w.nonce),e.next=29,w.handleLoginWindow({locationReplaceOnRedirect:this.config.locationReplaceOnRedirect,popupFeatures:this.config.popupFeatures});case 29:if(O=e.sent,this.config.uxMode!==h.REDIRECT){e.next=32;break}return e.abrupt("return",null);case 32:o.push(w.getUserInfo(O)),a.push(O);case 34:e.next=12;break;case 36:e.next=41;break;case 38:e.prev=38,e.t0=e.catch(10),s.e(e.t0);case 41:return e.prev=41,s.f(),e.finish(41);case 44:return e.next=46,Promise.all(o);case 46:for(j=e.sent,I=j.map((function(e){return Ze(Ze({},e),{},{aggregateVerifier:n})})),L={verify_params:[],sub_verifier_ids:[],verifier_id:""},R=[],A="",N={},D=0;D<i.length;D+=1)U=a[D],B=U.idToken,F=U.accessToken,G=I[D],L.verify_params.push({verifier_id:G.verifierId,idtoken:B||F}),L.sub_verifier_ids.push(G.verifier),R.push(B||F),A=G.verifierId,N=G.extraVerifierParams;return R.sort(),J=Object(Ge.keccak256)(R.join(String.fromCharCode(29))).slice(2),L.verifier_id=A,e.next=58,this.getTorusKey(n,A,L,J,N);case 58:return W=e.sent,e.abrupt("return",Ze(Ze({},W),{},{userInfo:I.map((function(e,t){return Ze(Ze({},e),a[t])}))}));case 60:case"end":return e.stop()}}),e,this,[[10,38,41,44]])})));return function(t){return e.apply(this,arguments)}}()},{key:"triggerHybridAggregateLogin",value:function(){var e=g()(T.a.mark((function e(t){var r,n,i,o,a,s,u,c,l,d,m,v,g,y,b,w,O,M,x,_,k,S,P,E,j,I,L,R,A,N,D,U,B,F,J,W;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.singleLogin,n=t.aggregateLoginParams,this.isInitialized){e.next=3;break}throw new Error("Not initialized yet");case 3:if(n.aggregateVerifierType&&n.verifierIdentifier&&Array.isArray(n.subVerifierDetailsArray)){e.next=5;break}throw new Error("Invalid params");case 5:if(n.aggregateVerifierType!==f.SINGLE_VERIFIER_ID||1===n.subVerifierDetailsArray.length){e.next=7;break}throw new Error("Single id verifier can only have one sub verifier");case 7:if(i=r.typeOfLogin,o=r.clientId,a=r.verifier,s=r.jwtParams,u=r.hash,c=r.queryParameters,l=r.customState,d=Ce({typeOfLogin:i,clientId:o,verifier:a,redirect_uri:this.config.redirect_uri,redirectToOpener:this.config.redirectToOpener,jwtParams:s,uxMode:this.config.uxMode,customState:l}),!u||!c){e.next=17;break}if(v=Z(u,c),g=v.error,y=v.hashParameters,b=v.instanceParameters,!g){e.next=13;break}throw new Error(g);case 13:w=y.access_token,O=y.id_token,M=C()(y,ze),m=Ze(Ze({accessToken:w,idToken:O},M),{},{state:b}),e.next=24;break;case 17:return ne(this.config.redirectParamsStorageMethod),ee({method:p.TRIGGER_AGGREGATE_HYBRID_LOGIN,args:t},this.config.redirectParamsStorageMethod,d.nonce),e.next=21,d.handleLoginWindow({locationReplaceOnRedirect:this.config.locationReplaceOnRedirect,popupFeatures:this.config.popupFeatures});case 21:if(m=e.sent,this.config.uxMode!==h.REDIRECT){e.next=24;break}return e.abrupt("return",null);case 24:return e.next=26,d.getUserInfo(m);case 26:for(x=e.sent,_=this.getTorusKey(a,x.verifierId,{verifier_id:x.verifierId},m.idToken||m.accessToken,x.extraVerifierParams),k=n.verifierIdentifier,S=n.subVerifierDetailsArray,P={verify_params:[],sub_verifier_ids:[],verifier_id:""},E=[],j="",I=0;I<S.length;I+=1)L=S[I],A=(R=m).idToken,N=R.accessToken,P.verify_params.push({verifier_id:x.verifierId,idtoken:A||N}),P.sub_verifier_ids.push(L.verifier),E.push(A||N),j=x.verifierId;return E.sort(),D=Object(Ge.keccak256)(E.join(String.fromCharCode(29))).slice(2),P.verifier_id=j,U=this.getTorusKey(k,j,P,D,x.extraVerifierParams),e.next=39,Promise.all([_,U]);case 39:return B=e.sent,F=G()(B,2),J=F[0],W=F[1],e.abrupt("return",{singleLogin:Ze({userInfo:Ze(Ze({},x),m)},J),aggregateLogins:[W]});case 44:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTorusKey",value:function(){var e=g()(T.a.mark((function e(t,r,n,i,o){var a,s,u,c,l,f;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.nodeDetailManager.getNodeDetails();case 2:return a=e.sent,s=a.torusNodeEndpoints,u=a.torusNodePub,c=a.torusIndexes,e.next=8,this.torus.getPublicAddress(s,u,{verifier:t,verifierId:r},!0);case 8:return l=e.sent,H.info("New private key assigned to user at address ",l),e.next=12,this.torus.retrieveShares(s,c,t,n,i,o);case 12:if(f=e.sent,"string"!==typeof l){e.next=15;break}throw new Error("must use extended pub key");case 15:if(f.ethAddress.toLowerCase()===l.address.toLowerCase()){e.next=17;break}throw new Error("data ethAddress does not match response address");case 17:return e.abrupt("return",{publicAddress:f.ethAddress.toString(),privateKey:f.privKey.toString(),metadataNonce:f.metadataNonce.toString("hex"),pubKey:{pub_key_X:l.X,pub_key_Y:l.Y}});case 18:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i,o){return e.apply(this,arguments)}}()},{key:"getAggregateTorusKey",value:function(){var e=g()(T.a.mark((function e(t,r,n){var i,o,a,s,u,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i={verify_params:[],sub_verifier_ids:[],verifier_id:""},o=[],a={},s=0;s<n.length;s+=1)u=n[s],i.verify_params.push({verifier_id:r,idtoken:u.idToken}),i.sub_verifier_ids.push(u.verifier),o.push(u.idToken),a=u.extraVerifierParams;return o.sort(),c=Object(Ge.keccak256)(o.join(String.fromCharCode(29))).slice(2),i.verifier_id=r,e.abrupt("return",this.getTorusKey(t,r,i,c,a));case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getRedirectResult",value:function(){var e=g()(T.a.mark((function e(){var t,r,n,i,o,a,s,u,c,l,f,h,d,m,v,g,y,b,w,O,M,x,_,k=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},r=t.replaceUrl,n=void 0===r||r,i=t.clearLoginDetails,o=void 0===i||i,e.next=3,this.init({skipInit:!0});case 3:if(a=new URL(window.location.href),s=a.hash.substr(1),u={},a.searchParams.forEach((function(e,t){u[t]=e})),n&&(c=window.location.origin+window.location.pathname,window.history.replaceState(null,"",c)),s||0!==Object.keys(u).length){e.next=10;break}throw new Error("Unable to fetch result from redirect");case 10:if(l=Z(s,u),f=l.error,h=l.instanceParameters,d=l.hashParameters,m=h.instanceId,H.info(m,"instanceId"),v=te(this.config.redirectParamsStorageMethod,m),g=v.args,y=v.method,b=C()(v,Ye),H.info(g,y),o&&re(this.config.redirectParamsStorageMethod,m),!f){e.next=19;break}return w="Error: ".concat(f,". Instance params: ").concat(JSON.stringify(h||{}),". Hash params: ").concat(JSON.stringify(d||{})),e.abrupt("return",{error:w,state:h||{},method:y,result:{},hashParameters:d,args:g});case 19:if(e.prev=19,y!==p.TRIGGER_LOGIN){e.next=29;break}return(M=g).hash=s,M.queryParameters=u,e.next=26,this.triggerLogin(M);case 26:O=e.sent,e.next=44;break;case 29:if(y!==p.TRIGGER_AGGREGATE_LOGIN){e.next=37;break}return(x=g).subVerifierDetailsArray.forEach((function(e){e.hash=s,e.queryParameters=u})),e.next=34,this.triggerAggregateLogin(x);case 34:O=e.sent,e.next=44;break;case 37:if(y!==p.TRIGGER_AGGREGATE_HYBRID_LOGIN){e.next=44;break}return(_=g).singleLogin.hash=s,_.singleLogin.queryParameters=u,e.next=43,this.triggerHybridAggregateLogin(_);case 43:O=e.sent;case 44:e.next=50;break;case 46:return e.prev=46,e.t0=e.catch(19),H.error(e.t0),e.abrupt("return",Ze({error:"Could not get result from torus nodes ".concat((null===e.t0||void 0===e.t0?void 0:e.t0.message)||""),state:h||{},method:y,result:{},hashParameters:d,args:g},b));case 50:if(O){e.next=52;break}return e.abrupt("return",Ze({error:"Unsupported method type",state:h||{},method:y,result:{},hashParameters:d,args:g},b));case 52:return e.abrupt("return",Ze({method:y,result:O,state:h||{},hashParameters:d,args:g},b));case 53:case"end":return e.stop()}}),e,this,[[19,46]])})));return function(){return e.apply(this,arguments)}}()}]),e}()}])},VCN7:function(e,t){var r;function n(e,t){navigator.onLine||e("offline"),e("error",t)}function i(e,t,r){navigator.serviceWorker.register(e,r).then((function(e){t("registered",e),e.waiting?t("updated",e):e.onupdatefound=function(){t("updatefound",e);var r=e.installing;r.onstatechange=function(){"installed"===r.state&&(navigator.serviceWorker.controller?t("updated",e):t("cached",e))}}})).catch((function(e){return n(t,e)}))}"undefined"!==typeof window&&(r="undefined"===typeof document||"interactive"!==document.readyState&&"complete"!==document.readyState?"undefined"!==typeof Promise?new Promise((function(e){return window.addEventListener("load",e)})):{then:function(e){return window.addEventListener("load",e)}}:Promise.resolve()),t.register=function(e,t){void 0===t&&(t={});var o=t.registrationOptions;void 0===o&&(o={}),delete t.registrationOptions;var a=function(e){for(var r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];t&&t[e]&&t[e].apply(t,r)};"serviceWorker"in navigator&&r.then((function(){Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))?(!function(e,t,r){fetch(e).then((function(n){404===n.status?(t("error",new Error("Service worker not found at "+e)),unregister()):-1===n.headers.get("content-type").indexOf("javascript")?(t("error",new Error("Expected "+e+" to have javascript content-type, but received "+n.headers.get("content-type"))),unregister()):i(e,t,r)})).catch((function(e){return n(t,e)}))}(e,a,o),navigator.serviceWorker.ready.then((function(e){a("ready",e)}))):(i(e,a,o),navigator.serviceWorker.ready.then((function(e){a("ready",e)})))}))},t.unregister=function(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},WkPL:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.default=e.exports,e.exports.__esModule=!0},ZhPi:function(e,t,r){var n=r("WkPL");e.exports=function(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},a1gu:function(e,t,r){var n=r("cDf5").default,i=r("PJYZ");e.exports=function(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.default=e.exports,e.exports.__esModule=!0},b48C:function(e,t){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.default=e.exports,e.exports.__esModule=!0},eRdg:function(e,t,r){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=4)}([function(e,t){e.exports=r("o0o1")},function(e,t){e.exports=r("PE4B")},function(e,t){e.exports=r("yXPU")},function(e,t){e.exports=r("lSNA")},function(e,t,r){"use strict";r.r(t),r.d(t,"gatewayAuthHeader",(function(){return m})),r.d(t,"gatewayEmbedHostHeader",(function(){return v})),r.d(t,"setEmbedHost",(function(){return g})),r.d(t,"clearEmbedHost",(function(){return y})),r.d(t,"getEmbedHost",(function(){return b})),r.d(t,"setAPIKey",(function(){return w})),r.d(t,"clearAPIKey",(function(){return O})),r.d(t,"getAPIKey",(function(){return M})),r.d(t,"promiseTimeout",(function(){return _})),r.d(t,"get",(function(){return k})),r.d(t,"post",(function(){return S})),r.d(t,"put",(function(){return P})),r.d(t,"patch",(function(){return E})),r.d(t,"remove",(function(){return j})),r.d(t,"generateJsonRPCObject",(function(){return I})),r.d(t,"promiseRace",(function(){return T}));var n=r(3),i=r.n(n),o=r(2),a=r.n(o),s=r(0),u=r.n(s),c=r(1),l=r.n(c);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d="torus-default",p="",m="x-api-key",v="x-embed-host";function g(e){p=e}function y(){p=""}function b(){return p}function w(e){d=e}function O(){d="torus-default"}function M(){return d}function x(){var e={};return d&&(e[m]=d),p&&(e[v]=p),e}var _=function(e,t){var r=new Promise((function(t,r){var n=setTimeout((function(){clearTimeout(n),r(new Error("Timed out in ".concat(e,"ms")))}),e)}));return Promise.race([t,r])},k=function(){var e=a()(u.a.mark((function e(t){var r,n,i,o,a,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},n=s.length>2&&void 0!==s[2]?s[2]:{},i={mode:"cors",headers:{}},n.useAPIKey&&(i.headers=h(h({},i.headers),x())),o=l.a.all([i,r,{method:"GET"}]),e.next=7,fetch(t,o);case 7:if(!(a=e.sent).ok){e.next=10;break}return e.abrupt("return",a.json());case 10:throw a;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};n.useAPIKey&&(i.headers=h(h({},i.headers),x()));var o=l.a.all([i,r,{method:"POST"}]);return o.body=n.isUrlEncodedData?t:JSON.stringify(t),void 0===o.headers["Content-Type"]&&delete o.headers["Content-Type"],_(n.timeout||3e4,fetch(e,o).then((function(e){if(e.ok)return e.json();throw e})))},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};n.useAPIKey&&(i.headers=h(h({},i.headers),x()));var o=l.a.all([i,r,{method:"PUT"}]);return o.body=n.isUrlEncodedData?t:JSON.stringify(t),void 0===o.headers["Content-Type"]&&delete o.headers["Content-Type"],_(n.timeout||3e4,fetch(e,o).then((function(e){if(e.ok)return e.json();throw e})))},E=function(){var e=a()(u.a.mark((function e(t){var r,n,i,o,a,s,c=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},n=c.length>2&&void 0!==c[2]?c[2]:{},i=c.length>3&&void 0!==c[3]?c[3]:{},o={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}},i.useAPIKey&&(o.headers=h(h({},o.headers),x())),(a=l.a.all([o,n,{method:"PATCH"}])).body=i.isUrlEncodedData?r:JSON.stringify(r),void 0===a.headers["Content-Type"]&&delete a.headers["Content-Type"],e.next=10,fetch(t,a);case 10:if(!(s=e.sent).ok){e.next=13;break}return e.abrupt("return",s.json());case 13:throw s;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=a()(u.a.mark((function e(t){var r,n,i,o,a,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]&&s[1],r=s.length>2&&void 0!==s[2]?s[2]:{},n=s.length>3&&void 0!==s[3]?s[3]:{},i={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}},n.useAPIKey&&(i.headers=h(h({},i.headers),x())),o=l.a.all([i,r,{method:"DELETE"}]),e.next=8,fetch(t,o);case 8:if(!(a=e.sent).ok){e.next=11;break}return e.abrupt("return",a.json());case 11:throw a;case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(e,t){return{jsonrpc:"2.0",method:e,id:10,params:t}},T=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e4;return Promise.race([k(e,t),new Promise((function(e,t){setTimeout((function(){t(new Error("timed out"))}),r)}))])}}])},jgTY:function(e,t,r){"use strict";var n=r("8OQS"),i=r.n(n),o=r("pVnL"),a=r.n(o),s=r("qKvR"),u=r("q1tI"),c=r("BMxC"),l=r("we/t"),f=r("mf32"),h=function(e){var t=Object(f.c)().colorMode;return Object(s.d)(c.a,a()({as:"span",ml:1,color:{light:"red.500",dark:"red.300"}[t],"aria-hidden":"true",children:"*"},e))},d=Object(u.forwardRef)((function(e,t){var r=e.children,n=i()(e,["children"]),o=Object(l.b)(n);return Object(s.d)(c.a,a()({ref:t,fontSize:"md",pr:"12px",pb:"4px",opacity:o.isDisabled?"0.4":"1",fontWeight:"medium",textAlign:"left",verticalAlign:"middle",display:"inline-block",as:"label"},n),r,o.isRequired&&Object(s.d)(h,null))}));d.displayName="FormLabel",t.a=d},m0LI:function(e,t){e.exports=function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}},e.exports.default=e.exports,e.exports.__esModule=!0},oShl:function(e,t,r){var n=r("Nsbk"),i=r("SksO"),o=r("xfeJ"),a=r("sXyB");function s(t){var r="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!o(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return a(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.default=e.exports,e.exports.__esModule=!0,s(t)}e.exports=s,e.exports.default=e.exports,e.exports.__esModule=!0},pVtG:function(e,t,r){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=7)}([function(e,t){e.exports=r("lSNA")},function(e,t){e.exports=r("o0o1")},function(e,t){e.exports=r("bhFO")},function(e,t){e.exports=r("W6Pm")},function(e,t){e.exports=r("yXPU")},function(e,t){e.exports=r("lwsE")},function(e,t){e.exports=r("W8MJ")},function(e,t,r){"use strict";r.r(t),r.d(t,"ETHEREUM_NETWORK",(function(){return n})),r.d(t,"abi",(function(){return i})),r.d(t,"default",(function(){return y}));var n={ROPSTEN:"ropsten",MAINNET:"mainnet"},i=[{constant:!0,inputs:[],name:"currentEpoch",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"epoch",type:"uint256"}],name:"getEpochInfo",outputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"n",type:"uint256"},{internalType:"uint256",name:"k",type:"uint256"},{internalType:"uint256",name:"t",type:"uint256"},{internalType:"address[]",name:"nodeList",type:"address[]"},{internalType:"uint256",name:"prevEpoch",type:"uint256"},{internalType:"uint256",name:"nextEpoch",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"nodeAddress",type:"address"}],name:"getNodeDetails",outputs:[{internalType:"string",name:"declaredIp",type:"string"},{internalType:"uint256",name:"position",type:"uint256"},{internalType:"uint256",name:"pubKx",type:"uint256"},{internalType:"uint256",name:"pubKy",type:"uint256"},{internalType:"string",name:"tmP2PListenAddress",type:"string"},{internalType:"string",name:"p2pListenAddress",type:"string"}],payable:!1,stateMutability:"view",type:"function"}],o=r(4),a=r.n(o),s=r(5),u=r.n(s),c=r(6),l=r.n(c),f=r(0),h=r.n(f),d=r(1),p=r.n(d),m=r(2),v=r.n(m),g=r(3),y=function(){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.network,a=void 0===o?n.MAINNET:o,s=r.proxyAddress,c=void 0===s?"0x638646503746d5456209e33a2ff5e3226d698bea":s;u()(this,e),h()(this,"_currentEpoch","19"),h()(this,"_torusNodeEndpoints",["https://torus-19.torusnode.com/jrpc","https://torus-node.ens.domains/jrpc","https://torus-node.matic.network/jrpc","https://torus.zilliqa.network/jrpc","https://torus-mainnet.cosmos.network/jrpc","https://torus2.etherscan.com/jrpc","https://torus-node-v2.skalelabs.com/jrpc","https://torus-node.binancex.dev/jrpc","https://torusnode.ont.io/jrpc"]),h()(this,"_torusNodePub",[{X:"bbe83c64177c3775550e6ba6ac2bc059f6847d644c9e4894e42c60d7974d8c2b",Y:"82b49a7caf70def38cdad2740af45c1e4f969650105c5019a29bb18b21a9acb5"},{X:"c208cac4ef9a47d386097a9c915b28e9cb89213abee8d26a17198ee261201b0d",Y:"c7db2fe4631109f40833de9dc78d07e35706549ee48fa557b33e4e75e1047873"},{X:"ca1766bb426d4ca5582818a0c5439d560ea64f5baa060793ab29dd3d0ceacfe",Y:"d46c1d08c40e1306e1bca328c2287b8268166b11a1ba4b8442ea2ad0c5e32152"},{X:"c3934dd2f6f4b3d2e1e398cc501e143c1e1a381b52feb6d1525af34d16253768",Y:"71f5141a5035799099f5ea3e241e66946bc55dc857ac3bd7d6fcdb8dcd3eeeef"},{X:"22e66f1929631d00bf026227581597f085fd94fd952fc0dca9f0833398b5c064",Y:"6088b3912e10a1e9d50355a609c10db7d188f16a2e2fd7357e51bf4f6a74f0a1"},{X:"9dc9fa410f3ce9eb70df70cdea00a49f2c4cc7a31c08c0dab5f863ed35ff5139",Y:"627a291cb87a75c61da3f65d6818e1e05e360217179817ed27e8c73bca7ec122"},{X:"118b9fc07e97b096d899b9f6658463ce6a8caa64038e37fc969df4e6023dd8c6",Y:"baf9fa4e51770f4796ea165dd03a769b8606681a38954a0a92c4cbffd6609ce9"},{X:"8a6d8b925da15a273dec3d8f8395ec35cd6878f274b2b180e4e106999db64043",Y:"96f67f870c157743da0b1eb84d89bf30500d74dc84c11f501ee1cb013acc8c46"},{X:"39cecb62e863729f572f7dfc46c24867981bf04bb405fed0df39e33984bfade5",Y:"61c2364434012e68a2be2e9952805037e52629d7762fafc8e10e9fb5bad8f790"}]),h()(this,"_torusIndexes",[1,2,3,4,5,6,7,8,9]),h()(this,"_network",n.MAINNET),h()(this,"nodeListAddress",void 0),h()(this,"updated",void 0),h()(this,"nodeListContract",void 0);try{var l=new URL(a);t=l.href}catch(e){t="https://".concat(a,".infura.io/v3/").concat("b8cdb0e4cff24599a286bf8e87ff1c96")}v.a.setProvider(t),this.nodeListContract=new v.a(i,c),this.nodeListAddress=c,this.updated=!1,this._network=a}var t;return l()(e,[{key:"_nodeDetails",get:function(){return{currentEpoch:this._currentEpoch,nodeListAddress:this.nodeListAddress,torusNodeEndpoints:this._torusNodeEndpoints,torusNodePub:this._torusNodePub,torusIndexes:this._torusIndexes,updated:this.updated}}},{key:"getCurrentEpoch",value:function(){return this.nodeListContract.methods.currentEpoch().call()}},{key:"getEpochInfo",value:function(e){return this.nodeListContract.methods.getEpochInfo(e).call()}},{key:"getNodeEndpoint",value:function(e){return this.nodeListContract.methods.getNodeDetails(e).call()}},{key:"getNodeDetails",value:(t=a()(p.a.mark((function e(){var t,r,i,o,a,s,u,c,l,f,h,d,m=this,v=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=v.length>0&&void 0!==v[0]&&v[0],r=v.length>1&&void 0!==v[1]&&v[1],e.prev=2,!t||this._network!==n.MAINNET){e.next=5;break}return e.abrupt("return",this._nodeDetails);case 5:if(!this.updated){e.next=7;break}return e.abrupt("return",this._nodeDetails);case 7:return e.next=9,this.getCurrentEpoch();case 9:if(i=e.sent,!r||this._network!==n.MAINNET||i!==this._currentEpoch){e.next=12;break}return e.abrupt("return",this._nodeDetails);case 12:return this._currentEpoch=i,e.next=15,this.getEpochInfo(i);case 15:return o=e.sent,a=o.nodeList.map((function(e,t){return t+1})),this._torusIndexes=a,s=o.nodeList.map((function(e){return m.getNodeEndpoint(e)})),e.next=21,Promise.all(s);case 21:for(u=e.sent,c=[],l=[],f=0;f<u.length;f+=1)h=u[f],d="https://".concat(h.declaredIp.split(":")[0],"/jrpc"),c.push(d),l.push({X:Object(g.toHex)(h.pubKx).replace("0x",""),Y:Object(g.toHex)(h.pubKy).replace("0x","")});return this._torusNodeEndpoints=c,this._torusNodePub=l,this.updated=!0,e.abrupt("return",this._nodeDetails);case 31:return e.prev=31,e.t0=e.catch(2),e.abrupt("return",this._nodeDetails);case 34:case"end":return e.stop()}}),e,this,[[2,31]])}))),function(){return t.apply(this,arguments)})}]),e}()}]).default},q1ed:function(e,t){var r="abcdefghijklmnopqrstuvwxyz",n="ABCDEFGHIJKLMNOPQRSTUVWXYZ",i="0123456789",o="~!@#$%^&()_+-={}[];',";e.exports=function(e,t){e||(e=30),t||(t="aA0");var a="";t.split("").forEach(e=>{isNaN(parseInt(e))?/[a-z]/.test(e)?a+=r:/[A-Z]/.test(e)?a+=n:a+=o:a+=i});for(var s="",u=0;u<e;u++)s+=a.charAt(Math.floor(Math.random()*a.length));return s}},sXyB:function(e,t,r){var n=r("SksO"),i=r("b48C");function o(t,r,a){return i()?(e.exports=o=Reflect.construct,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=o=function(e,t,r){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return r&&n(o,r.prototype),o},e.exports.default=e.exports,e.exports.__esModule=!0),o.apply(null,arguments)}e.exports=o,e.exports.default=e.exports,e.exports.__esModule=!0},wTVA:function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},wkBT:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},xfeJ:function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.default=e.exports,e.exports.__esModule=!0},"yDc/":function(e,t){e.exports=!1}},[["NwGJ",1,0,11,15,2,4,3,5,6,7,8,9,10,12,17,18,19,20,21,22]]]);