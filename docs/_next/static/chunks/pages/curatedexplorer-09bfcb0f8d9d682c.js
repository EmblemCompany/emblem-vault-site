(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3859],{95208:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/curatedexplorer",function(){return a(60469)}])},60469:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return B}});var n=a(85893),l=a(20967),r=a(45161),o=a(70959),i=a(44461),c=a(24124),s=a(84028),d=a(90889),u=a(6089),h=a(32883),m=a(93717),f=a(33090),g=a(93108),p=a(53468),v=a(41731),x=a(71293),j=a(35541),w=a(46199),k=a(22243),y=a(64859),C=a(66205),b=a(54346),S=a(57747),N=a(70758),E=a.n(N),_=a(11163),T=a(67294),R=a(82174),I=a(96084),M=a(11249),A=a(68209),U=a(77044),D=a(82729),P=a(59477),L=a(14438),O=a(45889);function z(){let e=(0,D._)(["\n  .injected-row {\n    background-color: rgba(0, 0, 0, 0.05);\n    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1), inset 0 -2px 4px rgba(255, 255, 255, 0.1);\n  }\n"]);return z=function(){return e},e}let G=(0,a(37883).Z)(I._$r)(z());var Z=e=>{let{vaults:t,onAssetNameClick:a,onProjectClick:l,onAssetChainClick:r,onCategoryClick:o,onStatusClick:i,getCuratedByContractNetwork:c,setModalImage:s,onOpen:d,selectionModel:m,onSelectionModelChange:f,onRowClick:g}=e,[p,v]=(0,T.useState)(new Set),x=e=>{v(t=>{let a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})},j=[{field:"expansion",headerName:"",width:50,renderCell:e=>(0,n.jsx)(S.xu,{onClick:t=>{t.stopPropagation(),x(e.id.toString())},children:p.has(e.id.toString())?(0,n.jsx)(L.Z,{}):(0,n.jsx)(O.Z,{})}),sortable:!1},{field:"asset_name",headerName:"Asset Name",width:200,renderCell:e=>(0,n.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),a(e.value)},children:e.value})},{field:"project",headerName:"Project",width:150,renderCell:e=>(0,n.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),l(e.value)},children:e.value})},{field:"asset_chain",headerName:"Chain",width:100,renderCell:e=>(0,n.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),r(e.value)},children:e.value})},{field:"network",headerName:"Network",width:100},{field:"balance",headerName:"Balance",width:100,type:"number"},{field:"balances",headerName:"Inside Balances",width:150,renderCell:e=>{let t=e.value,a=Array.isArray(t)?t.length:0;return(0,n.jsx)(P.u,{label:JSON.stringify(t,null,2),placement:"top",hasArrow:!0,children:(0,n.jsx)(S.xu,{children:a})})},sortComparator:(e,t)=>(Array.isArray(e)?e.length:0)-(Array.isArray(t)?t.length:0)},{field:"expired",headerName:"Expired",width:100,renderCell:e=>{var t;return(null===(t=e.row.balances)||void 0===t?void 0:t.some(e=>{var t;return null===(t=e.traits)||void 0===t?void 0:t.some(e=>"Expired"===e.value)}))?"â³":""}},{field:"image",headerName:"Image",width:100,renderCell:e=>(0,n.jsx)(u.E,{src:e.value,alt:"Asset Image",boxSize:"64px",onClick:()=>{s(e.value),d()}})},{field:"tokenid",headerName:"Token ID",width:200,renderCell:e=>(0,n.jsx)(h.r,{href:"erc721Legacy"===e.row.category?"https://emblem.finance/nft?id=".concat(e.value):"https://emblem.finance/nft2?id=".concat(e.value),isExternal:!0,children:e.value})},{field:"category",headerName:"Category",width:150,renderCell:e=>(0,n.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),o(e.value)},children:e.value})},{field:"status",headerName:"Status",width:150,renderCell:e=>(0,n.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),i(e.value)},children:e.value})},{field:"contract",headerName:"Contract",width:200,renderCell:e=>{var t,a;return(0,n.jsxs)(n.Fragment,{children:["erc721Legacy"!==e.row.category&&(0,n.jsx)(u.E,{src:null===(t=c(e.value,e.row.network))||void 0===t?void 0:t.loadingImages[0],boxSize:"25px"}),(0,n.jsx)(h.r,{href:"https://etherscan.io/address/".concat(e.value),isExternal:!0,children:"erc721Legacy"===e.row.category?"Legacy":null===(a=c(e.value,e.row.network))||void 0===a?void 0:a.name})]})}},{field:"fraud",headerName:"\uD83D\uDEA9",width:70,renderCell:e=>e.value?"\uD83D\uDEA9":""},{field:"jumps_count",headerName:"Jumps",width:100,type:"number"}],w=t.flatMap(e=>{let t={...e,id:e.tokenid};return p.has(e.tokenid)?[t,...(e.balances||[]).map((t,a)=>({id:"".concat(e.tokenid,"-").concat(a),asset_name:t.name,project:t.project,asset_chain:t.coin,balance:t.balance,image:t.image,network:null,balances:null,expired:null,tokenid:null,category:null,status:null,contract:null,fraud:null,jumps_count:null,isInjected:!0}))]:[t]});return(0,n.jsx)(S.xu,{height:"auto",minHeight:800,width:"100%",overflow:"visible",children:(0,n.jsx)(G,{rows:w,columns:j,pageSize:100,rowsPerPageOptions:[100,200,500],checkboxSelection:!0,selectionModel:m,onSelectionModelChange:f,onRowClick:g,getRowId:e=>e.id,rowHeight:52,getRowClassName:e=>e.row.isInjected?"injected-row":"",style:{backgroundColor:"var(--background-color)",color:"var(--text-color)",overflow:"visible"},autoHeight:!0,disableColumnMenu:!0})})};let H="curatedDataCache";function V(){let e=(0,_.useRouter)(),{account:t,chainId:a,library:N}=(0,U.Ge)(),{asPath:D}=e,P=new URLSearchParams(window.location.search),L=P.get("tab")?Number(P.get("tab")):0,O=P.get("filterType")||null,z=P.get("filterValue")||null,[G,V]=(0,T.useState)({loaded:!0}),[B,J]=(0,T.useState)(null),[q,F]=(0,T.useState)(null),[Q,W]=(0,T.useState)(null),[X,K]=(0,T.useState)(!1),[Y,$]=(0,T.useState)([]),[ee,et]=(0,T.useState)([]),[ea,en]=(0,T.useState)(1),[el,er]=(0,T.useState)(!1),[eo,ei]=(0,T.useState)(null),[ec,es]=(0,T.useState)(null),[ed,eu]=(0,T.useState)([]),[eh,em]=(0,T.useState)([]),[ef,eg]=(0,T.useState)([]),[ep,ev]=(0,T.useState)(null),[ex,ej]=(0,T.useState)(null),[ew,ek]=(0,T.useState)(null),[ey,eC]=(0,T.useState)([]),[eb,eS]=(0,T.useState)([]),eN=I._$r,[eE,e_]=(0,T.useState)(L),{isOpen:eT,onOpen:eR,onClose:eI}=(0,l.q)(),[eM,eA]=(0,T.useState)(null),{colorMode:eU}=(0,r.If)(),[eD,eP]=(0,T.useState)(!0),eL="dark"===eU,[eO,ez]=(0,T.useState)(!0),[eG,eZ]=(0,T.useState)(null),[eH,eV]=(0,T.useState)([]),eB=(0,T.useCallback)(async()=>{if(eG)return eG;let e=localStorage.getItem(H);if(e){let{data:t,timestamp:a}=JSON.parse(e);if(Date.now()-a<36e5)return eZ(t),t}let t=await fetch("".concat(R._z,"/curated")),a=await t.json();return eZ(a),localStorage.setItem(H,JSON.stringify({data:a,timestamp:Date.now()})),a},[eG]),eJ=t=>{e_(t);let a=new URLSearchParams(window.location.search);a.set("tab",t),e.push("".concat(e.pathname,"?").concat(a.toString()))};async function eq(){return fetch("https://api.etherscan.io/api?module=gastracker&action=gasoracle&apikey=TMWK7RK9YTQ8VYWD8Q8GFAZS6UZ8MTH57E").then(e=>e.json()).then(e=>{if("1"===e.status)return e.result.ProposeGasPrice;throw Error("Failed to fetch gas prices")}).catch(e=>(console.error("Error fetching gas prices:",e),null))}function eF(e){ev(e),fetch("".concat(R.N0,"/asset_metadata/projects"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project:e})}).then(e=>e.json()).then(e=>{eg(e)})}function eQ(t){V({loaded:!1}),ev(t),fetch("".concat(R.N0,"/vaults?project=").concat(t),{method:"GET"}).then(e=>e.json()).then(a=>{eC(a),V({loaded:!0}),e.push("".concat(e.pathname,"?filterType=project&filterValue=").concat(encodeURIComponent(t),"&tab=").concat(eE))})}function eW(t){V({loaded:!1}),ev(t),fetch("".concat(R.N0,"/vaults?asset_name=").concat(encodeURIComponent(t)),{method:"GET"}).then(e=>e.json()).then(a=>{eC(a),V({loaded:!0}),e.push("".concat(e.pathname,"?filterType=asset_name&filterValue=").concat(encodeURIComponent(t),"&tab=").concat(eE))})}function eX(t){V({loaded:!1}),ev(t),fetch("".concat(R.N0,"/vaults?asset_chain=").concat(t),{method:"GET"}).then(e=>e.json()).then(a=>{eC(a),V({loaded:!0}),e.push("".concat(e.pathname,"?filterType=asset_chain&filterValue=").concat(t,"&tab=").concat(eE))})}function eK(t){V({loaded:!1}),ev(t),fetch("".concat(R.N0,"/vaults?category=").concat(t),{method:"GET"}).then(e=>e.json()).then(a=>{eC(a),V({loaded:!0}),e.push("".concat(e.pathname,"?filterType=category&filterValue=").concat(t,"&tab=").concat(eE))})}function eY(t){V({loaded:!1}),ev(t),fetch("".concat(R.N0,"/vaults?status=").concat(t),{method:"GET"}).then(e=>e.json()).then(a=>{eC(a),V({loaded:!0}),e.push("".concat(e.pathname,"?filterType=status&filterValue=").concat(t,"&tab=").concat(eE))})}async function e$(e){let t=q.find(e=>e.name==ec);if(!ec||!t)return alert("Target contract address not found");if(0==e.length)return e1.log("No vaults to migrate");try{let n,l="ERC1155"==t.collectionType?R.q7.erc1155Abi:R.q7.erc721aAbi,r=new A.CH(t.contracts[a],l).connect(N.getSigner()),o=await eq();if("ERC721a"===t.collectionType)n=await r.estimateGas.mintMany(e.map(e=>e.to),e.map(e=>e.tokenId));else if("ERC1155"===t.collectionType)n=await r.estimateGas.migrationMintMany(e.map(e=>e.serial),e.map(e=>e.to),e.map(e=>e.tokenId));else throw Error("Unsupported contract collection type");let i=n*o*1e-9;e1.log("Estimated gas for mintMany: ".concat(i))}catch(e){e1.log("Error estimating gas for mintMany:",e)}}async function e0(e){let t=q.find(e=>e.name==ec);if(!ec||!t)return alert("Target contract address not found");if(0==e.length)return alert("No vaults to migrate");try{let n,l="ERC1155"==t.collectionType?R.q7.erc1155Abi:R.q7.erc721aAbi,r=new A.CH(t.contracts[a],l).connect(N.getSigner());if("ERC721a"===t.collectionType)n=await r.mintMany(e.map(e=>e.to),e.map(e=>e.tokenId));else if("ERC1155"===t.collectionType)n=await r.migrationMintMany(e.map(e=>e.serial),e.map(e=>e.to),e.map(e=>e.tokenId));else throw Error("Unsupported contract collection type");await n.wait(),alert("TX hash: ".concat(n.hash)),e1.log("Minted vaults:",e.length),e1.log("refreshing"),e5(),e1.log("Refreshed metadata and liveliness for migrated vaults")}catch(e){e1.log("Error minting vaults:",e)}}(0,T.useEffect)(()=>{ec&&e7({target:{value:ec}})},[el]),(0,T.useEffect)(()=>{z&&!ep&&(ev(()=>decodeURIComponent(z)),"project"===O?eQ(decodeURIComponent(z)):"asset_name"===O?eW(decodeURIComponent(z)):"asset_chain"===O?eX(decodeURIComponent(z)):"category"===O?eK(decodeURIComponent(z)):"status"===O&&eY(decodeURIComponent(z)))},[z,ep]),(0,T.useEffect)(()=>{(async()=>{ez(!0);try{let[e,t]=await Promise.all([eB(),(0,M.f_)()]);F(e),W(e),ei(t),ez(!1)}catch(e){console.error("Error loading data:",e),ez(!1)}})()},[eB]),(0,T.useEffect)(()=>{q&&0===ee.length&&fetch("".concat(R.N0,"/v3/deployments")).then(e=>e.json()).then(e=>{et(e.filter((e,t)=>!q.some(t=>t.contracts["1"]==e.address)&&e.name.includes("upgradableERC")))})},[q,ee]),(0,T.useEffect)(()=>{fetch("".concat(R.N0,"/asset_metadata/projects/vaulted")).then(e=>e.json()).then(e=>{eu(e)})},[]),(0,T.useEffect)(()=>{fetch("".concat(R.N0,"/asset_metadata/projects")).then(e=>e.json()).then(e=>{em(e)})},[]);let e1={log:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];let n=document.getElementById("migrationUpdates");if(n){let e=document.createElement("p");e.textContent=t.join(" "),n.insertBefore(e,n.firstChild)}}};function e2(){let e=ey.filter(e=>eH.includes(e.tokenid)&&"minted"==e.status&&"erc721Legacy"!==e.category).map(e=>"".concat(e.contract,":").concat(e.externalTokenId)),t=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,l=e.slice(a,a+n);0!==l.length&&(await e9(l),t(e,a+n,n))};t(e)}function e5(){let e=0,t=ey.reverse().filter((e,t,a)=>t===a.findIndex(t=>t.tokenid===e.tokenid&&"claimed"!==t.status&&"deleted"!==t.status)),a=t.length,n=Math.ceil(a/ea),l=async function(r,o){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=r+o*n;if(c>=a)return;let s=t[c];if(s&&s.tokenid){e1.log("Refreshing liveliness for vault",s.tokenid,"at index",c,"of",a,"vaults","thread #",o),ek("".concat(e," of ").concat(a," vaults * ").concat(ea," threads"));try{"ERC721a"===s.category?await M.SZ.fetchMetadata(s.tokenid):"ERC1155"===s.category?(await M.SZ.fetchMetadata(s.tokenid),await M.SZ.fetchMetadata("".concat(s.tokenid,"1 "))):(await M.SZ.fetchMetadata(s.tokenid),s.serialNumber&&(await M.SZ.fetchMetadata("".concat(Number(s.serialNumber))),await M.SZ.fetchMetadata("".concat(Number(s.serialNumber),"1")))),e+=1,setTimeout(()=>l(r+1,o),5e3)}catch(e){if(e1.log("Error refreshing liveliness:",e),i<7){let e=1e3*Math.pow(2,i);e1.log("Retrying in",e,"ms"),setTimeout(()=>l(r,o,i+1),e)}else e1.log("Failed to refresh liveliness after 7 attempts, moving to next index"),setTimeout(()=>l(r+1,o),5e3)}}else setTimeout(()=>l(r+1,o),0);e>=a&&ek("complete")};for(let e=0;e<ea;e++)e*n<a&&l(0,e)}let e9=async e=>{let t=new Headers;t.append("content-type","application/json");let a=JSON.stringify({tokens:e});try{let e=await fetch("https://api.reservoir.tools/tokens/refresh/v2",{method:"POST",headers:t,body:a,redirect:"follow"}),n=await e.json();return alert("Marketplace Refreshed"),console.log(n),n}catch(e){return console.error(e),e}};async function e7(e){if(""===e.target.value||ec&&e.target.value!==ec){eC(eb),""===e.target.value&&es(null);return}es(e.target.value);let t=await M.SZ.fetchCuratedContractByName(e.target.value,eo);0===eb.length&&eS(ey);let a=eb.length>0?eb:ey,n=a.filter(e=>{let a=!e.fraud,n="erc721Legacy"===e.category,l=e.balance>=1,r=0===e.jumps_count,o="claimed"!==e.status,i="minted"==e.status,c="mainnet"===e.network,s=e.balances.some(e=>e.traits&&e.traits.some(e=>"Expired"===e.value)),d=t.allowed(e.balances,t);return a&&n&&l&&r&&o&&d&&c&&i&&!s}),l=a.filter(e=>{let a=!e.fraud,n="erc721Legacy"===e.category,l=e.balance>=1,r=0===e.jumps_count,o="claimed"!==e.status,i="minted"==e.status,c="mainnet"===e.network,s=t.allowed(e.balances,t);return!(a&&n&&l&&r&&o&&s&&c&&i)});eC(el?l:n)}return(0,n.jsxs)(E(),{loaded:G.loaded,children:[(0,n.jsxs)(o.m,{index:eE,onChange:eJ,colorScheme:eL?"white":"black",children:[(0,n.jsx)(i.t,{children:["Tracked Metadata Projects","Metadata Project","Vaulted Projects","Vaults","Curated Collections"].map((e,t)=>(0,n.jsxs)(c.O,{isDisabled:!(0===t||2===t||4===t)&&!ep,fontWeight:eE===t?"bold":"normal",color:eE===t?eL?"white":"black":eL?"gray":"black",children:[e," ",ep&&(1===t||3===t)?"(: ".concat(ep,")"):""]},t))}),(0,n.jsxs)(s.n,{children:[(0,n.jsx)(d.x,{children:eh.length>0&&(0,n.jsx)(eN,{style:{backgroundColor:"var(--background-color)",color:eL?"white":"black",margin:"20px",borderRadius:"10px"},columns:[{field:"project_name",headerName:"Project Name",width:200,renderCell:e=>(0,n.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),eF(e.value),eQ(e.value),eJ(1)},children:e.value})},{field:"protocol",headerName:"Protocol",width:200},{field:"total_assets_count",headerName:"Total Assets Count",width:200}],rows:eh.map((e,t)=>({id:t,project_name:e.project_name,protocol:e.protocol,total_assets_count:e.total_assets_count})),autoHeight:!0})}),(0,n.jsx)(d.x,{children:q&&q.length>0&&ef.length>0&&(0,n.jsx)(eN,{style:{backgroundColor:"var(--background-color)",color:"var(--text-color)",margin:"20px",borderRadius:"10px"},columns:[{field:"asset_name",headerName:"Asset Name",width:200,renderCell:e=>(0,n.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),eW(e.value),eJ(1)},children:e.value})},{field:"project_name",headerName:"Project Name",width:200},{field:"chain",headerName:"Chain",width:100},{field:"supply",headerName:"Supply",width:100},{field:"image",headerName:"Image",width:200,renderCell:e=>{var t;return(0,n.jsx)(S.xu,{position:"relative",zIndex:"docked",children:(0,n.jsx)(u.E,{src:null==e?void 0:null===(t=e.value)||void 0===t?void 0:t.toString(),alt:"Asset Image",boxSize:"64px",onClick:()=>{var t;eA(null==e?void 0:null===(t=e.value)||void 0===t?void 0:t.toString()),eR()}})})}},{field:"link",headerName:"Link",width:300,renderCell:e=>{var t,a;return(0,n.jsx)(h.r,{href:null==e?void 0:null===(t=e.value)||void 0===t?void 0:t.toString(),isExternal:!0,children:null==e?void 0:null===(a=e.value)||void 0===a?void 0:a.toString()})}}],rows:ef.map((e,t)=>({id:e.id,created_at:e.created_at,asset_name:e.asset_name,project_name:e.project_name,chain:e.chain,supply:e.supply,link:e.link,image:e.image})),autoHeight:!0})}),(0,n.jsx)(d.x,{children:ed.length>0&&(0,n.jsx)(eN,{style:{backgroundColor:"var(--background-color)",color:"var(--text-color)",margin:"20px",borderRadius:"10px"},columns:[{field:"project",headerName:"Project",width:200,renderCell:e=>(0,n.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),eQ(e.value),eF(e.value),eJ(3)},children:e.value})},{field:"project_count",headerName:"Project Count",width:200}],rows:ed.map((e,t)=>({id:t,project:e.project,project_count:e.project_count})),autoHeight:!0})}),(0,n.jsx)(d.x,{children:(null==ey?void 0:ey.length)>0||ec?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(m.k,{direction:"row",align:"center",children:[(0,n.jsx)(f.I,{type:"number",ml:5,value:ea,onChange:e=>en(Number(e.target.value)),placeholder:"Enter thread count",width:"100px"}),(0,n.jsx)(g.z,{margin:5,onClick:function(){let e=0,t=ey.reverse().filter((e,t,a)=>t===a.findIndex(t=>t.tokenid===e.tokenid&&"claimed"!==t.status&&"deleted"!==t.status)),a=t.length,n=Math.ceil(a/ea),l=async function(r,o){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=r+o*n;if(c>=a)return;let s=t[c];if(s&&s.tokenid){console.log("Refreshing balance for vault",s.tokenid,"at index",c,"of",a,"vaults","thread #",o),ej("".concat(e," of ").concat(a," vaults * ").concat(ea," threads"));try{await M.SZ.refreshBalance(s.tokenid),e+=1,setTimeout(()=>l(r+1,o),5e3)}catch(e){if(console.error("Error refreshing balance:",e),i<7){let e=1e3*Math.pow(2,i);console.log("Retrying in",e,"ms"),setTimeout(()=>l(r,o,i+1),e)}else console.log("Failed to refresh balance after 7 attempts, moving to next index"),setTimeout(()=>l(r+1,o),5e3)}}else setTimeout(()=>l(r+1,o),0);e>=a&&ej("complete")};for(let e=0;e<ea;e++)e*n<a&&l(0,e)},children:(0,n.jsxs)("div",{children:["Refresh Internal Balances ",ex]})}),"|",(0,n.jsx)(g.z,{isDisabled:!ec,margin:5,onClick:()=>{!function(e){if(!ec)return alert("Target contract is not defined");let t=document.querySelectorAll(".MuiDataGrid-row.Mui-selected"),a=[];!function n(l){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1],l>=t.length)return e1.log("Migratable vaults:",a.length),eD?e$(a):e0(a);let r=Array.from(t[l].children).find(t=>t.getAttribute("data-field")===e),o=r?r.getAttribute("data-value"):null,i=ey.find(e=>e.tokenid===o);i?(e1.log("Migrating vault:",i.tokenid),fetch("http://localhost:3001/jump/".concat(i.tokenid,"/").concat(ec,"/").concat("mainnet"==i.network?1:99999999999,"?testOnly=").concat(eD),{method:"GET",headers:{"content-type":"application/json","x-api-key":localStorage.apiKey}}).then(e=>e.json()).then(e=>{e.error?e1.log("Error migrating vault (".concat(l+1,"/").concat(t.length,"):"),e.msg):(e1.log("Successfully migrated vault (".concat(l+1,"/").concat(t.length,"):"),i.tokenid),a.push(e)),n(l+1)}).catch(e=>{alert("Error making API call:', ".concat(e)),n(l+1)})):n(l+1)}(0)}("tokenid")},children:(0,n.jsx)("div",{children:"Migrate"})}),(0,n.jsx)(g.z,{margin:5,onClick:()=>(function(e){if(!ec)return alert("Target contract is not defined");let t=document.querySelectorAll(".MuiDataGrid-row.Mui-selected"),a=[];!function n(l){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1],l>=t.length){e1.log("UnJumped vaults:",a.length);return}let r=Array.from(t[l].children).find(t=>t.getAttribute("data-field")===e),o=r?r.getAttribute("data-value"):null,i=ey.find(e=>e.tokenid===o);i?(e1.log("UnJumping vault:",i.tokenid),fetch("http://localhost:3001/unjump/".concat(i.tokenid,"/").concat(ec,"/").concat("mainnet"==i.network?1:99999999999),{method:"GET",headers:{"content-type":"application/json","x-api-key":localStorage.apiKey}}).then(e=>e.json()).then(e=>{e.error?e1.log("Error unjumped vault (".concat(l+1,"/").concat(t.length,"):"),e.msg):(e1.log("Successfully unjumped vault (".concat(l+1,"/").concat(t.length,"):"),i.tokenid),a.push(e)),n(l+1)}).catch(e=>{alert("Error making API call:', ".concat(e)),n(l+1)})):n(l+1)}(0)})("tokenid"),children:"UnJump"}),(0,n.jsx)(g.z,{margin:5,onClick:()=>e5(),children:(0,n.jsxs)("div",{children:["Refresh Liveliness ",ew]})}),(0,n.jsx)(p.X,{ml:5,isChecked:eD,onChange:e=>{eP(e.target.checked)},children:"Test Only"}),(0,n.jsx)(v.P,{margin:5,placeholder:"Select contract",onChange:async e=>await e7(e),width:"350px",children:eo&&eo.map((e,t)=>(0,n.jsx)("option",{value:e.name,children:e.name},t))}),"|",(0,n.jsx)(f.I,{placeholder:"Search for Asset Name",onChange:e=>{let t=e.target.value.toLowerCase();eC(eb.filter(e=>e.asset_name.toLowerCase().includes(t)))},width:"300px",ml:5}),(0,n.jsx)(p.X,{ml:5,onChange:async e=>{er(e.target.checked)},children:"Show Unqualified Vaults"})]}),(0,n.jsxs)(m.k,{alignItems:"center",children:[(0,n.jsx)(g.z,{margin:5,onClick:()=>e2(),children:"Marketplace Refresh Selected Records"}),(0,n.jsx)(g.z,{margin:5,onClick:()=>(function(){let e=new Blob([JSON.stringify(eH.length>0?ey.filter(e=>eH.includes(e.tokenid)):ey,null,2)],{type:"application/json"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="exported_records.json",a.click(),URL.revokeObjectURL(t)})(),children:"Export Selected Records"}),(0,n.jsx)(S.xu,{id:"migrationUpdates",marginLeft:5,padding:5,borderWidth:1,borderRadius:"lg",maxHeight:"200px",overflowY:"auto",children:(0,n.jsx)(x.x,{fontSize:"lg",fontWeight:"bold",children:eD?"TEST MODE: updates":"Updates"})}),(0,n.jsx)(g.z,{margin:5,onClick:async()=>{try{let e=await fetch("".concat(R.N0,"/vaults"),{method:"GET"});if(!e.ok)throw Error("Network response was not ok");let t=await e.json();console.log("Fetched vaults:",t),eC(t),eS(t),ec&&await e7({target:{value:ec}}),e1.log("Vaults refreshed successfully")}catch(e){console.error("Error refreshing vaults:",e),e1.log("Error refreshing vaults: "+e.message)}},children:"Refresh Vaults"})]}),(0,n.jsx)(S.xu,{width:"100%",overflow:"visible",children:(0,n.jsx)(Z,{vaults:ey,onAssetNameClick:eW,onProjectClick:eQ,onAssetChainClick:eX,onCategoryClick:eK,onStatusClick:eY,getCuratedByContractNetwork:function(e,t){return q&&q.length>0&&"mainnet"===t&&q.find(t=>t.contracts[1]===e)||null},setModalImage:eA,onOpen:eR,selectionModel:eH,onSelectionModelChange:e=>{eV(e)}})}),(0,n.jsx)(g.z,{margin:5,onClick:()=>e2(),children:"Marketplace Refresh Selected Records"})]}):null}),(0,n.jsx)(d.x,{children:q&&(0,n.jsx)(eN,{style:{backgroundColor:"var(--background-color)",color:"var(--text-color)",margin:"20px",borderRadius:"10px"},columns:[{field:"name",headerName:"Asset Name",width:200,renderCell:e=>(0,n.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),eW(e.value)},children:e.value})},{field:"description",headerName:"Description",width:200},{field:"addressChain",headerName:"Chain",width:100,renderCell:e=>(0,n.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),eX(e.value)},children:e.value})},{field:"balanceQty",headerName:"Balance Quantity",width:100},{field:"loadingImages",headerName:"Image",width:200,renderCell:e=>{var t;return(0,n.jsx)(S.xu,{position:"relative",zIndex:"docked",children:(0,n.jsx)(u.E,{src:null==e?void 0:null===(t=e.value)||void 0===t?void 0:t[0],alt:"Asset Image",boxSize:"64px",onClick:()=>{var t;eA(null==e?void 0:null===(t=e.value)||void 0===t?void 0:t[0]),eR()}})})}},{field:"balanceUrl",headerName:"Balance URL",width:400,renderCell:e=>(0,n.jsx)(h.r,{href:null==e?void 0:e.value.toString(),isExternal:!0,style:{fontSize:"8px"},children:null==e?void 0:e.value})},{field:"vaultCollectionType",headerName:"Collection Type",width:200}],rows:q.map((e,t)=>({id:e.id,created_at:e.created_at,name:e.name,description:e.description,addressChain:e.addressChain,balanceQty:e.balanceQty,balanceUrl:e.balanceUrl,loadingImages:e.loadingImages,vaultCollectionType:e.vaultCollectionType})),autoHeight:!0})})]})]}),(0,n.jsxs)(j.u_,{isOpen:eT,onClose:eI,children:[(0,n.jsx)(w.Z,{}),(0,n.jsxs)(k.h,{children:[(0,n.jsx)(y.x,{children:"Asset Image"}),(0,n.jsx)(C.o,{}),(0,n.jsx)(b.f,{children:(0,n.jsx)(u.E,{src:eM,alt:"Asset Image"})})]})]})]})}function B(){return(0,n.jsx)(V,{})}}},function(e){e.O(0,[4314,758,1527,1793,9233,8125,9257,8029,6015,7036,2732,2888,9774,179],function(){return e(e.s=95208)}),_N_E=e.O()}]);