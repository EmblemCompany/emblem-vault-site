(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3859],{95208:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/curatedexplorer",function(){return a(80827)}])},80827:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return R}});var n=a(85893),l=a(7335),o=a(45161),r=a(36752),c=a(77458),d=a(35232),i=a(72047),s=a(37365),u=a(6089),h=a(32883),m=a(93717),f=a(33090),p=a(93108),v=a(16576),x=a(7636),j=a(70727),g=a(46685),C=a(89693),w=a(89423),k=a(57747),_=a(70758),b=a.n(_),N=a(11163),y=a(67294),S=a(61256),E=a(96084),I=a(83230);function T(){let e=(0,N.useRouter)(),{asPath:t}=e,a=new URLSearchParams(window.location.search),_=a.get("tab")?Number(a.get("tab")):0,T=a.get("filterType")||null,R=a.get("filterValue")||null,[D,U]=(0,y.useState)({loaded:!0}),[P,A]=(0,y.useState)(null),[z,L]=(0,y.useState)(null),[V,O]=(0,y.useState)(null),[B,G]=(0,y.useState)(!1),[H,M]=(0,y.useState)([]),[Q,F]=(0,y.useState)([]),[J,X]=(0,y.useState)(1),[Z,q]=(0,y.useState)([]),[W,$]=(0,y.useState)([]),[K,Y]=(0,y.useState)([]),[ee,et]=(0,y.useState)(null),[ea,en]=(0,y.useState)(null),[el,eo]=(0,y.useState)([]),er=E._$r,[ec,ed]=(0,y.useState)(_),{isOpen:ei,onOpen:es,onClose:eu}=(0,l.q)(),[eh,em]=(0,y.useState)(null),{colorMode:ef}=(0,o.If)(),ep="dark"===ef,ev=t=>{ed(t);let a=new URLSearchParams(window.location.search);a.set("tab",t),e.push("".concat(e.pathname,"?").concat(a.toString()))};function ex(e){et(e),fetch("".concat(S.N0,"/asset_metadata/projects"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project:e})}).then(e=>e.json()).then(e=>{Y(e)})}function ej(t){U({loaded:!1}),et(t),fetch("".concat(S.N0,"/vaults?project=").concat(t),{method:"GET"}).then(e=>e.json()).then(a=>{eo(a),U({loaded:!0}),e.push("".concat(e.pathname,"?filterType=project&filterValue=").concat(encodeURIComponent(t),"&tab=").concat(ec))})}function eg(t){U({loaded:!1}),et(t),fetch("".concat(S.N0,"/vaults?asset_name=").concat(encodeURIComponent(t)),{method:"GET"}).then(e=>e.json()).then(a=>{eo(a),U({loaded:!0}),e.push("".concat(e.pathname,"?filterType=asset_name&filterValue=").concat(encodeURIComponent(t),"&tab=").concat(ec))})}function eC(t){U({loaded:!1}),et(t),fetch("".concat(S.N0,"/vaults?asset_chain=").concat(t),{method:"GET"}).then(e=>e.json()).then(a=>{eo(a),U({loaded:!0}),e.push("".concat(e.pathname,"?filterType=asset_chain&filterValue=").concat(t,"&tab=").concat(ec))})}function ew(t){U({loaded:!1}),et(t),fetch("".concat(S.N0,"/vaults?category=").concat(t),{method:"GET"}).then(e=>e.json()).then(a=>{eo(a),U({loaded:!0}),e.push("".concat(e.pathname,"?filterType=category&filterValue=").concat(t,"&tab=").concat(ec))})}function ek(t){U({loaded:!1}),et(t),fetch("".concat(S.N0,"/vaults?status=").concat(t),{method:"GET"}).then(e=>e.json()).then(a=>{eo(a),U({loaded:!0}),e.push("".concat(e.pathname,"?filterType=status&filterValue=").concat(t,"&tab=").concat(ec))})}function e_(e,t){if("mainnet"==t)return z.find(t=>t.contracts[1]==e)||null}return(0,y.useEffect)(()=>{R&&!ee&&(et(()=>decodeURIComponent(R)),"project"===T?ej(decodeURIComponent(R)):"asset_name"===T?eg(decodeURIComponent(R)):"asset_chain"===T?eC(decodeURIComponent(R)):"category"===T?ew(decodeURIComponent(R)):"status"===T&&ek(decodeURIComponent(R)))},[R,ee]),(0,y.useEffect)(()=>{fetch("".concat(S._z,"/curated")).then(e=>e.json()).then(e=>{L(e),O(e)})},[]),(0,y.useEffect)(()=>{z&&0===Q.length&&fetch("".concat(S.N0,"/v3/deployments")).then(e=>e.json()).then(e=>{F(e.filter((e,t)=>!z.some(t=>t.contracts["1"]==e.address)&&e.name.includes("upgradableERC")))})},[z,Q]),(0,y.useEffect)(()=>{fetch("".concat(S.N0,"/asset_metadata/projects/vaulted")).then(e=>e.json()).then(e=>{q(e)})},[]),(0,y.useEffect)(()=>{fetch("".concat(S.N0,"/asset_metadata/projects")).then(e=>e.json()).then(e=>{$(e)})},[]),(0,n.jsxs)(b(),{loaded:D.loaded,children:[(0,n.jsxs)(r.m,{index:ec,onChange:ev,colorScheme:ep?"white":"black",children:[(0,n.jsx)(c.t,{children:["Tracked Metadata Projects","Metadata Project","Vaulted Projects","Vaults","Curated Collections"].map((e,t)=>(0,n.jsxs)(d.O,{isDisabled:!(0===t||2===t||4===t)&&!ee,fontWeight:ec===t?"bold":"normal",color:ec===t?ep?"white":"black":ep?"gray":"black",children:[e," ",ee&&(1===t||3===t)?"(: ".concat(ee,")"):""]},t))}),(0,n.jsxs)(i.n,{children:[(0,n.jsx)(s.x,{children:W.length>0&&(0,n.jsx)(er,{style:{backgroundColor:"var(--background-color)",color:ep?"white":"black",margin:"20px",borderRadius:"10px"},columns:[{field:"project_name",headerName:"Project Name",width:200,renderCell:e=>(0,n.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),ex(e.value),ej(e.value),ev(1)},children:e.value})},{field:"protocol",headerName:"Protocol",width:200},{field:"total_assets_count",headerName:"Total Assets Count",width:200}],rows:W.map((e,t)=>({id:t,project_name:e.project_name,protocol:e.protocol,total_assets_count:e.total_assets_count})),autoHeight:!0})}),(0,n.jsx)(s.x,{children:K.length>0&&(0,n.jsx)(er,{style:{backgroundColor:"var(--background-color)",color:"var(--text-color)",margin:"20px",borderRadius:"10px"},columns:[{field:"asset_name",headerName:"Asset Name",width:200,renderCell:e=>(0,n.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),eg(e.value),ev(1)},children:e.value})},{field:"project_name",headerName:"Project Name",width:200},{field:"chain",headerName:"Chain",width:100},{field:"supply",headerName:"Supply",width:100},{field:"image",headerName:"Image",width:200,renderCell:e=>{var t;return(0,n.jsx)(k.xu,{position:"relative",zIndex:"docked",children:(0,n.jsx)(u.E,{src:null==e?void 0:null===(t=e.value)||void 0===t?void 0:t.toString(),alt:"Asset Image",boxSize:"64px",onClick:()=>{var t;em(null==e?void 0:null===(t=e.value)||void 0===t?void 0:t.toString()),es()}})})}},{field:"link",headerName:"Link",width:300,renderCell:e=>{var t,a;return(0,n.jsx)(h.r,{href:null==e?void 0:null===(t=e.value)||void 0===t?void 0:t.toString(),isExternal:!0,children:null==e?void 0:null===(a=e.value)||void 0===a?void 0:a.toString()})}}],rows:K.map((e,t)=>({id:e.id,created_at:e.created_at,asset_name:e.asset_name,project_name:e.project_name,chain:e.chain,supply:e.supply,link:e.link,image:e.image})),autoHeight:!0})}),(0,n.jsx)(s.x,{children:Z.length>0&&(0,n.jsx)(er,{style:{backgroundColor:"var(--background-color)",color:"var(--text-color)",margin:"20px",borderRadius:"10px"},columns:[{field:"project",headerName:"Project",width:200,renderCell:e=>(0,n.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),ej(e.value),ex(e.value),ev(3)},children:e.value})},{field:"project_count",headerName:"Project Count",width:200}],rows:Z.map((e,t)=>({id:t,project:e.project,project_count:e.project_count})),autoHeight:!0})}),(0,n.jsx)(s.x,{children:(null==el?void 0:el.length)>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(m.k,{direction:"row",align:"center",children:[(0,n.jsx)(f.I,{type:"number",ml:5,value:J,onChange:e=>X(Number(e.target.value)),placeholder:"Enter thread count",width:"100px"}),(0,n.jsx)(p.z,{margin:5,onClick:function(){let e=0,t=el.reverse().filter((e,t,a)=>t===a.findIndex(t=>t.tokenid===e.tokenid&&"claimed"!==t.status&&"deleted"!==t.status)),a=t.length,n=Math.ceil(a/J),l=async function(o,r){let c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,d=o+r*n;if(d>=a)return;let i=t[d];if(i&&i.tokenid){console.log("Refreshing balance for vault",i.tokenid,"at index",d,"of",a,"vaults","thread #",r),en("".concat(e," of ").concat(a," vaults * ").concat(J," threads"));try{await I.SZ.refreshBalance(i.tokenid),e+=1,setTimeout(()=>l(o+1,r),5e3)}catch(e){if(console.error("Error refreshing balance:",e),c<7){let e=1e3*Math.pow(2,c);console.log("Retrying in",e,"ms"),setTimeout(()=>l(o,r,c+1),e)}else console.log("Failed to refresh balance after 7 attempts, moving to next index"),setTimeout(()=>l(o+1,r),5e3)}}else setTimeout(()=>l(o+1,r),0);e>=a&&en("complete")};for(let e=0;e<J;e++)e*n<a&&l(0,e)},children:(0,n.jsxs)("div",{children:["Refresh Internal Balances ",ea]})})]}),(0,n.jsx)(er,{style:{backgroundColor:"var(--background-color)",color:"var(--text-color)",margin:"20px",borderRadius:"10px"},columns:[{field:"asset_name",headerName:"Asset Name",width:200,renderCell:e=>(0,n.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),eg(e.value)},children:e.value})},{field:"project",headerName:"Project",width:200,renderCell:e=>(0,n.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),ej(e.value)},children:e.value})},{field:"asset_chain",headerName:"Chain",width:100,renderCell:e=>(0,n.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),eC(e.value)},children:e.value})},{field:"balance",headerName:"Balance",width:100},{field:"image",headerName:"Image",width:100,renderCell:e=>{var t;return(0,n.jsx)(k.xu,{position:"relative",zIndex:"docked",children:(0,n.jsx)(u.E,{src:null==e?void 0:null===(t=e.value)||void 0===t?void 0:t.toString(),alt:"Asset Image",boxSize:"64px",onClick:()=>{em(null==e?void 0:e.value),es()}})})}},{field:"tokenid",headerName:"Token ID",width:150,renderCell:e=>(0,n.jsx)(h.r,{href:"erc721Legacy"===e.row.category?"https://emblem.finance/nft?id=".concat(e.value):"https://emblem.finance/nft2?id=".concat(e.value),isExternal:!0,children:e.value})},{field:"category",headerName:"Category",width:150,renderCell:e=>(0,n.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),ew(e.value)},children:e.value})},{field:"status",headerName:"Status",width:150,renderCell:e=>(0,n.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),ek(e.value)},children:e.value})},{field:"contract",headerName:"Contract",width:150,renderCell:e=>{var t,a;return(0,n.jsxs)(n.Fragment,{children:["erc721Legacy"!==e.row.category&&(0,n.jsx)(u.E,{src:null===(t=e_(e.value,e.row.network))||void 0===t?void 0:t.loadingImages[0],boxSize:"25px"}),(0,n.jsx)(h.r,{href:"https://etherscan.io/address/".concat(e.value),isExternal:!0,children:"erc721Legacy"===e.row.category?"Legacy":null===(a=e_(e.value,e.row.network))||void 0===a?void 0:a.name})]})}},{field:"fraud",headerName:"\uD83D\uDEA9",width:100,renderCell:e=>e.value?"\uD83D\uDEA9":""},{field:"jumps_count",headerName:"Jumps",width:150,renderCell:e=>(0,n.jsx)("span",{children:e.value})}],rows:el.map((e,t)=>({id:e.tokenid,asset_name:e.asset_name,project:e.project,asset_chain:e.asset_chain,balance:e.balance,image:e.image,tokenid:e.tokenid,category:e.category,status:e.status,contract:e.contract,fraud:e.fraud,network:e.network,jumps_count:e.jumps_count})),autoHeight:!0})]})}),(0,n.jsx)(s.x,{children:z&&(0,n.jsx)(er,{style:{backgroundColor:"var(--background-color)",color:"var(--text-color)",margin:"20px",borderRadius:"10px"},columns:[{field:"name",headerName:"Asset Name",width:200,renderCell:e=>(0,n.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),eg(e.value)},children:e.value})},{field:"description",headerName:"Description",width:200},{field:"addressChain",headerName:"Chain",width:100,renderCell:e=>(0,n.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),eC(e.value)},children:e.value})},{field:"balanceQty",headerName:"Balance Quantity",width:100},{field:"loadingImages",headerName:"Image",width:200,renderCell:e=>{var t;return(0,n.jsx)(k.xu,{position:"relative",zIndex:"docked",children:(0,n.jsx)(u.E,{src:null==e?void 0:null===(t=e.value)||void 0===t?void 0:t[0],alt:"Asset Image",boxSize:"64px",onClick:()=>{var t;em(null==e?void 0:null===(t=e.value)||void 0===t?void 0:t[0]),es()}})})}},{field:"balanceUrl",headerName:"Balance URL",width:400,renderCell:e=>(0,n.jsx)(h.r,{href:null==e?void 0:e.value.toString(),isExternal:!0,style:{fontSize:"8px"},children:null==e?void 0:e.value})},{field:"vaultCollectionType",headerName:"Collection Type",width:200}],rows:z.map((e,t)=>({id:e.id,created_at:e.created_at,name:e.name,description:e.description,addressChain:e.addressChain,balanceQty:e.balanceQty,balanceUrl:e.balanceUrl,loadingImages:e.loadingImages,vaultCollectionType:e.vaultCollectionType})),autoHeight:!0})})]})]}),(0,n.jsxs)(v.u_,{isOpen:ei,onClose:eu,children:[(0,n.jsx)(x.Z,{}),(0,n.jsxs)(j.h,{children:[(0,n.jsx)(g.x,{children:"Asset Image"}),(0,n.jsx)(C.o,{}),(0,n.jsx)(w.f,{children:(0,n.jsx)(u.E,{src:eh,alt:"Asset Image"})})]})]})]})}function R(){return(0,n.jsx)(T,{})}}},function(e){e.O(0,[4314,758,7119,1793,2344,4745,6566,2149,2083,2888,9774,179],function(){return e(e.s=95208)}),_N_E=e.O()}]);