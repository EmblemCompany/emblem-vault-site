_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[25],{CKsJ:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/nft",function(){return n("Z8wp")}])},Z8wp:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return W}));var a=n("q1tI"),r=n.n(a),c=n("wx14"),o=n("o0o1"),i=n.n(o),s=n("HaE+"),u=n("XZ7F"),l=n("Weur"),d=n("BMxC"),f=n("Yn+B"),p=n("bQFp"),m=n("sK1y"),b=n("FpzS"),h=n("pboS"),g=n("IP4Q"),v=n("eJLp"),O=n("LqLE"),w=n("8Kt/"),j=n.n(w),y=n("Z6YE"),S=n("nOHt"),x=n("Ute3"),k=n("Y1ui"),C=n.n(k),E=n("a6RD"),T=n.n(E),A=n("iBPG"),_=n("zIq6"),I=n("N39q"),N=n("21eR"),H=n("c+OE"),F=n.n(H),G=n("NFKh"),J=n.n(G),P=r.a.createElement,V=T()((function(){return Promise.all([n.e(10),n.e(11),n.e(15)]).then(n.bind(null,"X/Jl"))}),{loadableGenerated:{webpack:function(){return["X/Jl"]},modules:["./AddrModal"]}}),K=T()((function(){return Promise.all([n.e(10),n.e(11),n.e(16)]).then(n.bind(null,"0bCS"))}),{loadableGenerated:{webpack:function(){return["0bCS"]},modules:["./KeysModal"]}});function L(){var e,t=Object(y.b)(),n=t.account,o=t.chainId,w=t.library,k=Object(S.useRouter)().query,E=Object(a.useState)(!1),T=E[0],H=E[1],G=Object(a.useState)(k.key),L=G[0],R=G[1],W=Object(a.useState)(k.id),M=W[0],q=(W[1],Object(a.useState)(k.experimental)),B=(q[0],q[1],Object(a.useState)("")),z=B[0],D=B[1],U=Object(a.useState)(""),X=U[0],Y=U[1],Z=Object(a.useState)(""),Q=Z[0],$=Z[1],ee=Object(a.useState)([]),te=ee[0],ne=ee[1],ae=Object(a.useState)([]),re=ae[0],ce=ae[1],oe=Object(a.useState)([]),ie=oe[0],se=oe[1],ue=Object(a.useState)(!1),le=ue[0],de=ue[1],fe=Object(a.useState)(0),pe=fe[0],me=fe[1],be=Object(a.useState)(null),he=be[0],ge=be[1],ve=Object(a.useState)(null),Oe=ve[0],we=ve[1],je=Object(a.useState)(""),ye=je[0],Se=je[1],xe=Object(a.useState)(""),ke=xe[0],Ce=xe[1],Ee=Object(a.useState)({loaded:!1}),Te=Ee[0],Ae=Ee[1],_e=Object(a.useState)(!1),Ie=_e[0],Ne=_e[1],He=Object(a.useState)(!1),Fe=He[0],Ge=He[1],Je=Object(a.useState)("claimed"),Pe=Je[0],Ve=Je[1],Ke=Object(a.useState)(null),Le=Ke[0],Re=Ke[1],We=Object(a.useState)(""),Me=We[0],qe=We[1],Be=Object(a.useState)(""),ze=Be[0],De=Be[1],Ue=Object(a.useState)(""),Xe=Ue[0],Ye=Ue[1],Ze=Object(a.useState)([]),Qe=Ze[0],$e=Ze[1],et=Object(a.useState)(!1),tt=et[0],nt=et[1],at=Object(a.useState)(""),rt=at[0],ct=at[1],ot=Object(a.useState)(!1),it=ot[0],st=ot[1],ut=Object(a.useState)(""),lt=ut[0],dt=ut[1],ft=Object(a.useState)(!1),pt=ft[0],mt=ft[1],bt=Object(a.useState)(!1),ht=(bt[0],bt[1],Object(a.useState)(!1)),gt=ht[0],vt=ht[1],Ot=Object(a.useState)(!1),wt=Ot[0],jt=Ot[1],yt=Object(a.useState)(""),St=yt[0],xt=yt[1],kt=Object(a.useState)(!1),Ct=kt[0],Et=kt[1],Tt=Object(a.useState)(!1),At=Tt[0],_t=Tt[1],It=Object(N.b)(I.p.vaultHandler[o],I.p.vaultHandlerAbi,!0),Nt=Object(N.b)(I.p.emblemVault[o],I.p.emblemAbi,!0),Ht=Object(u.a)(),Ft=Ht.isOpen,Gt=Ht.onOpen,Jt=Ht.onClose,Pt=Object(u.a)(),Vt=Pt.isOpen,Kt=Pt.onOpen,Lt=Pt.onClose,Rt=function(){var e=Object(s.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mt(),e.next=3,fetch(I.h+"/meta/"+M+"?experimental=true",{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata"}});case 3:return t=e.sent,e.next=6,t.json();case 6:(n=e.sent).name?(Wt(n),Dt(n),nt(!1),mt(!1)):(Ae({loaded:!0}),mt(!0));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Wt=function(e){D(e.name),$(e.image),Y(e.description),me(e.totalValue||0),ne(te.concat(e.values)),ce(e.attributes.filter((function(e){return"key"===e.trait_type}))),Y(e.description),se(e.addresses),ge("mainnet"==e.network?1:"rinkeby"==e.network?4:"mumbai"==e.network?80001:"matic"==e.network?137:97),Ve(e.status),"claimed"===Pe&&Re(e.claimedBy),Ae({loaded:!0});var t=e.addresses.filter((function(e){return e.address.includes("private:")})).length>0;de(t),setTimeout((function(){!t&&zt(e.values,e.addresses.filter((function(e){return"ETH"===e.coin}))[0].address,(function(e){ne(e)}))}),5)},Mt=function(){var e=JSON.parse(localStorage.getItem(n+"_"+o+"_"+M+"_vault"));e&&(Ae({loaded:!0}),Wt(e),nt(!0))},qt=function(){var e=Object(s.a)(i.a.mark((function e(t,n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(I.h+"/eth/balance/"+t,{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,me(Number(pe)+Number(r.totalValue)),e.abrupt("return",n(r.values));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Bt=function(){var e=Object(s.a)(i.a.mark((function e(t,n,a){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(I.h+"/btc/balance/"+n,{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata"}});case 2:return r=e.sent,e.next=5,r.json();case 5:return c=e.sent,e.abrupt("return",a(t.concat(c.values)));case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),zt=function(){var e=Object(s.a)(i.a.mark((function e(t,n,a){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(I.h+"/eth/nft/"+n,{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata"}});case 2:return r=e.sent,e.next=5,r.json();case 5:if(!((c=e.sent).length>0)){e.next=10;break}return e.abrupt("return",a(t.concat(c)));case 10:return e.abrupt("return",a(t));case 11:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Dt=function(e){localStorage.setItem(n+"_"+o+"_"+M+"_vault",JSON.stringify(e))},Ut=function(){var e=Object(s.a)(i.a.mark((function e(t,n,a){var r,c,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new Headers).append("chainId",o.toString()),r.append("service","evmetadata"),r.append("Content-Type","application/json"),c=JSON.stringify({signature:t}),e.next=7,fetch(I.h+"/verify/"+n,{method:"POST",headers:r,body:c,redirect:"follow"});case 7:return s=e.sent,e.next=10,s.json();case 10:return u=e.sent,e.abrupt("return",a(u));case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Xt=function(){var e=Object(s.a)(i.a.mark((function e(){var t,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.prev=1,e.next=4,Nt.ownerOf(M);case 4:return t=e.sent,e.next=7,It.getPreTransfer(M);case 7:return a=e.sent,e.next=10,Nt.isApprovedForAll(n,I.p.vaultHandler[o]);case 10:r=e.sent,H(r),jt("0x0000000000000000000000000000000000000000"!==a._from),console.log("owned",t===n),console.log(t,n),console.log("approved",r),Ne(t===n),e.next=21;break;case 19:e.prev=19,e.t0=e.catch(1);case 21:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){console.log("mine?",Ie),console.log("claiming?",Fe),console.log("accepting?",gt)}));var Yt=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w.getSigner(n).signMessage("Claim: "+M).then((function(e){Ut(e,M,(function(e){qe(e.decrypted.phrase),De(e.decrypted.keys.filter((function(e){return"btc"===e.coin}))[0].privkey),Ye(e.decrypted.keys.filter((function(e){return"eth"===e.coin}))[0].privkey),$e(e.decrypted.values),Kt()}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Zt=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Nt.transferFrom(n,I.c,M).then((function(e){var t=e.hash;Ge(!0),setTimeout((function(){we(t)}),100)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qt=function(){var e=Object(s.a)(i.a.mark((function e(){var t,n,a,r,c,o,s,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=function(e){for(var i=0;i<r-o;i++){var l=Math.floor(t.length*Math.random()),d=t.charAt(l);s+=d}c==a-1&&o++,c==a&&(u+=n.charAt(o-1),c=0),ct(u+s),s=""},!it){e.next=3;break}return e.abrupt("return");case 3:st(!0),t="abcdefghijklmnopqrstuvwxyz",5,r=(n="Decrypting").length,c=0,o=0,s="",u="",function e(t){setTimeout((function(){--t?e(t):st(!1),l(t),c+=1}),5)}(r*(a=8)+1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function $t(e){return e.split("\n\n\n\n")[0].trim()}function en(e){lt&&(e=lt),Qt();var t=ie[0].address.replace("private:","");try{var n=J.a.AES.decrypt(t,e);JSON.parse(n.toString(J.a.enc.Utf8)),de(!1),dt(e),se(function(e){return ie.forEach((function(t){var n=t.address.replace("private:","");t.address=function(e,t){var n=J.a.AES.decrypt(e,t);return JSON.parse(n.toString(J.a.enc.Utf8))}(n,e)})),ie}(e)),qt(ie.filter((function(e){return"ETH"===e.coin}))[0].address,(function(e){Bt(e,ie.filter((function(e){return"BTC"===e.coin}))[0].address,(function(e){zt(e,ie.filter((function(e){return"ETH"===e.coin}))[0].address,(function(e){ne(e.concat(te))}))}))}))}catch(a){}}return Object(a.useEffect)((function(){Rt()}),[]),Object(a.useEffect)((function(){n&&o&&he&&o==he&&Xt()})),P(r.a.Fragment,null,P(j.a,null,P("meta",{name:"twitter:card",content:"summary_large_image"}),P("meta",{name:"twitter:site",content:"Emblem.Finance"}),P("meta",{name:"twitter:title",content:z}),P("meta",{name:"twitter:description",content:$t(X)}),P("meta",{name:"twitter:image",content:Q})),P(V,{isOpen:Ft,onClose:Jt,addrCoin:ye,addrAddr:ke}),P(K,{isOpen:Vt,onClose:Lt,mnemonic:Me,privKeyBTC:ze,privKeyETH:Xe,privValues:Qe}),P(C.a,{loaded:Te.loaded},tt?P(x.a,null):"",pt?P(f.a,{align:"center"},P(p.a,{width:"md",src:"https://starwarsblog.starwars.com/wp-content/uploads/2017/06/25-star-wars-quotes-obi-wan-kenobi-identification-tall.jpg"}),P(m.a,null,"THESE ARE NOT THE VAULTS YOU ARE LOOKING FOR"," ",P(h.a,{color:"#638cd8",href:"../create"},"CREATE ONE HERE!"))):P(F.a,{className:"Tilt",options:{max:0,scale:1}},P(l.a,{width:"full",align:"center",justifyContent:"center"},P(d.a,{maxW:"sm",borderWidth:"1px",borderColor:he!=o?"orange.500":"claimed"==Pe?"green.500":null,rounded:"lg",overflow:"hidden",alignItems:"center",minW:390},he!=o?P(d.a,{mt:"1",fontWeight:"semibold",as:"h3",lineHeight:"tight",p:2,textAlign:"center",textTransform:"uppercase",alignItems:"center",color:"orange.500"},"BEWARE: Vault is on a different network than you are."):null,P(d.a,{mt:"1",fontWeight:"semibold",as:"h3",lineHeight:"tight",p:2,textAlign:"center",textTransform:"uppercase",alignItems:"center"},z,le?null:": ~$"+pe),P(f.a,{align:"center"},P(p.a,{src:Object(A.k)(Q)?Q:"https://circuitsofvalue.com/public/coval-logo.png",width:"250px"})),P(f.a,{align:"center"},P(d.a,{mt:"2",ml:"4",lineHeight:"tight"},P(m.a,{mt:2,as:"h4",ml:"4",mr:"4",fontSize:"xs",fontStyle:"italic"},$t(X)))),P(d.a,{p:"6"},P(d.a,{d:"flex",alignItems:"baseline"},P(d.a,{color:"gray.500",letterSpacing:"wide",fontSize:"sm",ml:"2"},P(m.a,{as:"h4",fontWeight:"semibold"},"Current Contents:"),le?P(r.a.Fragment,null,P(m.a,{pb:2,color:rt?"green.500":null},rt||"Contents hidden. Enter password to unlock."),P(b.a,{type:"password",id:"vault-password",onChange:function(e){return en(e.target.value)},"aria-describedby":"password-helper-text"})):te.length?te.map((function(e){return P(m.a,{key:e.name,isTruncated:!0},P(p.a,{width:10,src:e.image}),e.name," :"," ",e.balance?e.balance:"nft"==e.type?P(h.a,{href:e.external_url,isExternal:!0},"View NFT"):null)})):null,re.length?re.map((function(e){return P(m.a,null,"Data: ",e.attribute_key)})):re.length||te.length?null:P(m.a,null,"Nothing in here! Fill 'er up!"))),le?null:P(d.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},P(g.a,{justifyContent:"space-between",spacing:6},ie.map((function(e){return P(v.a,{key:e.address,onClick:function(){Se(e.coin),Ce(e.address),Gt()}},"Put ","ETH"==e.coin?e.coin+"/ERC20":e.coin," In")})))),"claimed"===Pe||L?null:P(d.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},P(v.a,Object(c.a)({width:"100%",as:"a"},{href:"https://"+(4==he?"rinkeby.":"")+"opensea.io/assets/"+I.p.emblemVault[he]+"/"+M,target:"_blank",rel:"noopener noreferrer"}),Ie?"Sell/Gift/Send (Opensea)":"Make an Offer (Opensea)")),Ie&&!wt?P(r.a.Fragment,null,P(d.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},P(v.a,{width:"100%",onClick:function(){if(T){var t=J.a.lib.WordArray.random(16).toString(),n=J.a.SHA256(t).toString();console.log("plain",t),console.log("sha",n),xt(t),e=n,Et(!Ct),setTimeout((function(){console.log("transferImage","0x"+e),It.addPreTransfer(M,"0x"+e).then((function(e){var t=e.hash;setTimeout((function(){we(t),_t(!0)}),100)})).catch((function(e){4001!==(null===e||void 0===e?void 0:e.code)?console.log("tx failed.",e):_t(!1)}))}),500)}else Nt.setApprovalForAll(I.p.vaultHandler[o],!0).then((function(e){var t=e.hash;setTimeout((function(){we(t),_t(!0)}),100)})).catch((function(e){4001!==(null===e||void 0===e?void 0:e.code)?console.log("tx failed.",e):_t(!1)}))}}," ",T?"Get Link (Send Vault Via Link)":"Approve Gifting"," ")),Ct?P(d.a,null,P(h.a,{href:location.protocol+"//"+location.host+"/nft?id="+M+"&key="+St},"Copy Me")):null):null,wt&&Le!==n?P(r.a.Fragment,null,P(v.a,{mt:2,width:"100%",onClick:function(){It.transferWithCode(M,L).then((function(e){var t=e.hash;setTimeout((function(){we(t),vt(!0)}),100)})).catch((function(e){4001!==(null===e||void 0===e?void 0:e.code)?console.log("tx failed.",e):vt(!1)}))}},"Accept"),P(b.a,{mt:2,type:"password",id:"mintPassword",minLength:3,maxLength:200,value:L,onChange:function(e){return R(e.target.value)},autoComplete:"off"})):null,"claimed"!==Pe&&n&&he===o&&Ie?P(d.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},P(v.a,{width:"100%",onClick:function(){Zt()},isDisabled:Fe},Fe?"Claiming ...":"Claim (Crack Open Vault)")):"claimed"===Pe&&Le===n&&he===o?P(d.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},P(v.a,{width:"100%",onClick:Yt},"Get Keys")):null),P(f.a,{direction:"column",align:"center"},"claimed"==Pe?P(m.a,{color:"green.500"},"CLAIMED"):null),Oe?P(O.a,{status:"info"},P(O.b,null),gt?"Accepting your vault":"Claiming your vault ..."):null))),Oe?P(_.a,{hash:Oe,onComplete:function(){!Fe||gt||At?At&&we(null):(we(null),Ve("claimed"),Ge(!1),Re(n),Yt())}}):null))}var R=r.a.createElement;function W(){return R(L,null)}}},[["CKsJ",2,1,5,7,0,3,4,6,9,8,12,14]]]);