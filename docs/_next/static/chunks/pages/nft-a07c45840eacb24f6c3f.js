_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[23],{CKsJ:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/nft",function(){return n("Z8wp")}])},Z8wp:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return M}));var a=n("q1tI"),r=n.n(a),c=n("wx14"),i=n("o0o1"),o=n.n(i),s=n("HaE+"),u=n("XZ7F"),l=n("Weur"),d=n("BMxC"),f=n("Yn+B"),p=n("bQFp"),m=n("sK1y"),b=n("FpzS"),h=n("pboS"),g=n("IP4Q"),v=n("eJLp"),w=n("LqLE"),O=n("8Kt/"),j=n.n(O),y=n("Z6YE"),S=n("nOHt"),x=n("Ute3"),C=n("Y1ui"),E=n.n(C),k=n("a6RD"),T=n.n(k),_=n("iBPG"),N=n("zIq6"),A=n("N39q"),I=n("21eR"),H=n("c+OE"),F=n.n(H),J=n("NFKh"),G=n.n(J),K=r.a.createElement,P=T()((function(){return Promise.all([n.e(5),n.e(9),n.e(13)]).then(n.bind(null,"X/Jl"))}),{loadableGenerated:{webpack:function(){return["X/Jl"]},modules:["./AddrModal"]}}),R=T()((function(){return Promise.all([n.e(5),n.e(9),n.e(14)]).then(n.bind(null,"0bCS"))}),{loadableGenerated:{webpack:function(){return["0bCS"]},modules:["./KeysModal"]}});function W(){var e=Object(y.b)(),t=e.account,n=e.chainId,i=e.library,O=Object(S.useRouter)().query,C=Object(a.useState)(""),k=C[0],T=C[1],H=Object(a.useState)(O.id),J=H[0],W=(H[1],Object(a.useState)(O.experimental)),L=W[0],M=(W[1],Object(a.useState)("")),q=M[0],B=M[1],V=Object(a.useState)(""),U=V[0],X=V[1],z=Object(a.useState)(""),D=z[0],Y=z[1],Z=Object(a.useState)([]),Q=Z[0],$=Z[1],ee=Object(a.useState)([]),te=ee[0],ne=ee[1],ae=Object(a.useState)(!1),re=ae[0],ce=ae[1],ie=Object(a.useState)(0),oe=ie[0],se=ie[1],ue=Object(a.useState)(null),le=ue[0],de=ue[1],fe=Object(a.useState)(null),pe=fe[0],me=fe[1],be=Object(a.useState)(""),he=be[0],ge=be[1],ve=Object(a.useState)(""),we=ve[0],Oe=ve[1],je=Object(a.useState)({loaded:!1}),ye=je[0],Se=je[1],xe=Object(a.useState)(!1),Ce=xe[0],Ee=xe[1],ke=Object(a.useState)(!1),Te=ke[0],_e=ke[1],Ne=Object(a.useState)("claimed"),Ae=Ne[0],Ie=Ne[1],He=Object(a.useState)(null),Fe=He[0],Je=He[1],Ge=Object(a.useState)(""),Ke=Ge[0],Pe=Ge[1],Re=Object(a.useState)(""),We=Re[0],Le=Re[1],Me=Object(a.useState)(""),qe=Me[0],Be=Me[1],Ve=Object(a.useState)(!1),Ue=Ve[0],Xe=Ve[1],ze=Object(a.useState)(""),De=ze[0],Ye=ze[1],Ze=Object(a.useState)(!1),Qe=Ze[0],$e=Ze[1],et=Object(a.useState)(""),tt=et[0],nt=et[1],at=Object(a.useState)(!1),rt=at[0],ct=at[1],it=Object(a.useState)(!1),ot=(it[0],it[1],Object(a.useState)(!1)),st=ot[0],ut=ot[1],lt=Object(a.useState)(!1),dt=lt[0],ft=lt[1],pt=Object(I.b)(A.p.vaultHandler[n],A.p.vaultHandlerAbi,!0),mt=Object(I.b)(A.p.emblemVault[n],A.p.emblemAbi,!0),bt=Object(u.a)(),ht=bt.isOpen,gt=bt.onOpen,vt=bt.onClose,wt=Object(u.a)(),Ot=wt.isOpen,jt=wt.onOpen,yt=wt.onClose,St=function(){var e=Object(s.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ct(),e.next=3,fetch(A.h+"/meta/"+J,{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata"}});case 3:return t=e.sent,e.next=6,t.json();case 6:(n=e.sent).name?(xt(n),_t(n),Xe(!1),ct(!1)):(Se({loaded:!0}),ct(!0));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xt=function(e){B(e.name),Y(e.image),X(e.description),se(e.totalValue||0),$(Q.concat(e.values)),X(e.description),ne(e.addresses),de("mainnet"==e.network?1:4),Ie(e.status),"claimed"===Ae&&Je(e.claimedBy),Se({loaded:!0});var t=e.addresses.filter((function(e){return e.address.includes("private:")})).length>0;ce(t),setTimeout((function(){!t&&Tt(e.values,e.addresses.filter((function(e){return"ETH"===e.coin}))[0].address,(function(e){$(e)}))}),5)},Ct=function(){var e=JSON.parse(localStorage.getItem(t+"_"+n+"_"+J+"_vault"));e&&(Se({loaded:!0}),xt(e),Xe(!0))},Et=function(){var e=Object(s.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(A.h+"/eth/balance/"+t,{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,se(Number(oe)+Number(r.totalValue)),e.abrupt("return",n(r.values));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),kt=function(){var e=Object(s.a)(o.a.mark((function e(t,n,a){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(A.h+"/btc/balance/"+n,{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata"}});case 2:return r=e.sent,e.next=5,r.json();case 5:return c=e.sent,e.abrupt("return",a(t.concat(c.values)));case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Tt=function(){var e=Object(s.a)(o.a.mark((function e(t,n,a){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(A.h+"/eth/nft/"+n,{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata"}});case 2:return r=e.sent,e.next=5,r.json();case 5:if(!((c=e.sent).length>0)){e.next=10;break}return e.abrupt("return",a(t.concat(c)));case 10:return e.abrupt("return",a(t));case 11:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),_t=function(e){localStorage.setItem(t+"_"+n+"_"+J+"_vault",JSON.stringify(e))},Nt=function(){var e=Object(s.a)(o.a.mark((function e(t,a,r){var c,i,s,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=new Headers).append("chainId",n.toString()),c.append("service","evmetadata"),c.append("Content-Type","application/json"),i=JSON.stringify({signature:t}),e.next=7,fetch(A.h+"/verify/"+a,{method:"POST",headers:c,body:i,redirect:"follow"});case 7:return s=e.sent,e.next=10,s.json();case 10:return u=e.sent,e.abrupt("return",r(u));case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),At=function(){var e=Object(s.a)(o.a.mark((function e(){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.prev=1,e.next=4,mt.ownerOf(J);case 4:return n=e.sent,e.next=7,pt.getPreTransfer(J);case 7:a=e.sent,ft("0x0000000000000000000000000000000000000000"!==a._from),console.log("owned",n===t),Ee(n===t),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(1);case 15:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){console.log("mine?",Ce),console.log("claiming?",Te),console.log("accepting?",st)}));var It=function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.getSigner(t).signMessage("Claim: "+J).then((function(e){Nt(e,J,(function(e){Pe(e.decrypted.phrase),Le(e.decrypted.keys.filter((function(e){return"btc"===e.coin}))[0].privkey),Be(e.decrypted.keys.filter((function(e){return"eth"===e.coin}))[0].privkey),jt()}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ht=function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mt.transferFrom(t,A.c,J).then((function(e){var t=e.hash;_e(!0),setTimeout((function(){me(t)}),100)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ft=function(){var e=Object(s.a)(o.a.mark((function e(){var t,n,a,r,c,i,s,u,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=function(e){for(var o=0;o<r-i;o++){var l=Math.floor(t.length*Math.random()),d=t.charAt(l);s+=d}c==a-1&&i++,c==a&&(u+=n.charAt(i-1),c=0),Ye(u+s),s=""},!Qe){e.next=3;break}return e.abrupt("return");case 3:$e(!0),t="abcdefghijklmnopqrstuvwxyz",5,r=(n="Decrypting").length,c=0,i=0,s="",u="",function e(t){setTimeout((function(){--t?e(t):$e(!1),l(t),c+=1}),5)}(r*(a=8)+1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Jt(e){return e.split("\n\n\n\n")[0].trim()}function Gt(e){tt&&(e=tt),Ft();var t=te[0].address.replace("private:","");try{var n=G.a.AES.decrypt(t,e);JSON.parse(n.toString(G.a.enc.Utf8)),ce(!1),nt(e),ne(function(e){return te.forEach((function(t){var n=t.address.replace("private:","");t.address=function(e,t){var n=G.a.AES.decrypt(e,t);return JSON.parse(n.toString(G.a.enc.Utf8))}(n,e)})),te}(e)),Et(te.filter((function(e){return"ETH"===e.coin}))[0].address,(function(e){kt(e,te.filter((function(e){return"BTC"===e.coin}))[0].address,(function(e){Tt(e,te.filter((function(e){return"ETH"===e.coin}))[0].address,(function(e){$(e.concat(Q))}))}))}))}catch(a){}}return Object(a.useEffect)((function(){St()}),[]),Object(a.useEffect)((function(){t&&n&&le&&n==le&&At()})),K(r.a.Fragment,null,K(j.a,null,K("meta",{name:"twitter:card",content:"summary_large_image"}),K("meta",{name:"twitter:site",content:"Emblem.Finance"}),K("meta",{name:"twitter:title",content:q}),K("meta",{name:"twitter:description",content:Jt(U)}),K("meta",{name:"twitter:image",content:D})),K(P,{isOpen:ht,onClose:vt,addrCoin:he,addrAddr:we}),K(R,{isOpen:Ot,onClose:yt,mnemonic:Ke,privKeyBTC:We,privKeyETH:qe}),K(E.a,{loaded:ye.loaded},Ue?K(x.a,null):"",rt?K(f.a,{align:"center"},K(p.a,{width:"md",src:"https://starwarsblog.starwars.com/wp-content/uploads/2017/06/25-star-wars-quotes-obi-wan-kenobi-identification-tall.jpg"}),K(m.a,null,"THESE ARE NOT THE VAULTS YOU ARE LOOKING FOR"," ",K(h.a,{color:"#638cd8",href:"../create"},"CREATE ONE HERE!"))):K(F.a,{className:"Tilt",options:{max:L?19:0,scale:1}},K(l.a,{width:"full",align:"center",justifyContent:"center"},K(d.a,{maxW:"sm",borderWidth:"1px",borderColor:le!=n?"orange.500":"claimed"==Ae?"green.500":null,rounded:"lg",overflow:"hidden",alignItems:"center",minW:390},le!=n?K(d.a,{mt:"1",fontWeight:"semibold",as:"h3",lineHeight:"tight",p:2,textAlign:"center",textTransform:"uppercase",alignItems:"center",color:"orange.500"},"BEWARE: Vault is on a different network than you are."):null,K(d.a,{mt:"1",fontWeight:"semibold",as:"h3",lineHeight:"tight",p:2,textAlign:"center",textTransform:"uppercase",alignItems:"center"},q,re?null:": ~$"+oe),K(f.a,{align:"center"},K(p.a,{src:Object(_.k)(D)?D:"https://circuitsofvalue.com/public/coval-logo.png",width:"250px"})),K(f.a,{align:"center"},K(d.a,{mt:"1",ml:"4",lineHeight:"tight"},K(m.a,{as:"h4",ml:"4",mr:"4"},Jt(U)))),K(d.a,{p:"6"},K(d.a,{d:"flex",alignItems:"baseline"},K(d.a,{color:"gray.500",letterSpacing:"wide",fontSize:"sm",ml:"2"},K(m.a,{as:"h4",fontWeight:"semibold"},"Current Contents:"),re?K(r.a.Fragment,null,K(m.a,{pb:2,color:De?"green.500":null},De||"Contents hidden. Enter password to unlock."),K(b.a,{type:"password",id:"vault-password",onChange:function(e){return Gt(e.target.value)},"aria-describedby":"password-helper-text"})):Q.length?Q.map((function(e){return K(m.a,{key:e.name,isTruncated:!0},K(p.a,{width:10,src:e.image}),e.name," :"," ",e.balance?e.balance:"nft"==e.type?K(h.a,{href:e.external_url,isExternal:!0},"View NFT"):null)})):K(m.a,null,"Nothing in here! Fill 'er up!"))),re?null:K(d.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},K(g.a,{justifyContent:"space-between",spacing:6},te.map((function(e){return K(v.a,{key:e.address,onClick:function(){ge(e.coin),Oe(e.address),gt()}},"Put ","ETH"==e.coin?e.coin+"/ERC20":e.coin," In")})))),"claimed"!==Ae?K(d.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},K(v.a,Object(c.a)({width:"100%",as:"a"},{href:"https://"+(4==le?"rinkeby.":"")+"opensea.io/assets/"+A.p.emblemVault[le]+"/"+J,target:"_blank",rel:"noopener noreferrer"}),Ce?"Sell/Gift/Send":"Make an Offer")):null,!Ce&&dt?K(r.a.Fragment,null,K(v.a,{mt:2,width:"100%",onClick:function(){pt.transferWithCode(J,k).then((function(e){var t=e.hash;setTimeout((function(){me(t),ut(!0)}),100)})).catch((function(e){4001!==(null===e||void 0===e?void 0:e.code)?console.log("tx failed.",e):ut(!1)}))}},"Accept"),K(b.a,{mt:2,type:"password",id:"mintPassword",minLength:3,maxLength:200,value:k,onChange:function(e){return T(e.target.value)},autoComplete:"off"})):null,"claimed"!==Ae&&t&&le===n&&Ce?K(d.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},K(v.a,{width:"100%",onClick:function(){Ht()},isDisabled:Te},Te?"Claiming ...":"Claim")):"claimed"===Ae&&Fe===t&&le===n?K(d.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},K(v.a,{width:"100%",onClick:It},"Get Keys")):null),K(f.a,{direction:"column",align:"center"},"claimed"==Ae?K(m.a,{color:"green.500"},"CLAIMED"):null),pe?K(w.a,{status:"info"},K(w.b,null),st?"Accepting your vault":"Claiming your vault ..."):null))),pe?K(N.a,{hash:pe,onComplete:function(){Te&&!st&&(me(null),Ie("claimed"),_e(!1),Je(t),It())}}):null))}var L=r.a.createElement;function M(){return L(W,null)}}},[["CKsJ",2,1,6,8,0,3,4,7,10,11,12]]]);