_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[28],{"pZB+":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ae}));var a=n("q1tI"),r=n.n(a),o=n("wx14"),c=n("o0o1"),i=n.n(c),s=n("HaE+"),u=n("XZ7F"),l=n("Weur"),p=n("BMxC"),d=n("Yn+B"),f=n("bQFp"),b=n("sK1y"),m=n("FpzS"),h=n("pVnL"),O=n.n(h),g=n("lSNA"),j=n.n(g),v=n("8OQS"),y=n.n(v),w=n("qKvR"),S=n("mf32"),x=n("iUFP"),E=n("m94C"),C=n("+Z5E");function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var T=function(e,t,n){return function(a){if("string"!==typeof e&&e.props[t]&&e.props[t](a),!a.defaultPrevented)return n(a)}},_=function(e){var t,n=e.label,r=e["aria-label"],o=e.showDelay,c=void 0===o?0:o,i=e.hideDelay,s=void 0===i?0:i,l=e.placement,d=void 0===l?"auto":l,f=e.children,b=e.hasArrow,m=e.closeOnClick,h=e.defaultIsOpen,g=e.shouldWrapChildren,v=e.isOpen,_=e.onOpen,A=e.onClose,I=y()(e,["label","aria-label","showDelay","hideDelay","placement","children","hasArrow","closeOnClick","defaultIsOpen","shouldWrapChildren","isOpen","onOpen","onClose"]),N=Object(u.a)(h||!1),P=N.isOpen,R=N.onClose,F=N.onOpen,H=Object(a.useRef)(null!=v).current,D=H?v:P,M=Object(a.useRef)(),W=Object(a.useRef)(),B=Object(a.useRef)(),G=function(){clearTimeout(W.current),B.current=setTimeout(R,s)},J="tooltip-"+Object(x.a)(),z=function(){H||(W.current=setTimeout(F,c)),_&&_()},K=function(){H||G(),A&&A()},L=Object(S.c)().colorMode,V="dark"===L?"gray.300":"gray.700",q="dark"===L?"gray.900":"whiteAlpha.900",U=T(f,"onClick",(function(){m&&G()})),X=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach((function(t){j()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ref:M,onMouseEnter:T(f,"onMouseEnter",z),onMouseLeave:T(f,"onMouseLeave",K),onClick:U,onFocus:T(f,"onFocus",z),onBlur:T(f,"onBlur",K)},D&&{"aria-describedby":J});t="string"===typeof f||g?Object(w.d)(p.a,O()({as:"span",tabIndex:"0"},X),f):Object(a.cloneElement)(a.Children.only(f),X);var Z=null!=r;return Object(w.d)(a.Fragment,null,t,Object(w.d)(E.b,O()({usePortal:!0,isOpen:D,placement:d,timeout:200,modifiers:{offset:{enabled:!0,offset:"0, 8"}},anchorEl:M.current,arrowSize:"10px",hasArrow:b,px:"8px",py:"2px",id:Z?void 0:J,role:Z?void 0:"tooltip",bg:V,borderRadius:"sm",fontWeight:"medium",pointerEvents:"none",color:q,fontSize:"sm",shadow:"md",maxW:"320px"},I),n,Z&&Object(w.d)(C.a,{role:"tooltip",id:J},r),b&&Object(w.d)(E.a,null)))},A=n("pboS"),I=n("IP4Q"),N=n("eJLp"),P=n("LqLE"),R=n("8Kt/"),F=n.n(R),H=n("Z6YE"),D=n("nOHt"),M=n("Ute3"),W=n("Y1ui"),B=n.n(W),G=n("a6RD"),J=n.n(G),z=n("iBPG"),K=n("zIq6"),L=n("N39q"),V=n("21eR"),q=n("c+OE"),U=n.n(q),X=n("NFKh"),Z=n.n(X),Y=n("sd7e"),Q=r.a.createElement,$=J()((function(){return Promise.all([n.e(10),n.e(12)]).then(n.bind(null,"X/Jl"))}),{loadableGenerated:{webpack:function(){return["X/Jl"]},modules:["./AddrModal"]}}),ee=J()((function(){return Promise.all([n.e(10),n.e(12)]).then(n.bind(null,"0bCS"))}),{loadableGenerated:{webpack:function(){return["0bCS"]},modules:["./KeysModal"]}});function te(){var e=Object(H.b)(),t=e.account,n=e.chainId,c=e.library,h=Object(D.useRouter)().query,O=Object(a.useState)(h.id),g=O[0],j=(O[1],Object(a.useState)(h.experimental)),v=j[0],y=(j[1],Object(a.useState)("")),w=y[0],S=y[1],x=Object(a.useState)(""),E=x[0],C=x[1],k=Object(a.useState)(""),T=k[0],R=k[1],W=Object(a.useState)([]),G=W[0],J=W[1],q=Object(a.useState)([]),X=q[0],te=q[1],ne=Object(a.useState)([]),ae=ne[0],re=ne[1],oe=Object(a.useState)(!1),ce=oe[0],ie=oe[1],se=Object(a.useState)(0),ue=se[0],le=se[1],pe=Object(a.useState)(null),de=pe[0],fe=pe[1],be=Object(a.useState)(null),me=be[0],he=be[1],Oe=Object(a.useState)(""),ge=Oe[0],je=Oe[1],ve=Object(a.useState)(""),ye=ve[0],we=ve[1],Se=Object(a.useState)({loaded:!1}),xe=Se[0],Ee=Se[1],Ce=Object(a.useState)(!1),ke=Ce[0],Te=Ce[1],_e=Object(a.useState)(!1),Ae=_e[0],Ie=_e[1],Ne=Object(a.useState)("claimed"),Pe=Ne[0],Re=Ne[1],Fe=Object(a.useState)(null),He=Fe[0],De=Fe[1],Me=Object(a.useState)(""),We=Me[0],Be=Me[1],Ge=Object(a.useState)(""),Je=Ge[0],ze=Ge[1],Ke=Object(a.useState)(""),Le=Ke[0],Ve=Ke[1],qe=Object(a.useState)([]),Ue=qe[0],Xe=qe[1],Ze=Object(a.useState)(!1),Ye=Ze[0],Qe=Ze[1],$e=Object(a.useState)(""),et=$e[0],tt=$e[1],nt=Object(a.useState)(!1),at=nt[0],rt=nt[1],ot=Object(a.useState)(""),ct=ot[0],it=ot[1],st=Object(a.useState)(!1),ut=st[0],lt=st[1],pt=Object(a.useState)(!1),dt=(pt[0],pt[1],Object(V.b)(L.p.emblemVault[n],L.p.emblemAbi,!0)),ft=Object(u.a)(),bt=ft.isOpen,mt=ft.onOpen,ht=ft.onClose,Ot=Object(u.a)(),gt=Ot.isOpen,jt=Ot.onOpen,vt=Ot.onClose,yt=function(){var e=Object(s.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return St(),e.next=3,fetch(L.h+"/meta/"+g+(v?"?experimental=true":""),{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata"}});case 3:return t=e.sent,e.next=6,t.json();case 6:(n=e.sent).name?(wt(n),kt(n),Qe(!1),lt(!1)):(Ee({loaded:!0}),lt(!0));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),wt=function(e){S(e.name),R(e.image),C(e.description),le(e.totalValue||0),J(G.concat(e.values)),te(e.attributes.filter((function(e){return"key"===e.trait_type}))),C(e.description),re(e.addresses),fe("mainnet"==e.network?1:"rinkeby"==e.network?4:"mumbai"==e.network?80001:"matic"==e.network?137:97),Re(e.status),"claimed"===Pe&&De(e.claimedBy),Ee({loaded:!0});var t=e.addresses.filter((function(e){return e.address.includes("private:")})).length>0;ie(t),setTimeout((function(){!t&&Ct(e.values,e.addresses.filter((function(e){return"ETH"===e.coin}))[0].address,(function(e){J(e)}))}),5)},St=function(){var e=JSON.parse(localStorage.getItem(t+"_"+n+"_"+g+"_vault"));e&&(Ee({loaded:!0}),wt(e),Qe(!0))},xt=function(){var e=Object(s.a)(i.a.mark((function e(t,n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(L.h+"/eth/balance/"+t,{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,le(Number(ue)+Number(r.totalValue)),e.abrupt("return",n(r.values));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Et=function(){var e=Object(s.a)(i.a.mark((function e(t,n,a){var r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(L.h+"/btc/balance/"+n,{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata"}});case 2:return r=e.sent,e.next=5,r.json();case 5:return o=e.sent,e.abrupt("return",a(t.concat(o.values)));case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Ct=function(){var e=Object(s.a)(i.a.mark((function e(t,n,a){var r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(L.h+"/eth/nft/"+n,{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata"}});case 2:return r=e.sent,e.next=5,r.json();case 5:if(!((o=e.sent).length>0)){e.next=10;break}return e.abrupt("return",a(t.concat(o)));case 10:return e.abrupt("return",a(t));case 11:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),kt=function(e){localStorage.setItem(t+"_"+n+"_"+g+"_vault",JSON.stringify(e))},Tt=function(){var e=Object(s.a)(i.a.mark((function e(t,a,r){var o,c,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new Headers).append("chainId",n.toString()),o.append("service","evmetadata"),o.append("Content-Type","application/json"),c=JSON.stringify({signature:t}),e.next=7,fetch(L.h+"/verify/"+a,{method:"POST",headers:o,body:c,redirect:"follow"});case 7:return s=e.sent,e.next=10,s.json();case 10:return u=e.sent,e.abrupt("return",r(u));case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),_t=function(){var e=Object(s.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt.ownerOf(g);case 2:n=e.sent,Te(n===t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),At=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.getSigner(t).signMessage("Claim: "+g).then((function(e){Tt(e,g,(function(e){Be(e.decrypted.phrase),ze(e.decrypted.keys.filter((function(e){return"btc"===e.coin}))[0].privkey),Ve(e.decrypted.keys.filter((function(e){return"eth"===e.coin}))[0].privkey),Xe(e.decrypted.values),jt()}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),It=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:dt.transferFrom(t,L.c,g).then((function(e){var t=e.hash;Ie(!0),setTimeout((function(){he(t)}),100)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Nt=function(){var e=Object(s.a)(i.a.mark((function e(){var t,n,a,r,o,c,s,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=function(e){for(var i=0;i<r-c;i++){var l=Math.floor(t.length*Math.random()),p=t.charAt(l);s+=p}o==a-1&&c++,o==a&&(u+=n.charAt(c-1),o=0),tt(u+s),s=""},!at){e.next=3;break}return e.abrupt("return");case 3:rt(!0),t="abcdefghijklmnopqrstuvwxyz",5,r=(n="Decrypting").length,o=0,c=0,s="",u="",function e(t){setTimeout((function(){--t?e(t):rt(!1),l(t),o+=1}),5)}(r*(a=8)+1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Pt(e){return e.split("\n\n\n\n")[0].trim()}function Rt(e){ct&&(e=ct),Nt();var t=ae[0].address.replace("private:","");try{var n=Z.a.AES.decrypt(t,e);JSON.parse(n.toString(Z.a.enc.Utf8)),ie(!1),it(e),re(function(e){return ae.forEach((function(t){var n=t.address.replace("private:","");t.address=function(e,t){var n=Z.a.AES.decrypt(e,t);return JSON.parse(n.toString(Z.a.enc.Utf8))}(n,e)})),ae}(e)),xt(ae.filter((function(e){return"ETH"===e.coin}))[0].address,(function(e){Et(e,ae.filter((function(e){return"BTC"===e.coin}))[0].address,(function(e){Ct(e,ae.filter((function(e){return"ETH"===e.coin}))[0].address,(function(e){J(e.concat(G))}))}))}))}catch(a){}}return Object(a.useEffect)((function(){yt()}),[]),Object(a.useEffect)((function(){t&&n&&de&&n==de&&_t()})),Q(r.a.Fragment,null,Q(F.a,null,Q("meta",{name:"twitter:card",content:"summary_large_image"}),Q("meta",{name:"twitter:site",content:"Emblem.Finance"}),Q("meta",{name:"twitter:title",content:w}),Q("meta",{name:"twitter:description",content:Pt(E)}),Q("meta",{name:"twitter:image",content:T})),Q($,{isOpen:bt,onClose:ht,addrCoin:ge,addrAddr:ye}),Q(ee,{isOpen:gt,onClose:vt,mnemonic:We,privKeyBTC:Je,privKeyETH:Le,privValues:Ue}),Q(B.a,{loaded:xe.loaded},Ye?Q(M.a,null):"",ut?Q(d.a,{align:"center"},Q(f.a,{width:"md",src:"https://starwarsblog.starwars.com/wp-content/uploads/2017/06/25-star-wars-quotes-obi-wan-kenobi-identification-tall.jpg"}),Q(b.a,null,"THESE ARE NOT THE VAULTS YOU ARE LOOKING FOR"," ",Q(A.a,{color:"#638cd8",href:"../create"},"CREATE ONE HERE!"))):Q(U.a,{className:"Tilt",options:{max:0,scale:1}},Q(l.a,{width:"full",align:"center",justifyContent:"center"},Q(p.a,{maxW:"sm",borderWidth:"1px",borderColor:de!=n?"orange.500":"claimed"==Pe?"green.500":null,rounded:"lg",overflow:"hidden",alignItems:"center",minW:390},de!=n?Q(p.a,{mt:"1",fontWeight:"semibold",as:"h3",lineHeight:"tight",p:2,textAlign:"center",textTransform:"uppercase",alignItems:"center",color:"orange.500"},"BEWARE: Vault is on a different network than you are."):null,Q(p.a,{mt:"1",fontWeight:"semibold",as:"h3",lineHeight:"tight",p:2,textAlign:"center",textTransform:"uppercase",alignItems:"center"},w,ce?null:": ~$"+ue),Q(d.a,{align:"center"},Q(f.a,{src:Object(z.k)(T)?T:"https://circuitsofvalue.com/public/coval-logo.png",width:"250px"})),Q(d.a,{align:"center"},Q(p.a,{mt:"2",ml:"4",lineHeight:"tight"},Q(b.a,{mt:2,as:"h4",ml:"4",mr:"4",fontSize:"xs",fontStyle:"italic"},Pt(E)))),Q(p.a,{p:"6"},Q(p.a,{d:"flex",alignItems:"baseline"},Q(p.a,{color:"gray.500",letterSpacing:"wide",fontSize:"sm",ml:"2"},Q(b.a,{as:"h4",fontWeight:"semibold"},"Current Contents:"),ce?Q(r.a.Fragment,null,Q(b.a,{pb:2,color:et?"green.500":null},et||"Contents hidden. Enter password to unlock."),Q(m.a,{type:"password",id:"vault-password",onChange:function(e){return Rt(e.target.value)},"aria-describedby":"password-helper-text"})):G.length?G.map((function(e){return Q(b.a,{key:e.name,isTruncated:!0},e.address&&"nft"!==e.type?Q(_,{"aria-label":e.name,hasArrow:!0,label:"Add "+e.symbol+" to wallet",placement:"top"},Q(A.a,{onClick:function(){Object(Y.addTokenToWallet)({address:e.address,symbol:e.symbol,decimals:e.decimals,image:e.image?e.image:null})}},"+")):null," "," ",e.name," :"," ",e.balance?e.balance:"nft"==e.type?Q(A.a,{href:e.external_url,isExternal:!0},"View NFT"):null)})):null,X.length?X.map((function(e){return Q(b.a,null,"Data: ",e.attribute_key)})):X.length||G.length?null:Q(b.a,null,"Nothing in here! Fill 'er up!"))),ce?null:Q(p.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},Q(I.a,{justifyContent:"space-between",spacing:6},ae.map((function(e){return Q(N.a,{key:e.address,onClick:function(){je(e.coin),we(e.address),mt()}},"Put ","ETH"==e.coin?e.coin+"/ERC20":e.coin," In")})))),"claimed"!==Pe?Q(p.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},Q(N.a,Object(o.a)({width:"100%",as:"a"},{href:"https://"+(4==de?"rinkeby.":"")+"opensea.io/assets/"+L.p.emblemVault[de]+"/"+g,target:"_blank",rel:"noopener noreferrer"}),ke?"Sell/Gift/Send":"Make an Offer")):null,"claimed"!==Pe&&t&&de===n&&ke?Q(p.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},Q(N.a,{width:"100%",onClick:function(){It()},isDisabled:Ae},Ae?"Claiming ...":"Claim")):"claimed"===Pe&&He===t&&de===n?Q(p.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},Q(N.a,{width:"100%",onClick:At},"Get Keys")):null),Q(d.a,{direction:"column",align:"center"},"claimed"==Pe?Q(b.a,{color:"green.500"},"CLAIMED"):null),me?Q(P.a,{status:"info"},Q(P.b,null),"Claiming your vault ..."):null))),me?Q(K.a,{hash:me,onComplete:function(){Ae&&(he(null),Re("claimed"),Ie(!1),De(t),At())}}):null))}var ne=r.a.createElement;function ae(){return ne(te,null)}},zjfc:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vault",function(){return n("pZB+")}])}},[["zjfc",2,1,5,7,0,3,4,6,9,8,11,13,16,15]]]);