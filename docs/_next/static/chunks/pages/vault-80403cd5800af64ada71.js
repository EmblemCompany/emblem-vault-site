_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[22],{FpzS:function(e,t,r){"use strict";var n=r("pVnL"),a=r.n(n),o=r("8OQS"),i=r.n(o),s=r("qKvR"),l=r("q1tI"),c=r("we/t"),u=r("+Cyc"),d=r("lSNA"),p=r.n(d),b=r("CjxU"),f=r("mf32"),h=r("za5s");function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(r,!0).forEach((function(t){p()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g={_readOnly:{bg:"transparent",boxShadow:"none !important",userSelect:"all"}},v={bg:"transparent",px:void 0,height:void 0},j=function(e){switch(e.variant){case"flushed":return function(e){var t=e.theme,r=e.focusBorderColor,n=e.errorBorderColor,a=Object(h.h)(t.colors,r,r),o=Object(h.h)(t.colors,n,n);return O({},g,{borderBottom:"2px",borderColor:"inherit",rounded:0,px:void 0,bg:"transparent",_focus:{zIndex:1,borderColor:a},_invalid:{borderColor:o}})}(e);case"unstyled":return v;case"filled":return function(e){var t=e.theme,r=e.focusBorderColor,n=e.errorBorderColor,a=e.colorMode,o=Object(h.h)(t.colors,r,r),i=Object(h.h)(t.colors,n,n);return O({},g,{border:"2px",borderColor:"transparent",bg:{light:"gray.100",dark:"whiteAlpha.50"}[a],_hover:{bg:{light:"gray.200",dark:"whiteAlpha.100"}[a]},_disabled:{opacity:"0.4",cursor:"not-allowed"},_focus:{zIndex:1,bg:"transparent",borderColor:o},_invalid:{borderColor:i}})}(e);case"outline":return function(e){var t=e.theme,r=e.colorMode,n=e.focusBorderColor,a=e.errorBorderColor,o=Object(h.h)(t.colors,n,n),i=Object(h.h)(t.colors,a,a);return O({},g,{border:"1px",borderColor:{light:"inherit",dark:"whiteAlpha.50"}[r],bg:{light:"white",dark:"whiteAlpha.100"}[r],_hover:{borderColor:{light:"gray.300",dark:"whiteAlpha.200"}[r]},_disabled:{opacity:"0.4",cursor:"not-allowed"},_focus:{zIndex:1,borderColor:o,boxShadow:"0 0 0 1px "+o},_invalid:{borderColor:i,boxShadow:"0 0 0 1px "+i}})}(e);default:return{}}},y={display:"flex",alignItems:"center",position:"relative",transition:"all 0.2s",outline:"none",appearance:"none"},w={lg:{fontSize:"lg",px:4,height:12,rounded:"md"},md:{fontSize:"md",px:4,height:10,rounded:"md"},sm:{fontSize:"sm",px:3,height:8,rounded:"sm"}},C=function(e){var t=O({},e,{theme:Object(b.b)(),colorMode:Object(f.c)().colorMode});return O({width:e.isFullWidth?"100%":void 0},y,{},function(e){return w[e.size]}(t),{},j(t))},S=Object(l.forwardRef)((function(e,t){e.size,e.variant;var r=e.as,n=e["aria-label"],o=e["aria-describedby"],l=e.isReadOnly,d=(e.isFullWidth,e.isDisabled,e.isInvalid,e.isRequired,e.focusBorderColor,e.errorBorderColor,i()(e,["size","variant","as","aria-label","aria-describedby","isReadOnly","isFullWidth","isDisabled","isInvalid","isRequired","focusBorderColor","errorBorderColor"])),p=C(e),b=Object(c.b)(e);return Object(s.d)(u.a,a()({ref:t,as:r,readOnly:b.isReadOnly,"aria-readonly":l,disabled:b.isDisabled,"aria-label":n,"aria-invalid":b.isInvalid,required:b.isRequired,"aria-required":b.isRequired,"aria-disabled":b.isDisabled,"aria-describedby":o},p,d))}));S.displayName="Input",S.defaultProps={size:"md",as:"input",variant:"outline",isFullWidth:!0,focusBorderColor:"blue.500",errorBorderColor:"red.500"};t.a=S},"pZB+":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return z}));var n=r("q1tI"),a=r.n(n),o=r("wx14"),i=r("o0o1"),s=r.n(i),l=r("HaE+"),c=r("XZ7F"),u=r("Weur"),d=r("sK1y"),p=r("yI6m"),b=r("BMxC"),f=r("Yn+B"),h=r("bQFp"),m=r("FpzS"),O=r("IP4Q"),g=r("eJLp"),v=r("Z6YE"),j=r("nOHt"),y=r("Y1ui"),w=r.n(y),C=r("a6RD"),S=r.n(C),x=r("iBPG"),_=r("zIq6"),I=r("N39q"),k=r("21eR"),B=a.a.createElement,R=S()((function(){return Promise.all([r.e(9),r.e(11),r.e(27)]).then(r.bind(null,"X/Jl"))}),{loadableGenerated:{webpack:function(){return["X/Jl"]},modules:["./AddrModal"]}}),E=S()((function(){return Promise.all([r.e(9),r.e(11),r.e(30)]).then(r.bind(null,"0bCS"))}),{loadableGenerated:{webpack:function(){return["0bCS"]},modules:["./KeysModal"]}});function P(){var e=Object(v.b)(),t=e.account,r=e.chainId,i=e.library,y=Object(j.useRouter)(),C=y.query,S=(y.pathname,y.replace,Object(n.useState)(C.id)),P=S[0],q=(S[1],Object(n.useState)("")),z=q[0],A=q[1],T=Object(n.useState)(""),F=T[0],N=T[1],D=Object(n.useState)(""),W=D[0],H=D[1],M=Object(n.useState)([]),K=M[0],J=M[1],G=Object(n.useState)([]),Y=G[0],X=G[1],Q=Object(n.useState)(!1),V=Q[0],Z=Q[1],L=Object(n.useState)(null),U=L[0],$=L[1],ee=Object(n.useState)(null),te=ee[0],re=ee[1],ne=Object(n.useState)(""),ae=ne[0],oe=ne[1],ie=Object(n.useState)(""),se=ie[0],le=ie[1],ce=Object(n.useState)({loaded:!1}),ue=ce[0],de=ce[1],pe=Object(n.useState)(!1),be=pe[0],fe=pe[1],he=Object(n.useState)(!1),me=he[0],Oe=he[1],ge=Object(n.useState)(!1),ve=ge[0],je=ge[1],ye=Object(n.useState)("claimed"),we=ye[0],Ce=ye[1],Se=Object(n.useState)(null),xe=Se[0],_e=Se[1],Ie=Object(n.useState)(""),ke=Ie[0],Be=Ie[1],Re=Object(n.useState)(""),Ee=Re[0],Pe=Re[1],qe=Object(n.useState)(""),ze=qe[0],Ae=qe[1],Te=Object(n.useState)(!1),Fe=Te[0],Ne=Te[1],De=Object(k.b)(I.p.emblemVault[r],I.p.emblemAbi,!0),We=Object(c.a)(),He=We.isOpen,Me=We.onOpen,Ke=We.onClose,Je=Object(c.a)(),Ge=Je.isOpen,Ye=Je.onOpen,Xe=Je.onClose,Qe=function(){var e=Object(l.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ze(),e.next=3,fetch(I.h+"/meta/"+P,{method:"GET",headers:{"Content-Type":"application/json",service:"evmetadata"}});case 3:return t=e.sent,e.next=6,t.json();case 6:r=e.sent,console.log(r),Ve(r),Le(r),Ne(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ve=function(e){A(e.name),H(e.image),N(e.description),J(e.values),N(e.description),X(e.addresses),$("mainnet"==e.network?1:4),Ce(e.status),"claimed"===we&&_e(e.claimedBy),de({loaded:!0});var t=e.addresses.filter((function(e){return e.address.includes("private:")})).length>0;console.log("pvt",t),Z(t)},Ze=function(){var e=JSON.parse(localStorage.getItem(t+"_"+r+"_"+P+"_vault"));e&&(de({loaded:!0}),Ve(e),Ne(!0))},Le=function(e){localStorage.setItem(t+"_"+r+"_"+P+"_vault",JSON.stringify(e))},Ue=function(){var e=Object(l.a)(s.a.mark((function e(t,n,a){var o,i,l,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new Headers).append("chainId",r.toString()),o.append("service","evmetadata"),o.append("Content-Type","application/json"),i=JSON.stringify({signature:t}),e.next=7,fetch(I.h+"/verify/"+n,{method:"POST",headers:o,body:i,redirect:"follow"});case 7:return l=e.sent,e.next=10,l.json();case 10:return c=e.sent,e.abrupt("return",a(c));case 12:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),$e=function(){var e=Object(l.a)(s.a.mark((function e(){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.ownerOf(P);case 2:r=e.sent,Oe(r===t),me&&fe(!0),console.log("status",we,"claimedBy",xe);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),et=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:De.setApprovalForAll(I.p.vaultHandler[r],!0).then((function(e){var t=e.hash;re(t)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tt=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.getSigner(t).signMessage("Claim: "+P).then((function(e){Ue(e,P,(function(e){Be(e.decrypted.phrase),Pe("BTC KEY"),Ae("ETH KEY"),Ye(),console.log(e.decrypted)}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),rt=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:De.transferFrom(t,I.c,P).then((function(e){var t=e.hash;je(!0),setTimeout((function(){re(t),tt(),Ye()}),100)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){Qe()}),[]),Object(n.useEffect)((function(){console.log("Account chainid = "+r+" and vaultchainid = "+U),t&&r&&U&&r==U&&$e()})),B(a.a.Fragment,null,B(R,{isOpen:He,onClose:Ke,addrCoin:ae,addrAddr:se}),B(E,{isOpen:Ge,onClose:Xe,mnemonic:ke,privKeyBTC:Ee,privKeyETH:ze}),B(w.a,{loaded:ue.loaded},Fe?B(u.a,{justify:"center"},B(d.a,null,"Refreshing ",B(p.a,null))):"",B(u.a,{width:"full",align:"center",justifyContent:"center"},B(b.a,{maxW:"sm",borderWidth:"1px",borderColor:U!=r?"orange.500":null,rounded:"lg",overflow:"hidden",alignItems:"center"},U!=r?B(b.a,{mt:"1",fontWeight:"semibold",as:"h3",lineHeight:"tight",p:2,textAlign:"center",textTransform:"uppercase",alignItems:"center",color:"orange.500"},"Your vault is on a different network than you are."):null,B(b.a,{mt:"1",fontWeight:"semibold",as:"h3",lineHeight:"tight",p:2,textAlign:"center",textTransform:"uppercase",alignItems:"center"},z),B(f.a,{align:"center"},B(h.a,{src:Object(x.j)(W)?W:"https://circuitsofvalue.com/public/coval-logo.png",width:"250px"})),B(f.a,{align:"center"},B(b.a,{mt:"1",ml:"4",lineHeight:"tight"},B(d.a,{as:"h4",ml:"4",mr:"4"},F.split("\n\n\n\n")[0].trim()))),B(b.a,{p:"6"},B(b.a,{d:"flex",alignItems:"baseline"},B(b.a,{color:"gray.500",letterSpacing:"wide",fontSize:"sm",ml:"2"},B(d.a,{as:"h4",fontWeight:"semibold"},"Current Contents:"),V?B(a.a.Fragment,null,B(d.a,null,"Contents hidden. Enter password to unlock."),B(m.a,{type:"password",id:"vault-password",onChange:function(e){return t=e.target.value,void console.log(t);var t},"aria-describedby":"password-helper-text"})):K.length?K.map((function(e){return B(d.a,{key:e.name,isTruncated:!0},e.name,": ",e.balance)})):B(d.a,null,"Nothing in here! Fill 'er up!"))),V?null:B(b.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},B(f.a,{direction:"row",align:"center",spacing:"1rem",flexWrap:"wrap",shouldWrapChildren:!0},B(O.a,{spacing:4},Y.map((function(e){return B(g.a,{key:e.address,onClick:function(){oe(e.coin),le(e.address),Me()}},"Put ","ETH"==e.coin?e.coin+"/ERC20":e.coin," In")}))))),B(b.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},"claimed"===we&&xe===t?B(g.a,{width:"100%",onClick:tt},"Get Keys"):B(g.a,Object(o.a)({width:"100%",as:"a"},{href:"https://"+(4==U?"rinkeby.":"")+"opensea.io/assets/"+I.p.emblemVault[U]+"/"+P,target:"_blank",rel:"noopener noreferrer"}),me?"Sell/Gift/Send":"Make an Offer")),B(b.a,{d:"flex",alignItems:"baseline",justifyContent:"space-between",mt:"4"},me?B(g.a,{width:"100%",onClick:function(){be?rt():et()}},be?"Claim":"Approve"):"")))),te?B(_.a,{hash:te,onComplete:function(){ve&&re(null)}}):null))}var q=a.a.createElement;function z(){return q(P,null)}},"we/t":function(e,t,r){"use strict";r.d(t,"b",(function(){return u}));var n=r("pVnL"),a=r.n(n),o=r("8OQS"),i=r.n(o),s=r("qKvR"),l=r("q1tI"),c=r("BMxC"),u=function(e){var t=p();return t?Object.keys(t).reduce((function(r,n){return r[n]=e[n],t&&null==e[n]&&(r[n]=t[n]),r}),{}):e},d=Object(l.createContext)(),p=function(){return Object(l.useContext)(d)},b=Object(l.forwardRef)((function(e,t){var r=e.isInvalid,n=e.isRequired,o=e.isDisabled,l=e.isReadOnly,u=i()(e,["isInvalid","isRequired","isDisabled","isReadOnly"]),p={isRequired:n,isDisabled:o,isInvalid:r,isReadOnly:l};return Object(s.d)(d.Provider,{value:p},Object(s.d)(c.a,a()({role:"group",ref:t},u)))}));b.displayName="FormControl",t.a=b},zjfc:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vault",function(){return r("pZB+")}])}},[["zjfc",2,1,6,8,0,3,4,5,7,10,13]]]);