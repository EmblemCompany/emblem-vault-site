(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5271],{48392:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vaults",function(){return t(40228)}])},33862:function(e,r,t){"use strict";t.d(r,{Z:function(){return y}});var n=t(85893),s=t(67294),o=t(62850),a=t(6089);class l extends s.Component{render(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"sketchfab-embed-wrapper",children:(0,n.jsx)("iframe",{width:"100%",src:this.props.url,frameBorder:"0",allow:"autoplay; fullscreen; vr",allowFullScreen:!0})})})}}class i extends s.Component{render(){let e=this.props.url.replace("paused=true","paused=false");return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("iframe",{width:"95%",frameBorder:"0",src:e,allowFullScreen:!0})})}}class c extends s.Component{render(){let e=this.props.url.replace("paused=true","paused=false");return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("iframe",{height:"753px",src:e,seamless:!0})})}}class d extends s.Component{render(){let e=this.props.url.replace("paused=true","paused=false");return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("iframe",{width:"95%",height:"100%",scrolling:"no",frameBorder:"no",allow:"autoplay",src:e})})}}class u extends s.Component{render(){let e=this.props.url.replace("paused=true","paused=false");return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("iframe",{width:"95%",height:"256px",scrolling:"no",frameBorder:"no",allow:"autoplay",src:e})})}}class m extends s.Component{render(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("iframe",{src:this.props.url,frameBorder:"0",scrolling:"no",width:"580",height:"326",allowFullScreen:!0})})}}class p extends s.Component{render(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("iframe",{src:this.props.url,width:"800",height:"600",allowFullScreen:!0})})}}class h extends s.Component{render(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("iframe",{width:"230",height:"285",src:this.props.url,frameBorder:"0",scrolling:"no",allowTransparency:!0})})}}class g extends s.Component{render(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("iframe",{src:this.props.url,width:"100%",height:"400",allow:"encrypted-media"})})}}class x extends s.Component{render(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("iframe",{frameBorder:"0",scrolling:"no",src:this.props.url,width:"100%",height:"400",allow:"encrypted-media"})})}}class f extends s.Component{render(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("iframe",{className:"ytembed",src:this.props.url.split(" ")[0].trim().replace('"',"").replace("/watch?v=","/embed/"),width:"100%",height:"315",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})}}class w extends s.Component{render(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("iframe",{src:this.props.url,width:"100%",frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0})})}}class j extends s.Component{render(){let e=this.props.url||"",r=e.replace("ipfs://","").split("?")[0].split("&")[0];return e.includes("ipfs://")&&(e="https://gateway.ipfs.io/ipfs/"+r,v(r)),e.includes("image-scale")&&(e+="&size=400"),(0,n.jsx)(n.Fragment,{children:e.includes("sketchfab.com/")?(0,n.jsx)(l,{url:e}):e.includes("shadertoy.com/")?(0,n.jsx)(i,{url:e}):e.includes("bandcamp.com/")?(0,n.jsx)(c,{url:e}):e.includes("soundcloud.com/")?(0,n.jsx)(d,{url:e}):e.includes("clyp.it/")?(0,n.jsx)(u,{url:e}):e.includes("sketchup.com/")?(0,n.jsx)(m,{url:e}):e.includes("clara.io/")?(0,n.jsx)(p,{url:e}):e.includes("myminifactory.com/")?(0,n.jsx)(h,{url:e}):e.includes("audius.co/")?(0,n.jsx)(g,{url:e}):e.includes("youtube.com")?(0,n.jsx)(f,{url:e}):e.includes("vimeo.com")?(0,n.jsx)(w,{url:e}):e.includes("ipfs.io")?(0,n.jsx)(a.E,{p:"20px",h:"100%",className:this.props.className+" "+r||"d-block w-100",src:e,width:"250px",maxWidth:"250px"}):e.includes("image-scaler.vercel")?(0,n.jsx)(a.E,{p:"20px",h:"100%",className:this.props.className||"d-block w-100",src:e,width:"250px",height:"300px"}):e.includes("/dynamic/")||e.includes("arweave")||e.includes("https://s3.amazonaws.com/")||e.includes("googleusercontent.com")||e.includes("ipfs.io")||e.includes("framed/")||e.includes(".png")||e.includes(".jpg")||e.includes(".jpeg")||e.includes(".gif")||e.includes(".svg")||e.includes("data:image")?(0,n.jsx)(a.E,{p:"20px",h:"100%",className:this.props.className||"d-block w-100",src:(0,o.yo)(e)?e:"https://raw.githubusercontent.com/EmblemCompany/Coval-Site/master/public/coval-logo.png",width:"250px",maxWidth:"250px"}):(0,n.jsx)(x,{url:e})})}}let v=async function(e){let r=await fetch("https://gateway.ipfs.io/ipfs/"+e,{method:"GET"}),t=await r.text();if(t.includes("data:image")){let r=document.querySelector("img."+e);r.src=t,console.log(t)}};var y=j},71114:function(e,r,t){"use strict";var n=t(85893);t(67294);var s=t(93717),o=t(71293),a=t(81136);r.Z=()=>(0,n.jsxs)(s.k,{pb:2,justify:"center",children:[(0,n.jsx)(o.x,{pr:2,children:"Refreshing "}),(0,n.jsx)(a.$,{})]})},10063:function(e,r,t){"use strict";t.d(r,{Lj:function(){return s},Nj:function(){return a},ZO:function(){return o},_o:function(){return i},pk:function(){return l}});let n=async()=>"indexedDB"in window?new Promise((e,r)=>{let t=indexedDB.open("MyDatabase",1);t.onerror=e=>{console.error("Database error:",e.target.error),r(e.target.error)},t.onsuccess=r=>{e(r.target.result)},t.onupgradeneeded=e=>{let r=e.target.result;r.objectStoreNames.contains("vaults")||r.createObjectStore("vaults",{keyPath:"tokenId"})}}):(console.error("IndexedDB is not supported by this browser."),null),s=async()=>new Promise((e,r)=>{let t=indexedDB.deleteDatabase("MyDatabase");t.onerror=e=>{console.error("Database error:",e.target.error),r(e.target.error)},t.onsuccess=()=>{e(!0)}}),o=async(e,r)=>{console.log("getVaults - start");let t=await n();if(!t)throw console.error("Failed to open database"),Error("Failed to open database");let s=t.transaction(["vaults"],"readonly"),o=s.objectStore("vaults"),a=o.getAll();return new Promise((t,n)=>{a.onsuccess=()=>{console.log("All vaults successfully retrieved from store");let n=a.result.filter(r=>{var t,n;return e===(null===(t=r.ownership)||void 0===t?void 0:t.status)||e===(null===(n=r.ownershipInfo)||void 0===n?void 0:n.status)}).filter(t=>{var n,s,o;return"claimed"==e?r===(null===(n=t.ownership)||void 0===n?void 0:n.claimedBy)||r===t.ownershipInfo.claimedBy:"unminted"==e?r===(null===(s=t.ownership)||void 0===s?void 0:s.createdBy)||r===t.ownershipInfo.createdBy:r===(null===(o=t.ownership)||void 0===o?void 0:o.owner)||r===t.ownershipInfo.owner});t(n)},a.onerror=e=>{console.error("Error retrieving vaults from store:",e.target.error),n(e.target.error)}})},a=async e=>{console.log("getVaults - start");let r=await n();if(!r)throw console.error("Failed to open database"),Error("Failed to open database");let t=r.transaction(["vaults"],"readonly"),s=t.objectStore("vaults"),o=s.get(e);return new Promise((e,r)=>{o.onsuccess=()=>{console.log("All vaults successfully retrieved from store"),e(o.result)},o.onerror=e=>{console.error("Error retrieving vaults from store:",e.target.error),r(e.target.error)}})},l=async e=>{console.log("useDB - start");let r=await n();if(!r)throw console.error("Failed to open database"),Error("Failed to open database");let t=r.transaction(["vaults"],"readwrite"),s=t.objectStore("vaults");return new Promise((n,o)=>{e.forEach((e,r)=>{if(console.log("Processing item ".concat(r),e),!e.tokenId){console.error("Item missing tokenId:",e);return}let t=s.get(e.tokenId);t.onsuccess=()=>{console.log("Got vault ".concat(e.tokenId," from store")),t.result||(console.error("Item missing tokenId:",e),n(c(s,e,r,o))),t&&t.result&&!t.result.addresses&&n(c(s,e,r,o))},t.onerror=t=>{console.error("Item missing tokenId:",e),n(c(s,e,r,o))}}),t.oncomplete=()=>{console.log("Transaction complete"),r.close(),n(!0)},t.onerror=e=>{console.error("Transaction error:",e.target.error),r.close(),o(e.target.error)}})},i=async e=>{console.log("useDB - start");let r=await n();if(!r)throw console.error("Failed to open database"),Error("Failed to open database");let t=r.transaction(["vaults"],"readwrite"),s=t.objectStore("vaults");return new Promise((n,o)=>{let a=s.put(e);a.onsuccess=()=>{console.log("Item ".concat(e.tokenId," successfully put into store"))},a.onerror=e=>{console.error("Error putting item ".concat(index," into store:"),e.target.error),o(e.target.error)},t.oncomplete=()=>{console.log("Transaction complete"),r.close(),n(!0)},t.onerror=e=>{console.error("Transaction error:",e.target.error),r.close(),o(e.target.error)}})};function c(e,r,t,n){let s=e.put(r);return s.onsuccess=()=>{console.log("Item ".concat(t," successfully put into store"))},s.onerror=e=>{console.error("Error putting item ".concat(t," into store:"),e.target.error),n(e.target.error)},s}},40228:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return S}});var n=t(85893),s=t(45161),o=t(51343),a=t(93108),l=t(93717),i=t(57747),c=t(32883),d=t(71293),u=t(70758),m=t.n(u),p=t(71114),h=t(11163),g=t(77044),x=t(67294),f=t(58533),w=t(33862),j=t(62850),v=t(10063);function y(){let{query:e}=(0,h.useRouter)(),[r,t]=(0,x.useState)(Number(e.start)||0),[u,y]=(0,x.useState)("live"),{account:b,chainId:S}=(0,g.Ge)(),[k,C]=(0,x.useState)([]),[F,E]=(0,x.useState)([]),[N,I]=(0,x.useState)([]),[T,D]=(0,x.useState)([]),[B,_]=(0,x.useState)({loaded:!1}),[A,z]=(0,x.useState)(!1),[W,P]=(0,x.useState)(e.address),[M,O]=(0,x.useState)(e.type||"unclaimed"),[Z,L]=(0,x.useState)(e.experimental),{colorMode:V}=(0,s.If)(),[R,K]=(0,x.useState)(!1),[U,G]=(0,x.useState)(null!=e.version),[H,J]=(0,x.useState)(!!U),[X,Y]=(0,x.useState)(0),[$,q]=(0,x.useState)([]),[Q,ee]=(0,x.useState)([]),[er,et]=(0,x.useState)([]),[en,es]=(0,x.useState)([]),[eo,ea]=(0,x.useState)("true"==e.jump),[el,ei]=(0,x.useState)(!0),ec=e=>e.ownership&&e.ownership.balances&&e.ownership.balances.length>0&&"erc721"==e.ownership.category||e.ownership&&"erc721a"==e.ownership.category&&e.ownership.balances&&e.ownership.balances.length>0?e.ownership.balances[0].image:e.ownership&&"erc721a"==e.ownership.category?e.targetAsset.image:e.image,ed=e=>en.filter(r=>r.allowedJump&&r.allowedJump(e.ownership,[])),eu=e=>e.ownership&&"erc721Legacy"==e.ownership.category?"Legacy Vault":e.targetContract&&e.targetContract.name?e.targetContract.name:"Unknown",em=async()=>{try{let e=await fetch("https://metadata.emblemvault.io"+"/".concat(U||"curated"==M?"v1-":"","myvaults/")+(W||b)+"?start="+X+"&size=20",{method:"GET",headers:{"Content-Type":"application/json",_vercel_no_cache:"1",service:"evmetadata",chainId:S.toString(),vaultType:M.toString()}}),r=await e.json();"curated"!=M.toString()?(C(k.concat(r)),await (0,v.pk)(r),_({loaded:!0}),z(!1),console.log("Records received",r.length)):"curated"==M.toString()?(E(eh(r.live)),I(r.unMinted),D(r.claimed),C(eh(r.live)),_({loaded:!0}),z(!1),J(!1),q(Array.from(new Set(r.live.map(e=>e.targetContract.name)))),ee(Array.from(new Set(r.unMinted.map(e=>e.targetContract.name)))),et(Array.from(new Set(r.claimed.map(e=>e.targetContract.name))))):r.length<20&&J(!1)}catch(e){}},ep=async()=>{console.log(X,20,X+20),Y(X+20),K(!0)};function eh(e){let r=new Map;for(let t of e){let e=t.targetTokenId;r.has(e)?r.get(e).push(t):r.set(e,[t])}let t=Array.from(r.entries()).map(e=>{let[r,t]=e;return{targetTokenId:r,items:t}});return t}let[eg,ex]=(0,x.useState)("");(0,x.useEffect)(()=>{b&&eg!=b&&(ex(b),_({loaded:!1}),ef(),localStorage.getItem("offline")&&"false"!==localStorage.getItem("offline")||em())},[b,eg]),(0,x.useEffect)(()=>{el&&(ei(!1),ef())},[el]);let ef=async()=>{C(await (0,v.ZO)("unclaimed"==M?"minted":M,W||b)),_({loaded:!0})},ew=e=>{W?location.href=location.origin+location.pathname+"?address="+W+"&type="+e+(eo?"&jump=true":""):location.href=location.origin+location.pathname+"?type="+e+(eo?"&jump=true":"")};return(0,x.useEffect)(()=>{R&&(K(!1),em(),(0,j.f_)().then(e=>{es(e)}))},[R]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o.K,{pl:"10",spacing:0,direction:"row",children:[(0,n.jsx)(a.z,{isDisabled:"unclaimed"==M,m:2,variant:"ghost",onClick:()=>{ew("unclaimed")},children:"Locked"}),(0,n.jsx)(a.z,{isDisabled:"claimed"==M,m:2,variant:"ghost",onClick:()=>{ew("claimed")},children:"Unlocked"}),(0,n.jsx)(a.z,{isDisabled:"unminted"==M,m:2,variant:"ghost",onClick:()=>{ew("unminted")},children:"Not Minted"})]}),"curated"==M?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o.K,{pl:"8.7rem",spacing:0,direction:"row",children:[F.length?(0,n.jsxs)(a.z,{isDisabled:"live"==u,m:2,variant:"ghost",onClick:()=>{C(F),y("live")},children:["Unclaimed (curated) ",F.length]}):null,T.length?(0,n.jsxs)(a.z,{isDisabled:"claimed"==u,m:2,variant:"ghost",onClick:()=>{C(T),y("claimed")},children:["Claimed (curated) ",T.length]}):null,N.length?(0,n.jsxs)(a.z,{isDisabled:"unminted"==u,m:2,variant:"ghost",onClick:()=>{C(N),y("unminted")},children:["Not Minted (curated) ",N.length]}):null]}),(0,n.jsxs)(o.K,{pl:"12.7rem",spacing:0,direction:"row",children:[$.length&&"live"==u?$.map((e,r)=>(0,n.jsx)(a.z,{isDisabled:!0,m:2,variant:"ghost",children:e},r)):null,er.length&&"claimed"==u?er.map((e,r)=>(0,n.jsx)(a.z,{isDisabled:!0,m:2,variant:"ghost",children:e},r)):null,Q.length&&"unminted"==u?Q.map((e,r)=>(0,n.jsx)(a.z,{isDisabled:!0,m:2,variant:"ghost",children:e},r)):null]})]}):null,(0,n.jsxs)(m(),{loaded:B.loaded,children:[A?(0,n.jsx)(p.Z,{}):"",(0,n.jsx)(f.Z,{className:"infinite-scroll",scrollableTarget:"shannon-container",dataLength:k.length,next:"curated"==M?()=>{}:ep,hasMore:H,loader:(0,n.jsx)(p.Z,{}),endMessage:(0,n.jsx)(n.Fragment,{}),children:(0,n.jsx)(l.k,{w:"100%",justify:"center",flexWrap:"wrap",mt:10,children:k.length?k.map((e,r)=>{let t=location.pathname.split("/");t.pop();let s=!!e.items&&!!e.items[0].targetContract&&"ERC721a"==e.items[0].targetContract.collectionType,a="live"==u&&"curated"==M,l=location.origin+t.join("/")+"/nft"+("curated"==M||e.targetContract?"2":"")+"?id="+(a?s?e.items[0].tokenId:e.targetTokenId:e.tokenId),m={flex:"1",minW:"200px",maxW:"200px",minH:"250px",maxH:"250px",borderWidth:"1px",mx:"6",mb:"6",rounded:"lg",overflow:"hidden",borderColor:"matic"==e.network?"#7145db !important":"rinkeby"==e.network?"#ed6d20 !important":"#627eea !important",cursor:"pointer"};return(0,n.jsxs)(i.xu,{children:[(0,n.jsx)(c.r,{href:l,className:"vaultLink",children:(0,n.jsxs)(i.xu,{className:"NFT newest",...m,onClick:function(){z(!0),location.href=l},children:[(0,n.jsxs)(d.x,{fontWeight:"semibold",textAlign:"center",mt:2,pl:2,isTruncated:!0,children:["live"==u&&"curated"==M?e.items[0].name:e.name,!e.private&&e.totalValue>0?": ~$"+e.totalValue:null]}),(0,n.jsxs)(o.K,{align:"center",children:[(0,n.jsx)(w.Z,{className:"d-block NFT-image-v3",url:ec(e)}),"live"==u&&"curated"==M&&e.items.length>1?(0,n.jsx)(d.x,{children:" you own "+e.items.length}):null]}),(0,n.jsx)(o.K,{align:"center",mt:3,children:"live"==u&&"curated"==M&&e.items.length>1?" you own "+e.items.length:null})]},r)}),(0,n.jsxs)(i.xu,{className:"NFT newest",borderColor:"",flex:"1",minW:"200px",maxW:"200px",borderWidth:"1px",mx:"6",mb:"6",rounded:"lg",overflow:"hidden",children:[(0,n.jsxs)(d.x,{fontSize:"small",fontWeight:"semibold",textAlign:"left",pl:2,isTruncated:!0,children:[" Network: ","mainnet"==e.network?"Ethereum":"matic"==e.network?"Polygon":e.network," "]}),(0,n.jsxs)(d.x,{fontSize:"small",fontWeight:"semibold",textAlign:"left",pl:2,isTruncated:!0,children:[" Contract: ",eu(e)," "]}),eo&&ed(e).length>0?(0,n.jsx)(n.Fragment,{children:ed(e).map((e,r)=>(0,n.jsxs)(c.r,{fontSize:"x-small",textAlign:"left",pl:2,children:[" Circuit jump to: ",e.name," Collection"]}))}):null]},r)]})}):(0,n.jsxs)(d.x,{children:["YOU DON'T SEEM TO HAVE ANY VAULTS."," ",(0,n.jsx)(c.r,{color:"#638cd8",href:"../create",children:"CREATE ONE HERE!"})]})})})]})]})}var b=t(51704);function S(){return(0,n.jsx)(x.Suspense,{fallback:(0,n.jsx)("h1",{children:"Loading vaults..."}),children:(0,n.jsx)(b.Z,{fallback:(0,n.jsx)("h2",{children:"Oops! Something went wrong."}),children:(0,n.jsx)(y,{})})})}}},function(e){e.O(0,[758,932,9774,2888,179],function(){return e(e.s=48392)}),_N_E=e.O()}]);